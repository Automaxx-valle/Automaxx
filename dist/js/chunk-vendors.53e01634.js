(self["webpackChunkscall"]=self["webpackChunkscall"]||[]).push([[504],{4601:function(t,e,n){var r=n(8420),i=n(3838),s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not a function")}},7473:function(t,e,n){var r=n(8420),i=String,s=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw s("Can't set "+i(t)+" as a prototype")}},1009:function(t,e,n){var r=n(1171).has;t.exports=function(t){return r(t),t}},298:function(t,e,n){var r=n(1602),i=n(3105),s=n(3610).f,o=r("unscopables"),a=Array.prototype;void 0==a[o]&&s(a,o,{configurable:!0,value:i(null)}),t.exports=function(t){a[o][t]=!0}},5190:function(t,e,n){var r=n(7658),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},3938:function(t,e,n){var r=n(5335),i=String,s=TypeError;t.exports=function(t){if(r(t))return t;throw s(i(t)+" is not an object")}},6004:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4745:function(t,e,n){var r=n(1385),i=n(8569),s=TypeError;t.exports=r(ArrayBuffer.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!=i(t))throw s("ArrayBuffer expected");return t.byteLength}},7469:function(t,e,n){var r=n(281),i=n(4745),s=r(ArrayBuffer.prototype.slice);t.exports=function(t){if(0!==i(t))return!1;try{return s(t,0,0),!1}catch(e){return!0}}},3877:function(t,e,n){var r=n(200),i=n(281),s=n(1385),o=n(6283),a=n(7469),c=n(4745),l=n(3291),u=r.TypeError,h=r.structuredClone,d=r.ArrayBuffer,f=r.DataView,p=Math.min,g=d.prototype,m=f.prototype,v=i(g.slice),y=s(g,"resizable","get"),b=s(g,"maxByteLength","get"),w=i(m.getInt8),_=i(m.setInt8);t.exports=l&&function(t,e,n){var r=c(t),i=void 0===e?r:p(o(e),r),s=!y||!y(t);if(a(t))throw u("ArrayBuffer is detached");var l=h(t,{transfer:[t]});if(r==i&&(n||s))return l;if(!n||s)return v(l,0,i);for(var g=new d(i,b&&{maxByteLength:b(l)}),m=new f(l),x=new f(g),S=0;S<i;S++)_(x,S,w(m,S));return g}},5343:function(t,e,n){"use strict";var r,i,s,o=n(6004),a=n(5077),c=n(200),l=n(8420),u=n(5335),h=n(6490),d=n(3062),f=n(3838),p=n(7712),g=n(7485),m=n(6477),v=n(7658),y=n(7970),b=n(9686),w=n(1602),_=n(665),x=n(9206),S=x.enforce,I=x.get,A=c.Int8Array,E=A&&A.prototype,T=c.Uint8ClampedArray,k=T&&T.prototype,N=A&&y(A),L=E&&y(E),C=Object.prototype,P=c.TypeError,O=w("toStringTag"),R=_("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",M=o&&!!b&&"Opera"!==d(c.opera),F=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},V=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(j,e)||h(B,e)},U=function(t){var e=y(t);if(u(e)){var n=I(e);return n&&h(n,D)?n[D]:U(e)}},q=function(t){if(!u(t))return!1;var e=d(t);return h(j,e)||h(B,e)},z=function(t){if(q(t))return t;throw P("Target is not a typed array")},H=function(t){if(l(t)&&(!b||v(N,t)))return t;throw P(f(t)+" is not a typed array constructor")},W=function(t,e,n,r){if(a){if(n)for(var i in j){var s=c[i];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(l){}}}L[t]&&!n||g(L,t,n?e:M&&E[t]||e,r)}},$=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in j)if(i=c[r],i&&h(i,t))try{delete i[t]}catch(s){}if(N[t]&&!n)return;try{return g(N,t,n?e:M&&N[t]||e)}catch(s){}}for(r in j)i=c[r],!i||i[t]&&!n||g(i,t,e)}};for(r in j)i=c[r],s=i&&i.prototype,s?S(s)[D]=i:M=!1;for(r in B)i=c[r],s=i&&i.prototype,s&&(S(s)[D]=i);if((!M||!l(N)||N===Function.prototype)&&(N=function(){throw P("Incorrect invocation")},M))for(r in j)c[r]&&b(c[r],N);if((!M||!L||L===C)&&(L=N.prototype,M))for(r in j)c[r]&&b(c[r].prototype,L);if(M&&y(k)!==L&&b(k,L),a&&!h(L,O))for(r in F=!0,m(L,O,{configurable:!0,get:function(){return u(this)?this[R]:void 0}}),j)c[r]&&p(c[r],R,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:F&&R,aTypedArray:z,aTypedArrayConstructor:H,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:U,isView:V,isTypedArray:q,TypedArray:N,TypedArrayPrototype:L}},447:function(t,e,n){var r=n(3493);t.exports=function(t,e){var n=0,i=r(e),s=new t(i);while(i>n)s[n]=e[n++];return s}},8186:function(t,e,n){var r=n(5476),i=n(6539),s=n(3493),o=function(t){return function(e,n,o){var a,c=r(e),l=s(c),u=i(o,l);if(t&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},6648:function(t,e,n){"use strict";var r=n(5077),i=n(8679),s=TypeError,o=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4033:function(t,e,n){var r=n(3493);t.exports=function(t,e){for(var n=r(t),i=new e(n),s=0;s<n;s++)i[s]=t[n-s-1];return i}},1867:function(t,e,n){var r=n(3493),i=n(9328),s=RangeError;t.exports=function(t,e,n,o){var a=r(t),c=i(n),l=c<0?a+c:c;if(l>=a||l<0)throw s("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?o:t[h];return u}},1332:function(t,e,n){var r=n(3938),i=n(9868);t.exports=function(t,e,n,s){try{return s?e(r(n)[0],n[1]):e(n)}catch(o){i(t,"throw",o)}}},8569:function(t,e,n){var r=n(281),i=r({}.toString),s=r("".slice);t.exports=function(t){return s(i(t),8,-1)}},3062:function(t,e,n){var r=n(3129),i=n(8420),s=n(8569),o=n(1602),a=o("toStringTag"),c=Object,l="Arguments"==s(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?s:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=c(t),a))?n:l?s(e):"Object"==(r=s(e))&&i(e.callee)?"Arguments":r}},4361:function(t,e,n){var r=n(6490),i=n(5816),s=n(7632),o=n(3610);t.exports=function(t,e,n){for(var a=i(e),c=o.f,l=s.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||c(t,h,l(e,h))}}},7168:function(t,e,n){var r=n(2074);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8296:function(t){t.exports=function(t,e){return{value:t,done:e}}},7712:function(t,e,n){var r=n(5077),i=n(3610),s=n(6843);t.exports=r?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},6843:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6477:function(t,e,n){var r=n(8218),i=n(3610);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},7485:function(t,e,n){var r=n(8420),i=n(3610),s=n(8218),o=n(9430);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(r(n)&&s(n,l,a),a.global)c?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(u){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},2760:function(t,e,n){var r=n(7485);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},9430:function(t,e,n){var r=n(200),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},5077:function(t,e,n){var r=n(2074);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},6568:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},3262:function(t,e,n){var r=n(200),i=n(5335),s=r.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},7242:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},6567:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8523:function(t,e,n){var r=n(419),i=n(5223);t.exports=!r&&!i&&"object"==typeof window&&"object"==typeof document},419:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},5223:function(t,e,n){var r=n(8569);t.exports="undefined"!=typeof process&&"process"==r(process)},7061:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},6845:function(t,e,n){var r,i,s=n(200),o=n(7061),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},2701:function(t,e,n){var r=n(200);t.exports=function(t){return r[t].prototype}},290:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6452:function(t,e,n){var r=n(281),i=Error,s=r("".replace),o=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=s(t,a,"");return t}},1605:function(t,e,n){var r=n(200),i=n(7632).f,s=n(7712),o=n(7485),a=n(9430),c=n(4361),l=n(4977);t.exports=function(t,e){var n,u,h,d,f,p,g=t.target,m=t.global,v=t.stat;if(u=m?r:v?r[g]||a(g,{}):(r[g]||{}).prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(u,h),d=p&&p.value):d=u[h],n=l(m?h:g+(v?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&s(f,"sham",!0),o(u,h,f,t)}}},2074:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},6885:function(t,e,n){var r=n(3091),i=n(4601),s=n(8823),o=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},8823:function(t,e,n){var r=n(2074);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},2368:function(t,e,n){var r=n(8823),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},2071:function(t,e,n){var r=n(5077),i=n(6490),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},1385:function(t,e,n){var r=n(281),i=n(4601);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(s){}}},3091:function(t,e,n){var r=n(8569),i=n(281);t.exports=function(t){if("Function"===r(t))return i(t)}},281:function(t,e,n){var r=n(8823),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);t.exports=r?o:function(t){return function(){return s.apply(t,arguments)}}},6492:function(t,e,n){var r=n(200),i=n(8420),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(r[t]):r[t]&&r[t][e]}},938:function(t,e,n){var r=n(4601);t.exports=function(t){return{iterator:t,next:r(t.next)}}},1898:function(t,e,n){var r=n(3062),i=n(6457),s=n(8406),o=n(2228),a=n(1602),c=a("iterator");t.exports=function(t){if(!s(t))return i(t,c)||i(t,"@@iterator")||o[r(t)]}},9526:function(t,e,n){var r=n(2368),i=n(4601),s=n(3938),o=n(3838),a=n(1898),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return s(r(n,t));throw c(o(t)+" is not iterable")}},6457:function(t,e,n){var r=n(4601),i=n(8406);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},2926:function(t,e,n){var r=n(4601),i=n(3938),s=n(2368),o=n(9328),a=TypeError,c=Math.max,l=function(t,e,n,r){this.set=t,this.size=e,this.has=n,this.keys=r};l.prototype={getIterator:function(){return i(s(this.keys,this.set))},includes:function(t){return s(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!=e)throw a("Invalid size");return new l(t,c(o(e),0),r(t.has),r(t.keys))}},200:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},6490:function(t,e,n){var r=n(281),i=n(2612),s=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},7708:function(t){t.exports={}},8890:function(t,e,n){var r=n(6492);t.exports=r("document","documentElement")},7694:function(t,e,n){var r=n(5077),i=n(2074),s=n(3262);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8664:function(t,e,n){var r=n(281),i=n(2074),s=n(8569),o=Object,a=r("".split);t.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==s(t)?a(t,""):o(t)}:o},3054:function(t,e,n){var r=n(8420),i=n(5335),s=n(9686);t.exports=function(t,e,n){var o,a;return s&&r(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&s(t,a),t}},9965:function(t,e,n){var r=n(281),i=n(8420),s=n(9310),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},9206:function(t,e,n){var r,i,s,o=n(8369),a=n(200),c=n(5335),l=n(7712),u=n(6490),h=n(9310),d=n(5904),f=n(7708),p="Object already initialized",g=a.TypeError,m=a.WeakMap,v=function(t){return s(t)?i(t):r(t,{})},y=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}};if(o||h.state){var b=h.state||(h.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw g(p);return e.facade=t,b.set(t,e),e},i=function(t){return b.get(t)||{}},s=function(t){return b.has(t)}}else{var w=d("state");f[w]=!0,r=function(t,e){if(u(t,w))throw g(p);return e.facade=t,l(t,w,e),e},i=function(t){return u(t,w)?t[w]:{}},s=function(t){return u(t,w)}}t.exports={set:r,get:i,has:s,enforce:v,getterFor:y}},9034:function(t,e,n){var r=n(1602),i=n(2228),s=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},8679:function(t,e,n){var r=n(8569);t.exports=Array.isArray||function(t){return"Array"==r(t)}},7472:function(t,e,n){var r=n(3062);t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},8420:function(t,e,n){var r=n(6568),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4977:function(t,e,n){var r=n(2074),i=n(8420),s=/#|\.prototype\./,o=function(t,e){var n=c[a(t)];return n==u||n!=l&&(i(e)?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},8406:function(t){t.exports=function(t){return null===t||void 0===t}},5335:function(t,e,n){var r=n(8420),i=n(6568),s=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===s}:function(t){return"object"==typeof t?null!==t:r(t)}},6926:function(t){t.exports=!1},2328:function(t,e,n){var r=n(6492),i=n(8420),s=n(7658),o=n(5225),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&s(e.prototype,a(t))}},64:function(t,e,n){var r=n(2368);t.exports=function(t,e,n){var i,s,o=n||t.next;while(!(i=r(o,t)).done)if(s=e(i.value),void 0!==s)return s}},2929:function(t,e,n){var r=n(6885),i=n(2368),s=n(3938),o=n(3838),a=n(9034),c=n(3493),l=n(7658),u=n(9526),h=n(1898),d=n(9868),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},g=p.prototype;t.exports=function(t,e,n){var m,v,y,b,w,_,x,S=n&&n.that,I=!(!n||!n.AS_ENTRIES),A=!(!n||!n.IS_RECORD),E=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),k=r(e,S),N=function(t){return m&&d(m,"normal",t),new p(!0,t)},L=function(t){return I?(s(t),T?k(t[0],t[1],N):k(t[0],t[1])):T?k(t,N):k(t)};if(A)m=t.iterator;else if(E)m=t;else{if(v=h(t),!v)throw f(o(t)+" is not iterable");if(a(v)){for(y=0,b=c(t);b>y;y++)if(w=L(t[y]),w&&l(g,w))return w;return new p(!1)}m=u(t,v)}_=A?t.next:m.next;while(!(x=i(_,m)).done){try{w=L(x.value)}catch(C){d(m,"throw",C)}if("object"==typeof w&&w&&l(g,w))return w}return new p(!1)}},9868:function(t,e,n){var r=n(2368),i=n(3938),s=n(6457);t.exports=function(t,e,n){var o,a;i(t);try{if(o=s(t,"return"),!o){if("throw"===e)throw n;return n}o=r(o,t)}catch(c){a=!0,o=c}if("throw"===e)throw n;if(a)throw o;return i(o),n}},1523:function(t,e,n){"use strict";var r=n(2368),i=n(3105),s=n(7712),o=n(2760),a=n(1602),c=n(9206),l=n(6457),u=n(9306).IteratorPrototype,h=n(8296),d=n(9868),f=a("toStringTag"),p="IteratorHelper",g="WrapForValidIterator",m=c.set,v=function(t){var e=c.getterFor(t?g:p);return o(i(u),{next:function(){var n=e(this);if(t)return n.nextHandler();try{var r=n.done?void 0:n.nextHandler();return h(r,n.done)}catch(i){throw n.done=!0,i}},return:function(){var n=e(this),i=n.iterator;if(n.done=!0,t){var s=l(i,"return");return s?r(s,i):h(void 0,!0)}if(n.inner)try{d(n.inner.iterator,"normal")}catch(o){return d(i,"throw",o)}return d(i,"normal"),h(void 0,!0)}})},y=v(!0),b=v(!1);s(b,f,"Iterator Helper"),t.exports=function(t,e){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=e?g:p,r.nextHandler=t,r.counter=0,r.done=!1,m(this,r)};return n.prototype=e?y:b,n}},8318:function(t,e,n){"use strict";var r=n(2368),i=n(4601),s=n(3938),o=n(938),a=n(1523),c=n(1332),l=a((function(){var t=this.iterator,e=s(r(this.next,t)),n=this.done=!!e.done;if(!n)return c(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return s(this),i(t),new l(o(this),{mapper:t})}},9306:function(t,e,n){"use strict";var r,i,s,o=n(2074),a=n(8420),c=n(5335),l=n(3105),u=n(7970),h=n(7485),d=n(1602),f=n(6926),p=d("iterator"),g=!1;[].keys&&(s=[].keys(),"next"in s?(i=u(u(s)),i!==Object.prototype&&(r=i)):g=!0);var m=!c(r)||o((function(){var t={};return r[p].call(t)!==t}));m?r={}:f&&(r=l(r)),a(r[p])||h(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:g}},2228:function(t){t.exports={}},3493:function(t,e,n){var r=n(3747);t.exports=function(t){return r(t.length)}},8218:function(t,e,n){var r=n(281),i=n(2074),s=n(8420),o=n(6490),a=n(5077),c=n(2071).CONFIGURABLE,l=n(9965),u=n(9206),h=u.enforce,d=u.get,f=String,p=Object.defineProperty,g=r("".slice),m=r("".replace),v=r([].join),y=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&o(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return o(r,"source")||(r.source=v(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return s(this)&&d(this).source||l(this)}),"toString")},9830:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},610:function(t,e,n){var r=n(5362);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},3105:function(t,e,n){var r,i=n(3938),s=n(5318),o=n(290),a=n(7708),c=n(8890),l=n(3262),u=n(5904),h=">",d="<",f="prototype",p="script",g=u("IE_PROTO"),m=function(){},v=function(t){return d+p+h+t+d+"/"+p+h},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=l("iframe"),n="java"+p+":";return e.style.display="none",c.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&r?y(r):b():y(r);var t=o.length;while(t--)delete w[f][o[t]];return w()};a[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[f]=i(t),n=new m,m[f]=null,n[g]=t):n=w(),void 0===e?n:s.f(n,e)}},5318:function(t,e,n){var r=n(5077),i=n(4491),s=n(3610),o=n(3938),a=n(5476),c=n(1641);e.f=r&&!i?Object.defineProperties:function(t,e){o(t);var n,r=a(e),i=c(e),l=i.length,u=0;while(l>u)s.f(t,n=i[u++],r[n]);return t}},3610:function(t,e,n){var r=n(5077),i=n(7694),s=n(4491),o=n(3938),a=n(6032),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?s?function(t,e,n){if(o(t),e=a(e),o(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(o(t),e=a(e),o(n),i)try{return l(t,e,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7632:function(t,e,n){var r=n(5077),i=n(2368),s=n(9304),o=n(6843),a=n(5476),c=n(6032),l=n(6490),u=n(7694),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(n){}if(l(t,e))return o(!i(s.f,t,e),t[e])}},4789:function(t,e,n){var r=n(6347),i=n(290),s=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,s)}},8916:function(t,e){e.f=Object.getOwnPropertySymbols},7970:function(t,e,n){var r=n(6490),i=n(8420),s=n(2612),o=n(5904),a=n(7168),c=o("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=s(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},7658:function(t,e,n){var r=n(281);t.exports=r({}.isPrototypeOf)},6347:function(t,e,n){var r=n(281),i=n(6490),s=n(5476),o=n(8186).indexOf,a=n(7708),c=r([].push);t.exports=function(t,e){var n,r=s(t),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);while(e.length>l)i(r,n=e[l++])&&(~o(u,n)||c(u,n));return u}},1641:function(t,e,n){var r=n(6347),i=n(290);t.exports=Object.keys||function(t){return r(t,i)}},9304:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},9686:function(t,e,n){var r=n(1385),i=n(3938),s=n(7473);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(o){}return function(n,r){return i(n),s(r),e?t(n,r):n.__proto__=r,n}}():void 0)},9751:function(t,e,n){var r=n(2368),i=n(8420),s=n(5335),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!s(a=r(n,t)))return a;if(i(n=t.valueOf)&&!s(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!s(a=r(n,t)))return a;throw o("Can't convert object to primitive value")}},5816:function(t,e,n){var r=n(6492),i=n(281),s=n(4789),o=n(8916),a=n(3938),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=s.f(a(t)),n=o.f;return n?c(e,n(t)):e}},6844:function(t,e,n){"use strict";var r=n(3938);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},1229:function(t,e,n){var r=n(8406),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},9583:function(t,e,n){var r=n(1171),i=n(8896),s=r.Set,o=r.add;t.exports=function(t){var e=new s;return i(t,(function(t){o(e,t)})),e}},5643:function(t,e,n){"use strict";var r=n(1009),i=n(1171),s=n(9583),o=n(605),a=n(2926),c=n(8896),l=n(64),u=i.has,h=i.remove;t.exports=function(t){var e=r(this),n=a(t),i=s(e);return o(e)<=n.size?c(e,(function(t){n.includes(t)&&h(i,t)})):l(n.getIterator(),(function(t){u(e,t)&&h(i,t)})),i}},1171:function(t,e,n){var r=n(281),i=Set.prototype;t.exports={Set:Set,add:r(i.add),has:r(i.has),remove:r(i["delete"]),proto:i}},9697:function(t,e,n){"use strict";var r=n(1009),i=n(1171),s=n(605),o=n(2926),a=n(8896),c=n(64),l=i.Set,u=i.add,h=i.has;t.exports=function(t){var e=r(this),n=o(t),i=new l;return s(e)>n.size?c(n.getIterator(),(function(t){h(e,t)&&u(i,t)})):a(e,(function(t){n.includes(t)&&u(i,t)})),i}},8194:function(t,e,n){"use strict";var r=n(1009),i=n(1171).has,s=n(605),o=n(2926),a=n(8896),c=n(64),l=n(9868);t.exports=function(t){var e=r(this),n=o(t);if(s(e)<=n.size)return!1!==a(e,(function(t){if(n.includes(t))return!1}),!0);var u=n.getIterator();return!1!==c(u,(function(t){if(i(e,t))return l(u,"normal",!1)}))}},3601:function(t,e,n){"use strict";var r=n(1009),i=n(605),s=n(8896),o=n(2926);t.exports=function(t){var e=r(this),n=o(t);return!(i(e)>n.size)&&!1!==s(e,(function(t){if(!n.includes(t))return!1}),!0)}},3632:function(t,e,n){"use strict";var r=n(1009),i=n(1171).has,s=n(605),o=n(2926),a=n(64),c=n(9868);t.exports=function(t){var e=r(this),n=o(t);if(s(e)<n.size)return!1;var l=n.getIterator();return!1!==a(l,(function(t){if(!i(e,t))return c(l,"normal",!1)}))}},8896:function(t,e,n){var r=n(281),i=n(64),s=n(1171),o=s.Set,a=s.proto,c=r(a.forEach),l=r(a.keys),u=l(new o).next;t.exports=function(t,e,n){return n?i(l(t),e,u):c(t,e)}},8223:function(t,e,n){var r=n(6492),i=function(){return{size:0,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){try{var e=r("Set");return(new e)[t](i()),!0}catch(n){return!1}}},605:function(t,e,n){var r=n(1385),i=n(1171);t.exports=r(i.proto,"size","get")||function(t){return t.size}},4753:function(t,e,n){"use strict";var r=n(1009),i=n(1171),s=n(9583),o=n(2926),a=n(64),c=i.add,l=i.has,u=i.remove;t.exports=function(t){var e=r(this),n=o(t).getIterator(),i=s(e);return a(n,(function(t){l(e,t)?u(i,t):c(i,t)})),i}},1869:function(t,e,n){"use strict";var r=n(1009),i=n(1171).add,s=n(9583),o=n(2926),a=n(64);t.exports=function(t){var e=r(this),n=o(t).getIterator(),c=s(e);return a(n,(function(t){i(c,t)})),c}},5904:function(t,e,n){var r=n(2),i=n(665),s=r("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},9310:function(t,e,n){var r=n(200),i=n(9430),s="__core-js_shared__",o=r[s]||i(s,{});t.exports=o},2:function(t,e,n){var r=n(6926),i=n(9310);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},3291:function(t,e,n){var r=n(200),i=n(2074),s=n(6845),o=n(8523),a=n(419),c=n(5223),l=r.structuredClone;t.exports=!!l&&!i((function(){if(a&&s>92||c&&s>94||o&&s>97)return!1;var t=new ArrayBuffer(8),e=l(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength}))},2072:function(t,e,n){var r=n(6845),i=n(2074),s=n(200),o=s.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},6539:function(t,e,n){var r=n(9328),i=Math.max,s=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):s(n,e)}},3005:function(t,e,n){var r=n(874),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},6283:function(t,e,n){var r=n(9328),i=n(3747),s=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw s("Wrong length or index");return n}},5476:function(t,e,n){var r=n(8664),i=n(1229);t.exports=function(t){return r(i(t))}},9328:function(t,e,n){var r=n(9830);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},3747:function(t,e,n){var r=n(9328),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},2612:function(t,e,n){var r=n(1229),i=Object;t.exports=function(t){return i(r(t))}},874:function(t,e,n){var r=n(2368),i=n(5335),s=n(2328),o=n(6457),a=n(9751),c=n(1602),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var n,c=o(t,u);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||s(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6032:function(t,e,n){var r=n(874),i=n(2328);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},3129:function(t,e,n){var r=n(1602),i=r("toStringTag"),s={};s[i]="z",t.exports="[object z]"===String(s)},5362:function(t,e,n){var r=n(3062),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},3838:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},665:function(t,e,n){var r=n(281),i=0,s=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},5225:function(t,e,n){var r=n(2072);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4491:function(t,e,n){var r=n(5077),i=n(2074);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8369:function(t,e,n){var r=n(200),i=n(8420),s=r.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},1602:function(t,e,n){var r=n(200),i=n(2),s=n(6490),o=n(665),a=n(2072),c=n(5225),l=r.Symbol,u=i("wks"),h=c?l["for"]||l:l&&l.withoutSetter||o;t.exports=function(t){return s(u,t)||(u[t]=a&&s(l,t)?l[t]:h("Symbol."+t)),u[t]}},8743:function(t,e,n){"use strict";var r=n(1605),i=n(2612),s=n(3493),o=n(6648),a=n(7242),c=n(2074),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=l||!u();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=s(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return o(e,n),n}})},3689:function(t,e,n){"use strict";var r=n(1605),i=n(4033),s=n(5476),o=n(298),a=Array;r({target:"Array",proto:!0},{toReversed:function(){return i(s(this),a)}}),o("toReversed")},1838:function(t,e,n){"use strict";var r=n(1605),i=n(281),s=n(4601),o=n(5476),a=n(447),c=n(2701),l=n(298),u=Array,h=i(c("Array").sort);r({target:"Array",proto:!0},{toSorted:function(t){void 0!==t&&s(t);var e=o(this),n=a(u,e);return h(n,t)}}),l("toSorted")},2035:function(t,e,n){"use strict";var r=n(1605),i=n(298),s=n(7242),o=n(3493),a=n(6539),c=n(5476),l=n(9328),u=Array,h=Math.max,d=Math.min;r({target:"Array",proto:!0},{toSpliced:function(t,e){var n,r,i,f,p=c(this),g=o(p),m=a(t,g),v=arguments.length,y=0;for(0===v?n=r=0:1===v?(n=0,r=g-m):(n=v-2,r=d(h(l(e),0),g-m)),i=s(g+n-r),f=u(i);y<m;y++)f[y]=p[y];for(;y<m+n;y++)f[y]=arguments[y-m+2];for(;y<i;y++)f[y]=p[y+r-n];return f}}),i("toSpliced")},8802:function(t,e,n){var r=n(200),i=n(5077),s=n(6477),o=n(6844),a=n(2074),c=r.RegExp,l=c.prototype,u=i&&a((function(){var t=!0;try{c(".","d")}catch(u){t=!1}var e={},n="",r=t?"dgimsy":"gimsy",i=function(t,r){Object.defineProperty(e,t,{get:function(){return n+=r,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in t&&(s.hasIndices="d"),s)i(o,s[o]);var a=Object.getOwnPropertyDescriptor(l,"flags").get.call(e);return a!==r||n!==r}));u&&s(l,"flags",{configurable:!0,get:o})},3492:function(t,e,n){"use strict";var r=n(4033),i=n(5343),s=i.aTypedArray,o=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;o("toReversed",(function(){return r(s(this),a(this))}))},4467:function(t,e,n){"use strict";var r=n(5343),i=n(281),s=n(4601),o=n(447),a=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&s(t);var e=a(this),n=o(c(e),e);return u(n,t)}))},6736:function(t,e,n){"use strict";var r=n(1867),i=n(5343),s=n(7472),o=n(9328),a=n(3005),c=i.aTypedArray,l=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=c(this),i=o(t),u=s(n)?a(e):+e;return r(n,l(n),i,u)}}["with"],!h)},9639:function(t,e,n){"use strict";var r=n(5077),i=n(6477),s=n(7469),o=ArrayBuffer.prototype;r&&!("detached"in o)&&i(o,"detached",{configurable:!0,get:function(){return s(this)}})},9266:function(t,e,n){"use strict";var r=n(1605),i=n(3877);i&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},9286:function(t,e,n){"use strict";var r=n(1605),i=n(3877);i&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},3725:function(t,e,n){"use strict";var r=n(1605),i=n(200),s=n(5190),o=n(8420),a=n(7712),c=n(2074),l=n(6490),u=n(1602),h=n(9306).IteratorPrototype,d=n(6926),f=u("toStringTag"),p=i.Iterator,g=d||!o(p)||p.prototype!==h||!c((function(){p({})})),m=function(){s(this,h)};l(h,f)||a(h,f,"Iterator"),!g&&l(h,"constructor")&&h.constructor!==Object||a(h,"constructor",m),m.prototype=h,r({global:!0,constructor:!0,forced:g},{Iterator:m})},178:function(t,e,n){"use strict";var r=n(1605),i=n(2929),s=n(4601),o=n(3938),a=n(938);r({target:"Iterator",proto:!0,real:!0},{every:function(t){o(this),s(t);var e=a(this),n=0;return!i(e,(function(e,r){if(!t(e,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},5019:function(t,e,n){"use strict";var r=n(1605),i=n(2368),s=n(4601),o=n(3938),a=n(938),c=n(1523),l=n(1332),u=c((function(){var t,e,n,r=this.iterator,s=this.predicate,a=this.next;while(1){if(t=o(i(a,r)),e=this.done=!!t.done,e)return;if(n=t.value,l(r,s,[n,this.counter++],!0))return n}}));r({target:"Iterator",proto:!0,real:!0},{filter:function(t){return o(this),s(t),new u(a(this),{predicate:t})}})},2598:function(t,e,n){"use strict";var r=n(1605),i=n(2929),s=n(4601),o=n(3938),a=n(938);r({target:"Iterator",proto:!0,real:!0},{find:function(t){o(this),s(t);var e=a(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},9838:function(t,e,n){"use strict";var r=n(1605),i=n(2929),s=n(4601),o=n(3938),a=n(938);r({target:"Iterator",proto:!0,real:!0},{forEach:function(t){o(this),s(t);var e=a(this),n=0;i(e,(function(e){t(e,n++)}),{IS_RECORD:!0})}})},1339:function(t,e,n){var r=n(1605),i=n(8318);r({target:"Iterator",proto:!0,real:!0},{map:i})},9471:function(t,e,n){"use strict";var r=n(1605),i=n(2929),s=n(4601),o=n(3938),a=n(938),c=TypeError;r({target:"Iterator",proto:!0,real:!0},{reduce:function(t){o(this),s(t);var e=a(this),n=arguments.length<2,r=n?void 0:arguments[1],l=0;if(i(e,(function(e){n?(n=!1,r=e):r=t(r,e,l),l++}),{IS_RECORD:!0}),n)throw c("Reduce of empty iterator with no initial value");return r}})},9229:function(t,e,n){"use strict";var r=n(1605),i=n(2929),s=n(4601),o=n(3938),a=n(938);r({target:"Iterator",proto:!0,real:!0},{some:function(t){o(this),s(t);var e=a(this),n=0;return i(e,(function(e,r){if(t(e,n++))return r()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},7060:function(t,e,n){"use strict";var r=n(1605),i=n(3938),s=n(2929),o=n(938),a=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return s(o(i(this)),a,{that:t,IS_RECORD:!0}),t}})},292:function(t,e,n){var r=n(1605),i=n(5643),s=n(8223);r({target:"Set",proto:!0,real:!0,forced:!s("difference")},{difference:i})},9074:function(t,e,n){var r=n(1605),i=n(2074),s=n(9697),o=n(8223),a=!o("intersection")||i((function(){return"3,2"!=Array.from(new Set([1,2,3]).intersection(new Set([3,2])))}));r({target:"Set",proto:!0,real:!0,forced:a},{intersection:s})},11:function(t,e,n){var r=n(1605),i=n(8194),s=n(8223);r({target:"Set",proto:!0,real:!0,forced:!s("isDisjointFrom")},{isDisjointFrom:i})},2818:function(t,e,n){var r=n(1605),i=n(3601),s=n(8223);r({target:"Set",proto:!0,real:!0,forced:!s("isSubsetOf")},{isSubsetOf:i})},2289:function(t,e,n){var r=n(1605),i=n(3632),s=n(8223);r({target:"Set",proto:!0,real:!0,forced:!s("isSupersetOf")},{isSupersetOf:i})},4694:function(t,e,n){var r=n(1605),i=n(4753),s=n(8223);r({target:"Set",proto:!0,real:!0,forced:!s("symmetricDifference")},{symmetricDifference:i})},1784:function(t,e,n){var r=n(1605),i=n(1869),s=n(8223);r({target:"Set",proto:!0,real:!0,forced:!s("union")},{union:i})},9078:function(t,e,n){"use strict";var r=n(1605),i=n(200),s=n(6492),o=n(6843),a=n(3610).f,c=n(6490),l=n(5190),u=n(3054),h=n(610),d=n(6567),f=n(6452),p=n(5077),g=n(6926),m="DOMException",v=s("Error"),y=s(m),b=function(){l(this,w);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new y(e,n),i=v(e);return i.name=m,a(r,"stack",o(1,f(i.stack,1))),u(r,this,b),r},w=b.prototype=y.prototype,_="stack"in v(m),x="stack"in new y(1,2),S=y&&p&&Object.getOwnPropertyDescriptor(i,m),I=!!S&&!(S.writable&&S.configurable),A=_&&!I&&!x;r({global:!0,constructor:!0,forced:g||A},{DOMException:A?b:y});var E=s(m),T=E.prototype;if(T.constructor!==E)for(var k in g||a(T,"constructor",o(1,E)),d)if(c(d,k)){var N=d[k],L=N.s;c(E,L)||a(E,L,o(6,N.c))}},2838:function(t,e,n){"use strict";var r=n(5077),i=n(281),s=n(6477),o=URLSearchParams.prototype,a=i(o.forEach);r&&!("size"in o)&&s(o,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},9549:function(t,e,n){"use strict";n.d(e,{fS:function(){return Gh},Ix:function(){return Wu},H6:function(){return Cu},T1:function(){return _u},Wq:function(){return Jh},uY:function(){return $u},W6:function(){return q},Ci:function(){return Ku},YQ:function(){return Xh},NJ:function(){return Zh},Dc:function(){return rt},GA:function(){return yd},cm:function(){return Fe},K$:function(){return lt},FA:function(){return ct},lo:function(){return gu},bI:function(){return B},qG:function(){return Te},qi:function(){return D},c8:function(){return hu},gS:function(){return dd},C3:function(){return Ad},hq:function(){return Id},me:function(){return Bu},rJ:function(){return Su},Cs:function(){return Iu},vN:function(){return bu},kd:function(){return hd},CL:function(){return xd},LA:function(){return qu},H9:function(){return Au},ol:function(){return Mu},Q5:function(){return Fu},Os:function(){return Uu},FD:function(){return qh},rf:function(){return Uh},Ws:function(){return Ru},z6:function(){return gd},x7:function(){return nd},nY:function(){return id},_e:function(){return sd},GG:function(){return od},kU:function(){return ad},Rr:function(){return cd},aU:function(){return Ou},GV:function(){return Ed},AB:function(){return Dh},$1:function(){return Mh},po:function(){return zu},St:function(){return Hu},aQ:function(){return fd},FC:function(){return pd},My:function(){return Oh},P:function(){return kh},B:function(){return Tu},yx:function(){return Eu},c4:function(){return _d},O5:function(){return Sd},BN:function(){return ld},He:function(){return P},lN:function(){return ed},HM:function(){return Bh},EO:function(){return jh},mZ:function(){return ud},iB:function(){return Vu},_M:function(){return Lh},wP:function(){return Td}});n(8743),n(3492),n(4467),n(6736),n(9639),n(9286),n(9266),n(3725),n(178),n(5019),n(2598),n(9838),n(1339),n(9471),n(9229),n(7060),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784),n(9078);var r=n(2986),i=n(4046);class s{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o=[];var a;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(a||(a={}));const c={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},l=a.INFO,u={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},h=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=u[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class d{constructor(t){this.name=t,this._logLevel=l,this._logHandler=h,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in a))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?c[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...t),this._logHandler(this,a.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...t),this._logHandler(this,a.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,a.INFO,...t),this._logHandler(this,a.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,a.WARN,...t),this._logHandler(this,a.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...t),this._logHandler(this,a.ERROR,...t)}}var f,p,g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},m={};(function(){var t;
/** @license
         Copyright The Closure Library Authors.
         SPDX-License-Identifier: Apache-2.0
         */function e(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(t,e,n){n||(n=0);var r=Array(16);if("string"===typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function s(t,e){var n=a;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}function o(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=n;)i(this,t,o),o+=this.blockSize;if("string"===typeof t){for(;o<e;)if(r[s++]=t.charCodeAt(o++),s==this.blockSize){i(this,r),s=0;break}}else for(;o<e;)if(r[s++]=t[o++],s==this.blockSize){i(this,r),s=0;break}}this.h=s,this.o+=e},r.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var a={};function c(t){return-128<=t&&128>t?s(t,(function(t){return new o([0|t],0>t?-1:0)})):new o([0|t],0>t?-1:0)}function l(t){if(isNaN(t)||!isFinite(t))return h;if(0>t)return b(l(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=4294967296;return new o(e,0)}function u(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return b(u(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=l(Math.pow(e,8)),r=h,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=l(Math.pow(e,s)),r=r.j(s).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var h=c(0),d=c(1),g=c(16777216);function v(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function y(t){return-1==t.h}function b(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new o(n,~t.h).add(d)}function w(t,e){return t.add(b(e))}function _(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function x(t,e){this.g=t,this.h=e}function S(t,e){if(v(e))throw Error("division by zero");if(v(t))return new x(h,h);if(y(t))return e=S(b(t),e),new x(b(e.g),b(e.h));if(y(e))return e=S(t,b(e)),new x(b(e.g),e.h);if(30<t.g.length){if(y(t)||y(e))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=e;0>=r.l(t);)n=I(n),r=I(r);var i=A(n,1),s=A(r,1);for(r=A(r,2),n=A(n,2);!v(r);){var o=s.add(r);0>=o.l(t)&&(i=i.add(n),s=o),r=A(r,1),n=A(n,1)}return e=w(t,i.j(e)),new x(i,e)}for(i=h;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=l(n),o=s.j(e);y(o)||0<o.l(t);)n-=r,s=l(n),o=s.j(e);v(s)&&(s=d),i=i.add(s),t=w(t,o)}return new x(i,t)}function I(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.i(r)<<1|t.i(r-1)>>>31;return new o(n,t.h)}function A(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.i(s+n)>>>e|t.i(s+n+1)<<32-e:t.i(s+n);return new o(i,t.h)}t=o.prototype,t.m=function(){if(y(this))return-b(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.i(n);t+=(0<=r?r:4294967296+r)*e,e*=4294967296}return t},t.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(v(this))return"0";if(y(this))return"-"+b(this).toString(t);for(var e=l(Math.pow(t,6)),n=this,r="";;){var i=S(n,e).g;n=w(n,i.j(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,v(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return t=w(this,t),y(t)?-1:v(t)?0:1},t.abs=function(){return y(this)?b(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.i(i))+(65535&t.i(i)),a=(s>>>16)+(this.i(i)>>>16)+(t.i(i)>>>16);r=a>>>16,s&=65535,a&=65535,n[i]=a<<16|s}return new o(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(v(this)||v(t))return h;if(y(this))return y(t)?b(this).j(b(t)):b(b(this).j(t));if(y(t))return b(this.j(b(t)));if(0>this.l(g)&&0>t.l(g))return l(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.i(r)>>>16,a=65535&this.i(r),c=t.i(i)>>>16,u=65535&t.i(i);n[2*r+2*i]+=a*u,_(n,2*r+2*i),n[2*r+2*i+1]+=s*u,_(n,2*r+2*i+1),n[2*r+2*i+1]+=a*c,_(n,2*r+2*i+1),n[2*r+2*i+2]+=s*c,_(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new o(n,0)},t.A=function(t){return S(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)&t.i(r);return new o(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)|t.i(r);return new o(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.i(r)^t.i(r);return new o(n,this.h^t.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p=m.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,f=m.Integer=o}).apply("undefined"!==typeof g?g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var v,y,b,w,_,x,S,I,A="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},E={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};function n(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof A&&A];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var r=n(this);function i(t,n){if(n)t:{var i=r;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in i))break t;i=i[o]}t=t[t.length-1],s=i[t],n=n(s),n!=s&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}function s(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}i("Array.prototype.values",(function(t){return t||function(){return s(this,(function(t,e){return e}))}}));
/** @license
      Copyright The Closure Library Authors.
      SPDX-License-Identifier: Apache-2.0
      */
var o=o||{},a=this||self;function c(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function u(t,e,n){return t.call.apply(t.bind,arguments)}function h(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function d(t,e,n){return d=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:h,d.apply(null,arguments)}function f(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function p(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function g(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function m(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(c(e)){const n=t.length||0,r=e.length||0;t.length=n+r;for(let i=0;i<r;i++)t[n+i]=e[i]}else t.push(e)}}class k{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function N(t){return/^[\s\xa0]*$/.test(t)}function C(){var t=a.navigator;return t&&(t=t.userAgent)?t:""}function P(t){return P[" "](t),t}P[" "]=function(){};var O=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function R(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function D(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function M(t){const e={};for(const n in t)e[n]=t[n];return e}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<F.length;e++)n=F[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function B(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function V(t){a.setTimeout((()=>{throw t}),0)}function U(){var t=G;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class q{constructor(){this.h=this.g=null}add(t,e){const n=z.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var z=new k((()=>new H),(t=>t.reset()));class H{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let W,$=!1,G=new q,K=()=>{const t=a.Promise.resolve(void 0);W=()=>{t.then(Y)}};var Y=()=>{for(var t;t=U();){try{t.h.call(t.g)}catch(n){V(n)}var e=z;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}$=!1};function Q(){this.s=this.s,this.C=this.C}function J(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},J.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};a.addEventListener("test",t,e),a.removeEventListener("test",t,e)}catch(n){}return t}();function Z(t,e){if(J.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(O){t:{try{P(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:tt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Z.aa.h.call(this)}}p(Z,J);var tt={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),nt=0;function rt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++nt,this.da=this.fa=!1}function it(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function st(t){this.src=t,this.g={},this.h=0}function ot(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Array.prototype.indexOf.call(i,e,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(it(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function at(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}st.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=at(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new rt(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};var ct="closure_lm_"+(1e6*Math.random()|0),lt={};function ut(t,e,n,r,i){if(r&&r.once)return ft(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ut(t,e[s],n,r,i);return null}return n=wt(n),t&&t[et]?t.K(e,n,l(r)?!!r.capture:!!r,i):ht(t,e,n,!1,r,i)}function ht(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=l(i)?!!i.capture:!!i,a=yt(t);if(a||(t[ct]=a=new st(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=dt(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)X||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function dt(){function t(n){return e.call(t.src,t.listener,n)}const e=vt;return t}function ft(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ft(t,e[s],n,r,i);return null}return n=wt(n),t&&t[et]?t.L(e,n,l(r)?!!r.capture:!!r,i):ht(t,e,n,!0,r,i)}function pt(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)pt(t,e[s],n,r,i);else r=l(r)?!!r.capture:!!r,n=wt(n),t&&t[et]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=at(s,n,r,i),-1<n&&(it(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=yt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=at(e,n,r,i)),(n=-1<t?e[t]:null)&&gt(n))}function gt(t){if("number"!==typeof t&&t&&!t.da){var e=t.src;if(e&&e[et])ot(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yt(e))?(ot(n,t),0==n.h&&(n.src=null,e[ct]=null)):it(t)}}}function mt(t){return t in lt?lt[t]:lt[t]="on"+t}function vt(t,e){if(t.da)t=!0;else{e=new Z(e,this);var n=t.listener,r=t.ha||t.src;t.fa&&gt(t),t=n.call(r,e)}return t}function yt(t){return t=t[ct],t instanceof st?t:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(t){return"function"===typeof t?t:(t[bt]||(t[bt]=function(e){return t.handleEvent(e)}),t[bt])}function _t(){Q.call(this),this.i=new st(this),this.M=this,this.F=null}function xt(t,e){var n,r=t.F;if(r)for(n=[];r;r=r.F)n.push(r);if(t=t.M,r=e.type||e,"string"===typeof e)e=new J(e,t);else if(e instanceof J)e.target=e.target||t;else{var i=e;e=new J(r,t),j(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=St(o,r,!0,e)&&i}if(o=e.g=t,i=St(o,r,!0,e)&&i,i=St(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=St(o,r,!1,e)&&i}function St(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&ot(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function It(t,e,n){if("function"===typeof t)n&&(t=d(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=d(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function At(t){t.g=It((()=>{t.g=null,t.i&&(t.i=!1,At(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}p(_t,Q),_t.prototype[et]=!0,_t.prototype.removeEventListener=function(t,e,n,r){pt(this,t,e,n,r)},_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)it(n[r]);delete e.g[t],e.h--}}this.F=null},_t.prototype.K=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_t.prototype.L=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};class Et extends Q{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tt(t){Q.call(this),this.h=t,this.g={}}p(Tt,Q);var kt=[];function Nt(t){R(t.g,(function(t,e){this.g.hasOwnProperty(e)&&gt(t)}),t),t.g={}}Tt.prototype.N=function(){Tt.aa.N.call(this),Nt(this)},Tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=a.JSON.stringify,Ct=a.JSON.parse,Pt=class{stringify(t){return a.JSON.stringify(t,void 0)}parse(t){return a.JSON.parse(t,void 0)}};function Ot(){}function Rt(t){return t.h||(t.h=t.i())}function Dt(){}Ot.prototype.h=null;var Mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ft(){J.call(this,"d")}function jt(){J.call(this,"c")}p(Ft,J),p(jt,J);var Bt={},Vt=null;function Ut(){return Vt=Vt||new _t}function qt(t){J.call(this,Bt.La,t)}function zt(t){const e=Ut();xt(e,new qt(e))}function Ht(t,e){J.call(this,Bt.STAT_EVENT,t),this.stat=e}function Wt(t){const e=Ut();xt(e,new Ht(e,t))}function $t(t,e){J.call(this,Bt.Ma,t),this.size=e}function Gt(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}function Kt(){this.g=!0}function Yt(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}function Qt(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}function Jt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Zt(t,n)+(r?" "+r:"")}))}function Xt(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Zt(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Lt(n)}catch(a){return e}}Bt.La="serverreachability",p(qt,J),Bt.STAT_EVENT="statevent",p(Ht,J),Bt.Ma="timingevent",p($t,J),Kt.prototype.xa=function(){this.g=!1},Kt.prototype.info=function(){};var te,ee={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function re(){}function ie(t,e,n,r){this.j=t,this.i=e,this.l=n,this.R=r||1,this.U=new Tt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new se}function se(){this.i=null,this.g="",this.h=!1}p(re,Ot),re.prototype.g=function(){return new XMLHttpRequest},re.prototype.i=function(){return{}},te=new re;var oe={},ae={};function ce(t,e,n){t.L=1,t.v=Fe(Pe(e)),t.m=n,t.P=!0,le(t,null)}function le(t,e){t.F=Date.now(),de(t),t.A=Pe(t.v);var n=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),Qe(n.i,"t",r),t.C=0,n=t.j.J,t.h=new se,t.g=zn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new Et(d(t.Y,t,t.g),t.O)),e=t.U,n=t.g,r=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(kt[0]=i.toString()),i=kt);for(var s=0;s<i.length;s++){var o=ut(n,i[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?M(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),zt(),Yt(t.i,t.u,t.A,t.l,t.R,t.m)}function ue(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function he(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ae:(n=Number(e.substring(n,r)),isNaN(n)?oe:(r+=1,r+n>e.length?ae:(e=e.slice(r,r+n),t.C=r+n,e)))}function de(t){t.S=Date.now()+t.I,fe(t,t.I)}function fe(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Gt(d(t.ba,t),e)}function pe(t){t.B&&(a.clearTimeout(t.B),t.B=null)}function ge(t){0==t.j.G||t.J||jn(t.j,t)}function me(t){pe(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,Nt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function ve(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||xe(n.h,t)))if(!t.K&&xe(n.h,t)&&3==n.G){try{var r=n.Da.g.parse(e)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Fn(n),En(n)}Rn(n),Wt(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Gt(d(n.Za,n),6e3));if(1>=_e(n.h)&&n.ca){try{n.ca()}catch(l){}n.ca=void 0}}else Vn(n,11)}else if((t.K||n.g==t)&&Fn(n),!N(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const e=l[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Se(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,Me(r.I,r.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms")),r=n;var o=t;if(r.qa=qn(r,r.J?r.ia:null,r.W),o.K){Ie(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&(pe(a),de(a)),r.g=o}else On(r);0<n.i.length&&kn(n)}else"stop"!=l[0]&&"close"!=l[0]||Vn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Vn(n,7):An(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}zt(4)}catch(l){}}ie.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==wn(t)?e.j():this.Y(t)},ie.prototype.Y=function(t){try{if(t==this.g)t:{const d=wn(this.g);var e=this.g.Ba();const f=this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||_n(this.g)))){this.J||4!=d||7==e||zt(8==e||0>=f?3:2),pe(this);var n=this.g.Z();this.X=n;e:if(ue(this)){var r=_n(this.g);t="";var i=r.length,s=4==wn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){me(this),ge(this);var o="";break e}this.h.i=new a.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(s&&e==i-1)});r.length=0,this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,Qt(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(c)){var u=c;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,Wt(12),me(this),ge(this);break t}Jt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ve(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<o.length;){if(t=he(this,o),t==ae){4==d&&(this.s=4,Wt(14),n=!1),Jt(this.i,this.l,null,"[Incomplete Response]");break}if(t==oe){this.s=4,Wt(15),Jt(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Jt(this.i,this.l,t,null),ve(this,t)}if(ue(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Wt(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),Dn(h),h.M=!0,Wt(11))}}else Jt(this.i,this.l,o,"[Invalid Chunked Response]"),me(this),ge(this)}else Jt(this.i,this.l,o,null),ve(this,o);4==d&&me(this),this.o&&!this.J&&(4==d?jn(this.j,this):(this.o=!1,de(this)))}else xn(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),me(this),ge(this)}}}catch(T){}},ie.prototype.cancel=function(){this.J=!0,me(this)},ie.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(Xt(this.i,this.A),2!=this.L&&(zt(),Wt(17)),me(this),this.s=2,ge(this)):fe(this,this.S-t)};var ye=class{constructor(t,e){this.g=t,this.map=e}};function be(t){this.l=t||10,a.PerformanceNavigationTiming?(t=a.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function we(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _e(t){return t.h?1:t.g?t.g.size:0}function xe(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Se(t,e){t.g?t.g.add(e):t.h=e}function Ie(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ae(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return g(t.i)}function Ee(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(c(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Te(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(c(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function ke(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(c(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=Te(t),r=Ee(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}be.prototype.cancel=function(){if(this.i=Ae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var Ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Le(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ce(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof Ce){this.h=t.h,Oe(this,t.j),this.o=t.o,this.g=t.g,Re(this,t.s),this.l=t.l;var e=t.i,n=new $e;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),De(this,n),this.m=t.m}else t&&(e=String(t).match(Ne))?(this.h=!1,Oe(this,e[1]||"",!0),this.o=je(e[2]||""),this.g=je(e[3]||"",!0),Re(this,e[4]),this.l=je(e[5]||"",!0),De(this,e[6]||"",!0),this.m=je(e[7]||"")):(this.h=!1,this.i=new $e(null,this.h))}function Pe(t){return new Ce(t)}function Oe(t,e,n){t.j=n?je(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Re(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function De(t,e,n){e instanceof $e?(t.i=e,Xe(t.i,t.h)):(n||(e=Be(e,He)),t.i=new $e(e,t.h))}function Me(t,e,n){t.i.set(e,n)}function Fe(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}Ce.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Be(e,Ue,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(Be(e,Ue,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.s,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?ze:qe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",Be(n,We)),t.join("")};var Ue=/[#\/\?@]/g,qe=/[#\?:]/g,ze=/[#\?]/g,He=/[#\?@]/g,We=/#/g;function $e(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ge(t){t.g||(t.g=new Map,t.h=0,t.i&&Le(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ke(t,e){Ge(t),e=Je(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ye(t,e){return Ge(t),e=Je(t,e),t.g.has(e)}function Qe(t,e,n){Ke(t,e),0<n.length&&(t.i=null,t.g.set(Je(t,e),g(n)),t.h+=n.length)}function Je(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Xe(t,e){e&&!t.j&&(Ge(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ke(this,e),Qe(this,n,t))}),t)),t.j=e}function Ze(t,e){const n=new Kt;if(a.Image){const r=new Image;r.onload=f(en,n,"TestLoadImage: loaded",!0,e,r),r.onerror=f(en,n,"TestLoadImage: error",!1,e,r),r.onabort=f(en,n,"TestLoadImage: abort",!1,e,r),r.ontimeout=f(en,n,"TestLoadImage: timeout",!1,e,r),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}function tn(t,e){const n=new Kt,r=new AbortController,i=setTimeout((()=>{r.abort(),en(n,"TestPingServer: timeout",!1,e)}),1e4);fetch(t,{signal:r.signal}).then((t=>{clearTimeout(i),t.ok?en(n,"TestPingServer: ok",!0,e):en(n,"TestPingServer: server error",!1,e)})).catch((()=>{clearTimeout(i),en(n,"TestPingServer: error",!1,e)}))}function en(t,e,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function nn(){this.g=new Pt}function rn(t,e,n){const r=n||"";try{ke(t,(function(t,n){let i=t;l(t)&&(i=Lt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function sn(t){this.l=t.Ub||null,this.j=t.eb||!1}function on(t,e){_t.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function an(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function cn(t){t.readyState=4,t.l=null,t.j=null,t.v=null,ln(t)}function ln(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function un(t){let e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function hn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=un(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Me(t,e,n))}function dn(t){_t.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}t=$e.prototype,t.add=function(t,e){Ge(this),this.i=null,t=Je(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){Ge(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},t.na=function(){Ge(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},t.V=function(t){Ge(this);let e=[];if("string"===typeof t)Ye(this,t)&&(e=e.concat(this.g.get(Je(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return Ge(this),this.i=null,t=Je(this,t),Ye(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t?(t=this.V(t),0<t.length?String(t[0]):e):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")},p(sn,Ot),sn.prototype.g=function(){return new on(this.l,this.j)},sn.prototype.i=function(t){return function(){return t}}({}),p(on,_t),t=on.prototype,t.open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,ln(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||a).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cn(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ln(this)),this.g&&(this.readyState=3,ln(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;an(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?cn(this):ln(this),3==this.readyState&&an(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,cn(this))},t.Qa=function(t){this.g&&(this.response=t,cn(this))},t.ga=function(){this.g&&cn(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(on.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),p(dn,_t);var fn=/^https?$/i,pn=["POST","PUT"];function gn(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,mn(t),yn(t)}function mn(t){t.A||(t.A=!0,xt(t,"complete"),xt(t,"error"))}function vn(t){if(t.h&&"undefined"!=typeof o&&(!t.v[1]||4!=wn(t)||2!=t.Z()))if(t.u&&4==wn(t))It(t.Ea,0,t);else if(xt(t,"readystatechange"),4==wn(t)){t.h=!1;try{const o=t.Z();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var i=String(t.D).match(Ne)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),r=!fn.test(i?i.toLowerCase():"")}n=r}if(n)xt(t,"complete"),xt(t,"success");else{t.m=6;try{var s=2<wn(t)?t.g.statusText:""}catch(c){s=""}t.l=s+" ["+t.Z()+"]",mn(t)}}finally{yn(t)}}}function yn(t,e){if(t.g){bn(t);const r=t.g,i=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||xt(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function bn(t){t.I&&(a.clearTimeout(t.I),t.I=null)}function wn(t){return t.g?t.g.readyState:0}function _n(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(L){return null}}function xn(t){const e={};t=(t.g&&2<=wn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(N(t[r]))continue;var n=B(t[r]);const i=n[0];if(n=n[1],"string"!==typeof n)continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}D(e,(function(t){return t.join(", ")}))}function Sn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function In(t){this.Aa=0,this.i=[],this.j=new Kt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sn("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sn("baseRetryDelayMs",5e3,t),this.cb=Sn("retryDelaySeedMs",1e4,t),this.Wa=Sn("forwardChannelMaxRetries",2,t),this.wa=Sn("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new be(t&&t.concurrentRequestLimit),this.Da=new nn,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function An(t){if(Tn(t),3==t.G){var e=t.U++,n=Pe(t.I);if(Me(n,"SID",t.K),Me(n,"RID",e),Me(n,"TYPE","terminate"),Cn(t,n),e=new ie(t,t.j,e),e.L=2,e.v=Fe(Pe(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(e.v.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=e.v,n=!0),n||(e.g=zn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),de(e)}Un(t)}function En(t){t.g&&(Dn(t),t.g.cancel(),t.g=null)}function Tn(t){En(t),t.u&&(a.clearTimeout(t.u),t.u=null),Fn(t),t.h.cancel(),t.s&&("number"===typeof t.s&&a.clearTimeout(t.s),t.s=null)}function kn(t){if(!we(t.h)&&!t.s){t.s=!0;var e=t.Ga;W||K(),$||(W(),$=!0),G.add(e,t),t.B=0}}function Nn(t,e){return!(_e(t.h)>=t.h.j-(t.s?1:0))&&(t.s?(t.i=e.D.concat(t.i),!0):!(1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa))&&(t.s=Gt(d(t.Ga,t,e),Bn(t,t.B)),t.B++,!0))}function Ln(t,e){var n;n=e?e.l:t.U++;const r=Pe(t.I);Me(r,"SID",t.K),Me(r,"RID",n),Me(r,"AID",t.T),Cn(t,r),t.m&&t.o&&hn(r,t.m,t.o),n=new ie(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=Pn(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Se(t.h,n),ce(n,r,e)}function Cn(t,e){t.H&&R(t.H,(function(t,n){Me(e,n,t)})),t.l&&ke({},(function(t,n){Me(e,n,t)}))}function Pn(t,e,n){n=Math.min(t.i.length,n);var r=t.l?d(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{rn(a,t,"req"+n+"_")}catch(T){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function On(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;W||K(),$||(W(),$=!0),G.add(e,t),t.v=0}}function Rn(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=Gt(d(t.Fa,t),Bn(t,t.v)),t.v++,!0)}function Dn(t){null!=t.A&&(a.clearTimeout(t.A),t.A=null)}function Mn(t){t.g=new ie(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=Pe(t.qa);Me(e,"RID","rpc"),Me(e,"SID",t.K),Me(e,"AID",t.T),Me(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&Me(e,"TO",t.ja),Me(e,"TYPE","xmlhttp"),Cn(t,e),t.m&&t.o&&hn(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=Fe(Pe(e)),n.m=null,n.P=!0,le(n,t)}function Fn(t){null!=t.C&&(a.clearTimeout(t.C),t.C=null)}function jn(t,e){var n=null;if(t.g==e){Fn(t),Dn(t),t.g=null;var r=2}else{if(!xe(t.h,e))return;n=e.D,Ie(t.h,e),r=1}if(0!=t.G)if(e.o)if(1==r){n=e.m?e.m.length:0,e=Date.now()-e.F;var i=t.B;r=Ut(),xt(r,new $t(r,n)),kn(t)}else On(t);else if(i=e.s,3==i||0==i&&0<e.X||!(1==r&&Nn(t,e)||2==r&&Rn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Vn(t,5);break;case 4:Vn(t,10);break;case 3:Vn(t,6);break;default:Vn(t,2)}}function Bn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function Vn(t,e){if(t.j.info("Error code "+e),2==e){var n=d(t.fb,t),r=t.Xa;const e=!r;r=new Ce(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Oe(r,"https"),Fe(r),e?Ze(r.toString(),n):tn(r.toString(),n)}else Wt(2);t.G=0,t.l&&t.l.sa(e),Un(t),Tn(t)}function Un(t){if(t.G=0,t.ka=[],t.l){const e=Ae(t.h);0==e.length&&0==t.i.length||(m(t.ka,e),m(t.ka,t.i),t.h.i.length=0,g(t.i),t.i.length=0),t.l.ra()}}function qn(t,e,n){var r=n instanceof Ce?Pe(n):new Ce(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Re(r,r.s);else{var i=a.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ce(null);r&&Oe(s,r),e&&(s.g=e),i&&Re(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.ya,n&&e&&Me(r,n,e),Me(r,"VER",t.la),Cn(t,r),r}function zn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ca&&!t.pa?new dn(new sn({eb:n})):new dn(t.pa),e.Ha(t.J),e}function Hn(){}function Wn(){}function $n(t,e){_t.call(this),this.g=new In(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!N(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.g.D=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Yn(this)}function Gn(t){Ft.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Kn(){jt.call(this),this.status=1}function Yn(t){this.g=t}t=dn.prototype,t.Ha=function(t){this.J=t},t.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():te.g(),this.v=this.o?Rt(this.o):Rt(te),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(s){return void gn(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=a.FormData&&t instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pn,e,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bn(this),this.u=!0,this.g.send(t),this.u=!1}catch(s){gn(this,s)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,xt(this,"complete"),xt(this,"abort"),yn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),dn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vn(this):this.bb())},t.bb=function(){vn(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ct(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},t=In.prototype,t.la=8,t.G=1,t.connect=function(t,e,n,r){Wt(0),this.W=t,this.H=e||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=qn(this,null,this.W),kn(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new ie(this,this.j,t);let s=this.o;if(this.S&&(s?(s=M(s),j(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(r="__data__"in r.map&&(r=r.map.__data__,"string"===typeof r)?r.length:void 0,void 0===r)break;if(e+=r,4096<e){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Pn(this,i,e),n=Pe(this.I),Me(n,"RID",t),Me(n,"CVER",22),this.D&&Me(n,"X-HTTP-Session-Id",this.D),Cn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(un(s)))+"&"+e:this.m&&hn(n,this.m,s)),Se(this.h,i),this.Ua&&Me(n,"TYPE","init"),this.P?(Me(n,"$req",e),Me(n,"SID","null"),i.T=!0,ce(i,n,null)):ce(i,n,e),this.G=2}}else 3==this.G&&(t?Ln(this,t):0==this.i.length||we(this.h)||Ln(this))},t.Fa=function(){if(this.u=null,Mn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=Gt(d(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),En(this),Mn(this))},t.Za=function(){null!=this.C&&(this.C=null,En(this),Rn(this),Wt(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},t=Hn.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},Wn.prototype.g=function(t,e){return new $n(t,e)},p($n,_t),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){An(this.g)},$n.prototype.o=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.u&&(n={},n.__data__=Lt(t),t=n);e.i.push(new ye(e.Ya++,t)),3==e.G&&kn(e)},$n.prototype.N=function(){this.g.l=null,delete this.j,An(this.g),delete this.g,$n.aa.N.call(this)},p(Gn,Ft),p(Kn,jt),p(Yn,Hn),Yn.prototype.ua=function(){xt(this.g,"a")},Yn.prototype.ta=function(t){xt(this.g,new Gn(t))},Yn.prototype.sa=function(t){xt(this.g,new Kn)},Yn.prototype.ra=function(){xt(this.g,"b")},Wn.prototype.createWebChannel=Wn.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,I=E.createWebChannelTransport=function(){return new Wn},S=E.getStatEventTarget=function(){return Ut()},x=E.Event=Bt,_=E.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,w=E.ErrorCode=ee,ne.COMPLETE="complete",b=E.EventType=ne,Dt.EventType=Mt,Mt.OPEN="a",Mt.CLOSE="b",Mt.ERROR="c",Mt.MESSAGE="d",_t.prototype.listen=_t.prototype.K,y=E.WebChannel=Dt,E.FetchXmlHttpFactory=sn,dn.prototype.listenOnce=dn.prototype.L,dn.prototype.getLastError=dn.prototype.Ka,dn.prototype.getLastErrorCode=dn.prototype.Ba,dn.prototype.getStatus=dn.prototype.Z,dn.prototype.getResponseJson=dn.prototype.Oa,dn.prototype.getResponseText=dn.prototype.oa,dn.prototype.send=dn.prototype.ea,dn.prototype.setWithCredentials=dn.prototype.Ha,v=E.XhrIo=dn}).apply("undefined"!==typeof A?A:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const T="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let N="11.0.2";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L=new d("@firebase/firestore");function C(){return L.logLevel}function P(t){L.setLogLevel(t)}function O(t,...e){if(L.logLevel<=a.DEBUG){const n=e.map(M);L.debug(`Firestore (${N}): ${t}`,...n)}}function R(t,...e){if(L.logLevel<=a.ERROR){const n=e.map(M);L.error(`Firestore (${N}): ${t}`,...n)}}function D(t,...e){if(L.logLevel<=a.WARN){const n=e.map(M);L.warn(`Firestore (${N}): ${t}`,...n)}}function M(t){if("string"==typeof t)return t;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t="Unexpected state"){const e=`FIRESTORE (${N}) INTERNAL ASSERTION FAILED: `+t;throw R(e),new Error(e)}function j(t,e){t||F()}function B(t,e){t||F()}function V(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends i.g{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class W{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(k.UNAUTHENTICATED)))}shutdown(){}}class ${constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class G{constructor(t){this.t=t,this.currentUser=k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){j(void 0===this.o);let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new z;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new z,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new z)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(j("string"==typeof e.accessToken),new H(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return j(null===t||"string"==typeof t),new k(t)}}class K{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=k.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Y{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new K(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(k.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){j(void 0===this.o);const n=t=>{null!=t.error&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,O("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(j("string"==typeof t.token),this.R=t.token,new Q(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function X(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=X(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function tt(t,e){return t<e?-1:t>e?1:0}function et(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}function nt(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(t){return rt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new rt(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?tt(this.nanoseconds,t.nanoseconds):tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new rt(0,0))}static max(){return new it(new rt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t,e,n){void 0===e?e=0:e>t.length&&F(),void 0===n?n=t.length-e:n>t.length-e&&F(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===st.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof st?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ot extends st{construct(t,e,n){return new ot(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new ot(e)}static emptyPath(){return new ot([])}}const at=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends st{construct(t,e,n){return new ct(t,e,n)}static isValidIdentifier(t){return at.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ct(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ct(e)}static emptyPath(){return new ct([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.path=t}static fromPath(t){return new lt(ot.fromString(t))}static fromName(t){return new lt(ot.fromString(t).popFirst(5))}static empty(){return new lt(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===ot.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return ot.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new ot(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}function ht(t){return t.fields.find((t=>2===t.kind))}function dt(t){return t.fields.filter((t=>2!==t.kind))}ut.UNKNOWN_ID=-1;class ft{constructor(t,e){this.fieldPath=t,this.kind=e}}class pt{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new pt(0,vt.min())}}function gt(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=it.fromTimestamp(1e9===r?new rt(n+1,0):new rt(n,r));return new vt(i,lt.empty(),e)}function mt(t){return new vt(t.readTime,t.key,-1)}class vt{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new vt(it.min(),lt.empty(),-1)}static max(){return new vt(it.max(),lt.empty(),-1)}}function yt(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=lt.comparator(t.documentKey,e.documentKey),0!==n?n:tt(t.largestBatchId,e.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}const bt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _t(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==bt)throw t;O("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new xt(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof xt?e:xt.resolve(e)}catch(t){return xt.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):xt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):xt.reject(e)}static resolve(t){return new xt(((e,n)=>{e(t)}))}static reject(t){return new xt(((e,n)=>{n(t)}))}static waitFor(t){return new xt(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=xt.resolve(!1);for(const n of t)e=e.next((t=>t?xt.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new xt(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new xt(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static open(t,e,n,r){try{return new St(e,t.transaction(r,n))}catch(t){throw new Tt(e,t)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new z,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Tt(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Pt(e.target.error);this.V.reject(new Tt(t,n))}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(O("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Nt(e)}}class It{static delete(t){return O("SimpleDb","Removing database:",t),Lt(window.indexedDB.deleteDatabase(t)).toPromise()}static p(){if(!(0,i.zW)())return!1;if(It.S())return!0;const t=(0,i.ZQ)(),e=It.D(t),n=0<e&&e<10,r=At(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static S(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.v)}static C(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(t,e,n){this.name=t,this.version=e,this.F=n,12.2===It.D((0,i.ZQ)())&&R("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(t){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=t=>{const n=t.target.result;e(n)},r.onblocked=()=>{n(new Tt(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=e=>{const r=e.target.error;"VersionError"===r.name?n(new q(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new q(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Tt(t,r))},r.onupgradeneeded=t=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.F.O(e,r.transaction,t.oldVersion,this.version).next((()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(t){this.N=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const i="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.M(t);const e=St.open(this.db,t,i?"readonly":"readwrite",n),s=r(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),xt.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(O("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function At(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Et{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Lt(this.B.delete())}}class Tt extends q{constructor(t,e){super(U.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function kt(t){return"IndexedDbTransactionError"===t.name}class Nt{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(O("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Lt(n)}add(t){return O("SimpleDb","ADD",this.store.name,t,t),Lt(this.store.add(t))}get(t){return Lt(this.store.get(t)).next((e=>(void 0===e&&(e=null),O("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return O("SimpleDb","DELETE",this.store.name,t),Lt(this.store.delete(t))}count(){return O("SimpleDb","COUNT",this.store.name),Lt(this.store.count())}U(t,e){const n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const t=r.getAll(n.range);return new xt(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.W(t,((t,n)=>{e.push(n)})).next((()=>e))}}G(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new xt(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}j(t,e){O("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.H=!1;const r=this.cursor(n);return this.W(r,((t,e,n)=>n.delete()))}J(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.W(r,e)}Y(t){const e=this.cursor({});return new xt(((n,r)=>{e.onerror=t=>{const e=Pt(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next((t=>{t?r.continue():n()})):n()}}))}W(t,e){const n=[];return new xt(((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new Et(i),o=e(i.primaryKey,i.value,s);if(o instanceof xt){const t=o.catch((t=>(s.done(),xt.reject(t))));n.push(t)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>xt.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.H?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Lt(t){return new xt(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Pt(t.target.error);n(e)}}))}let Ct=!1;function Pt(t){const e=It.D((0,i.ZQ)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ct||(Ct=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Ot{constructor(t,e){this.asyncQueue=t,this.Z=e,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){O("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{O("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){kt(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await _t(t)}await this.X(6e4)}))}}class Rt{constructor(t,e){this.localStore=t,this.persistence=e}async ee(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.te(e,t)))}te(t,e){const n=new Set;let r=e,i=!0;return xt.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return O("IndexBackfiller",`Processing collection: ${e}`),this.ne(t,e,r).next((t=>{r-=t,n.add(e)}));i=!1})))).next((()=>e-r))}ne(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((r=>this.localStore.localDocuments.getNextDocuments(t,e,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(t,i).next((()=>this.re(r,n))).next((n=>(O("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>i.size))}))))}re(t,e){let n=t;return e.changes.forEach(((t,e)=>{const r=mt(e);yt(r,n)>0&&(n=r)})),new vt(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function Mt(t){return null==t}function Ft(t){return 0===t&&1/t==-1/0}function jt(t){return"number"==typeof t&&Number.isInteger(t)&&!Ft(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ut(e)),e=Vt(t.get(n),e);return Ut(e)}function Vt(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const e=t.charAt(i);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function Ut(t){return t+""}function qt(t){const e=t.length;if(j(e>=2),2===e)return j(""===t.charAt(0)&&""===t.charAt(1)),ot.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const e=t.indexOf("",s);switch((e<0||e>n)&&F(),t.charAt(e+1)){case"":const n=t.substring(s,e);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=t.substring(s,e),i+="\0";break;case"":i+=t.substring(s,e+1);break;default:F()}s=e+2}return new ot(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt.oe=-1;const zt=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){return[t,Bt(e)]}function Wt(t,e,n){return[t,Bt(e),n]}const $t={},Gt=["prefixPath","collectionGroup","readTime","documentId"],Kt=["prefixPath","collectionGroup","documentId"],Yt=["collectionGroup","readTime","prefixPath","documentId"],Qt=["canonicalId","targetId"],Jt=["targetId","path"],Xt=["path","targetId"],Zt=["collectionId","parent"],te=["indexId","uid"],ee=["uid","sequenceNumber"],ne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],re=["indexId","uid","orderedDocumentKey"],ie=["userId","collectionPath","documentId"],se=["userId","collectionPath","largestBatchId"],oe=["userId","collectionGroup","largestBatchId"],ae=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ce=[...ae,"documentOverlays"],le=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ue=le,he=[...ue,"indexConfiguration","indexState","indexEntries"],de=he,fe=[...he,"globals"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe extends wt{constructor(t,e){super(),this._e=t,this.currentSequenceNumber=e}}function ge(t,e){const n=V(t);return It.C(n._e,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ve(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ye(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e){this.comparator=t,this.root=e||_e.EMPTY}insert(t,e){return new be(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,_e.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_e.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new we(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new we(this.root,t,this.comparator,!1)}getReverseIterator(){return new we(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new we(this.root,t,this.comparator,!0)}}class we{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _e{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:_e.RED,this.left=null!=r?r:_e.EMPTY,this.right=null!=i?i:_e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new _e(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return _e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return _e.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw F();if(this.right.isRed())throw F();const t=this.left.check();if(t!==this.right.check())throw F();return t+(this.isRed()?0:1)}}_e.EMPTY=null,_e.RED=!0,_e.BLACK=!1,_e.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(t,e,n,r,i){return this}insert(t,e,n){return new _e(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class xe{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Se(this.data.getIterator())}getIteratorFrom(t){return new Se(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof xe))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new xe(this.comparator);return e.data=t,e}}class Se{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ie(t){return t.hasNext()?t.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.fields=t,t.sort(ct.comparator)}static empty(){return new Ae([])}unionWith(t){let e=new xe(ct.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ae(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return et(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Ee("Invalid base64 string: "+t):t}}(t);return new ke(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new ke(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ke.EMPTY_BYTE_STRING=new ke("");const Ne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Le(t){if(j(!!t),"string"==typeof t){let e=0;const n=Ne.exec(t);if(j(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Pe(t){return"string"==typeof t?ke.fromBase64String(t):ke.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Re(t){const e=t.mapValue.fields.__previous_value__;return Oe(e)?Re(e):e}function De(t){const e=Le(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,e,n,r,i,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Fe{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Fe("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Fe&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Be={nullValue:"NULL_VALUE"};function Ve(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oe(t)?4:rn(t)?9007199254740991:en(t)?10:11:F()}function Ue(t,e){if(t===e)return!0;const n=Ve(t);if(n!==Ve(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return De(t).isEqual(De(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Le(t.timestampValue),r=Le(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Pe(t.bytesValue).isEqual(Pe(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ce(t.geoPointValue.latitude)===Ce(e.geoPointValue.latitude)&&Ce(t.geoPointValue.longitude)===Ce(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ce(t.integerValue)===Ce(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ce(t.doubleValue),r=Ce(e.doubleValue);return n===r?Ft(n)===Ft(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return et(t.arrayValue.values||[],e.arrayValue.values||[],Ue);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(me(n)!==me(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ue(n[i],r[i])))return!1;return!0}(t,e);default:return F()}}function qe(t,e){return void 0!==(t.values||[]).find((t=>Ue(t,e)))}function ze(t,e){if(t===e)return 0;const n=Ve(t),r=Ve(e);if(n!==r)return tt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tt(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ce(t.integerValue||t.doubleValue),r=Ce(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return He(t.timestampValue,e.timestampValue);case 4:return He(De(t),De(e));case 5:return tt(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Pe(t),r=Pe(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=tt(n[i],r[i]);if(0!==t)return t}return tt(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=tt(Ce(t.latitude),Ce(e.latitude));return 0!==n?n:tt(Ce(t.longitude),Ce(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return We(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,r,i,s;const o=t.fields||{},a=e.fields||{},c=null===(n=o.value)||void 0===n?void 0:n.arrayValue,l=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=tt((null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0,(null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:We(c,l)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===je.mapValue&&e===je.mapValue)return 0;if(t===je.mapValue)return 1;if(e===je.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=tt(r[o],s[o]);if(0!==t)return t;const e=ze(n[r[o]],i[s[o]]);if(0!==e)return e}return tt(r.length,s.length)}(t.mapValue,e.mapValue);default:throw F()}}function He(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return tt(t,e);const n=Le(t),r=Le(e),i=tt(n.seconds,r.seconds);return 0!==i?i:tt(n.nanos,r.nanos)}function We(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=ze(n[i],r[i]);if(t)return t}return tt(n.length,r.length)}function $e(t){return Ge(t)}function Ge(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Le(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Pe(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return lt.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Ge(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Ge(t.fields[i])}`;return n+"}"}(t.mapValue):F()}function Ke(t){switch(Ve(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Re(t);return e?16+Ke(e):16;case 5:return 2*t.stringValue.length;case 6:return Pe(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+Ke(e)),0)}(t.arrayValue);case 10:case 11:return function(t){let e=0;return ve(t.fields,((t,n)=>{e+=t.length+Ke(n)})),e}(t.mapValue);default:throw F()}}function Ye(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qe(t){return!!t&&"integerValue"in t}function Je(t){return!!t&&"arrayValue"in t}function Xe(t){return!!t&&"nullValue"in t}function Ze(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tn(t){return!!t&&"mapValue"in t}function en(t){var e,n;return"__vector__"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function nn(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ve(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=nn(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nn(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rn(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}const sn={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function on(t){return"nullValue"in t?Be:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ye(Fe.empty(),lt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?en(t)?sn:{mapValue:{}}:F()}function an(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ye(Fe.empty(),lt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?sn:"mapValue"in t?en(t)?{mapValue:{}}:je:F()}function cn(t,e){const n=ze(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ln(t,e){const n=ze(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.value=t}static empty(){return new un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!tn(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=nn(e)}setAll(t){let e=ct.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=nn(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());tn(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ue(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];tn(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){ve(e,((e,n)=>t[e]=n));for(const r of n)delete t[r]}clone(){return new un(nn(this.value))}}function hn(t){const e=[];return ve(t.fields,((t,n)=>{const r=new ct([t]);if(tn(n)){const t=hn(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new Ae(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class dn{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new dn(t,0,it.min(),it.min(),it.min(),un.empty(),0)}static newFoundDocument(t,e,n,r){return new dn(t,1,e,it.min(),n,r,0)}static newNoDocument(t,e){return new dn(t,2,e,it.min(),it.min(),un.empty(),0)}static newUnknownDocument(t,e){return new dn(t,3,e,it.min(),it.min(),un.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(it.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof dn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t,e){this.position=t,this.inclusive=e}}function pn(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?lt.comparator(lt.fromName(o.referenceValue),n.key):ze(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ue(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,e="asc"){this.field=t,this.dir=e}}function vn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{}class bn extends yn{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Nn(t,e,n):"array-contains"===e?new On(t,n):"in"===e?new Rn(t,n):"not-in"===e?new Dn(t,n):"array-contains-any"===e?new Mn(t,n):new bn(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ln(t,n):new Cn(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(ze(e,this.value)):null!==e&&Ve(this.value)===Ve(e)&&this.matchesComparison(ze(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends yn{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new wn(t,e)}matches(t){return _n(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _n(t){return"and"===t.op}function xn(t){return"or"===t.op}function Sn(t){return In(t)&&_n(t)}function In(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function An(t){if(t instanceof bn)return t.field.canonicalString()+t.op.toString()+$e(t.value);if(Sn(t))return t.filters.map((t=>An(t))).join(",");{const e=t.filters.map((t=>An(t))).join(",");return`${t.op}(${e})`}}function En(t,e){return t instanceof bn?function(t,e){return e instanceof bn&&t.op===e.op&&t.field.isEqual(e.field)&&Ue(t.value,e.value)}(t,e):t instanceof wn?function(t,e){return e instanceof wn&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&En(n,e.filters[r])),!0)}(t,e):void F()}function Tn(t,e){const n=t.filters.concat(e);return wn.create(n,t.op)}function kn(t){return t instanceof bn?function(t){return`${t.field.canonicalString()} ${t.op} ${$e(t.value)}`}(t):t instanceof wn?function(t){return t.op.toString()+" {"+t.getFilters().map(kn).join(" ,")+"}"}(t):"Filter"}class Nn extends bn{constructor(t,e,n){super(t,e,n),this.key=lt.fromName(n.referenceValue)}matches(t){const e=lt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ln extends bn{constructor(t,e){super(t,"in",e),this.keys=Pn("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Cn extends bn{constructor(t,e){super(t,"not-in",e),this.keys=Pn("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Pn(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>lt.fromName(t.referenceValue)))}class On extends bn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Je(e)&&qe(e.arrayValue,this.value)}}class Rn extends bn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&qe(this.value.arrayValue,e)}}class Dn extends bn{constructor(t,e){super(t,"not-in",e)}matches(t){if(qe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!qe(this.value.arrayValue,e)}}class Mn extends bn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Je(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>qe(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function jn(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Fn(t,e,n,r,i,s,o)}function Bn(t){const e=V(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>An(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Mt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>$e(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>$e(t))).join(",")),e.ue=t}return e.ue}function Vn(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!En(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gn(t.startAt,e.startAt)&&gn(t.endAt,e.endAt)}function Un(t){return lt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function qn(t,e){return t.filters.filter((t=>t instanceof bn&&t.field.isEqual(e)))}function zn(t,e,n){let r=Be,i=!0;for(const s of qn(t,e)){let t=Be,e=!0;switch(s.op){case"<":case"<=":t=on(s.value);break;case"==":case"in":case">=":t=s.value;break;case">":t=s.value,e=!1;break;case"!=":case"not-in":t=Be}cn({value:r,inclusive:i},{value:t,inclusive:e})<0&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];cn({value:r,inclusive:i},{value:t,inclusive:n.inclusive})<0&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}function Hn(t,e,n){let r=je,i=!0;for(const s of qn(t,e)){let t=je,e=!0;switch(s.op){case">=":case">":t=an(s.value),e=!1;break;case"==":case"in":case"<=":t=s.value;break;case"<":t=s.value,e=!1;break;case"!=":case"not-in":t=je}ln({value:r,inclusive:i},{value:t,inclusive:e})>0&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];ln({value:r,inclusive:i},{value:t,inclusive:n.inclusive})>0&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $n(t,e,n,r,i,s,o,a){return new Wn(t,e,n,r,i,s,o,a)}function Gn(t){return new Wn(t)}function Kn(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Yn(t){return null!==t.collectionGroup}function Qn(t){const e=V(t);if(null===e.ce){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new xe(ct.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.ce.push(new mn(r,n))})),t.has(ct.keyField().canonicalString())||e.ce.push(new mn(ct.keyField(),n))}return e.ce}function Jn(t){const e=V(t);return e.le||(e.le=Xn(e,Qn(t))),e.le}function Xn(t,e){if("F"===t.limitType)return jn(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new mn(t.field,e)}));const n=t.endAt?new fn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fn(t.startAt.position,t.startAt.inclusive):null;return jn(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zn(t,e){const n=t.filters.concat([e]);return new Wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tr(t,e,n){return new Wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function er(t,e){return Vn(Jn(t),Jn(e))&&t.limitType===e.limitType}function nr(t){return`${Bn(Jn(t))}|lt:${t.limitType}`}function rr(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>kn(t))).join(", ")}]`),Mt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>$e(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>$e(t))).join(",")),`Target(${e})`}(Jn(t))}; limitType=${t.limitType})`}function ir(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):lt.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Qn(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=pn(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Qn(t),e))&&!(t.endAt&&!function(t,e,n){const r=pn(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Qn(t),e))}(t,e)}function sr(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function or(t){return(e,n)=>{let r=!1;for(const i of Qn(t)){const t=ar(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function ar(t,e,n){const r=t.field.isKeyField()?lt.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ze(r,i):F()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ve(this.inner,((e,n)=>{for(const[r,i]of n)t(r,i)}))}isEmpty(){return ye(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new be(lt.comparator);function ur(){return lr}const hr=new be(lt.comparator);function dr(...t){let e=hr;for(const n of t)e=e.insert(n.key,n);return e}function fr(t){let e=hr;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function pr(){return mr()}function gr(){return mr()}function mr(){return new cr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const vr=new be(lt.comparator),yr=new xe(lt.comparator);function br(...t){let e=yr;for(const n of t)e=e.add(n);return e}const wr=new xe(tt);function _r(){return wr}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ft(e)?"-0":e}}function Sr(t){return{integerValue:""+t}}function Ir(t,e){return jt(e)?Sr(e):xr(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this._=void 0}}function Er(t,e,n){return t instanceof Nr?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Oe(e)&&(e=Re(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Lr?Cr(t,e):t instanceof Pr?Or(t,e):function(t,e){const n=kr(t,e),r=Dr(n)+Dr(t.Pe);return Qe(n)&&Qe(t.Pe)?Sr(r):xr(t.serializer,r)}(t,e)}function Tr(t,e,n){return t instanceof Lr?Cr(t,e):t instanceof Pr?Or(t,e):n}function kr(t,e){return t instanceof Rr?function(t){return Qe(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class Nr extends Ar{}class Lr extends Ar{constructor(t){super(),this.elements=t}}function Cr(t,e){const n=Mr(e);for(const r of t.elements)n.some((t=>Ue(t,r)))||n.push(r);return{arrayValue:{values:n}}}class Pr extends Ar{constructor(t){super(),this.elements=t}}function Or(t,e){let n=Mr(e);for(const r of t.elements)n=n.filter((t=>!Ue(t,r)));return{arrayValue:{values:n}}}class Rr extends Ar{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Dr(t){return Ce(t.integerValue||t.doubleValue)}function Mr(t){return Je(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t,e){this.field=t,this.transform=e}}function jr(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Lr&&e instanceof Lr||t instanceof Pr&&e instanceof Pr?et(t.elements,e.elements,Ue):t instanceof Rr&&e instanceof Rr?Ue(t.Pe,e.Pe):t instanceof Nr&&e instanceof Nr}(t.transform,e.transform)}class Br{constructor(t,e){this.version=t,this.transformResults=e}}class Vr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Vr}static exists(t){return new Vr(void 0,t)}static updateTime(t){return new Vr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ur(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class qr{}function zr(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Zr(t.key,Vr.none()):new Kr(t.key,t.data,Vr.none());{const n=t.data,r=un.empty();let i=new xe(ct.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Yr(t.key,r,new Ae(i.toArray()),Vr.none())}}function Hr(t,e,n){t instanceof Kr?function(t,e,n){const r=t.value.clone(),i=Jr(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(t,e,n){if(!Ur(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Jr(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Qr(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Wr(t,e,n,r){return t instanceof Kr?function(t,e,n,r){if(!Ur(t.precondition,e))return n;const i=t.value.clone(),s=Xr(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(t,e,n,r){if(!Ur(t.precondition,e))return n;const i=Xr(t.fieldTransforms,r,e),s=e.data;return s.setAll(Qr(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Ur(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function $r(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=kr(r.transform,t||null);null!=i&&(null===n&&(n=un.empty()),n.set(r.field,i))}return n||null}function Gr(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&et(t,e,((t,e)=>jr(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kr extends qr{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yr extends qr{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qr(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Jr(t,e,n){const r=new Map;j(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Tr(o,a,n[i]))}return r}function Xr(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,Er(t,s,e))}return r}class Zr extends qr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ti extends qr{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&Hr(e,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Wr(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Wr(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=gr();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=zr(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(it.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),br())}isEqual(t){return this.batchId===t.batchId&&et(this.mutations,t.mutations,((t,e)=>Gr(t,e)))&&et(this.baseMutations,t.baseMutations,((t,e)=>Gr(t,e)))}}class ni{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){j(t.mutations.length===n.length);let r=function(){return vr}();const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ni(t,e,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ii{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,oi;function ai(t){switch(t){default:return F();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function ci(t){if(void 0===t)return R("GRPC error has no .code"),U.UNKNOWN;switch(t){case si.OK:return U.OK;case si.CANCELLED:return U.CANCELLED;case si.UNKNOWN:return U.UNKNOWN;case si.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case si.INTERNAL:return U.INTERNAL;case si.UNAVAILABLE:return U.UNAVAILABLE;case si.UNAUTHENTICATED:return U.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case si.NOT_FOUND:return U.NOT_FOUND;case si.ALREADY_EXISTS:return U.ALREADY_EXISTS;case si.PERMISSION_DENIED:return U.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case si.ABORTED:return U.ABORTED;case si.OUT_OF_RANGE:return U.OUT_OF_RANGE;case si.UNIMPLEMENTED:return U.UNIMPLEMENTED;case si.DATA_LOSS:return U.DATA_LOSS;default:return F()}}(oi=si||(si={}))[oi.OK=0]="OK",oi[oi.CANCELLED=1]="CANCELLED",oi[oi.UNKNOWN=2]="UNKNOWN",oi[oi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oi[oi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oi[oi.NOT_FOUND=5]="NOT_FOUND",oi[oi.ALREADY_EXISTS=6]="ALREADY_EXISTS",oi[oi.PERMISSION_DENIED=7]="PERMISSION_DENIED",oi[oi.UNAUTHENTICATED=16]="UNAUTHENTICATED",oi[oi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oi[oi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oi[oi.ABORTED=10]="ABORTED",oi[oi.OUT_OF_RANGE=11]="OUT_OF_RANGE",oi[oi.UNIMPLEMENTED=12]="UNIMPLEMENTED",oi[oi.INTERNAL=13]="INTERNAL",oi[oi.UNAVAILABLE=14]="UNAVAILABLE",oi[oi.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let li=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new f([4294967295,4294967295],0);function di(t){const e=ui().encode(t),n=new p;return n.update(e),new Uint8Array(n.digest())}function fi(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new f([n,r],0),new f([i,s],0)]}class pi{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new gi(`Invalid padding: ${e}`);if(n<0)throw new gi(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new gi(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new gi(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ie=f.fromNumber(this.Te)}Ee(t,e,n){let r=t.add(e.multiply(f.fromNumber(n)));return 1===r.compare(hi)&&(r=new f([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=di(t),[n,r]=fi(e);for(let i=0;i<this.hashCount;i++){const t=this.Ee(n,r,i);if(!this.de(t))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new pi(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=di(t),[n,r]=fi(e);for(let i=0;i<this.hashCount;i++){const t=this.Ee(n,r,i);this.Ae(t)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,vi.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new mi(it.min(),r,new be(tt),ur(),br())}}class vi{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new vi(n,e,br(),br(),br())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class bi{constructor(t,e){this.targetId=t,this.me=e}}class wi{constructor(t,e,n=ke.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class _i{constructor(){this.fe=0,this.ge=Ii(),this.pe=ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=br(),e=br(),n=br();return this.ge.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:F()}})),new vi(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=Ii()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,j(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xi{constructor(t){this.Le=t,this.Be=new Map,this.ke=ur(),this.qe=Si(),this.Qe=Si(),this.Ke=new be(tt)}$e(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(e,t.Ve):this.We(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.We(e,t.key,t.Ve)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.je(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.De(t.resumeToken));break;default:F()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.me.count,r=this.Ye(e);if(r){const i=r.target;if(Un(i))if(0===n){const t=new lt(i.path);this.We(e,t,dn.newNoDocument(t,it.min()))}else j(1===n);else{const r=this.Ze(e);if(r!==n){const n=this.Xe(t),i=n?this.et(n,t,r):1;if(0!==i){this.He(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}null==li||li.tt(function(t,e,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==r?void 0:r.mightContain(t))&&void 0!==e&&e}}),h}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r,t.me,this.Le.nt(),n,i))}}}}Xe(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=Pe(n).toUint8Array()}catch(t){if(t instanceof Ee)return D("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new pi(s,r,i)}catch(t){return D(t instanceof gi?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.me.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),r++)})),r}it(t){const e=new Map;this.Be.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Un(i.target)){const e=new lt(i.target.path);this.st(e).has(r)||this.ot(r,e)||this.We(r,e,dn.newNoDocument(e,t))}n.be&&(e.set(r,n.ve()),n.Ce())}}));let n=br();this.Qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.ke.forEach(((e,n)=>n.setReadTime(t)));const r=new mi(t,e,this.Ke,this.ke,n);return this.ke=ur(),this.qe=Si(),this.Qe=Si(),this.Ke=new be(tt),r}Ue(t,e){if(!this.je(t))return;const n=this.ot(t,e.key)?2:0;this.ze(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t)),this.Qe=this.Qe.insert(e.key,this._t(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const r=this.ze(t);this.ot(t,e)?r.Fe(e,1):r.Me(e),this.Qe=this.Qe.insert(e,this._t(e).delete(t)),this.Qe=this.Qe.insert(e,this._t(e).add(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let e=this.Be.get(t);return e||(e=new _i,this.Be.set(t,e)),e}_t(t){let e=this.Qe.get(t);return e||(e=new xe(tt),this.Qe=this.Qe.insert(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new xe(tt),this.qe=this.qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||O("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ut(t)}He(t){this.Be.set(t,new _i),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}ot(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Si(){return new be(lt.comparator)}function Ii(){return new be(lt.comparator)}const Ai=(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"};return t})(),Ei=(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return t})(),Ti=(()=>{const t={and:"AND",or:"OR"};return t})();class ki{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ni(t,e){return t.useProto3Json||Mt(e)?e:{value:e}}function Li(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ci(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Pi(t,e){return Li(t,e.toTimestamp())}function Oi(t){return j(!!t),it.fromTimestamp(function(t){const e=Le(t);return new rt(e.seconds,e.nanos)}(t))}function Ri(t,e){return Di(t,e).canonicalString()}function Di(t,e){const n=function(t){return new ot(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function Mi(t){const e=ot.fromString(t);return j(cs(e)),e}function Fi(t,e){return Ri(t.databaseId,e.path)}function ji(t,e){const n=Mi(e);if(n.get(1)!==t.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lt(qi(n))}function Bi(t,e){return Ri(t.databaseId,e)}function Vi(t){const e=Mi(t);return 4===e.length?ot.emptyPath():qi(e)}function Ui(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qi(t){return j(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function zi(t,e,n){return{name:Fi(t,e),fields:n.value.mapValue.fields}}function Hi(t,e,n){const r=ji(t,e.name),i=Oi(e.updateTime),s=e.createTime?Oi(e.createTime):it.min(),o=new un({mapValue:{fields:e.fields}}),a=dn.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Wi(t,e){return"found"in e?function(t,e){j(!!e.found),e.found.name,e.found.updateTime;const n=ji(t,e.found.name),r=Oi(e.found.updateTime),i=e.found.createTime?Oi(e.found.createTime):it.min(),s=new un({mapValue:{fields:e.found.fields}});return dn.newFoundDocument(n,r,i,s)}(t,e):"missing"in e?function(t,e){j(!!e.missing),j(!!e.readTime);const n=ji(t,e.missing),r=Oi(e.readTime);return dn.newNoDocument(n,r)}(t,e):F()}function $i(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(j(void 0===e||"string"==typeof e),ke.fromBase64String(e||"")):(j(void 0===e||e instanceof Buffer||e instanceof Uint8Array),ke.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?U.UNKNOWN:ci(t.code);return new q(e,t.message||"")}(o);n=new wi(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ji(t,r.document.name),s=Oi(r.document.updateTime),o=r.document.createTime?Oi(r.document.createTime):it.min(),a=new un({mapValue:{fields:r.document.fields}}),c=dn.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new yi(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ji(t,r.document),s=r.readTime?Oi(r.readTime):it.min(),o=dn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new yi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ji(t,r.document),s=r.removedTargetIds||[];n=new yi([],s,i,null)}else{if(!("filter"in e))return F();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new ii(r,i),o=t.targetId;n=new bi(o,s)}}return n}function Gi(t,e){let n;if(e instanceof Kr)n={update:zi(t,e.key,e.value)};else if(e instanceof Zr)n={delete:Fi(t,e.key)};else if(e instanceof Yr)n={update:zi(t,e.key,e.data),updateMask:as(e.fieldMask)};else{if(!(e instanceof ti))return F();n={verify:Fi(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Nr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pr)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rr)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw F()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Pi(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:F()}(t,e.precondition)),n}function Ki(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?Vr.updateTime(Oi(t.updateTime)):void 0!==t.exists?Vr.exists(t.exists):Vr.none()}(e.currentDocument):Vr.none(),r=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)j("REQUEST_TIME"===e.setToServerValue),n=new Nr;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new Lr(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new Pr(t)}else"increment"in e?n=new Rr(t,e.increment):F();const r=ct.fromServerFormat(e.fieldPath);return new Fr(r,n)}(t,e))):[];if(e.update){e.update.name;const i=ji(t,e.update.name),s=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new Ae(e.map((t=>ct.fromServerFormat(t))))}(e.updateMask);return new Yr(i,s,t,n,r)}return new Kr(i,s,n,r)}if(e.delete){const r=ji(t,e.delete);return new Zr(r,n)}if(e.verify){const r=ji(t,e.verify);return new ti(r,n)}return F()}function Yi(t,e){return t&&t.length>0?(j(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Oi(t.updateTime):Oi(e);return n.isEqual(it.min())&&(n=Oi(e)),new Br(n,t.transformResults||[])}(t,e)))):[]}function Qi(t,e){return{documents:[Bi(t,e.path)]}}function Ji(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bi(t,i);const s=function(t){if(0!==t.length)return os(wn.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:is(t.field),direction:es(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ni(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ct:n,parent:i}}function Xi(t){let e=Vi(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){j(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=ts(t);return e instanceof wn&&Sn(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new mn(ss(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Mt(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new fn(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new fn(n,e)}(n.endAt)),$n(e,i,o,s,a,"F",c,l)}function Zi(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}function ts(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=ss(t.unaryFilter.field);return bn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=ss(t.unaryFilter.field);return bn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ss(t.unaryFilter.field);return bn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ss(t.unaryFilter.field);return bn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(t):void 0!==t.fieldFilter?function(t){return bn.create(ss(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return wn.create(t.compositeFilter.filters.map((t=>ts(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return F()}}(t.compositeFilter.op))}(t):F()}function es(t){return Ai[t]}function ns(t){return Ei[t]}function rs(t){return Ti[t]}function is(t){return{fieldPath:t.canonicalString()}}function ss(t){return ct.fromServerFormat(t.fieldPath)}function os(t){return t instanceof bn?function(t){if("=="===t.op){if(Ze(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NAN"}};if(Xe(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ze(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NAN"}};if(Xe(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(t.field),op:ns(t.op),value:t.value}}}(t):t instanceof wn?function(t){const e=t.getFilters().map((t=>os(t)));return 1===e.length?e[0]:{compositeFilter:{op:rs(t.op),filters:e}}}(t):F()}function as(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function cs(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,e,n,r,i=it.min(),s=it.min(),o=ke.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new ls(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t){this.ht=t}}function hs(t,e){let n;if(e.document)n=Hi(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=lt.fromSegments(e.noDocument.path),r=gs(e.noDocument.readTime);n=dn.newNoDocument(t,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{const t=lt.fromSegments(e.unknownDocument.path),r=gs(e.unknownDocument.version);n=dn.newUnknownDocument(t,r)}}return e.readTime&&n.setReadTime(function(t){const e=new rt(t[0],t[1]);return it.fromTimestamp(e)}(e.readTime)),n}function ds(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fs(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(t,e){return{name:Fi(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Li(t,e.version.toTimestamp()),createTime:Li(t,e.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ps(e.version)};else{if(!e.isUnknownDocument())return F();r.unknownDocument={path:n.path.toArray(),version:ps(e.version)}}return r}function fs(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ps(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gs(t){const e=new rt(t.seconds,t.nanoseconds);return it.fromTimestamp(e)}function ms(t,e){const n=(e.baseMutations||[]).map((e=>Ki(t.ht,e)));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];if(s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform){const n=e.mutations[s+1];t.updateTransforms=n.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((e=>Ki(t.ht,e))),i=rt.fromMillis(e.localWriteTimeMs);return new ei(e.batchId,i,n,r)}function vs(t){const e=gs(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?gs(t.lastLimboFreeSnapshotVersion):it.min();let r;return r=function(t){return void 0!==t.documents}(t.query)?function(t){return j(1===t.documents.length),Jn(Gn(Vi(t.documents[0])))}(t.query):function(t){return Jn(Xi(t))}(t.query),new ls(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ke.fromBase64String(t.resumeToken))}function ys(t,e){const n=ps(e.snapshotVersion),r=ps(e.lastLimboFreeSnapshotVersion);let i;i=Un(e.target)?Qi(t.ht,e.target):Ji(t.ht,e.target).ct;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bn(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bs(t){const e=Xi({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?tr(e,e.limit,"L"):e}function ws(t,e){return new ri(e.largestBatchId,Ki(t.ht,e.overlayMutation))}function _s(t,e){const n=e.path.lastSegment();return[t,Bt(e.path.popLast()),n]}function xs(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ps(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{getBundleMetadata(t,e){return Is(t).get(e).next((t=>{if(t)return function(t){return{id:t.bundleId,createTime:gs(t.createTime),version:t.version}}(t)}))}saveBundleMetadata(t,e){return Is(t).put(function(t){return{bundleId:t.id,createTime:ps(Oi(t.createTime)),version:t.version}}(e))}getNamedQuery(t,e){return As(t).get(e).next((t=>{if(t)return function(t){return{name:t.name,query:bs(t.bundledQuery),readTime:gs(t.readTime)}}(t)}))}saveNamedQuery(t,e){return As(t).put(function(t){return{name:t.name,readTime:ps(Oi(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function Is(t){return ge(t,"bundles")}function As(t){return ge(t,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,e){this.serializer=t,this.userId=e}static Pt(t,e){const n=e.uid||"";return new Es(t,n)}getOverlay(t,e){return Ts(t).get(_s(this.userId,e)).next((t=>t?ws(this.serializer,t):null))}getOverlays(t,e){const n=pr();return xt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const r=[];return n.forEach(((n,i)=>{const s=new ri(e,i);r.push(this.Tt(t,s))})),xt.waitFor(r)}removeOverlaysForBatchId(t,e,n){const r=new Set;e.forEach((t=>r.add(Bt(t.getCollectionPath()))));const i=[];return r.forEach((e=>{const r=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);i.push(Ts(t).j("collectionPathOverlayIndex",r))})),xt.waitFor(i)}getOverlaysForCollection(t,e,n){const r=pr(),i=Bt(e),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ts(t).U("collectionPathOverlayIndex",s).next((t=>{for(const e of t){const t=ws(this.serializer,e);r.set(t.getKey(),t)}return r}))}getOverlaysForCollectionGroup(t,e,n,r){const i=pr();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Ts(t).J({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=ws(this.serializer,e);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}Tt(t,e){return Ts(t).put(function(t,e,n){const[r,i,s]=_s(e,n.mutation.key);return{userId:e,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Gi(t.ht,n.mutation)}}(this.serializer,this.userId,e))}}function Ts(t){return ge(t,"documentOverlays")}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{It(t){return ge(t,"globals")}getSessionToken(t){return this.It(t).get("sessionToken").next((t=>{const e=null==t?void 0:t.value;return e?ke.fromUint8Array(e):ke.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.It(t).put({name:"sessionToken",value:e.toUint8Array()})}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){}Et(t,e){this.dt(t,e),e.At()}dt(t,e){if("nullValue"in t)this.Rt(e,5);else if("booleanValue"in t)this.Rt(e,10),e.Vt(t.booleanValue?1:0);else if("integerValue"in t)this.Rt(e,15),e.Vt(Ce(t.integerValue));else if("doubleValue"in t){const n=Ce(t.doubleValue);isNaN(n)?this.Rt(e,13):(this.Rt(e,15),Ft(n)?e.Vt(0):e.Vt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Rt(e,20),"string"==typeof n&&(n=Le(n)),e.ft(`${n.seconds||""}`),e.Vt(n.nanos||0)}else if("stringValue"in t)this.gt(t.stringValue,e),this.yt(e);else if("bytesValue"in t)this.Rt(e,30),e.wt(Pe(t.bytesValue)),this.yt(e);else if("referenceValue"in t)this.St(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Rt(e,45),e.Vt(n.latitude||0),e.Vt(n.longitude||0)}else"mapValue"in t?rn(t)?this.Rt(e,Number.MAX_SAFE_INTEGER):en(t)?this.bt(t.mapValue,e):(this.Dt(t.mapValue,e),this.yt(e)):"arrayValue"in t?(this.vt(t.arrayValue,e),this.yt(e)):F()}gt(t,e){this.Rt(e,25),this.Ct(t,e)}Ct(t,e){e.ft(t)}Dt(t,e){const n=t.fields||{};this.Rt(e,55);for(const r of Object.keys(n))this.gt(r,e),this.dt(n[r],e)}bt(t,e){var n,r;const i=t.fields||{};this.Rt(e,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Rt(e,15),e.Vt(Ce(o)),this.gt(s,e),this.dt(i[s],e)}vt(t,e){const n=t.values||[];this.Rt(e,50);for(const r of n)this.dt(r,e)}St(t,e){this.Rt(e,37),lt.fromName(t).path.forEach((t=>{this.Rt(e,60),this.Ct(t,e)}))}Rt(t,e){t.Vt(e)}yt(t){t.Vt(2)}}function Ls(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Cs(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const r=Ls(255&t[n]);if(e+=r,8!==r)break}return e}(t);return Math.ceil(e/8)}Ns.Ft=new Ns;class Ps{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.xt(n.value),n=e.next();this.Ot()}Nt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Lt(n.value),n=e.next();this.Bt()}kt(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.xt(t);else if(t<2048)this.xt(960|t>>>6),this.xt(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.xt(480|t>>>12),this.xt(128|63&t>>>6),this.xt(128|63&t);else{const t=e.codePointAt(0);this.xt(240|t>>>18),this.xt(128|63&t>>>12),this.xt(128|63&t>>>6),this.xt(128|63&t)}}this.Ot()}qt(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Lt(t);else if(t<2048)this.Lt(960|t>>>6),this.Lt(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Lt(480|t>>>12),this.Lt(128|63&t>>>6),this.Lt(128|63&t);else{const t=e.codePointAt(0);this.Lt(240|t>>>18),this.Lt(128|63&t>>>12),this.Lt(128|63&t>>>6),this.Lt(128|63&t)}}this.Bt()}Qt(t){const e=this.Kt(t),n=Cs(e);this.$t(1+n),this.buffer[this.position++]=255&n;for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Ut(t){const e=this.Kt(t),n=Cs(e);this.$t(1+n),this.buffer[this.position++]=~(255&n);for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(t){this.$t(t.length),this.buffer.set(t,this.position),this.position+=t.length}Ht(){return this.buffer.slice(0,this.position)}Kt(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let r=1;r<e.length;++r)e[r]^=n?255:0;return e}xt(t){const e=255&t;0===e?(this.Gt(0),this.Gt(255)):255===e?(this.Gt(255),this.Gt(0)):this.Gt(e)}Lt(t){const e=255&t;0===e?(this.jt(0),this.jt(255)):255===e?(this.jt(255),this.jt(0)):this.jt(t)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(t){this.$t(1),this.buffer[this.position++]=t}jt(t){this.$t(1),this.buffer[this.position++]=~t}$t(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Os{constructor(t){this.Jt=t}wt(t){this.Jt.Mt(t)}ft(t){this.Jt.kt(t)}Vt(t){this.Jt.Qt(t)}At(){this.Jt.Wt()}}class Rs{constructor(t){this.Jt=t}wt(t){this.Jt.Nt(t)}ft(t){this.Jt.qt(t)}Vt(t){this.Jt.Ut(t)}At(){this.Jt.zt()}}class Ds{constructor(){this.Jt=new Ps,this.Yt=new Os(this.Jt),this.Zt=new Rs(this.Jt)}seed(t){this.Jt.seed(t)}Xt(t){return 0===t?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,e,n,r){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=r}en(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Ms(this.indexId,this.documentKey,this.arrayValue,n)}}function Fs(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=js(t.arrayValue,e.arrayValue),0!==n?n:(n=js(t.directionalValue,e.directionalValue),0!==n?n:lt.comparator(t.documentKey,e.documentKey)))}function js(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t){this.tn=new xe(((t,e)=>ct.comparator(t.field,e.field))),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.nn=t.orderBy,this.rn=[];for(const e of t.filters){const t=e;t.isInequality()?this.tn=this.tn.add(t):this.rn.push(t)}}get sn(){return this.tn.size>1}on(t){if(j(t.collectionGroup===this.collectionId),this.sn)return!1;const e=ht(t);if(void 0!==e&&!this._n(e))return!1;const n=dt(t);let r=new Set,i=0,s=0;for(;i<n.length&&this._n(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.tn.size>0){const t=this.tn.getIterator().getNext();if(!r.has(t.field.canonicalString())){const e=n[i];if(!this.an(t,e)||!this.un(this.nn[s++],e))return!1}++i}for(;i<n.length;++i){const t=n[i];if(s>=this.nn.length||!this.un(this.nn[s++],t))return!1}return!0}cn(){if(this.sn)return null;let t=new xe(ct.comparator);const e=[];for(const n of this.rn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)e.push(new ft(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new ft(n.field,0))}for(const n of this.nn)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new ft(n.field,"asc"===n.dir?0:1)));return new ut(ut.UNKNOWN_ID,this.collectionId,e,pt.empty())}_n(t){for(const e of this.rn)if(this.an(e,t))return!0;return!1}an(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}un(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(t){var e,n;if(j(t instanceof bn||t instanceof wn),t instanceof bn){if(t instanceof Rn){const r=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>bn.create(t.field,"==",e))))||[];return wn.create(r,"or")}return t}const r=t.filters.map((t=>Vs(t)));return wn.create(r,t.op)}function Us(t){if(0===t.getFilters().length)return[];const e=Ws(Vs(t));return j(Hs(e)),qs(e)||zs(e)?[e]:e.getFilters()}function qs(t){return t instanceof bn}function zs(t){return t instanceof wn&&Sn(t)}function Hs(t){return qs(t)||zs(t)||function(t){if(t instanceof wn&&xn(t)){for(const e of t.getFilters())if(!qs(e)&&!zs(e))return!1;return!0}return!1}(t)}function Ws(t){if(j(t instanceof bn||t instanceof wn),t instanceof bn)return t;if(1===t.filters.length)return Ws(t.filters[0]);const e=t.filters.map((t=>Ws(t)));let n=wn.create(e,t.op);return n=Ks(n),Hs(n)?n:(j(n instanceof wn),j(_n(n)),j(n.filters.length>1),n.filters.reduce(((t,e)=>$s(t,e))))}function $s(t,e){let n;return j(t instanceof bn||t instanceof wn),j(e instanceof bn||e instanceof wn),n=t instanceof bn?e instanceof bn?function(t,e){return wn.create([t,e],"and")}(t,e):Gs(t,e):e instanceof bn?Gs(e,t):function(t,e){if(j(t.filters.length>0&&e.filters.length>0),_n(t)&&_n(e))return Tn(t,e.getFilters());const n=xn(t)?t:e,r=xn(t)?e:t,i=n.filters.map((t=>$s(t,r)));return wn.create(i,"or")}(t,e),Ks(n)}function Gs(t,e){if(_n(e))return Tn(e,t.getFilters());{const n=e.filters.map((e=>$s(t,e)));return wn.create(n,"or")}}function Ks(t){if(j(t instanceof bn||t instanceof wn),t instanceof bn)return t;const e=t.getFilters();if(1===e.length)return Ks(e[0]);if(In(t))return t;const n=e.map((t=>Ks(t))),r=[];return n.forEach((e=>{e instanceof bn?r.push(e):e instanceof wn&&(e.op===t.op?r.push(...e.filters):r.push(e))})),1===r.length?r[0]:wn.create(r,t.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ys{constructor(){this.ln=new Qs}addToCollectionParentIndex(t,e){return this.ln.add(e),xt.resolve()}getCollectionParents(t,e){return xt.resolve(this.ln.getEntries(e))}addFieldIndex(t,e){return xt.resolve()}deleteFieldIndex(t,e){return xt.resolve()}deleteAllFieldIndexes(t){return xt.resolve()}createTargetIndexes(t,e){return xt.resolve()}getDocumentsMatchingTarget(t,e){return xt.resolve(null)}getIndexType(t,e){return xt.resolve(0)}getFieldIndexes(t,e){return xt.resolve([])}getNextCollectionGroupToUpdate(t){return xt.resolve(null)}getMinOffset(t,e){return xt.resolve(vt.min())}getMinOffsetFromCollectionGroup(t,e){return xt.resolve(vt.min())}updateCollectionGroup(t,e,n){return xt.resolve()}updateIndexEntries(t,e){return xt.resolve()}}class Qs{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new xe(ot.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new xe(ot.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new Uint8Array(0);class Xs{constructor(t,e){this.databaseId=e,this.hn=new Qs,this.Pn=new cr((t=>Bn(t)),((t,e)=>Vn(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.hn.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener((()=>{this.hn.add(e)}));const i={collectionId:n,parent:Bt(r)};return Zs(t).put(i)}return xt.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[nt(e),""],!1,!0);return Zs(t).U(r).next((t=>{for(const r of t){if(r.collectionId!==e)break;n.push(qt(r.parent))}return n}))}addFieldIndex(t,e){const n=eo(t),r=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete r.indexId;const i=n.add(r);if(e.indexState){const n=no(t);return i.next((t=>{n.put(xs(t,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return i.next()}deleteFieldIndex(t,e){const n=eo(t),r=no(t),i=to(t);return n.delete(e.indexId).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=eo(t),n=to(t),r=no(t);return e.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(t,e){return xt.forEach(this.Tn(e),(e=>this.getIndexType(t,e).next((n=>{if(0===n||1===n){const n=new Bs(e).cn();if(null!=n)return this.addFieldIndex(t,n)}}))))}getDocumentsMatchingTarget(t,e){const n=to(t);let r=!0;const i=new Map;return xt.forEach(this.Tn(e),(e=>this.In(t,e).next((t=>{r&&(r=!!t),i.set(e,t)})))).next((()=>{if(r){let t=br();const r=[];return xt.forEach(i,((i,s)=>{O("IndexedDbIndexManager",`Using index ${function(t){return`id=${t.indexId}|cg=${t.collectionGroup}|f=${t.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`}(i)} to execute ${Bn(e)}`);const o=function(t,e){const n=ht(e);if(void 0===n)return null;for(const r of qn(t,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(t,e){const n=new Map;for(const r of dt(e))for(const e of qn(t,r.fieldPath))switch(e.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,i),c=function(t,e){const n=[];let r=!0;for(const i of dt(e)){const e=0===i.kind?zn(t,i.fieldPath,t.startAt):Hn(t,i.fieldPath,t.startAt);n.push(e.value),r&&(r=e.inclusive)}return new fn(n,r)}(s,i),l=function(t,e){const n=[];let r=!0;for(const i of dt(e)){const e=0===i.kind?Hn(t,i.fieldPath,t.endAt):zn(t,i.fieldPath,t.endAt);n.push(e.value),r&&(r=e.inclusive)}return new fn(n,r)}(s,i),u=this.En(i,s,c),h=this.En(i,s,l),d=this.dn(i,s,a),f=this.An(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return xt.forEach(f,(i=>n.G(i,e.limit).next((e=>{e.forEach((e=>{const n=lt.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),r.push(n))}))}))))})).next((()=>r))}return xt.resolve(null)}))}Tn(t){let e=this.Pn.get(t);return e||(e=0===t.filters.length?[t]:Us(wn.create(t.filters,"and")).map((e=>jn(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.Pn.set(t,e),e)}An(t,e,n,r,i,s,o){const a=(null!=e?e.length:1)*Math.max(n.length,i.length),c=a/(null!=e?e.length:1),l=[];for(let u=0;u<a;++u){const a=e?this.Rn(e[u/c]):Js,h=this.Vn(t,a,n[u%c],r),d=this.mn(t,a,i[u%c],s),f=o.map((e=>this.Vn(t,a,e,!0)));l.push(...this.createRange(h,d,f))}return l}Vn(t,e,n,r){const i=new Ms(t,lt.empty(),e,n);return r?i:i.en()}mn(t,e,n,r){const i=new Ms(t,lt.empty(),e,n);return r?i.en():i}In(t,e){const n=new Bs(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next((t=>{let e=null;for(const r of t)n.on(r)&&(!e||r.fields.length>e.fields.length)&&(e=r);return e}))}getIndexType(t,e){let n=2;const r=this.Tn(e);return xt.forEach(r,(e=>this.In(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new xe(ct.comparator),n=!1;for(const r of t.filters)for(const t of r.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const r of t.orderBy)r.field.isKeyField()||(e=e.add(r.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&r.length>1&&2===n?1:n))}fn(t,e){const n=new Ds;for(const r of dt(t)){const t=e.data.field(r.fieldPath);if(null==t)return null;const i=n.Xt(r.kind);Ns.Ft.Et(t,i)}return n.Ht()}Rn(t){const e=new Ds;return Ns.Ft.Et(t,e.Xt(0)),e.Ht()}gn(t,e){const n=new Ds;return Ns.Ft.Et(Ye(this.databaseId,e),n.Xt(function(t){const e=dt(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Ht()}dn(t,e,n){if(null===n)return[];let r=[];r.push(new Ds);let i=0;for(const s of dt(t)){const t=n[i++];for(const n of r)if(this.pn(e,s.fieldPath)&&Je(t))r=this.yn(r,s,t);else{const e=n.Xt(s.kind);Ns.Ft.Et(t,e)}}return this.wn(r)}En(t,e,n){return this.dn(t,e,n.position)}wn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Ht();return e}yn(t,e,n){const r=[...t],i=[];for(const s of n.arrayValue.values||[])for(const t of r){const n=new Ds;n.seed(t.Ht()),Ns.Ft.Et(s,n.Xt(e.kind)),i.push(n)}return i}pn(t,e){return!!t.filters.find((t=>t instanceof bn&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=eo(t),r=no(t);return(e?n.U("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.U()).next((t=>{const e=[];return xt.forEach(t,(t=>r.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new pt(e.sequenceNumber,new vt(gs(e.readTime),new lt(qt(e.documentKey)),e.largestBatchId)):pt.empty(),r=t.fields.map((([t,e])=>new ft(ct.fromServerFormat(t),e)));return new ut(t.indexId,t.collectionGroup,r,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:tt(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const r=eo(t),i=no(t);return this.Sn(t).next((t=>r.U("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>xt.forEach(e,(e=>i.put(xs(e.indexId,this.uid,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return xt.forEach(e,((e,r)=>{const i=n.get(e.collectionGroup);return(i?xt.resolve(i):this.getFieldIndexes(t,e.collectionGroup)).next((i=>(n.set(e.collectionGroup,i),xt.forEach(i,(n=>this.bn(t,e,n).next((e=>{const i=this.Dn(r,n);return e.isEqual(i)?xt.resolve():this.vn(t,r,n,e,i)})))))))}))}Cn(t,e,n,r){return to(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,e.key),documentKey:e.key.path.toArray()})}Fn(t,e,n,r){return to(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,e.key),e.key.path.toArray()])}bn(t,e,n){const r=to(t);let i=new xe(Fs);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,e)])},((t,r)=>{i=i.add(new Ms(n.indexId,e,r.arrayValue,r.directionalValue))})).next((()=>i))}Dn(t,e){let n=new xe(Fs);const r=this.fn(e,t);if(null==r)return n;const i=ht(e);if(null!=i){const s=t.data.field(i.fieldPath);if(Je(s))for(const i of s.arrayValue.values||[])n=n.add(new Ms(e.indexId,t.key,this.Rn(i),r))}else n=n.add(new Ms(e.indexId,t.key,Js,r));return n}vn(t,e,n,r,i){O("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,r,i){const s=t.getIterator(),o=e.getIterator();let a=Ie(s),c=Ie(o);for(;a||c;){let t=!1,e=!1;if(a&&c){const r=n(a,c);r<0?e=!0:r>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(r(c),c=Ie(o)):e?(i(a),a=Ie(s)):(a=Ie(s),c=Ie(o))}}(r,i,Fs,(r=>{s.push(this.Cn(t,e,n,r))}),(r=>{s.push(this.Fn(t,e,n,r))})),xt.waitFor(s)}Sn(t){let e=1;return no(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,r)=>{r.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>Fs(t,e))).filter(((t,e,n)=>!e||0!==Fs(t,n[e-1])));const r=[];r.push(t);for(const s of n){const n=Fs(s,t),i=Fs(s,e);if(0===n)r[0]=t.en();else if(n>0&&i<0)r.push(s),r.push(s.en());else if(i>0)break}r.push(e);const i=[];for(let s=0;s<r.length;s+=2){if(this.Mn(r[s],r[s+1]))return[];const t=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Js,[]],e=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Js,[]];i.push(IDBKeyRange.bound(t,e))}return i}Mn(t,e){return Fs(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(ro)}getMinOffset(t,e){return xt.mapArray(this.Tn(e),(e=>this.In(t,e).next((t=>t||F())))).next(ro)}}function Zs(t){return ge(t,"collectionParents")}function to(t){return ge(t,"indexEntries")}function eo(t){return ge(t,"indexConfiguration")}function no(t){return ge(t,"indexState")}function ro(t){j(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;yt(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new vt(e.readTime,e.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class so{static withCacheSize(t){return new so(t,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},((t,e,n)=>(a++,n.delete())));s.push(c.next((()=>{j(1===a)})));const l=[];for(const u of n.mutations){const t=Wt(e,u.key.path,n.batchId);s.push(i.delete(t)),l.push(u.key)}return xt.waitFor(s).next((()=>l))}function ao(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw F();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so.DEFAULT_COLLECTION_PERCENTILE=10,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,so.DEFAULT=new so(41943040,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),so.DISABLED=new so(-1,0,0);class co{constructor(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.xn={}}static Pt(t,e,n,r){j(""!==t.uid);const i=t.isAuthenticated()?t.uid:"";return new co(i,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uo(t).J({index:"userMutationsIndex",range:n},((t,n,r)=>{e=!1,r.done()})).next((()=>e))}addMutationBatch(t,e,n,r){const i=ho(t),s=uo(t);return s.add({}).next((o=>{j("number"==typeof o);const a=new ei(o,e,n,r),c=function(t,e,n){const r=n.baseMutations.map((e=>Gi(t.ht,e))),i=n.mutations.map((e=>Gi(t.ht,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new xe(((t,e)=>tt(t.canonicalString(),e.canonicalString())));for(const t of r){const e=Wt(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),l.push(s.put(c)),l.push(i.put(e,$t))}return u.forEach((e=>{l.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.xn[o]=a.keys()})),xt.waitFor(l).next((()=>a))}))}lookupMutationBatch(t,e){return uo(t).get(e).next((t=>t?(j(t.userId===this.userId),ms(this.serializer,t)):null))}On(t,e){return this.xn[e]?xt.resolve(this.xn[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.xn[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return uo(t).J({index:"userMutationsIndex",range:r},((t,e,r)=>{e.userId===this.userId&&(j(e.batchId>=n),i=ms(this.serializer,e)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return uo(t).J({index:"userMutationsIndex",range:e,reverse:!0},((t,e,r)=>{n=e.batchId,r.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uo(t).U("userMutationsIndex",e).next((t=>t.map((t=>ms(this.serializer,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Ht(this.userId,e.path),r=IDBKeyRange.lowerBound(n),i=[];return ho(t).J({range:r},((n,r,s)=>{const[o,a,c]=n,l=qt(a);if(o===this.userId&&e.path.isEqual(l))return uo(t).get(c).next((t=>{if(!t)throw F();j(t.userId===this.userId),i.push(ms(this.serializer,t))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new xe(tt);const r=[];return e.forEach((e=>{const i=Ht(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=ho(t).J({range:s},((t,r,i)=>{const[s,o,a]=t,c=qt(o);s===this.userId&&e.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),xt.waitFor(r).next((()=>this.Nn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,i=Ht(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new xe(tt);return ho(t).J({range:s},((t,e,i)=>{const[s,a,c]=t,l=qt(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Nn(t,o)))}Nn(t,e){const n=[],r=[];return e.forEach((e=>{r.push(uo(t).get(e).next((t=>{if(null===t)throw F();j(t.userId===this.userId),n.push(ms(this.serializer,t))})))})),xt.waitFor(r).next((()=>n))}removeMutationBatch(t,e){return oo(t._e,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.Ln(e.batchId)})),xt.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}Ln(t){delete this.xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return xt.resolve();const n=IDBKeyRange.lowerBound(function(t){return[t]}(this.userId)),r=[];return ho(t).J({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=qt(t[1]);r.push(e)}else n.done()})).next((()=>{j(0===r.length)}))}))}containsKey(t,e){return lo(t,this.userId,e)}Bn(t){return fo(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function lo(t,e,n){const r=Ht(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ho(t).J({range:s,H:!0},((t,n,r)=>{const[s,a,c]=t;s===e&&a===i&&(o=!0),r.done()})).next((()=>o))}function uo(t){return ge(t,"mutations")}function ho(t){return ge(t,"documentMutations")}function fo(t){return ge(t,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new po(0)}static Qn(){return new po(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Kn(t).next((e=>{const n=new po(e.highestTargetId);return e.highestTargetId=n.next(),this.$n(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.Kn(t).next((t=>it.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.Kn(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.Kn(t).next((r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.$n(t,r))))}addTargetData(t,e){return this.Un(t,e).next((()=>this.Kn(t).next((n=>(n.targetCount+=1,this.Wn(e,n),this.$n(t,n))))))}updateTargetData(t,e){return this.Un(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>mo(t).delete(e.targetId))).next((()=>this.Kn(t))).next((e=>(j(e.targetCount>0),e.targetCount-=1,this.$n(t,e))))}removeTargets(t,e,n){let r=0;const i=[];return mo(t).J(((s,o)=>{const a=vs(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(t,a)))})).next((()=>xt.waitFor(i))).next((()=>r))}forEachTarget(t,e){return mo(t).J(((t,n)=>{const r=vs(n);e(r)}))}Kn(t){return vo(t).get("targetGlobalKey").next((t=>(j(null!==t),t)))}$n(t,e){return vo(t).put("targetGlobalKey",e)}Un(t,e){return mo(t).put(ys(this.serializer,e))}Wn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Kn(t).next((t=>t.targetCount))}getTargetData(t,e){const n=Bn(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return mo(t).J({range:r,index:"queryTargetsIndex"},((t,n,r)=>{const s=vs(n);Vn(e,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(t,e,n){const r=[],i=yo(t);return e.forEach((e=>{const s=Bt(e.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(t,n,e))})),xt.waitFor(r)}removeMatchingKeys(t,e,n){const r=yo(t);return xt.forEach(e,(e=>{const i=Bt(e.path);return xt.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=yo(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=yo(t);let i=br();return r.J({range:n,H:!0},((t,e,n)=>{const r=qt(t[1]),s=new lt(r);i=i.add(s)})).next((()=>i))}containsKey(t,e){const n=Bt(e.path),r=IDBKeyRange.bound([n],[nt(n)],!1,!0);let i=0;return yo(t).J({index:"documentTargetsIndex",H:!0,range:r},(([t,e],n,r)=>{0!==t&&(i++,r.done())})).next((()=>i>0))}ut(t,e){return mo(t).get(e).next((t=>t?vs(t):null))}}function mo(t){return ge(t,"targets")}function vo(t){return ge(t,"targetGlobal")}function yo(t){return ge(t,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo([t,e],[n,r]){const i=tt(t,n);return 0===i?tt(e,r):i}class wo{constructor(t){this.Gn=t,this.buffer=new xe(bo),this.zn=0}jn(){return++this.zn}Hn(t){const e=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();bo(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class _o{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(t){O("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){kt(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await _t(t)}await this.Yn(3e5)}))}}class xo{constructor(t,e){this.Zn=t,this.params=e}calculateTargetCount(t,e){return this.Zn.Xn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return xt.resolve(Dt.oe);const n=new wo(e);return this.Zn.forEachTarget(t,(t=>n.Hn(t.sequenceNumber))).next((()=>this.Zn.er(t,(t=>n.Hn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.Zn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Zn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(io)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),io):this.tr(t,e)))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,e){let n,r,i,s,o,c,l;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),this.nthSequenceNumber(t,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(i=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),C()<=a.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(c-o)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t}))))}}function So(t,e){return new xo(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(t,e){this.db=t,this.garbageCollector=So(this,e)}Xn(t){const e=this.nr(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}nr(t){let e=0;return this.er(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}er(t,e){return this.rr(t,((t,n)=>e(n)))}addReference(t,e,n){return Ao(t,n)}removeReference(t,e,n){return Ao(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Ao(t,e)}ir(t,e){return function(t,e){let n=!1;return fo(t).Y((r=>lo(t,r,e).next((t=>(t&&(n=!0),xt.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.rr(t,((s,o)=>{if(o<=e){const e=this.ir(t,s).next((e=>{if(!e)return i++,n.getEntry(t,s).next((()=>(n.removeEntry(s,it.min()),yo(t).delete(function(t){return[0,Bt(t.path)]}(s)))))}));r.push(e)}})).next((()=>xt.waitFor(r))).next((()=>n.apply(t))).next((()=>i))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Ao(t,e)}rr(t,e){const n=yo(t);let r,i=Dt.oe;return n.J({index:"documentTargetsIndex"},(([t,n],{path:s,sequenceNumber:o})=>{0===t?(i!==Dt.oe&&e(new lt(qt(r)),i),i=o,r=s):i=Dt.oe})).next((()=>{i!==Dt.oe&&e(new lt(qt(r)),i)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Ao(t,e){return yo(t).put(function(t,e){return{targetId:0,path:Bt(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.changes=new cr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,dn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?xt.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Co(t).put(n)}removeEntry(t,e,n){return Co(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],fs(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.sr(t,n))))}getEntry(t,e){let n=dn.newInvalidDocument(e);return Co(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Po(e))},((t,r)=>{n=this._r(e,r)})).next((()=>n))}ar(t,e){let n={size:0,document:dn.newInvalidDocument(e)};return Co(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Po(e))},((t,r)=>{n={document:this._r(e,r),size:ao(r)}})).next((()=>n))}getEntries(t,e){let n=ur();return this.ur(t,e,((t,e)=>{const r=this._r(t,e);n=n.insert(t,r)})).next((()=>n))}cr(t,e){let n=ur(),r=new be(lt.comparator);return this.ur(t,e,((t,e)=>{const i=this._r(t,e);n=n.insert(t,i),r=r.insert(t,ao(e))})).next((()=>({documents:n,lr:r})))}ur(t,e,n){if(e.isEmpty())return xt.resolve();let r=new xe(Ro);e.forEach((t=>r=r.add(t)));const i=IDBKeyRange.bound(Po(r.first()),Po(r.last())),s=r.getIterator();let o=s.getNext();return Co(t).J({index:"documentKeyIndex",range:i},((t,e,r)=>{const i=lt.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&Ro(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?r.$(Po(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,e,n,r,i){const s=e.path,o=[s.popLast().toArray(),s.lastSegment(),fs(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Co(t).U(IDBKeyRange.bound(o,a,!0)).next((t=>{null==i||i.incrementDocumentReadCount(t.length);let n=ur();for(const i of t){const t=this._r(lt.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);t.isFoundDocument()&&(ir(e,t)||r.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,r){let i=ur();const s=Oo(e,n),o=Oo(e,vt.max());return Co(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((t,e,n)=>{const s=this._r(lt.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(t){return new No(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return Lo(t).get("remoteDocumentGlobalKey").next((t=>(j(!!t),t)))}sr(t,e){return Lo(t).put("remoteDocumentGlobalKey",e)}_r(t,e){if(e){const t=hs(this.serializer,e);if(!t.isNoDocument()||!t.version.isEqual(it.min()))return t}return dn.newInvalidDocument(t)}}function ko(t){return new To(t)}class No extends Eo{constructor(t,e){super(),this.hr=t,this.trackRemovals=e,this.Pr=new cr((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,r=new xe(((t,e)=>tt(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Pr.get(i);if(e.push(this.hr.removeEntry(t,i,o.readTime)),s.isValidDocument()){const a=ds(this.hr.serializer,s);r=r.add(i.path.popLast());const c=ao(a);n+=c-o.size,e.push(this.hr.addEntry(t,i,a))}else if(n-=o.size,this.trackRemovals){const n=ds(this.hr.serializer,s.convertToNoDocument(it.min()));e.push(this.hr.addEntry(t,i,n))}})),r.forEach((n=>{e.push(this.hr.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.hr.updateMetadata(t,n)),xt.waitFor(e)}getFromCache(t,e){return this.hr.ar(t,e).next((t=>(this.Pr.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.hr.cr(t,e).next((({documents:t,lr:e})=>(e.forEach(((e,n)=>{this.Pr.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function Lo(t){return ge(t,"remoteDocumentGlobal")}function Co(t){return ge(t,"remoteDocumentsV14")}function Po(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Oo(t,e){const n=e.documentKey.path.toArray();return[t,fs(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ro(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=tt(n[s],r[s]),i)return i;return i=tt(n.length,r.length),i||(i=tt(n[n.length-2],r[r.length-2]),i||tt(n[n.length-1],r[r.length-1])
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Do{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Wr(n.mutation,t,Ae.empty(),rt.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,br()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=br()){const r=pr();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=dr();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=pr();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,br())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=ur();const s=mr(),o=function(){return mr()}();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Yr)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Wr(o.mutation,e,o.mutation.getFieldMask(),rt.now())):s.set(e.key,Ae.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Do(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=mr();let r=new be(((t,e)=>t-e)),i=br();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ae.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||br()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=gr();c.forEach((t=>{if(!i.has(t)){const r=zr(e.get(t),n.get(t));null!==r&&l.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return xt.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return lt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Yn(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):xt.resolve(pr());let o=-1,a=i;return s.next((e=>xt.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?xt.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,br()))).next((t=>({batchId:o,changes:fr(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new lt(e)).next((t=>{let e=dr();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=dr();return this.indexManager.getCollectionParents(t,i).next((o=>xt.forEach(o,(o=>{const a=function(t,e){return new Wn(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,dn.newInvalidDocument(r)))}));let n=dr();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Wr(s.mutation,r,Ae.empty(),rt.now()),ir(e,r)&&(n=n.insert(t,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,e){return xt.resolve(this.Tr.get(e))}saveBundleMetadata(t,e){return this.Tr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Oi(t.createTime)}}(e)),xt.resolve()}getNamedQuery(t,e){return xt.resolve(this.Ir.get(e))}saveNamedQuery(t,e){return this.Ir.set(e.name,function(t){return{name:t.name,query:bs(t.bundledQuery),readTime:Oi(t.readTime)}}(e)),xt.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.overlays=new be(lt.comparator),this.Er=new Map}getOverlay(t,e){return xt.resolve(this.overlays.get(e))}getOverlays(t,e){const n=pr();return xt.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.Tt(t,e,r)})),xt.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Er.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Er.delete(n)),xt.resolve()}getOverlaysForCollection(t,e,n){const r=pr(),i=e.length+1,s=new lt(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return xt.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new be(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=pr(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=pr(),a=i.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>o.set(t,e))),o.size()>=r)break;return xt.resolve(o)}Tt(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Er.get(r.largestBatchId).delete(n.key);this.Er.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new ri(e,n));let i=this.Er.get(e);void 0===i&&(i=br(),this.Er.set(e,i)),this.Er.set(e,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.sessionToken=ke.EMPTY_BYTE_STRING}getSessionToken(t){return xt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,xt.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.dr=new xe(Uo.Ar),this.Rr=new xe(Uo.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,e){const n=new Uo(t,e);this.dr=this.dr.add(n),this.Rr=this.Rr.add(n)}mr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.gr(new Uo(t,e))}pr(t,e){t.forEach((t=>this.removeReference(t,e)))}yr(t){const e=new lt(new ot([])),n=new Uo(e,t),r=new Uo(e,t+1),i=[];return this.Rr.forEachInRange([n,r],(t=>{this.gr(t),i.push(t.key)})),i}wr(){this.dr.forEach((t=>this.gr(t)))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const e=new lt(new ot([])),n=new Uo(e,t),r=new Uo(e,t+1);let i=br();return this.Rr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Uo(t,0),n=this.dr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Uo{constructor(t,e){this.key=t,this.br=e}static Ar(t,e){return lt.comparator(t.key,e.key)||tt(t.br,e.br)}static Vr(t,e){return tt(t.br,e.br)||lt.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Dr=1,this.vr=new xe(Uo.Ar)}checkEmpty(t){return xt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ei(i,e,n,r);this.mutationQueue.push(s);for(const o of r)this.vr=this.vr.add(new Uo(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return xt.resolve(s)}lookupMutationBatch(t,e){return xt.resolve(this.Cr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Fr(n),i=r<0?0:r;return xt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(t){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Uo(e,0),r=new Uo(e,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([n,r],(t=>{const e=this.Cr(t.br);i.push(e)})),xt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new xe(tt);return e.forEach((t=>{const e=new Uo(t,0),r=new Uo(t,Number.POSITIVE_INFINITY);this.vr.forEachInRange([e,r],(t=>{n=n.add(t.br)}))})),xt.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;lt.isDocumentKey(i)||(i=i.child(""));const s=new Uo(new lt(i),0);let o=new xe(tt);return this.vr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.br)),!0)}),s),xt.resolve(this.Mr(o))}Mr(t){const e=[];return t.forEach((t=>{const n=this.Cr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){j(0===this.Or(e.batchId,"removed")),this.mutationQueue.shift();let n=this.vr;return xt.forEach(e.mutations,(r=>{const i=new Uo(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.vr=n}))}Ln(t){}containsKey(t,e){const n=new Uo(e,0),r=this.vr.firstAfterOrEqual(n);return xt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,xt.resolve()}Or(t,e){return this.Fr(t)}Fr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Cr(t){const e=this.Fr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t){this.Nr=t,this.docs=function(){return new be(lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.Nr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return xt.resolve(n?n.document.mutableCopy():dn.newInvalidDocument(e))}getEntries(t,e){let n=ur();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():dn.newInvalidDocument(t))})),xt.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=ur();const s=e.path,o=new lt(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||yt(mt(o),n)<=0||(r.has(o.key)||ir(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xt.resolve(i)}getAllFromCollectionGroup(t,e,n,r){F()}Lr(t,e){return xt.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Ho(this)}getSize(t){return xt.resolve(this.size)}}class Ho extends Eo{constructor(t){super(),this.hr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.hr.addEntry(t,r)):this.hr.removeEntry(n)})),xt.waitFor(e)}getFromCache(t,e){return this.hr.getEntry(t,e)}getAllFromCache(t,e){return this.hr.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t){this.persistence=t,this.Br=new cr((t=>Bn(t)),Vn),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.kr=0,this.qr=new Vo,this.targetCount=0,this.Qr=po.qn()}forEachTarget(t,e){return this.Br.forEach(((t,n)=>e(n))),xt.resolve()}getLastRemoteSnapshotVersion(t){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return xt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.kr&&(this.kr=e),xt.resolve()}Un(t){this.Br.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Qr=new po(e),this.highestTargetId=e),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,e){return this.Un(e),this.targetCount+=1,xt.resolve()}updateTargetData(t,e){return this.Un(e),xt.resolve()}removeTargetData(t,e){return this.Br.delete(e.target),this.qr.yr(e.targetId),this.targetCount-=1,xt.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Br.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Br.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),xt.waitFor(i).next((()=>r))}getTargetCount(t){return xt.resolve(this.targetCount)}getTargetData(t,e){const n=this.Br.get(e)||null;return xt.resolve(n)}addMatchingKeys(t,e,n){return this.qr.mr(e,n),xt.resolve()}removeMatchingKeys(t,e,n){this.qr.pr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),xt.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.qr.yr(e),xt.resolve()}getMatchingKeysForTargetId(t,e){const n=this.qr.Sr(e);return xt.resolve(n)}containsKey(t,e){return xt.resolve(this.qr.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(t,e){this.Kr={},this.overlays={},this.$r=new Dt(0),this.Ur=!1,this.Ur=!0,this.Wr=new Bo,this.referenceDelegate=t(this),this.Gr=new Wo(this),this.indexManager=new Ys,this.remoteDocumentCache=function(t){return new zo(t)}((t=>this.referenceDelegate.zr(t))),this.serializer=new us(e),this.jr=new Fo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new jo,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Kr[t.toKey()];return n||(n=new qo(e,this.referenceDelegate),this.Kr[t.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,e,n){O("MemoryPersistence","Starting transaction:",t);const r=new Go(this.$r.next());return this.referenceDelegate.Hr(),n(r).next((t=>this.referenceDelegate.Jr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Yr(t,e){return xt.or(Object.values(this.Kr).map((n=>()=>n.containsKey(t,e))))}}class Go extends wt{constructor(t){super(),this.currentSequenceNumber=t}}class Ko{constructor(t){this.persistence=t,this.Zr=new Vo,this.Xr=null}static ei(t){return new Ko(t)}get ti(){if(this.Xr)return this.Xr;throw F()}addReference(t,e,n){return this.Zr.addReference(n,e),this.ti.delete(n.toString()),xt.resolve()}removeReference(t,e,n){return this.Zr.removeReference(n,e),this.ti.add(n.toString()),xt.resolve()}markPotentiallyOrphaned(t,e){return this.ti.add(e.toString()),xt.resolve()}removeTarget(t,e){this.Zr.yr(e.targetId).forEach((t=>this.ti.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.ti.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Hr(){this.Xr=new Set}Jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.ti,(n=>{const r=lt.fromPath(n);return this.ni(t,r).next((t=>{t||e.removeEntry(r,it.min())}))})).next((()=>(this.Xr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ni(t,e).next((t=>{t?this.ti.delete(e.toString()):this.ti.add(e.toString())}))}zr(t){return 0}ni(t,e){return xt.or([()=>xt.resolve(this.Zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Yr(t,e)])}}class Yo{constructor(t,e){this.persistence=t,this.ri=new cr((t=>Bt(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=So(this,e)}static ei(t,e){return new Yo(t,e)}Hr(){}Jr(t){return xt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Xn(t){const e=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}nr(t){let e=0;return this.er(t,(t=>{e++})).next((()=>e))}er(t,e){return xt.forEach(this.ri,((n,r)=>this.ir(t,n,r).next((t=>t?xt.resolve():e(r)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Lr(t,(r=>this.ir(t,r,e).next((t=>{t||(n++,i.removeEntry(r,it.min()))})))).next((()=>i.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.ri.set(e,t.currentSequenceNumber),xt.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.ri.set(n,t.currentSequenceNumber),xt.resolve()}removeReference(t,e,n){return this.ri.set(n,t.currentSequenceNumber),xt.resolve()}updateLimboDocument(t,e){return this.ri.set(e,t.currentSequenceNumber),xt.resolve()}zr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Ke(t.data.value)),e}ir(t,e,n){return xt.or([()=>this.persistence.Yr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.ri.get(e);return xt.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t){this.serializer=t}O(t,e,n,r){const i=new St("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zt,{unique:!0}),t.createObjectStore("documentMutations")}(t),Jo(t),function(t){t.createObjectStore("remoteDocuments")}(t));let s=xt.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),Jo(t)),s=s.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:it.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(t,e){return e.store("mutations").U().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zt,{unique:!0});const r=e.store("mutations"),i=n.map((t=>r.put(t)));return xt.waitFor(i)}))}(t,i)))),s=s.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&r>=5&&(s=s.next((()=>this.ii(i)))),n<6&&r>=6&&(s=s.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.si(i))))),n<7&&r>=7&&(s=s.next((()=>this.oi(i)))),n<8&&r>=8&&(s=s.next((()=>this._i(t,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.ai(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&r>=12&&(s=s.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:ie});e.createIndex("collectionPathOverlayIndex",se,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",oe,{unique:!1})}(t)}))),n<13&&r>=13&&(s=s.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:Gt});e.createIndex("documentKeyIndex",Kt),e.createIndex("collectionGroupIndex",Yt)}(t))).next((()=>this.ui(t,i))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ci(t,i)))),n<15&&r>=15&&(s=s.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:te}).createIndex("sequenceNumberIndex",ee,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:ne}).createIndex("documentKeyIndex",re,{unique:!1})}(t)))),n<16&&r>=16&&(s=s.next((()=>{e.objectStore("indexState").clear()})).next((()=>{e.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(t){t.createObjectStore("globals",{keyPath:"name"})}(t)}))),s}si(t){let e=0;return t.store("remoteDocuments").J(((t,n)=>{e+=ao(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ii(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.U().next((e=>xt.forEach(e,(e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>xt.forEach(n,(n=>{j(n.userId===e.userId);const r=ms(this.serializer,n);return oo(t,e.userId,r).next((()=>{}))}))))}))))}oi(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const r=[];return n.J(((n,i)=>{const s=new ot(n),o=function(t){return[0,Bt(t)]}(s);r.push(e.get(o).next((n=>n?xt.resolve():(n=>e.put({targetId:0,path:Bt(n),sequenceNumber:t.highestListenSequenceNumber}))(s))))})).next((()=>xt.waitFor(r)))}))}_i(t,e){t.createObjectStore("collectionParents",{keyPath:Zt});const n=e.store("collectionParents"),r=new Qs,i=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:Bt(r)})}};return e.store("remoteDocuments").J({H:!0},((t,e)=>{const n=new ot(t);return i(n.popLast())})).next((()=>e.store("documentMutations").J({H:!0},(([t,e,n],r)=>{const s=qt(e);return i(s.popLast())}))))}ai(t){const e=t.store("targets");return e.J(((t,n)=>{const r=vs(n),i=ys(this.serializer,r);return e.put(i)}))}ui(t,e){const n=e.store("remoteDocuments"),r=[];return n.J(((t,n)=>{const i=e.store("remoteDocumentsV14"),s=function(t){return t.document?new lt(ot.fromString(t.document.name).popFirst(5)):t.noDocument?lt.fromSegments(t.noDocument.path):t.unknownDocument?lt.fromSegments(t.unknownDocument.path):F()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>xt.waitFor(r)))}ci(t,e){const n=e.store("mutations"),r=ko(this.serializer),i=new $o(Ko.ei,this.serializer.ht);return n.U().next((t=>{const n=new Map;return t.forEach((t=>{var e;let r=null!==(e=n.get(t.userId))&&void 0!==e?e:br();ms(this.serializer,t).keys().forEach((t=>r=r.add(t))),n.set(t.userId,r)})),xt.forEach(n,((t,n)=>{const s=new k(n),o=Es.Pt(this.serializer,s),a=i.getIndexManager(s),c=co.Pt(s,this.serializer,a,i.referenceDelegate);return new Mo(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new pe(e,Dt.oe),t).next()}))}))}}function Jo(t){t.createObjectStore("targetDocuments",{keyPath:Jt}).createIndex("documentTargetsIndex",Xt,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qt,{unique:!0}),t.createObjectStore("targetGlobal")}const Xo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zo{constructor(t,e,n,r,i,s,o,a,c,l,u=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.li=i,this.window=s,this.document=o,this.hi=c,this.Pi=l,this.Ti=u,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=t=>Promise.resolve(),!Zo.p())throw new q(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Io(this,r),this.Vi=e+"main",this.serializer=new us(a),this.mi=new It(this.Vi,this.Ti,new Qo(this.serializer)),this.Wr=new ks,this.Gr=new go(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ko(this.serializer),this.jr=new Ss,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,!1===l&&R("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(U.FAILED_PRECONDITION,Xo);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Gr.getHighestSequenceNumber(t)))})).then((t=>{this.$r=new Dt(t,this.hi)})).then((()=>{this.Ur=!0})).catch((t=>(this.mi&&this.mi.close(),Promise.reject(t))))}Si(t){return this.Ri=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.mi.L((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.li.enqueueAndForget((async()=>{this.started&&await this.gi()})))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>ea(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.bi(t).next((t=>{t||(this.isPrimary=!1,this.li.enqueueRetryable((()=>this.Ri(!1))))}))})).next((()=>this.Di(t))).next((e=>this.isPrimary&&!e?this.vi(t).next((()=>!1)):!!e&&this.Ci(t).next((()=>!0)))))).catch((t=>{if(kt(t))return O("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.li.enqueueRetryable((()=>this.Ri(t))),this.isPrimary=t}))}bi(t){return ta(t).get("owner").next((t=>xt.resolve(this.Fi(t))))}Mi(t){return ea(t).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=ge(t,"clientMetadata");return e.U().next((t=>{const n=this.Ni(t,18e5),r=t.filter((t=>-1===n.indexOf(t)));return xt.forEach(r,(t=>e.delete(t.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.fi)for(const e of t)this.fi.removeItem(this.Li(e.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.gi().then((()=>this.xi())).then((()=>this.wi()))))}Fi(t){return!!t&&t.ownerId===this.clientId}Di(t){return this.Pi?xt.resolve(!0):ta(t).get("owner").next((e=>{if(null!==e&&this.Oi(e.leaseTimestampMs,5e3)&&!this.Bi(e.ownerId)){if(this.Fi(e)&&this.networkEnabled)return!0;if(!this.Fi(e)){if(!e.allowTabSynchronization)throw new q(U.FAILED_PRECONDITION,Xo);return!1}}return!(!this.networkEnabled||!this.inForeground)||ea(t).U().next((t=>void 0===this.Ni(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,r=this.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new pe(t,Dt.oe);return this.vi(e).next((()=>this.Mi(e)))})),this.mi.close(),this.Ki()}Ni(t,e){return t.filter((t=>this.Oi(t.updateTimeMs,e)&&!this.Bi(t.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(t=>ea(t).U().next((t=>this.Ni(t,18e5).map((t=>t.clientId))))))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(t,e){return co.Pt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Xs(t,this.serializer.ht.databaseId)}getDocumentOverlayCache(t){return Es.Pt(this.serializer,t)}getBundleCache(){return this.jr}runTransaction(t,e,n){O("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",i=function(t){return 17===t?fe:16===t?de:15===t?he:14===t?ue:13===t?le:12===t?ce:11===t?ae:void F()}(this.Ti);let s;return this.mi.runTransaction(t,r,i,(r=>(s=new pe(r,this.$r?this.$r.next():Dt.oe),"readwrite-primary"===e?this.bi(s).next((t=>!!t||this.Di(s))).next((e=>{if(!e)throw R(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.li.enqueueRetryable((()=>this.Ri(!1))),new q(U.FAILED_PRECONDITION,bt);return n(s)})).next((t=>this.Ci(s).next((()=>t)))):this.Ui(s).next((()=>n(s)))))).then((t=>(s.raiseOnCommittedEvent(),t)))}Ui(t){return ta(t).get("owner").next((t=>{if(null!==t&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)&&!this.Fi(t)&&!(this.Pi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new q(U.FAILED_PRECONDITION,Xo)}))}Ci(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ta(t).put("owner",e)}static p(){return It.p()}vi(t){const e=ta(t);return e.get("owner").next((t=>this.Fi(t)?(O("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):xt.resolve()))}Oi(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(R(`Detected an update time that is in the future: ${t} > ${n}`),!1))}pi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ei=()=>{this.li.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.gi())))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground="visible"===this.document.visibilityState)}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ii=()=>{this.ki();const t=/(?:Version|Mobile)\/1[456]/;(0,i.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(t){var e;try{const n=null!==(null===(e=this.fi)||void 0===e?void 0:e.getItem(this.Li(t)));return O("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return R("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(t){R("Failed to set zombie client id.",t)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch(t){}}Li(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ta(t){return ge(t,"owner")}function ea(t){return ge(t,"clientMetadata")}function na(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ra{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Wi=n,this.Gi=r}static zi(t,e){let n=br(),r=br();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ra(t,e.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return(0,i.nr)()?8:At((0,i.ZQ)())>0?6:4}()}initialize(t,e){this.Zi=t,this.indexManager=e,this.ji=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.Xi(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.es(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new ia;return this.ts(t,e,n).next((r=>{if(i.result=r,this.Hi)return this.ns(t,e,n,r.size)}))})).next((()=>i.result))}ns(t,e,n,r){return n.documentReadCount<this.Ji?(C()<=a.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",rr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),xt.resolve()):(C()<=a.DEBUG&&O("QueryEngine","Query:",rr(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Yi*r?(C()<=a.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",rr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Jn(e))):xt.resolve())}Xi(t,e){if(Kn(e))return xt.resolve(null);let n=Jn(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=tr(e,null,"F"),n=Jn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=br(...r);return this.Zi.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.rs(e,r);return this.ss(e,s,i,n.readTime)?this.Xi(t,tr(e,null,"F")):this.os(t,s,e,n)}))))})))))}es(t,e,n,r){return Kn(e)||r.isEqual(it.min())?xt.resolve(null):this.Zi.getDocuments(t,n).next((i=>{const s=this.rs(e,i);return this.ss(e,s,n,r)?xt.resolve(null):(C()<=a.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rr(e)),this.os(t,s,e,gt(r,-1)).next((t=>t)))}))}rs(t,e){let n=new xe(or(t));return e.forEach(((e,r)=>{ir(t,r)&&(n=n.add(r))})),n}ss(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ts(t,e,n){return C()<=a.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",rr(e)),this.Zi.getDocumentsMatchingQuery(t,e,vt.min(),n)}os(t,e,n,r){return this.Zi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,e,n,r){this.persistence=t,this._s=e,this.serializer=r,this.us=new be(tt),this.cs=new cr((t=>Bn(t)),Vn),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(n)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Mo(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.us)))}}function aa(t,e,n,r){return new oa(t,e,n,r)}async function ca(t,e){const n=V(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.Ps(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=br();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Ts:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function la(t,e){const n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.hs.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=xt.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);j(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=br();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}function ua(t){const e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Gr.getLastRemoteSnapshotVersion(t)))}function ha(t,e){const n=V(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const o=[];e.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Gr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Gr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(ke.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,s)&&o.push(n.Gr.updateTargetData(t,l))}));let a=ur(),c=br();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(da(t,s,e.documentUpdates).next((t=>{a=t.Is,c=t.Es}))),!r.isEqual(it.min())){const e=n.Gr.getLastRemoteSnapshotVersion(t).next((e=>n.Gr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return xt.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.us=i,t)))}function da(t,e,n){let r=br(),i=br();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=ur();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(it.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):O("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Is:r,Es:i}}))}function fa(t,e){const n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function pa(t,e){const n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Gr.getTargetData(t,e).next((i=>i?(r=i,xt.resolve(r)):n.Gr.allocateTargetId(t).next((i=>(r=new ls(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Gr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.us.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.us=n.us.insert(t.targetId,t),n.cs.set(e,t.targetId)),t}))}async function ga(t,e,n){const r=V(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!kt(t))throw t;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function ma(t,e,n){const r=V(t);let i=it.min(),s=br();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=V(t),i=r.cs.get(n);return void 0!==i?xt.resolve(r.us.get(i)):r.Gr.getTargetData(e,n)}(r,t,Jn(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r._s.getDocumentsMatchingQuery(t,e,n?i:it.min(),n?s:br()))).next((t=>(ba(r,sr(e),t),{documents:t,ds:s})))))}function va(t,e){const n=V(t),r=V(n.Gr),i=n.us.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(t=>r.ut(t,e).next((t=>t?t.target:null))))}function ya(t,e){const n=V(t),r=n.ls.get(e)||it.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.hs.getAllFromCollectionGroup(t,e,gt(r,-1),Number.MAX_SAFE_INTEGER))).then((t=>(ba(n,e,t),t)))}function ba(t,e,n){let r=t.ls.get(e)||it.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.ls.set(e,r)}async function wa(t,e,n,r){const i=V(t);let s=br(),o=ur();for(const l of n){const t=e.As(l.metadata.name);l.document&&(s=s.add(t));const n=e.Rs(l);n.setReadTime(e.Vs(l.metadata.readTime)),o=o.insert(t,n)}const a=i.hs.newChangeBuffer({trackRemovals:!0}),c=await pa(i,function(t){return Jn(Gn(ot.fromString(`__bundle__/docs/${t}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(t=>da(t,a,o).next((e=>(a.apply(t),e))).next((e=>i.Gr.removeMatchingKeysForTargetId(t,c.targetId).next((()=>i.Gr.addMatchingKeys(t,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(t,e.Is,e.Es))).next((()=>e.Is))))))}async function _a(t,e,n=br()){const r=await pa(t,Jn(bs(e.bundledQuery))),i=V(t);return i.persistence.runTransaction("Save named query","readwrite",(t=>{const s=Oi(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.jr.saveNamedQuery(t,e);const o=r.withResumeToken(ke.EMPTY_BYTE_STRING,s);return i.us=i.us.insert(o.targetId,o),i.Gr.updateTargetData(t,o).next((()=>i.Gr.removeMatchingKeysForTargetId(t,r.targetId))).next((()=>i.Gr.addMatchingKeys(t,n,r.targetId))).next((()=>i.jr.saveNamedQuery(t,e)))}))}function xa(t,e){return`firestore_clients_${t}_${e}`}function Sa(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ia(t,e){return`firestore_targets_${t}_${e}`}class Aa{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static fs(t,e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new q(r.error.code,r.error.message))),s?new Aa(t,e,r.state,i):(R("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Ea{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static fs(t,e){const n=JSON.parse(e);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new q(n.error.code,n.error.message))),i?new Ea(t,n.state,r):(R("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Ta{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static fs(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=_r();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=jt(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Ta(t,i):(R("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class ka{constructor(t,e){this.clientId=t,this.onlineState=e}static fs(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new ka(e.clientId,e.onlineState):(R("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Na{constructor(){this.activeTargetIds=_r()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class La{constructor(t,e,n,r,i){this.window=t,this.li=e,this.persistenceKey=n,this.ws=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new be(tt),this.started=!1,this.vs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Cs=xa(this.persistenceKey,this.ws),this.Fs=function(t){return`firestore_sequence_number_${t}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new Na),this.Ms=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Ns=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Ls=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.$i();for(const n of t){if(n===this.ws)continue;const t=this.getItem(xa(this.persistenceKey,n));if(t){const e=Ta.fs(n,t);e&&(this.Ds=this.Ds.insert(e.clientId,e))}}this.Bs();const e=this.storage.getItem(this.Ns);if(e){const t=this.ks(e);t&&this.qs(t)}for(const n of this.vs)this.bs(n);this.vs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Fs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(t){let e=!1;return this.Ds.forEach(((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Ks(t,"pending")}updateMutationState(t,e,n){this.Ks(t,e,n),this.$s(t)}addLocalQueryTarget(t,e=!0){let n="not-current";if(this.isActiveQueryTarget(t)){const e=this.storage.getItem(Ia(this.persistenceKey,t));if(e){const r=Ea.fs(t,e);r&&(n=r.state)}}return e&&this.Us.ps(t),this.Bs(),n}removeLocalQueryTarget(t){this.Us.ys(t),this.Bs()}isLocalQueryTarget(t){return this.Us.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Ia(this.persistenceKey,t))}updateQueryState(t,e,n){this.Ws(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.$s(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Gs(t)}notifyBundleLoaded(t){this.zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return O("SharedClientState","READ",t,e),e}setItem(t,e){O("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){O("SharedClientState","REMOVE",t),this.storage.removeItem(t)}bs(t){const e=t;if(e.storageArea===this.storage){if(O("SharedClientState","EVENT",e.key,e.newValue),e.key===this.Cs)return void R("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.Ms.test(e.key)){if(null==e.newValue){const t=this.js(e.key);return this.Hs(t,null)}{const t=this.Js(e.key,e.newValue);if(t)return this.Hs(t.clientId,t)}}else if(this.xs.test(e.key)){if(null!==e.newValue){const t=this.Ys(e.key,e.newValue);if(t)return this.Zs(t)}}else if(this.Os.test(e.key)){if(null!==e.newValue){const t=this.Xs(e.key,e.newValue);if(t)return this.eo(t)}}else if(e.key===this.Ns){if(null!==e.newValue){const t=this.ks(e.newValue);if(t)return this.qs(t)}}else if(e.key===this.Fs){const t=function(t){let e=Dt.oe;if(null!=t)try{const n=JSON.parse(t);j("number"==typeof n),e=n}catch(t){R("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==Dt.oe&&this.sequenceNumberHandler(t)}else if(e.key===this.Ls){const t=this.no(e.newValue);await Promise.all(t.map((t=>this.syncEngine.ro(t))))}}else this.vs.push(e)}))}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(t,e,n){const r=new Aa(this.currentUser,t,e,n),i=Sa(this.persistenceKey,this.currentUser,t);this.setItem(i,r.gs())}$s(t){const e=Sa(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Gs(t){const e={clientId:this.ws,onlineState:t};this.storage.setItem(this.Ns,JSON.stringify(e))}Ws(t,e,n){const r=Ia(this.persistenceKey,t),i=new Ea(t,e,n);this.setItem(r,i.gs())}zs(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Ls,e)}js(t){const e=this.Ms.exec(t);return e?e[1]:null}Js(t,e){const n=this.js(t);return Ta.fs(n,e)}Ys(t,e){const n=this.xs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Aa.fs(new k(i),r,e)}Xs(t,e){const n=this.Os.exec(t),r=Number(n[1]);return Ea.fs(r,e)}ks(t){return ka.fs(t)}no(t){return JSON.parse(t)}async Zs(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.io(t.batchId,t.state,t.error);O("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}eo(t){return this.syncEngine.so(t.targetId,t.state,t.error)}Hs(t,e){const n=e?this.Ds.insert(t,e):this.Ds.remove(t),r=this.Qs(this.Ds),i=this.Qs(n),s=[],o=[];return i.forEach((t=>{r.has(t)||s.push(t)})),r.forEach((t=>{i.has(t)||o.push(t)})),this.syncEngine.oo(s,o).then((()=>{this.Ds=n}))}qs(t){this.Ds.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Qs(t){let e=_r();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class Ca{constructor(){this._o=new Na,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,e,n){this.ao[t]=e}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Na,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{uo(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra=null;function Da(){return null===Ra?Ra=function(){return 268435456+Math.round(2147483648*Math.random())}():Ra++,"0x"+Ra.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Ma={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja="WebChannelConnection";class Ba extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Fo=e+"://"+t.host,this.Mo=`projects/${n}/databases/${r}`,this.xo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Oo(t,e,n,r,i){const s=Da(),o=this.No(t,e.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(a,r,i),this.Bo(t,o,a,n).then((e=>(O("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw D("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}ko(t,e,n,r,i,s){return this.Oo(t,e,n,r,i)}Lo(t,e,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+N}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}No(t,e){const n=Ma[t];return`${this.Fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,e,n,r){const i=Da();return new Promise(((s,o)=>{const a=new v;a.setWithCredentials(!0),a.listenOnce(b.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case w.NO_ERROR:const e=a.getResponseJson();O(ja,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case w.TIMEOUT:O(ja,`RPC '${t}' ${i} timed out`),o(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case w.HTTP_ERROR:const n=a.getStatus();if(O(ja,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(e)>=0?e:U.UNKNOWN}(e.status);o(new q(t,e.message))}else o(new q(U.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new q(U.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{O(ja,`RPC '${t}' ${i} completed.`)}}));const c=JSON.stringify(r);O(ja,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",c,n,15)}))}qo(t,e,n){const r=Da(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=I(),o=S(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Lo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=i.join("");O(ja,`Creating RPC '${t}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Fa({Eo:e=>{d?O(ja,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(h||(O(ja,`Opening RPC '${t}' stream ${r} transport.`),u.open(),h=!0),O(ja,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},Ao:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,y.EventType.OPEN,(()=>{d||(O(ja,`RPC '${t}' stream ${r} transport opened.`),f.So())})),p(u,y.EventType.CLOSE,(()=>{d||(d=!0,O(ja,`RPC '${t}' stream ${r} transport closed`),f.Do())})),p(u,y.EventType.ERROR,(e=>{d||(d=!0,D(ja,`RPC '${t}' stream ${r} transport errored:`,e),f.Do(new q(U.UNAVAILABLE,"The operation could not be completed")))})),p(u,y.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];j(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){O(ja,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=si[t];if(void 0!==e)return ci(e)}(e),i=o.message;void 0===n&&(n=U.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.Do(new q(n,i)),u.close()}else O(ja,`RPC '${t}' stream ${r} received:`,i),f.vo(i)}})),p(o,x.STAT_EVENT,(e=>{e.stat===_.PROXY?O(ja,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===_.NOPROXY&&O(ja,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.bo()}),0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(){return"undefined"!=typeof window?window:null}function Ua(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){return new ki(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,e,n=1e3,r=1.5,i=6e4){this.li=t,this.timerId=e,this.Qo=n,this.Ko=r,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const e=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),r=Math.max(0,e-n);r>0&&O("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,(()=>(this.Go=Date.now(),t()))),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,e,n,r,i,s,o,a){this.li=t,this.Yo=n,this.Zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new za(t,e)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,(()=>this.u_())))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,e){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,4!==t?this.r_.reset():e&&e.code===U.RESOURCE_EXHAUSTED?(R(e.toString()),R("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):e&&e.code===U.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(e)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),e=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Xo===e&&this.I_(t,n)}),(e=>{t((()=>{const t=new q(U.UNKNOWN,"Fetching auth token failed: "+e.message);return this.E_(t)}))}))}I_(t,e){const n=this.T_(this.Xo);this.stream=this.d_(t,e),this.stream.Ro((()=>{n((()=>this.listener.Ro()))})),this.stream.mo((()=>{n((()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,(()=>(this.s_()&&(this.state=3),Promise.resolve()))),this.listener.mo())))})),this.stream.po((t=>{n((()=>this.E_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.n_?this.A_(t):this.onNext(t)))}))}o_(){this.state=5,this.r_.jo((async()=>{this.state=0,this.start()}))}E_(t){return O("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return e=>{this.li.enqueueAndForget((()=>this.Xo===t?e():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wa extends Ha{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}d_(t,e){return this.connection.qo("Listen",t,e)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const e=$i(this.serializer,t),n=function(t){if(!("targetChange"in t))return it.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?it.min():e.readTime?Oi(e.readTime):it.min()}(t);return this.listener.R_(e,n)}V_(t){const e={};e.database=Ui(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Un(r)?{documents:Qi(t,r)}:{query:Ji(t,r).ct},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Ci(t,e.resumeToken);const r=Ni(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(it.min())>0){n.readTime=Li(t,e.snapshotVersion.toTimestamp());const r=Ni(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=Zi(this.serializer,t);n&&(e.labels=n),this.c_(e)}m_(t){const e={};e.database=Ui(this.serializer),e.removeTarget=t,this.c_(e)}}class $a extends Ha{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,e){return this.connection.qo("Write",t,e)}A_(t){return j(!!t.streamToken),this.lastStreamToken=t.streamToken,j(!t.writeResults||0===t.writeResults.length),this.listener.p_()}onNext(t){j(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const e=Yi(t.writeResults,t.commitTime),n=Oi(t.commitTime);return this.listener.y_(n,e)}w_(){const t={};t.database=Ui(this.serializer),this.c_(t)}g_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Gi(this.serializer,t)))};this.c_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,e,n,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Oo(t,Di(e,n),r,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new q(U.UNKNOWN,t.toString())}))}ko(t,e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.ko(t,Di(e,n),r,s,o,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new q(U.UNKNOWN,t.toString())}))}terminate(){this.S_=!0,this.connection.terminate()}}class Ka{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve()))))}O_(t){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,"Online"===t&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(R(e),this.C_=!1):O("OnlineStateTracker",e)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo((t=>{n.enqueueAndForget((async()=>{ic(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=V(t);e.k_.add(4),await Ja(e),e.K_.set("Unknown"),e.k_.delete(4),await Qa(e)}(this))}))})),this.K_=new Ka(n,r)}}async function Qa(t){if(ic(t))for(const e of t.q_)await e(!0)}async function Ja(t){for(const e of t.q_)await e(!1)}function Xa(t,e){const n=V(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),rc(n)?nc(n):Sc(n).s_()&&tc(n,e))}function Za(t,e){const n=V(t),r=Sc(n);n.B_.delete(e),r.s_()&&ec(n,e),0===n.B_.size&&(r.s_()?r.a_():ic(n)&&n.K_.set("Unknown"))}function tc(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sc(t).V_(e)}function ec(t,e){t.U_.xe(e),Sc(t).m_(e)}function nc(t){t.U_=new xi({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Sc(t).start(),t.K_.F_()}function rc(t){return ic(t)&&!Sc(t).i_()&&t.B_.size>0}function ic(t){return 0===V(t).k_.size}function sc(t){t.U_=void 0}async function oc(t){t.K_.set("Online")}async function ac(t){t.B_.forEach(((e,n)=>{tc(t,e)}))}async function cc(t,e){sc(t),rc(t)?(t.K_.O_(e),nc(t)):t.K_.set("Unknown")}async function lc(t,e,n){if(t.K_.set("Online"),e instanceof wi&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.B_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.B_.delete(r),t.U_.removeTarget(r))}(t,e)}catch(n){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await uc(t,n)}else if(e instanceof yi?t.U_.$e(e):e instanceof bi?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(it.min()))try{const e=await ua(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.U_.it(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.B_.get(r);i&&t.B_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.B_.get(e);if(!r)return;t.B_.set(e,r.withResumeToken(ke.EMPTY_BYTE_STRING,r.snapshotVersion)),ec(t,e);const i=new ls(r.target,e,n,r.sequenceNumber);tc(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){O("RemoteStore","Failed to raise snapshot:",e),await uc(t,e)}}async function uc(t,e,n){if(!kt(e))throw e;t.k_.add(1),await Ja(t),t.K_.set("Offline"),n||(n=()=>ua(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Qa(t)}))}function hc(t,e){return e().catch((n=>uc(t,n,e)))}async function dc(t){const e=V(t),n=Ic(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;fc(e);)try{const t=await fa(e.localStore,r);if(null===t){0===e.L_.length&&n.a_();break}r=t.batchId,pc(e,t)}catch(t){await uc(e,t)}gc(e)&&mc(e)}function fc(t){return ic(t)&&t.L_.length<10}function pc(t,e){t.L_.push(e);const n=Ic(t);n.s_()&&n.f_&&n.g_(e.mutations)}function gc(t){return ic(t)&&!Ic(t).i_()&&t.L_.length>0}function mc(t){Ic(t).start()}async function vc(t){Ic(t).w_()}async function yc(t){const e=Ic(t);for(const n of t.L_)e.g_(n.mutations)}async function bc(t,e,n){const r=t.L_.shift(),i=ni.from(r,e,n);await hc(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await dc(t)}async function wc(t,e){e&&Ic(t).f_&&await async function(t,e){if(function(t){return ai(t)&&t!==U.ABORTED}(e.code)){const n=t.L_.shift();Ic(t).__(),await hc(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await dc(t)}}(t,e),gc(t)&&mc(t)}async function _c(t,e){const n=V(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const r=ic(n);n.k_.add(3),await Ja(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Qa(n)}async function xc(t,e){const n=V(t);e?(n.k_.delete(2),await Qa(n)):e||(n.k_.add(2),await Ja(n),n.K_.set("Unknown"))}function Sc(t){return t.W_||(t.W_=function(t,e,n){const r=V(t);return r.b_(),new Wa(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{Ro:oc.bind(null,t),mo:ac.bind(null,t),po:cc.bind(null,t),R_:lc.bind(null,t)}),t.q_.push((async e=>{e?(t.W_.__(),rc(t)?nc(t):t.K_.set("Unknown")):(await t.W_.stop(),sc(t))}))),t.W_}function Ic(t){return t.G_||(t.G_=function(t,e,n){const r=V(t);return r.b_(),new $a(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:vc.bind(null,t),po:wc.bind(null,t),p_:yc.bind(null,t),y_:bc.bind(null,t)}),t.q_.push((async e=>{e?(t.G_.__(),await dc(t)):(await t.G_.stop(),t.L_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))}))),t.G_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ac{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new z,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Ac(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ec(t,e){if(R("AsyncQueue",`${e}: ${t}`),kt(t))return new q(U.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{static emptySet(t){return new Tc(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||lt.comparator(e.key,n.key):(t,e)=>lt.comparator(t.key,e.key),this.keyedMap=dr(),this.sortedSet=new be(this.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Tc))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Tc;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(){this.z_=new be(lt.comparator)}track(t){const e=t.doc.key,n=this.z_.get(e);n?0!==t.type&&3===n.type?this.z_=this.z_.insert(e,t):3===t.type&&1!==n.type?this.z_=this.z_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.z_=this.z_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.z_=this.z_.remove(e):1===t.type&&2===n.type?this.z_=this.z_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.z_=this.z_.insert(e,{type:2,doc:t.doc}):F():this.z_=this.z_.insert(e,t)}j_(){const t=[];return this.z_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Nc{constructor(t,e,n,r,i,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Nc(t,e,Tc.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&er(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some((t=>t.Z_()))}}class Cc{constructor(){this.queries=Pc(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(t,e){const n=V(t),r=n.queries;n.queries=Pc(),r.forEach(((t,n)=>{for(const r of n.J_)r.onError(e)}))}(this,new q(U.ABORTED,"Firestore shutting down"))}}function Pc(){return new cr((t=>nr(t)),er)}async function Oc(t,e){const n=V(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new Lc,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(t){const n=Ec(t,`Initialization of query '${rr(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&Fc(n)}async function Rc(t,e){const n=V(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const t=s.J_.indexOf(e);t>=0&&(s.J_.splice(t,1),0===s.J_.length?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dc(t,e){const n=V(t);let r=!1;for(const i of e){const t=i.query,e=n.queries.get(t);if(e){for(const t of e.J_)t.ta(i)&&(r=!0);e.H_=i}}r&&Fc(n)}function Mc(t,e,n){const r=V(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function Fc(t){t.X_.forEach((t=>{t.next()}))}var jc,Bc;(Bc=jc||(jc={})).na="default",Bc.Cache="cache";class Vc{constructor(t,e,n){this.query=t,this.ra=e,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Nc(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ia?this.oa(t)&&(this.ra.next(t),e=!0):this._a(t,this.onlineState)&&(this.aa(t),e=!0),this.sa=t,e}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let e=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),e=!0),e}_a(t,e){if(!t.fromCache)return!0;if(!this.Z_())return!0;const n="Offline"!==e;return(!this.options.ua||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}oa(t){if(t.docChanges.length>0)return!0;const e=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}aa(t){t=Nc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==jc.Cache}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(t,e){this.ca=t,this.byteLength=e}la(){return"metadata"in this.ca}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){this.serializer=t}As(t){return ji(this.serializer,t)}Rs(t){return t.metadata.exists?Hi(this.serializer,t.document,!1):dn.newNoDocument(this.As(t.metadata.name),this.Vs(t.metadata.readTime))}Vs(t){return Oi(t)}}class zc{constructor(t,e,n){this.ha=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hc(t)}Pa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ca.namedQuery)this.queries.push(t.ca.namedQuery);else if(t.ca.documentMetadata){this.documents.push({metadata:t.ca.documentMetadata}),t.ca.documentMetadata.exists||++e;const n=ot.fromString(t.ca.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.ca.document&&(this.documents[this.documents.length-1].document=t.ca.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Ta(t){const e=new Map,n=new qc(this.serializer);for(const r of t)if(r.metadata.queries){const t=n.As(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||br()).add(t);e.set(n,r)}}return e}async complete(){const t=await wa(this.localStore,new qc(this.serializer),this.documents,this.ha.id),e=this.Ta(this.documents);for(const n of this.queries)await _a(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Ia:this.collectionGroups,Ea:t}}}function Hc(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t){this.key=t}}class $c{constructor(t){this.key=t}}class Gc{constructor(t,e){this.query=t,this.da=e,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=br(),this.mutatedKeys=br(),this.Va=or(t),this.ma=new Tc(this.Va)}get fa(){return this.da}ga(t,e){const n=e?e.pa:new kc,r=e?e.ma:this.ma;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const l=r.get(t),u=ir(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ya(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Va(u,a)>0||c&&this.Va(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{ma:s,pa:n,ss:o,mutatedKeys:i}}ya(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const s=t.pa.j_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||this.Va(t.doc,e.doc))),this.wa(n),r=null!=r&&r;const o=e&&!r?this.Sa():[],a=0===this.Ra.size&&this.current&&!r?1:0,c=a!==this.Aa;return this.Aa=a,0!==s.length||c?{snapshot:new Nc(this.query,t.ma,i,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:o}:{ba:o}}ea(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ma:this.ma,pa:new kc,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.da.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach((t=>this.da=this.da.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.da=this.da.delete(t))),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=br(),this.ma.forEach((t=>{this.Da(t.key)&&(this.Ra=this.Ra.add(t.key))}));const e=[];return t.forEach((t=>{this.Ra.has(t)||e.push(new $c(t))})),this.Ra.forEach((n=>{t.has(n)||e.push(new Wc(n))})),e}va(t){this.da=t.ds,this.Ra=br();const e=this.ga(t.documents);return this.applyChanges(e,!0)}Ca(){return Nc.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class Kc{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Yc{constructor(t){this.key=t,this.Fa=!1}}class Qc{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new cr((t=>nr(t)),er),this.Oa=new Map,this.Na=new Set,this.La=new be(lt.comparator),this.Ba=new Map,this.ka=new Vo,this.qa={},this.Qa=new Map,this.Ka=po.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}async function Jc(t,e,n=!0){const r=Nl(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Zc(r,e,n,!0),i}async function Xc(t,e){const n=Nl(t);await Zc(n,e,!0,!1)}async function Zc(t,e,n,r){const i=await pa(t.localStore,Jn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await tl(t,e,s,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&Xa(t.remoteStore,i),a}async function tl(t,e,n,r,i){t.Ua=(e,n,r)=>async function(t,e,n,r){let i=e.view.ga(n);i.ss&&(i=await ma(t.localStore,e.query,!1).then((({documents:t})=>e.view.ga(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return pl(t,e.targetId,a.ba),a.snapshot}(t,e,n,r);const s=await ma(t.localStore,e,!0),o=new Gc(e,s.ds),a=o.ga(s.documents),c=vi.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,c);pl(t,n,l.ba);const u=new Kc(e,n,o);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),l.snapshot}async function el(t,e,n){const r=V(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter((t=>!er(t,e)))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ga(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Za(r.remoteStore,i.targetId),dl(r,i.targetId)})).catch(_t)):(dl(r,i.targetId),await ga(r.localStore,i.targetId,!0))}async function nl(t,e){const n=V(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Za(n.remoteStore,r.targetId))}async function rl(t,e,n){const r=Ll(t);try{const t=await function(t,e){const n=V(t),r=rt.now(),i=e.reduce(((t,e)=>t.add(e.key)),br());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=ur(),c=br();return n.hs.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=$r(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Yr(t.key,e,hn(e.value.mapValue),Vr.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:fr(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.qa[t.currentUser.toKey()];r||(r=new be(tt)),r=r.insert(e,n),t.qa[t.currentUser.toKey()]=r}(r,t.batchId,n),await vl(r,t.changes),await dc(r.remoteStore)}catch(t){const e=Ec(t,"Failed to persist write");n.reject(e)}}async function il(t,e){const n=V(t);try{const t=await ha(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Ba.get(e);r&&(j(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Fa=!0:t.modifiedDocuments.size>0?j(r.Fa):t.removedDocuments.size>0&&(j(r.Fa),r.Fa=!1))})),await vl(n,t,e)}catch(t){await _t(t)}}function sl(t,e,n){const r=V(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.xa.forEach(((n,r)=>{const i=r.view.ea(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=V(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const i of n.J_)i.ea(e)&&(r=!0)})),r&&Fc(n)}(r.eventManager,e),t.length&&r.Ma.R_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ol(t,e,n){const r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let t=new be(lt.comparator);t=t.insert(s,dn.newNoDocument(s,it.min()));const n=br().add(s),i=new mi(it.min(),new Map,new be(tt),t,n);await il(r,i),r.La=r.La.remove(s),r.Ba.delete(e),ml(r)}else await ga(r.localStore,e,!1).then((()=>dl(r,e,n))).catch(_t)}async function al(t,e){const n=V(t),r=e.batch.batchId;try{const t=await la(n.localStore,e);hl(n,r,null),ul(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vl(n,t)}catch(t){await _t(t)}}async function cl(t,e,n){const r=V(t);try{const t=await function(t,e){const n=V(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(j(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);hl(r,e,n),ul(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vl(r,t)}catch(n){await _t(n)}}async function ll(t,e){const n=V(t);ic(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=V(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const r=n.Qa.get(t)||[];r.push(e),n.Qa.set(t,r)}catch(t){const n=Ec(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}function ul(t,e){(t.Qa.get(e)||[]).forEach((t=>{t.resolve()})),t.Qa.delete(e)}function hl(t,e,n){const r=V(t);let i=r.qa[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function dl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach((e=>{t.ka.containsKey(e)||fl(t,e)}))}function fl(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);null!==n&&(Za(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),ml(t))}function pl(t,e,n){for(const r of n)r instanceof Wc?(t.ka.addReference(r.key,e),gl(t,r)):r instanceof $c?(O("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||fl(t,r.key)):F()}function gl(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(O("SyncEngine","New document in limbo: "+n),t.Na.add(r),ml(t))}function ml(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new lt(ot.fromString(e)),r=t.Ka.next();t.Ba.set(r,new Yc(n)),t.La=t.La.insert(n,r),Xa(t.remoteStore,new ls(Jn(Gn(n.path)),r,"TargetPurposeLimboResolution",Dt.oe))}}async function vl(t,e,n){const r=V(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach(((t,a)=>{o.push(r.Ua(a,e,n).then((t=>{var e;if((t||n)&&r.isPrimaryClient){const i=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(t){i.push(t);const e=ra.zi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.Ma.R_(i),await async function(t,e){const n=V(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>xt.forEach(e,(e=>xt.forEach(e.Wi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>xt.forEach(e.Gi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!kt(t))throw t;O("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.us.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.us=n.us.insert(t,i)}}}(r.localStore,s))}async function yl(t,e){const n=V(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const t=await ca(n.localStore,e);n.currentUser=e,function(t,e){t.Qa.forEach((t=>{t.forEach((t=>{t.reject(new q(U.CANCELLED,e))}))})),t.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await vl(n,t.Ts)}}function bl(t,e){const n=V(t),r=n.Ba.get(e);if(r&&r.Fa)return br().add(r.key);{let t=br();const r=n.Oa.get(e);if(!r)return t;for(const e of r){const r=n.xa.get(e);t=t.unionWith(r.view.fa)}return t}}async function wl(t,e){const n=V(t),r=await ma(n.localStore,e.query,!0),i=e.view.va(r);return n.isPrimaryClient&&pl(n,e.targetId,i.ba),i}async function _l(t,e){const n=V(t);return ya(n.localStore,e).then((t=>vl(n,t)))}async function xl(t,e,n,r){const i=V(t),s=await function(t,e){const n=V(t),r=V(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>r.On(t,e).next((e=>e?n.localDocuments.getDocuments(t,e):xt.resolve(null)))))}(i.localStore,e);null!==s?("pending"===n?await dc(i.remoteStore):"acknowledged"===n||"rejected"===n?(hl(i,e,r||null),ul(i,e),function(t,e){V(V(t).mutationQueue).Ln(e)}(i.localStore,e)):F(),await vl(i,s)):O("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Sl(t,e){const n=V(t);if(Nl(n),Ll(n),!0===e&&!0!==n.$a){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await Il(n,t.toArray());n.$a=!0,await xc(n.remoteStore,!0);for(const r of e)Xa(n.remoteStore,r)}else if(!1===e&&!1!==n.$a){const t=[];let e=Promise.resolve();n.Oa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?t.push(i):e=e.then((()=>(dl(n,i),ga(n.localStore,i,!0)))),Za(n.remoteStore,i)})),await e,await Il(n,t),function(t){const e=V(t);e.Ba.forEach(((t,n)=>{Za(e.remoteStore,n)})),e.ka.wr(),e.Ba=new Map,e.La=new be(lt.comparator)}(n),n.$a=!1,await xc(n.remoteStore,!1)}}async function Il(t,e,n){const r=V(t),i=[],s=[];for(const o of e){let t;const e=r.Oa.get(o);if(e&&0!==e.length){t=await pa(r.localStore,Jn(e[0]));for(const t of e){const e=r.xa.get(t),n=await wl(r,e);n.snapshot&&s.push(n.snapshot)}}else{const e=await va(r.localStore,o);t=await pa(r.localStore,e),await tl(r,Al(e),o,!1,t.resumeToken)}i.push(t)}return r.Ma.R_(s),i}function Al(t){return $n(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function El(t){return function(t){return V(V(t).persistence).$i()}(V(t).localStore)}async function Tl(t,e,n,r){const i=V(t);if(i.$a)return void O("SyncEngine","Ignoring unexpected query state notification.");const s=i.Oa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=await ya(i.localStore,sr(s[0])),r=mi.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ke.EMPTY_BYTE_STRING);await vl(i,t,r);break}case"rejected":await ga(i.localStore,e,!0),dl(i,e,r);break;default:F()}}async function kl(t,e,n){const r=Nl(t);if(r.$a){for(const t of e){if(r.Oa.has(t)&&r.sharedClientState.isActiveQueryTarget(t)){O("SyncEngine","Adding an already active target "+t);continue}const e=await va(r.localStore,t),n=await pa(r.localStore,e);await tl(r,Al(e),n.targetId,!1,n.resumeToken),Xa(r.remoteStore,n)}for(const t of n)r.Oa.has(t)&&await ga(r.localStore,t,!1).then((()=>{Za(r.remoteStore,t),dl(r,t)})).catch(_t)}}function Nl(t){const e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=il.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ol.bind(null,e),e.Ma.R_=Dc.bind(null,e.eventManager),e.Ma.Wa=Mc.bind(null,e.eventManager),e}function Ll(t){const e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=al.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cl.bind(null,e),e}function Cl(t,e,n){const r=V(t);(async function(t,e,n){try{const r=await e.getMetadata();if(await function(t,e){const n=V(t),r=Oi(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.jr.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(r)>=0))}(t.localStore,r))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Hc(r));const i=new zc(r,t.localStore,e.serializer);let s=await e.Ga();for(;s;){const t=await i.Pa(s);t&&n._updateProgress(t),s=await e.Ga()}const o=await i.complete();return await vl(t,o.Ea,void 0),await function(t,e){const n=V(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.jr.saveBundleMetadata(t,e)))}(t.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ia)}catch(t){return D("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,e,n).then((t=>{r.sharedClientState.notifyBundleLoaded(t)}))}class Pl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qa(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,e){return null}Ya(t,e){return null}Ha(t){return aa(this.persistence,new sa,t.initialUser,this.serializer)}ja(t){return new $o(Ko.ei,this.serializer)}za(t){return new Ca}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pl.provider={build:()=>new Pl};class Ol extends Pl{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,e){j(this.persistence.referenceDelegate instanceof Yo);const n=this.persistence.referenceDelegate.garbageCollector;return new _o(n,t.asyncQueue,e)}ja(t){const e=void 0!==this.cacheSizeBytes?so.withCacheSize(this.cacheSizeBytes):so.DEFAULT;return new $o((t=>Yo.ei(t,e)),this.serializer)}}class Rl extends Pl{constructor(t,e,n){super(),this.Za=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Za.initialize(this,t),await Ll(this.Za.syncEngine),await dc(this.Za.remoteStore),await this.persistence.Si((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Ha(t){return aa(this.persistence,new sa,t.initialUser,this.serializer)}Ja(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new _o(n,t.asyncQueue,e)}Ya(t,e){const n=new Rt(e,this.persistence);return new Ot(t.asyncQueue,n)}ja(t){const e=na(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?so.withCacheSize(this.cacheSizeBytes):so.DEFAULT;return new Zo(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Va(),Ua(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(t){return new Ca}}class Dl extends Rl{constructor(t,e){super(t,e,!1),this.Za=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Za.syncEngine;this.sharedClientState instanceof La&&(this.sharedClientState.syncEngine={io:xl.bind(null,e),so:Tl.bind(null,e),oo:kl.bind(null,e),$i:El.bind(null,e),ro:_l.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Si((async t=>{await Sl(this.Za.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start():t||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(t&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():t||this.indexBackfillerScheduler.stop())}))}za(t){const e=Va();if(!La.p(e))throw new q(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=na(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new La(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class Ml{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>sl(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=yl.bind(null,this.syncEngine),await xc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Cc}()}createDatastore(t){const e=qa(t.databaseInfo.databaseId),n=function(t){return new Ba(t)}(t.databaseInfo);return function(t,e,n,r){return new Ga(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new Ya(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>sl(this.syncEngine,t,0)),function(){return Oa.p()?new Oa:new Pa}())}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Qc(t,e,n,r,i,s);return o&&(a.$a=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=V(t);O("RemoteStore","RemoteStore shutting down."),e.k_.add(5),await Ja(e),e.Q_.shutdown(),e.K_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}function Fl(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml.provider={build:()=>new Ml};class jl{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):R("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t,e){this.tu=t,this.serializer=e,this.metadata=new z,this.buffer=new Uint8Array,this.nu=function(){return new TextDecoder("utf-8")}(),this.ru().then((t=>{t&&t.la()?this.metadata.resolve(t.ca.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.ca)}`))}),(t=>this.metadata.reject(t)))}close(){return this.tu.cancel()}async getMetadata(){return this.metadata.promise}async Ga(){return await this.getMetadata(),this.ru()}async ru(){const t=await this.iu();if(null===t)return null;const e=this.nu.decode(t),n=Number(e);isNaN(n)&&this.su(`length string (${e}) is not valid number`);const r=await this.ou(n);return new Uc(JSON.parse(r),t.length+n)}_u(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async iu(){for(;this._u()<0;)if(await this.au())break;if(0===this.buffer.length)return null;const t=this._u();t<0&&this.su("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async ou(t){for(;this.buffer.length<t;)await this.au()&&this.su("Reached the end of bundle when more is expected.");const e=this.nu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}su(t){throw this.tu.cancel(),new Error(`Invalid bundle format: ${t}`)}async au(){const t=await this.tu.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(t,e){const n=V(t),r={documents:e.map((t=>Fi(n.serializer,t)))},i=await n.ko("BatchGetDocuments",n.serializer.databaseId,ot.emptyPath(),r,e.length),s=new Map;i.forEach((t=>{const e=Wi(n.serializer,t);s.set(e.key.toString(),e)}));const o=[];return e.forEach((t=>{const e=s.get(t.toString());j(!!e),o.push(e)})),o}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastTransactionError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new Zr(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=lt.fromPath(e);this.mutations.push(new ti(n,this.precondition(n)))})),await async function(t,e){const n=V(t),r={writes:e.map((t=>Gi(n.serializer,t)))};await n.Oo("Commit",n.serializer.databaseId,ot.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw F();e=it.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new q(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(it.min())?Vr.exists(!1):Vr.updateTime(e):Vr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(it.min()))throw new q(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vr.updateTime(e)}return Vr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t,e,n,r,i){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=r,this.deferred=i,this.uu=n.maxAttempts,this.r_=new za(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo((async()=>{const t=new Vl(this.datastore),e=this.hu(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.Pu(t)}))))})).catch((t=>{this.Pu(t)}))}))}hu(t){try{const e=this.updateFunction(t);return!Mt(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Pu(t){this.uu>0&&this.Tu(t)?(this.uu-=1,this.asyncQueue.enqueueAndForget((()=>(this.lu(),Promise.resolve())))):this.deferred.reject(t)}Tu(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!ai(e)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,e,n,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=k.UNAUTHENTICATED,this.clientId=Z.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async t=>{O("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(O("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new z;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Ec(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function zl(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await ca(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Hl(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wl(t);O("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>_c(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>_c(e.remoteStore,n))),t._onlineComponents=e}async function Wl(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await zl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===U.FAILED_PRECONDITION||t.code===U.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;D("Error using user provided cache. Falling back to memory cache: "+n),await zl(t,new Pl)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await zl(t,new Ol(void 0));return t._offlineComponents}async function $l(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await Hl(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await Hl(t,new Ml))),t._onlineComponents}function Gl(t){return Wl(t).then((t=>t.persistence))}function Kl(t){return Wl(t).then((t=>t.localStore))}function Yl(t){return $l(t).then((t=>t.remoteStore))}function Ql(t){return $l(t).then((t=>t.syncEngine))}function Jl(t){return $l(t).then((t=>t.datastore))}async function Xl(t){const e=await $l(t),n=e.eventManager;return n.onListen=Jc.bind(null,e.syncEngine),n.onUnlisten=el.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xc.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nl.bind(null,e.syncEngine),n}function Zl(t){return t.asyncQueue.enqueue((async()=>{const e=await Gl(t),n=await Yl(t);return e.setNetworkEnabled(!0),function(t){const e=V(t);return e.k_.delete(0),Qa(e)}(n)}))}function tu(t){return t.asyncQueue.enqueue((async()=>{const e=await Gl(t),n=await Yl(t);return e.setNetworkEnabled(!1),async function(t){const e=V(t);e.k_.add(0),await Ja(e),e.K_.set("Offline")}(n)}))}function eu(t,e){const n=new z;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const r=await function(t,e){const n=V(t);return n.persistence.runTransaction("read document","readonly",(t=>n.localDocuments.getDocument(t,e)))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new q(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=Ec(t,`Failed to get document '${e} from cache`);n.reject(r)}}(await Kl(t),e,n))),n.promise}function nu(t,e,n={}){const r=new z;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new jl({next:a=>{s.eu(),e.enqueueAndForget((()=>Rc(t,o)));const c=a.docs.has(n);!c&&a.fromCache?i.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?i.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:t=>i.reject(t)}),o=new Vc(Gn(n.path),s,{includeMetadataChanges:!0,ua:!0});return Oc(t,o)}(await Xl(t),t.asyncQueue,e,n,r))),r.promise}function ru(t,e){const n=new z;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const r=await ma(t,e,!0),i=new Gc(e,r.ds),s=i.ga(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const r=Ec(t,`Failed to execute query '${e} against cache`);n.reject(r)}}(await Kl(t),e,n))),n.promise}function iu(t,e,n={}){const r=new z;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new jl({next:n=>{s.eu(),e.enqueueAndForget((()=>Rc(t,o))),n.fromCache&&"server"===r.source?i.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Vc(n,s,{includeMetadataChanges:!0,ua:!0});return Oc(t,o)}(await Xl(t),t.asyncQueue,e,n,r))),r.promise}function su(t,e){const n=new jl(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){V(t).X_.add(e),e.next()}(await Xl(t),n))),()=>{n.eu(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){V(t).X_.delete(e)}(await Xl(t),n)))}}function ou(t,e,n,r){const i=function(t,e){let n;return n="string"==typeof t?ui().encode(t):t,function(t,e){return new Bl(t,e)}(function(t,e){if(t instanceof Uint8Array)return Fl(t,e);if(t instanceof ArrayBuffer)return Fl(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,qa(e));t.asyncQueue.enqueueAndForget((async()=>{Cl(await Ql(t),i,r)}))}function au(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=V(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.jr.getNamedQuery(t,e)))}(await Kl(t),e)))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function cu(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const lu=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,e,n){if(!n)throw new q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hu(t,e,n,r){if(!0===e&&!0===r)throw new q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function du(t){if(!lt.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fu(t){if(lt.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pu(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":F()}function gu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pu(t);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function mu(t,e){if(e<=0)throw new q(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}hu("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cu(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yu{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vu(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new W;switch(t.type){case"firstParty":return new Y(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=lu.get(t);e&&(O("ComponentProvider","Removing Datastore"),lu.delete(t),e.terminate())}(this),Promise.resolve()}}function bu(t,e,n,r={}){var s;const o=(t=gu(t,yu))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&D("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=k.MOCK_USER;else{e=(0,i.Fy)(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new k(o)}t._authCredentials=new $(new H(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new wu(this.firestore,t,this._query)}}class _u{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _u(this.firestore,t,this._key)}}class xu extends wu{constructor(t,e,n){super(t,e,Gn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _u(this.firestore,null,new lt(t))}withConverter(t){return new xu(this.firestore,t,this._path)}}function Su(t,e,...n){if(t=(0,i.Ku)(t),uu("collection","path",e),t instanceof yu){const r=ot.fromString(e,...n);return fu(r),new xu(t,null,r)}{if(!(t instanceof _u||t instanceof xu))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return fu(r),new xu(t.firestore,null,r)}}function Iu(t,e){if(t=gu(t,yu),uu("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wu(t,null,function(t){return new Wn(ot.emptyPath(),t)}(e))}function Au(t,e,...n){if(t=(0,i.Ku)(t),1===arguments.length&&(e=Z.newId()),uu("doc","path",e),t instanceof yu){const r=ot.fromString(e,...n);return du(r),new _u(t,null,new lt(r))}{if(!(t instanceof _u||t instanceof xu))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return du(r),new _u(t.firestore,t instanceof xu?t.converter:null,new lt(r))}}function Eu(t,e){return t=(0,i.Ku)(t),e=(0,i.Ku)(e),(t instanceof _u||t instanceof xu)&&(e instanceof _u||e instanceof xu)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Tu(t,e){return t=(0,i.Ku)(t),e=(0,i.Ku)(e),t instanceof wu&&e instanceof wu&&t.firestore===e.firestore&&er(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ku{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new za(this,"async_queue_retry"),this.fu=()=>{const t=Ua();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.r_.Jo()},this.gu=t;const e=Ua();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;const e=Ua();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise((()=>{}));const e=new z;return this.yu((()=>this.Eu&&this.Vu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Iu.push(t),this.wu())))}async wu(){if(0!==this.Iu.length){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!kt(t))throw t;O("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo((()=>this.wu()))}}yu(t){const e=this.gu.then((()=>(this.Ru=!0,t().catch((t=>{this.Au=t,this.Ru=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw R("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.Ru=!1,t))))));return this.gu=e,e}enqueueAfterDelay(t,e,n){this.pu(),this.mu.indexOf(t)>-1&&(e=0);const r=Ac.createAndSchedule(this,t,e,n,(t=>this.Su(t)));return this.du.push(r),r}pu(){this.Au&&F()}verifyOperationInProgress(){}async bu(){let t;do{t=this.gu,await t}while(t!==this.gu)}Du(t){for(const e of this.du)if(e.timerId===t)return!0;return!1}vu(t){return this.bu().then((()=>{this.du.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.du)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.bu()}))}Cu(t){this.mu.push(t)}Su(t){const e=this.du.indexOf(t);this.du.splice(e,1)}}function Nu(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}class Lu{constructor(){this._progressObserver={},this._taskCompletionResolver=new z,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;class Pu extends yu{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new ku,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ku(t),this._firestoreClient=void 0,await t}}}function Ou(t,e){const n="object"==typeof t?t:(0,r.getApp)(),s="string"==typeof t?t:e||"(default)",o=(0,r._getProvider)(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const t=(0,i.yU)("firestore");t&&bu(o,...t)}return o}function Ru(t){if(t._terminated)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Du(t),t._firestoreClient}function Du(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new Me(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,cu(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ql(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}function Mu(t,e){D("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return ju(t,Ml.provider,{build:t=>new Rl(t,n.cacheSizeBytes,null==e?void 0:e.forceOwnership)}),Promise.resolve()}async function Fu(t){D("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();ju(t,Ml.provider,{build:t=>new Dl(t,e.cacheSizeBytes)})}function ju(t,e,n){if((t=gu(t,Pu))._firestoreClient||t._terminated)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Du(t)}function Bu(t){if(t._initialized&&!t._terminated)throw new q(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new z;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!It.p())return Promise.resolve();const e=t+"main";await It.delete(e)}(na(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Vu(t){return function(t){const e=new z;return t.asyncQueue.enqueueAndForget((async()=>ll(await Ql(t),e))),e.promise}(Ru(t=gu(t,Pu)))}function Uu(t){return Zl(Ru(t=gu(t,Pu)))}function qu(t){return tu(Ru(t=gu(t,Pu)))}function zu(t,e){const n=Ru(t=gu(t,Pu)),r=new Lu;return ou(n,t._databaseId,e,r),r}function Hu(t,e){return au(Ru(t=gu(t,Pu)),e).then((e=>e?new wu(t,null,e.query):null))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Wu(ke.fromBase64String(t))}catch(t){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Wu(ke.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gu{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return tt(this._lat,t._lat)||tt(this._long,t._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=/^__.*__$/;class Ju{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Yr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Kr(t,this.data,e,this.fieldTransforms)}}class Xu{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Yr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Zu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}class th{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Fu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new th(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xu({path:n,Nu:!1});return r.Lu(t),r}Bu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xu({path:n,Nu:!1});return r.Fu(),r}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return wh(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(0===t.length)throw this.qu("Document fields must not be empty");if(Zu(this.Mu)&&Qu.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class eh{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||qa(t)}$u(t,e,n,r=!1){return new th({Mu:t,methodName:e,Ku:n,path:ct.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(t){const e=t._freezeSettings(),n=qa(t._databaseId);return new eh(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rh(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);mh("Data must be an object, but it was:",o,r);const a=ph(r,o);let c,l;if(s.merge)c=new Ae(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=vh(e,r,n);if(!o.contains(i))throw new q(U.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);_h(t,i)||t.push(i)}c=new Ae(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Ju(new un(a),c,l)}class ih extends Gu{_toFieldTransform(t){if(2!==t.Mu)throw 1===t.Mu?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ih}}function sh(t,e,n){return new th({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oh extends Gu{_toFieldTransform(t){return new Fr(t.path,new Nr)}isEqual(t){return t instanceof oh}}class ah extends Gu{constructor(t,e){super(t),this.Uu=e}_toFieldTransform(t){const e=sh(this,t,!0),n=this.Uu.map((t=>fh(t,e))),r=new Lr(n);return new Fr(t.path,r)}isEqual(t){return t instanceof ah&&(0,i.bD)(this.Uu,t.Uu)}}class ch extends Gu{constructor(t,e){super(t),this.Uu=e}_toFieldTransform(t){const e=sh(this,t,!0),n=this.Uu.map((t=>fh(t,e))),r=new Pr(n);return new Fr(t.path,r)}isEqual(t){return t instanceof ch&&(0,i.bD)(this.Uu,t.Uu)}}class lh extends Gu{constructor(t,e){super(t),this.Wu=e}_toFieldTransform(t){const e=new Rr(t.serializer,Ir(t.serializer,this.Wu));return new Fr(t.path,e)}isEqual(t){return t instanceof lh&&this.Wu===t.Wu}}function uh(t,e,n,r){const s=t.$u(1,e,n);mh("Data must be an object, but it was:",s,r);const o=[],a=un.empty();ve(r,((t,r)=>{const c=bh(e,t,n);r=(0,i.Ku)(r);const l=s.Bu(c);if(r instanceof ih)o.push(c);else{const t=fh(r,l);null!=t&&(o.push(c),a.set(c,t))}}));const c=new Ae(o);return new Xu(a,c,s.fieldTransforms)}function hh(t,e,n,r,s,o){const a=t.$u(1,e,n),c=[vh(e,r,n)],l=[s];if(o.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let i=0;i<o.length;i+=2)c.push(vh(e,o[i])),l.push(o[i+1]);const u=[],h=un.empty();for(let f=c.length-1;f>=0;--f)if(!_h(u,c[f])){const t=c[f];let e=l[f];e=(0,i.Ku)(e);const n=a.Bu(t);if(e instanceof ih)u.push(t);else{const r=fh(e,n);null!=r&&(u.push(t),h.set(t,r))}}const d=new Ae(u);return new Xu(h,d,a.fieldTransforms)}function dh(t,e,n,r=!1){return fh(n,t.$u(r?4:3,e))}function fh(t,e){if(gh(t=(0,i.Ku)(t)))return mh("Unsupported field value:",e,t),ph(t,e);if(t instanceof Gu)return function(t,e){if(!Zu(e.Mu))throw e.qu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.qu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&4!==e.Mu)throw e.qu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=fh(i,e.ku(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,i.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ir(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=rt.fromDate(t);return{timestampValue:Li(e.serializer,n)}}if(t instanceof rt){const n=new rt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Li(e.serializer,n)}}if(t instanceof Ku)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:Ci(e.serializer,t._byteString)};if(t instanceof _u){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.qu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ri(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Yu)return function(t,e){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.qu("VectorValues must only contain numeric values.");return xr(e.serializer,t)}))}}}}}}(t,e);throw e.qu(`Unsupported field value: ${pu(t)}`)}(t,e)}function ph(t,e){const n={};return ye(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ve(t,((t,r)=>{const i=fh(r,e.Ou(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function gh(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Ku||t instanceof Wu||t instanceof _u||t instanceof Gu||t instanceof Yu)}function mh(t,e,n){if(!gh(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=pu(n);throw"an object"===r?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function vh(t,e,n){if((e=(0,i.Ku)(e))instanceof $u)return e._internalPath;if("string"==typeof e)return bh(t,e);throw wh("Field path arguments must be of type string or ",t,!1,void 0,n)}const yh=new RegExp("[~\\*/\\[\\]]");function bh(t,e,n){if(e.search(yh)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $u(...e.split("."))._internalPath}catch(r){throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new q(U.INVALID_ARGUMENT,a+t+c)}function _h(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _u(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Sh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ih("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Sh extends xh{data(){return super.data()}}function Ih(t,e){return"string"==typeof e?bh(t,e):e instanceof $u?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eh{}class Th extends Eh{}function kh(t,e,...n){let r=[];e instanceof Eh&&r.push(e),r=r.concat(n),function(t){const e=t.filter((t=>t instanceof Ch)).length,n=t.filter((t=>t instanceof Nh)).length;if(e>1||e>0&&n>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r);for(const i of r)t=i._apply(t);return t}class Nh extends Th{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new Nh(t,e,n)}_apply(t){const e=this._parse(t);return $h(t._query,e),new wu(t.firestore,t.converter,Zn(t._query,e))}_parse(t){const e=nh(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Wh(o,s);const e=[];for(const n of o)e.push(Hh(r,t,n));a={arrayValue:{values:e}}}else a=Hh(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Wh(o,s),a=dh(n,e,o,"in"===s||"not-in"===s);return bn.create(i,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function Lh(t,e,n){const r=e,i=Ih("where",t);return Nh._create(i,r,n)}class Ch extends Eh{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Ch(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:wn.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const i of r)$h(n,i),n=Zn(n,i)}(t._query,e),new wu(t.firestore,t.converter,Zn(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ph extends Th{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Ph(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mn(e,n)}(t._query,this._field,this._direction);return new wu(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Wn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Oh(t,e="asc"){const n=e,r=Ih("orderBy",t);return Ph._create(r,n)}class Rh extends Th{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new Rh(t,e,n)}_apply(t){return new wu(t.firestore,t.converter,tr(t._query,this._limit,this._limitType))}}function Dh(t){return mu("limit",t),Rh._create("limit",t,"F")}function Mh(t){return mu("limitToLast",t),Rh._create("limitToLast",t,"L")}class Fh extends Th{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new Fh(t,e,n)}_apply(t){const e=zh(t,this.type,this._docOrFields,this._inclusive);return new wu(t.firestore,t.converter,function(t,e){return new Wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function jh(...t){return Fh._create("startAt",t,!0)}function Bh(...t){return Fh._create("startAfter",t,!1)}class Vh extends Th{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new Vh(t,e,n)}_apply(t){const e=zh(t,this.type,this._docOrFields,this._inclusive);return new wu(t.firestore,t.converter,function(t,e){return new Wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function Uh(...t){return Vh._create("endBefore",t,!1)}function qh(...t){return Vh._create("endAt",t,!0)}function zh(t,e,n,r){if(n[0]=(0,i.Ku)(n[0]),n[0]instanceof xh)return function(t,e,n,r,i){if(!r)throw new q(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Qn(t))if(o.field.isKeyField())s.push(Ye(e,r.key));else{const t=r.data.field(o.field);if(Oe(t))throw new q(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new q(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new fn(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=nh(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new q(U.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new q(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Yn(t)&&-1!==s.indexOf("/"))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(ot.fromString(s));if(!lt.isDocumentKey(n))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new lt(n);a.push(Ye(e,i))}else{const t=dh(n,r,s);a.push(t)}}return new fn(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Hh(t,e,n){if("string"==typeof(n=(0,i.Ku)(n))){if(""===n)throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yn(e)&&-1!==n.indexOf("/"))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!lt.isDocumentKey(r))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ye(t,new lt(r))}if(n instanceof _u)return Ye(t,n._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pu(n)}.`)}function Wh(t,e){if(!Array.isArray(t)||0===t.length)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $h(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Gh{convertValue(t,e="none"){switch(Ve(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Pe(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw F()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return ve(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertVectorValue(t){var e,n,r;const i=null===(r=null===(n=null===(e=t.fields)||void 0===e?void 0:e.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((t=>Ce(t.doubleValue)));return new Yu(i)}convertGeoPoint(t){return new Ku(Ce(t.latitude),Ce(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Re(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(De(t));default:return null}}convertTimestamp(t){const e=Le(t);return new rt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=ot.fromString(t);j(cs(n));const r=new Fe(n.get(1),n.get(3)),i=new lt(n.popFirst(5));return r.isEqual(e)||R(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Yh extends Gh{constructor(t){super(),this.firestore=t}convertBytes(t){return new Wu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _u(this.firestore,null,e)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qh{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jh extends xh{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Ih("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Xh extends Jh{data(t={}){return super.data(t)}}class Zh{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Qh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Xh(this._firestore,this._userDataWriter,n.key,n,new Qh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Xh(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Qh(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Xh(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Qh(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:td(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function td(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function ed(t,e){return t instanceof Jh&&e instanceof Jh?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zh&&e instanceof Zh&&t._firestore===e._firestore&&Tu(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){t=gu(t,_u);const e=gu(t.firestore,Pu);return nu(Ru(e),t._key).then((n=>md(e,t,n)))}class rd extends Gh{constructor(t){super(),this.firestore=t}convertBytes(t){return new Wu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _u(this.firestore,null,e)}}function id(t){t=gu(t,_u);const e=gu(t.firestore,Pu),n=Ru(e),r=new rd(e);return eu(n,t._key).then((n=>new Jh(e,r,t._key,n,new Qh(null!==n&&n.hasLocalMutations,!0),t.converter)))}function sd(t){t=gu(t,_u);const e=gu(t.firestore,Pu);return nu(Ru(e),t._key,{source:"server"}).then((n=>md(e,t,n)))}function od(t){t=gu(t,wu);const e=gu(t.firestore,Pu),n=Ru(e),r=new rd(e);return Ah(t._query),iu(n,t._query).then((n=>new Zh(e,r,t,n)))}function ad(t){t=gu(t,wu);const e=gu(t.firestore,Pu),n=Ru(e),r=new rd(e);return ru(n,t._query).then((n=>new Zh(e,r,t,n)))}function cd(t){t=gu(t,wu);const e=gu(t.firestore,Pu),n=Ru(e),r=new rd(e);return iu(n,t._query,{source:"server"}).then((n=>new Zh(e,r,t,n)))}function ld(t,e,n){t=gu(t,_u);const r=gu(t.firestore,Pu),i=Kh(t.converter,e,n);return gd(r,[rh(nh(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Vr.none())])}function ud(t,e,n,...r){t=gu(t,_u);const s=gu(t.firestore,Pu),o=nh(s);let a;return a="string"==typeof(e=(0,i.Ku)(e))||e instanceof $u?hh(o,"updateDoc",t._key,e,n,r):uh(o,"updateDoc",t._key,e),gd(s,[a.toMutation(t._key,Vr.exists(!0))])}function hd(t){return gd(gu(t.firestore,Pu),[new Zr(t._key,Vr.none())])}function dd(t,e){const n=gu(t.firestore,Pu),r=Au(t),i=Kh(t.converter,e);return gd(n,[rh(nh(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Vr.exists(!1))]).then((()=>r))}function fd(t,...e){var n,r,s;t=(0,i.Ku)(t);let o={includeMetadataChanges:!1,source:"default"},a=0;"object"!=typeof e[a]||Nu(e[a])||(o=e[a],a++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Nu(e[a])){const t=e[a];e[a]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[a+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[a+2]=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}let l,u,h;if(t instanceof _u)u=gu(t.firestore,Pu),h=Gn(t._key.path),l={next:n=>{e[a]&&e[a](md(u,t,n))},error:e[a+1],complete:e[a+2]};else{const n=gu(t,wu);u=gu(n.firestore,Pu),h=n._query;const r=new rd(u);l={next:t=>{e[a]&&e[a](new Zh(u,r,n,t))},error:e[a+1],complete:e[a+2]},Ah(t._query)}return function(t,e,n,r){const i=new jl(r),s=new Vc(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>Oc(await Xl(t),s))),()=>{i.eu(),t.asyncQueue.enqueueAndForget((async()=>Rc(await Xl(t),s)))}}(Ru(u),h,c,l)}function pd(t,e){return su(Ru(t=gu(t,Pu)),Nu(e)?e:{next:e})}function gd(t,e){return function(t,e){const n=new z;return t.asyncQueue.enqueueAndForget((async()=>rl(await Ql(t),e,n))),n.promise}(Ru(t),e)}function md(t,e,n){const r=n.docs.get(e._key),i=new rd(t);return new Jh(t,i,e._key,r,new Qh(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vd={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=nh(t)}set(t,e,n){this._verifyNotCommitted();const r=bd(t,this._firestore),i=Kh(r.converter,e,n),s=rh(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Vr.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=bd(t,this._firestore);let o;return o="string"==typeof(e=(0,i.Ku)(e))||e instanceof $u?hh(this._dataReader,"WriteBatch.update",s._key,e,n,r):uh(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Vr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=bd(t,this._firestore);return this._mutations=this._mutations.concat(new Zr(e._key,Vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bd(t,e){if((t=(0,i.Ku)(t)).firestore!==e)throw new q(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=nh(t)}get(t){const e=bd(t,this._firestore),n=new Yh(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return F();const r=t[0];if(r.isFoundDocument())return new xh(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new xh(this._firestore,n,e._key,null,e.converter);throw F()}))}set(t,e,n){const r=bd(t,this._firestore),i=Kh(r.converter,e,n),s=rh(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(t,e,n,...r){const s=bd(t,this._firestore);let o;return o="string"==typeof(e=(0,i.Ku)(e))||e instanceof $u?hh(this._dataReader,"Transaction.update",s._key,e,n,r):uh(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this}delete(t){const e=bd(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=bd(t,this._firestore),n=new rd(this._firestore);return super.get(t).then((t=>new Jh(this._firestore,n,e._key,t._document,new Qh(!1,!1),e.converter)))}}function _d(t,e,n){t=gu(t,Pu);const r=Object.assign(Object.assign({},vd),n);return function(t){if(t.maxAttempts<1)throw new q(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(t,e,n){const r=new z;return t.asyncQueue.enqueueAndForget((async()=>{const i=await Jl(t);new Ul(t.asyncQueue,i,n,e,r).cu()})),r.promise}(Ru(t),(n=>e(new wd(t,n))),r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(){return new ih("deleteField")}function Sd(){return new oh("serverTimestamp")}function Id(...t){return new ah("arrayUnion",t)}function Ad(...t){return new ch("arrayRemove",t)}function Ed(t){return new lh("increment",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Td(t){return Ru(t=gu(t,Pu)),new yd(t,(e=>gd(t,e)))
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}new WeakMap;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,e=!0){!function(t){N=t}(r.SDK_VERSION),(0,r._registerComponent)(new s("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Pu(new G(t.getProvider("auth-internal")),new J(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fe(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(T,"4.7.5",t),(0,r.registerVersion)(T,"4.7.5","esm2017")}()},4046:function(t,e,n){"use strict";n.d(e,{Am:function(){return H},Bd:function(){return E},FA:function(){return F},Fy:function(){return x},I9:function(){return W},Im:function(){return U},Ku:function(){return J},Ll:function(){return A},T9:function(){return b},Uj:function(){return c},XA:function(){return w},ZQ:function(){return S},bD:function(){return q},c1:function(){return k},cY:function(){return _},eX:function(){return R},g:function(){return M},gR:function(){return V},hp:function(){return $},jZ:function(){return I},lT:function(){return C},lV:function(){return L},mS:function(){return d},nr:function(){return P},p7:function(){return T},sr:function(){return N},tD:function(){return G},u:function(){return l},yU:function(){return y},zW:function(){return O},zw:function(){return u}});n(8743),n(3725),n(9838),n(9078);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i=function(t){const e=[];let n=0,r=0;while(n<t.length){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((7&i)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(1023&c))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,l=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],s=i<t.length,a=s?n[t.charAt(i)]:0;++i;const c=i<t.length,l=c?n[t.charAt(i)]:64;++i;const u=i<t.length,h=u?n[t.charAt(i)]:64;if(++i,null==e||null==a||null==l||null==h)throw new o;const d=e<<2|a>>4;if(r.push(d),64!==l){const t=a<<4&240|l>>2;if(r.push(t),64!==h){const t=l<<6&192|h;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(t){const e=r(t);return s.encodeByteArray(e,!0)},c=function(t){return a(t).replace(/\./g,"")},l=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&h(n)&&(t[n]=u(t[n],e[n]));return t}function h(t){return"__proto__"!==t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f=()=>d().__FIREBASE_DEFAULTS__,p=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},g=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&l(t[1]);return e&&JSON.parse(e)},m=()=>{try{return f()||p()||g()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},v=t=>{var e,n;return null===(n=null===(e=m())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},y=t=>{const e=v(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b=()=>{var t;return null===(t=m())||void 0===t?void 0:t.config},w=t=>{var e;return null===(e=m())||void 0===e?void 0:e[`_${t}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[c(JSON.stringify(n)),c(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function I(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function A(){var t;const e=null===(t=m())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function E(){return"undefined"!==typeof window||T()}function T(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function k(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function N(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function L(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function C(){const t=S();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function P(){return!A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O(){try{return"object"===typeof indexedDB}catch(t){return!1}}function R(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const D="FirebaseError";class M extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=D,Object.setPrototypeOf(this,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,F.prototype.create)}}class F{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?j(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`,a=new M(r,o,n);return a}}function j(t,e){return t.replace(B,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}const B=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function V(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function q(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(z(n)&&z(s)){if(!q(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function z(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function W(t){const e={},n=t.replace(/^\?/,"").split("&");return n.forEach((t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}})),e}function $(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e){const n=new K(t,e);return n.subscribe.bind(n)}class K{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=Y(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=Q),void 0===r.error&&(r.error=Q),void 0===r.complete&&(r.complete=Q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Y(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}function Q(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function J(t){return t&&t._delegate?t._delegate:t}},144:function(t,e,n){"use strict";n.d(e,{C4:function(){return I},EW:function(){return Ft},Gc:function(){return vt},IG:function(){return At},IJ:function(){return Lt},KR:function(){return Nt},Kh:function(){return mt},Pr:function(){return Dt},R1:function(){return Ot},X2:function(){return l},bl:function(){return A},fE:function(){return xt},g8:function(){return wt},hV:function(){return zt},hZ:function(){return M},i9:function(){return kt},ju:function(){return St},lJ:function(){return Et},qA:function(){return j},u4:function(){return D},ux:function(){return It},wB:function(){return qt},yC:function(){return o}});n(8743),n(3689),n(1838),n(2035),n(8802),n(3725),n(5019),n(9838),n(1339),n(9229),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);var r=n(4232);let i,s;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let t,e;if(this._isPaused=!0,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){let t,e;if(this._isPaused=!1,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(this._active=!1,e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(this.effects.length=0,e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0}}}function a(){return i}const c=new WeakSet;class l{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,i&&i.active&&i.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,c.has(this)&&(c.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||f(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,E(this),m(this);const t=s,e=x;s=this,x=!0;try{return this.fn()}finally{0,v(this),s=t,x=e,this.flags&=-3}}stop(){if(1&this.flags){for(let t=this.deps;t;t=t.nextDep)w(t);this.deps=this.depsTail=void 0,E(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){y(this)&&this.run()}get dirty(){return y(this)}}let u,h,d=0;function f(t,e=!1){if(t.flags|=8,e)return t.next=h,void(h=t);t.next=u,u=t}function p(){d++}function g(){if(--d>0)return;if(h){let t=h;h=void 0;while(t){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let t;while(u){let n=u;u=void 0;while(n){const r=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(e){t||(t=e)}n=r}}if(t)throw t}function m(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function v(t){let e,n=t.depsTail,r=n;while(r){const t=r.prevDep;-1===r.version?(r===n&&(n=t),w(r),_(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=t}t.deps=e,t.depsTail=n}function y(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(b(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function b(t){if(4&t.flags&&!(16&t.flags))return;if(t.flags&=-17,t.globalVersion===T)return;t.globalVersion=T;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!y(t))return void(t.flags&=-3);const n=s,i=x;s=t,x=!0;try{m(t);const n=t.fn(t._value);(0===e.version||(0,r.$H)(n,t._value))&&(t._value=n,e.version++)}catch(o){throw e.version++,o}finally{s=n,x=i,v(t),t.flags&=-3}}function w(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let t=n.computed.deps;t;t=t.nextDep)w(t,!0)}e||--n.sc||!n.map||n.map.delete(n.key)}function _(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let x=!0;const S=[];function I(){S.push(x),x=!1}function A(){const t=S.pop();x=void 0===t||t}function E(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const t=s;s=void 0;try{e()}finally{s=t}}}let T=0;class k{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class N{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!s||!x||s===this.computed)return;let e=this.activeLink;if(void 0===e||e.sub!==s)e=this.activeLink=new k(s,this),s.deps?(e.prevDep=s.depsTail,s.depsTail.nextDep=e,s.depsTail=e):s.deps=s.depsTail=e,L(e);else if(-1===e.version&&(e.version=this.version,e.nextDep)){const t=e.nextDep;t.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=t),e.prevDep=s.depsTail,e.nextDep=void 0,s.depsTail.nextDep=e,s.depsTail=e,s.deps===e&&(s.deps=t)}return e}trigger(t){this.version++,T++,this.notify(t)}notify(t){p();try{0;for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{g()}}}function L(t){if(t.dep.sc++,4&t.sub.flags){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)L(t)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const C=new WeakMap,P=Symbol(""),O=Symbol(""),R=Symbol("");function D(t,e,n){if(x&&s){let e=C.get(t);e||C.set(t,e=new Map);let r=e.get(n);r||(e.set(n,r=new N),r.map=e,r.key=n),r.track()}}function M(t,e,n,i,s,o){const a=C.get(t);if(!a)return void T++;const c=t=>{t&&t.trigger()};if(p(),"clear"===e)a.forEach(c);else{const s=(0,r.cy)(t),o=s&&(0,r.yI)(n);if(s&&"length"===n){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n===R||!(0,r.Bm)(n)&&n>=t)&&c(e)}))}else switch((void 0!==n||a.has(void 0))&&c(a.get(n)),o&&c(a.get(R)),e){case"add":s?o&&c(a.get("length")):(c(a.get(P)),(0,r.CE)(t)&&c(a.get(O)));break;case"delete":s||(c(a.get(P)),(0,r.CE)(t)&&c(a.get(O)));break;case"set":(0,r.CE)(t)&&c(a.get(P));break}}g()}function F(t){const e=It(t);return e===t?e:(D(e,"iterate",R),xt(t)?e:e.map(Et))}function j(t){return D(t=It(t),"iterate",R),t}const B={__proto__:null,[Symbol.iterator](){return V(this,Symbol.iterator,Et)},concat(...t){return F(this).concat(...t.map((t=>(0,r.cy)(t)?F(t):t)))},entries(){return V(this,"entries",(t=>(t[1]=Et(t[1]),t)))},every(t,e){return q(this,"every",t,e,void 0,arguments)},filter(t,e){return q(this,"filter",t,e,(t=>t.map(Et)),arguments)},find(t,e){return q(this,"find",t,e,Et,arguments)},findIndex(t,e){return q(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return q(this,"findLast",t,e,Et,arguments)},findLastIndex(t,e){return q(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return q(this,"forEach",t,e,void 0,arguments)},includes(...t){return H(this,"includes",t)},indexOf(...t){return H(this,"indexOf",t)},join(t){return F(this).join(t)},lastIndexOf(...t){return H(this,"lastIndexOf",t)},map(t,e){return q(this,"map",t,e,void 0,arguments)},pop(){return W(this,"pop")},push(...t){return W(this,"push",t)},reduce(t,...e){return z(this,"reduce",t,e)},reduceRight(t,...e){return z(this,"reduceRight",t,e)},shift(){return W(this,"shift")},some(t,e){return q(this,"some",t,e,void 0,arguments)},splice(...t){return W(this,"splice",t)},toReversed(){return F(this).toReversed()},toSorted(t){return F(this).toSorted(t)},toSpliced(...t){return F(this).toSpliced(...t)},unshift(...t){return W(this,"unshift",t)},values(){return V(this,"values",Et)}};function V(t,e,n){const r=j(t),i=r[e]();return r===t||xt(t)||(i._next=i.next,i.next=()=>{const t=i._next();return t.value&&(t.value=n(t.value)),t}),i}const U=Array.prototype;function q(t,e,n,r,i,s){const o=j(t),a=o!==t&&!xt(t),c=o[e];if(c!==U[e]){const e=c.apply(t,s);return a?Et(e):e}let l=n;o!==t&&(a?l=function(e,r){return n.call(this,Et(e),r,t)}:n.length>2&&(l=function(e,r){return n.call(this,e,r,t)}));const u=c.call(o,l,r);return a&&i?i(u):u}function z(t,e,n,r){const i=j(t);let s=n;return i!==t&&(xt(t)?n.length>3&&(s=function(e,r,i){return n.call(this,e,r,i,t)}):s=function(e,r,i){return n.call(this,e,Et(r),i,t)}),i[e](s,...r)}function H(t,e,n){const r=It(t);D(r,"iterate",R);const i=r[e](...n);return-1!==i&&!1!==i||!St(n[0])?i:(n[0]=It(n[0]),r[e](...n))}function W(t,e,n=[]){I(),p();const r=It(t)[e].apply(t,n);return g(),A(),r}const $=(0,r.pD)("__proto__,__v_isRef,__isVue"),G=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.Bm));function K(t){(0,r.Bm)(t)||(t=String(t));const e=It(this);return D(e,"has",t),e.hasOwnProperty(t)}class Y{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){if("__v_skip"===e)return t["__v_skip"];const i=this._isReadonly,s=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return s;if("__v_raw"===e)return n===(i?s?ft:dt:s?ht:ut).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=(0,r.cy)(t);if(!i){let t;if(o&&(t=B[e]))return t;if("hasOwnProperty"===e)return K}const a=Reflect.get(t,e,kt(t)?t:n);return((0,r.Bm)(e)?G.has(e):$(e))?a:(i||D(t,"get",e),s?a:kt(a)?o&&(0,r.yI)(e)?a:a.value:(0,r.Gv)(a)?i?yt(a):mt(a):a)}}class Q extends Y{constructor(t=!1){super(!1,t)}set(t,e,n,i){let s=t[e];if(!this._isShallow){const e=_t(s);if(xt(n)||_t(n)||(s=It(s),n=It(n)),!(0,r.cy)(t)&&kt(s)&&!kt(n))return!e&&(s.value=n,!0)}const o=(0,r.cy)(t)&&(0,r.yI)(e)?Number(e)<t.length:(0,r.$3)(t,e),a=Reflect.set(t,e,n,kt(t)?t:i);return t===It(i)&&(o?(0,r.$H)(n,s)&&M(t,"set",e,n,s):M(t,"add",e,n)),a}deleteProperty(t,e){const n=(0,r.$3)(t,e),i=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&M(t,"delete",e,void 0,i),s}has(t,e){const n=Reflect.has(t,e);return(0,r.Bm)(e)&&G.has(e)||D(t,"has",e),n}ownKeys(t){return D(t,"iterate",(0,r.cy)(t)?"length":P),Reflect.ownKeys(t)}}class J extends Y{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const X=new Q,Z=new J,tt=new Q(!0),et=t=>t,nt=t=>Reflect.getPrototypeOf(t);function rt(t,e,n){return function(...i){const s=this["__v_raw"],o=It(s),a=(0,r.CE)(o),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=s[t](...i),h=n?et:e?Tt:Et;return!e&&D(o,"iterate",l?O:P),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function it(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function st(t,e){const n={get(n){const i=this["__v_raw"],s=It(i),o=It(n);t||((0,r.$H)(n,o)&&D(s,"get",n),D(s,"get",o));const{has:a}=nt(s),c=e?et:t?Tt:Et;return a.call(s,n)?c(i.get(n)):a.call(s,o)?c(i.get(o)):void(i!==s&&i.get(n))},get size(){const e=this["__v_raw"];return!t&&D(It(e),"iterate",P),Reflect.get(e,"size",e)},has(e){const n=this["__v_raw"],i=It(n),s=It(e);return t||((0,r.$H)(e,s)&&D(i,"has",e),D(i,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)},forEach(n,r){const i=this,s=i["__v_raw"],o=It(s),a=e?et:t?Tt:Et;return!t&&D(o,"iterate",P),s.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}};(0,r.X$)(n,t?{add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear")}:{add(t){e||xt(t)||_t(t)||(t=It(t));const n=It(this),r=nt(n),i=r.has.call(n,t);return i||(n.add(t),M(n,"add",t,t)),this},set(t,n){e||xt(n)||_t(n)||(n=It(n));const i=It(this),{has:s,get:o}=nt(i);let a=s.call(i,t);a||(t=It(t),a=s.call(i,t));const c=o.call(i,t);return i.set(t,n),a?(0,r.$H)(n,c)&&M(i,"set",t,n,c):M(i,"add",t,n),this},delete(t){const e=It(this),{has:n,get:r}=nt(e);let i=n.call(e,t);i||(t=It(t),i=n.call(e,t));const s=r?r.call(e,t):void 0,o=e.delete(t);return i&&M(e,"delete",t,void 0,s),o},clear(){const t=It(this),e=0!==t.size,n=void 0,r=t.clear();return e&&M(t,"clear",void 0,void 0,n),r}});const i=["keys","values","entries",Symbol.iterator];return i.forEach((r=>{n[r]=rt(r,t,e)})),n}function ot(t,e){const n=st(t,e);return(e,i,s)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.$3)(n,i)&&i in e?n:e,i,s)}const at={get:ot(!1,!1)},ct={get:ot(!1,!0)},lt={get:ot(!0,!1)};const ut=new WeakMap,ht=new WeakMap,dt=new WeakMap,ft=new WeakMap;function pt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:pt((0,r.Zf)(t))}function mt(t){return _t(t)?t:bt(t,!1,X,at,ut)}function vt(t){return bt(t,!1,tt,ct,ht)}function yt(t){return bt(t,!0,Z,lt,dt)}function bt(t,e,n,i,s){if(!(0,r.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=s.get(t);if(o)return o;const a=gt(t);if(0===a)return t;const c=new Proxy(t,2===a?i:n);return s.set(t,c),c}function wt(t){return _t(t)?wt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function _t(t){return!(!t||!t["__v_isReadonly"])}function xt(t){return!(!t||!t["__v_isShallow"])}function St(t){return!!t&&!!t["__v_raw"]}function It(t){const e=t&&t["__v_raw"];return e?It(e):t}function At(t){return!(0,r.$3)(t,"__v_skip")&&Object.isExtensible(t)&&(0,r.yQ)(t,"__v_skip",!0),t}const Et=t=>(0,r.Gv)(t)?mt(t):t,Tt=t=>(0,r.Gv)(t)?yt(t):t;function kt(t){return!!t&&!0===t["__v_isRef"]}function Nt(t){return Ct(t,!1)}function Lt(t){return Ct(t,!0)}function Ct(t,e){return kt(t)?t:new Pt(t,e)}class Pt{constructor(t,e){this.dep=new N,this["__v_isRef"]=!0,this["__v_isShallow"]=!1,this._rawValue=e?t:It(t),this._value=e?t:Et(t),this["__v_isShallow"]=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,n=this["__v_isShallow"]||xt(t)||_t(t);t=n?t:It(t),(0,r.$H)(t,e)&&(this._rawValue=t,this._value=n?t:Et(t),this.dep.trigger())}}function Ot(t){return kt(t)?t.value:t}const Rt={get:(t,e,n)=>"__v_raw"===e?t:Ot(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return kt(i)&&!kt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Dt(t){return wt(t)?t:new Proxy(t,Rt)}class Mt{constructor(t,e,n){this.fn=t,this.setter=e,this._value=void 0,this.dep=new N(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=T-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!e,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags||s===this))return f(this,!0),!0}get value(){const t=this.dep.track();return b(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ft(t,e,n=!1){let i,s;(0,r.Tn)(t)?i=t:(i=t.get,s=t.set);const o=new Mt(i,s,n);return o}const jt={},Bt=new WeakMap;let Vt;function Ut(t,e=!1,n=Vt){if(n){let e=Bt.get(n);e||Bt.set(n,e=[]),e.push(t)}else 0}function qt(t,e,n=r.MZ){const{immediate:i,deep:s,once:o,scheduler:c,augmentJob:u,call:h}=n,d=t=>s?t:xt(t)||!1===s||0===s?zt(t,1):zt(t);let f,p,g,m,v=!1,y=!1;if(kt(t)?(p=()=>t.value,v=xt(t)):wt(t)?(p=()=>d(t),v=!0):(0,r.cy)(t)?(y=!0,v=t.some((t=>wt(t)||xt(t))),p=()=>t.map((t=>kt(t)?t.value:wt(t)?d(t):(0,r.Tn)(t)?h?h(t,2):t():void 0))):p=(0,r.Tn)(t)?e?h?()=>h(t,2):t:()=>{if(g){I();try{g()}finally{A()}}const e=Vt;Vt=f;try{return h?h(t,3,[m]):t(m)}finally{Vt=e}}:r.tE,e&&s){const t=p,e=!0===s?1/0:s;p=()=>zt(t(),e)}const b=a(),w=()=>{f.stop(),b&&b.active&&(0,r.TF)(b.effects,f)};if(o&&e){const t=e;e=(...e)=>{t(...e),w()}}let _=y?new Array(t.length).fill(jt):jt;const x=t=>{if(1&f.flags&&(f.dirty||t))if(e){const t=f.run();if(s||v||(y?t.some(((t,e)=>(0,r.$H)(t,_[e]))):(0,r.$H)(t,_))){g&&g();const n=Vt;Vt=f;try{const n=[t,_===jt?void 0:y&&_[0]===jt?[]:_,m];h?h(e,3,n):e(...n),_=t}finally{Vt=n}}}else f.run()};return u&&u(x),f=new l(p),f.scheduler=c?()=>c(x,!1):x,m=t=>Ut(t,!1,f),g=f.onStop=()=>{const t=Bt.get(f);if(t){if(h)h(t,4);else for(const e of t)e();Bt.delete(f)}},e?i?x(!0):_=f.run():c?c(x.bind(null,!0),!0):f.run(),w.pause=f.pause.bind(f),w.resume=f.resume.bind(f),w.stop=w,w}function zt(t,e=1/0,n){if(e<=0||!(0,r.Gv)(t)||t["__v_skip"])return t;if(n=n||new Set,n.has(t))return t;if(n.add(t),e--,kt(t))zt(t.value,e,n);else if((0,r.cy)(t))for(let r=0;r<t.length;r++)zt(t[r],e,n);else if((0,r.vM)(t)||(0,r.CE)(t))t.forEach((t=>{zt(t,e,n)}));else if((0,r.Qd)(t)){for(const r in t)zt(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&zt(t[r],e,n)}return t}},6768:function(t,e,n){"use strict";n.d(e,{$u:function(){return ht},CE:function(){return tn},Df:function(){return G},EW:function(){return Un},FK:function(){return ze},Gt:function(){return Kt},Gy:function(){return D},K9:function(){return me},Lk:function(){return an},MZ:function(){return $},OW:function(){return z},Q3:function(){return fn},QP:function(){return F},WQ:function(){return Yt},Wv:function(){return en},bF:function(){return cn},bo:function(){return N},dY:function(){return m},eW:function(){return dn},g2:function(){return bt},h:function(){return qn},k6:function(){return k},nI:function(){return Sn},pI:function(){return St},pM:function(){return K},pR:function(){return U},qL:function(){return o},rE:function(){return zn},sV:function(){return lt},uX:function(){return Ye},wB:function(){return Te},xo:function(){return dt}});n(8743),n(8802),n(3725),n(178),n(5019),n(9838),n(1339),n(9471),n(9229),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);var r=n(144),i=n(4232);function s(t,e,n,r){try{return r?t(...r):t()}catch(i){a(i,e,n)}}function o(t,e,n,r){if((0,i.Tn)(t)){const o=s(t,e,n,r);return o&&(0,i.yL)(o)&&o.catch((t=>{a(t,e,n)})),o}if((0,i.cy)(t)){const i=[];for(let s=0;s<t.length;s++)i.push(o(t[s],e,n,r));return i}}function a(t,e,n,o=!0){const a=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||i.MZ;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,o,a))return;i=i.parent}if(l)return(0,r.C4)(),s(l,null,10,[t,o,a]),void(0,r.bl)()}c(t,n,a,o,u)}function c(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const l=[];let u=-1;const h=[];let d=null,f=0;const p=Promise.resolve();let g=null;function m(t){const e=g||p;return t?e.then(this?t.bind(this):t):e}function v(t){let e=u+1,n=l.length;while(e<n){const r=e+n>>>1,i=l[r],s=S(i);s<t||s===t&&2&i.flags?e=r+1:n=r}return e}function y(t){if(!(1&t.flags)){const e=S(t),n=l[l.length-1];!n||!(2&t.flags)&&e>=S(n)?l.push(t):l.splice(v(e),0,t),t.flags|=1,b()}}function b(){g||(g=p.then(I))}function w(t){(0,i.cy)(t)?h.push(...t):d&&-1===t.id?d.splice(f+1,0,t):1&t.flags||(h.push(t),t.flags|=1),b()}function _(t,e,n=u+1){for(0;n<l.length;n++){const e=l[n];if(e&&2&e.flags){if(t&&e.id!==t.uid)continue;0,l.splice(n,1),n--,4&e.flags&&(e.flags&=-2),e(),4&e.flags||(e.flags&=-2)}}}function x(t){if(h.length){const t=[...new Set(h)].sort(((t,e)=>S(t)-S(e)));if(h.length=0,d)return void d.push(...t);for(d=t,f=0;f<d.length;f++){const t=d[f];0,4&t.flags&&(t.flags&=-2),8&t.flags||t(),t.flags&=-2}d=null,f=0}}const S=t=>null==t.id?2&t.flags?-1:1/0:t.id;function I(t){i.tE;try{for(u=0;u<l.length;u++){const t=l[u];!t||8&t.flags||(4&t.flags&&(t.flags&=-2),s(t,t.i,t.i?15:14),4&t.flags||(t.flags&=-2))}}finally{for(;u<l.length;u++){const t=l[u];t&&(t.flags&=-2)}u=-1,l.length=0,x(t),g=null,(l.length||h.length)&&I(t)}}let A=null,E=null;function T(t){const e=A;return A=t,E=t&&t.type.__scopeId||null,e}function k(t,e=A,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Xe(-1);const i=T(e);let s;try{s=t(...n)}finally{T(i),r._d&&Xe(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function N(t,e){if(null===A)return t;const n=jn(A),s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[t,a,c,l=i.MZ]=e[o];t&&((0,i.Tn)(t)&&(t={mounted:t,updated:t}),t.deep&&(0,r.hV)(a),s.push({dir:t,instance:n,value:a,oldValue:void 0,arg:c,modifiers:l}))}return t}function L(t,e,n,i){const s=t.dirs,a=e&&e.dirs;for(let c=0;c<s.length;c++){const l=s[c];a&&(l.oldValue=a[c].value);let u=l.dir[i];u&&((0,r.C4)(),o(u,n,8,[t.el,l,t,e]),(0,r.bl)())}}const C=Symbol("_vte"),P=t=>t.__isTeleport;const O=Symbol("_leaveCb"),R=Symbol("_enterCb");function D(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return lt((()=>{t.isMounted=!0})),dt((()=>{t.isUnmounting=!0})),t}const M=[Function,Array],F={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:M,onEnter:M,onAfterEnter:M,onEnterCancelled:M,onBeforeLeave:M,onLeave:M,onAfterLeave:M,onLeaveCancelled:M,onBeforeAppear:M,onAppear:M,onAfterAppear:M,onAppearCancelled:M},j=t=>{const e=t.subTree;return e.component?j(e.component):e},B={name:"BaseTransition",props:F,setup(t,{slots:e}){const n=Sn(),i=D();return()=>{const s=e.default&&G(e.default(),!0);if(!s||!s.length)return;const o=V(s),a=(0,r.ux)(t),{mode:c}=a;if(i.isLeaving)return H(o);const l=W(o);if(!l)return H(o);let u=z(l,a,i,n,(t=>u=t));l.type!==We&&$(l,u);let h=n.subTree&&W(n.subTree);if(h&&h.type!==We&&!rn(l,h)&&j(n).type!==We){let t=z(h,a,i,n);if($(h,t),"out-in"===c&&l.type!==We)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,8&n.job.flags||n.update(),delete t.afterLeave,h=void 0},H(o);"in-out"===c&&l.type!==We?t.delayLeave=(t,e,n)=>{const r=q(i,h);r[String(h.key)]=h,t[O]=()=>{e(),t[O]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{n(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return o}}};function V(t){let e=t[0];if(t.length>1){let n=!1;for(const r of t)if(r.type!==We){0,e=r,n=!0;break}}return e}const U=B;function q(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function z(t,e,n,r,s){const{appear:a,mode:c,persisted:l=!1,onBeforeEnter:u,onEnter:h,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:y,onAppear:b,onAfterAppear:w,onAppearCancelled:_}=e,x=String(t.key),S=q(n,t),I=(t,e)=>{t&&o(t,r,9,e)},A=(t,e)=>{const n=e[1];I(t,e),(0,i.cy)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},E={mode:c,persisted:l,beforeEnter(e){let r=u;if(!n.isMounted){if(!a)return;r=y||u}e[O]&&e[O](!0);const i=S[x];i&&rn(t,i)&&i.el[O]&&i.el[O](),I(r,[e])},enter(t){let e=h,r=d,i=f;if(!n.isMounted){if(!a)return;e=b||h,r=w||d,i=_||f}let s=!1;const o=t[R]=e=>{s||(s=!0,I(e?i:r,[t]),E.delayedLeave&&E.delayedLeave(),t[R]=void 0)};e?A(e,[t,o]):o()},leave(e,r){const i=String(t.key);if(e[R]&&e[R](!0),n.isUnmounting)return r();I(p,[e]);let s=!1;const o=e[O]=n=>{s||(s=!0,r(),I(n?v:m,[e]),e[O]=void 0,S[i]===t&&delete S[i])};S[i]=t,g?A(g,[e,o]):o()},clone(t){const i=z(t,e,n,r,s);return s&&s(i),i}};return E}function H(t){if(X(t))return t=hn(t),t.children=null,t}function W(t){if(!X(t))return P(t.type)&&t.children?V(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(16&e)return n[0];if(32&e&&(0,i.Tn)(n.default))return n.default()}}function $(t,e){6&t.shapeFlag&&t.component?(t.transition=e,$(t.component.subTree,e)):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function G(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:s);o.type===ze?(128&o.patchFlag&&i++,r=r.concat(G(o.children,e,a))):(e||o.type!==We)&&r.push(null!=a?hn(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}
/*! #__NO_SIDE_EFFECTS__ */function K(t,e){return(0,i.Tn)(t)?(()=>(0,i.X$)({name:t.name},e,{setup:t}))():t}function Y(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Q(t,e,n,o,a=!1){if((0,i.cy)(t))return void t.forEach(((t,r)=>Q(t,e&&((0,i.cy)(e)?e[r]:e),n,o,a)));if(J(o)&&!a)return void(512&o.shapeFlag&&o.type.__asyncResolved&&o.component.subTree.component&&Q(t,e,n,o.component.subTree));const c=4&o.shapeFlag?jn(o.component):o.el,l=a?null:c,{i:u,r:h}=t;const d=e&&e.r,f=u.refs===i.MZ?u.refs={}:u.refs,p=u.setupState,g=(0,r.ux)(p),m=p===i.MZ?()=>!1:t=>(0,i.$3)(g,t);if(null!=d&&d!==h&&((0,i.Kg)(d)?(f[d]=null,m(d)&&(p[d]=null)):(0,r.i9)(d)&&(d.value=null)),(0,i.Tn)(h))s(h,u,12,[l,f]);else{const e=(0,i.Kg)(h),s=(0,r.i9)(h);if(e||s){const r=()=>{if(t.f){const n=e?m(h)?p[h]:f[h]:h.value;a?(0,i.cy)(n)&&(0,i.TF)(n,c):(0,i.cy)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],m(h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=l,m(h)&&(p[h]=l)):s&&(h.value=l,t.k&&(f[t.k]=l))};l?(r.id=-1,ge(r,n)):r()}else 0}}(0,i.We)().requestIdleCallback,(0,i.We)().cancelIdleCallback;const J=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const X=t=>t.type.__isKeepAlive;RegExp,RegExp;function Z(t,e){return(0,i.cy)(t)?t.some((t=>Z(t,e))):(0,i.Kg)(t)?t.split(",").includes(e):!!(0,i.gd)(t)&&(t.lastIndex=0,t.test(e))}function tt(t,e){nt(t,"a",e)}function et(t,e){nt(t,"da",e)}function nt(t,e,n=xn){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(ot(e,r,n),n){let t=n.parent;while(t&&t.parent)X(t.parent.vnode)&&rt(r,e,n,t),t=t.parent}}function rt(t,e,n,r){const s=ot(e,t,r,!0);ft((()=>{(0,i.TF)(r[e],s)}),n)}function it(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function st(t){return 128&t.shapeFlag?t.ssContent:t}function ot(t,e,n=xn,i=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{(0,r.C4)();const s=En(n),a=o(e,n,t,i);return s(),(0,r.bl)(),a});return i?s.unshift(a):s.push(a),a}}const at=t=>(e,n=xn)=>{Cn&&"sp"!==t||ot(t,((...t)=>e(...t)),n)},ct=at("bm"),lt=at("m"),ut=at("bu"),ht=at("u"),dt=at("bum"),ft=at("um"),pt=at("sp"),gt=at("rtg"),mt=at("rtc");function vt(t,e=xn){ot("ec",t,e)}const yt="components";function bt(t,e){return _t(yt,t,!0,e)||t}const wt=Symbol.for("v-ndc");function _t(t,e,n=!0,r=!1){const s=A||xn;if(s){const n=s.type;if(t===yt){const t=Bn(n,!1);if(t&&(t===e||t===(0,i.PT)(e)||t===(0,i.ZH)((0,i.PT)(e))))return n}const o=xt(s[t]||n[t],e)||xt(s.appContext[t],e);return!o&&r?n:o}}function xt(t,e){return t&&(t[e]||t[(0,i.PT)(e)]||t[(0,i.ZH)((0,i.PT)(e))])}function St(t,e,n,s){let o;const a=n&&n[s],c=(0,i.cy)(t);if(c||(0,i.Kg)(t)){const n=c&&(0,r.g8)(t);let i=!1;n&&(i=!(0,r.fE)(t),t=(0,r.qA)(t)),o=new Array(t.length);for(let s=0,c=t.length;s<c;s++)o[s]=e(i?(0,r.lJ)(t[s]):t[s],s,void 0,a&&a[s])}else if("number"===typeof t){0,o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,a&&a[n])}else if((0,i.Gv)(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,a&&a[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=e(t[i],i,r,a&&a[r])}}else o=[];return n&&(n[s]=o),o}const It=t=>t?kn(t)?jn(t):It(t.parent):null,At=(0,i.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>It(t.parent),$root:t=>It(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Rt(t),$forceUpdate:t=>t.f||(t.f=()=>{y(t.update)}),$nextTick:t=>t.n||(t.n=m.bind(t.proxy)),$watch:t=>Ne.bind(t)}),Et=(t,e)=>t!==i.MZ&&!t.__isScriptSetup&&(0,i.$3)(t,e),Tt={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:n,setupState:s,data:o,props:a,accessCache:c,type:l,appContext:u}=t;let h;if("$"!==e[0]){const r=c[e];if(void 0!==r)switch(r){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Et(s,e))return c[e]=1,s[e];if(o!==i.MZ&&(0,i.$3)(o,e))return c[e]=2,o[e];if((h=t.propsOptions[0])&&(0,i.$3)(h,e))return c[e]=3,a[e];if(n!==i.MZ&&(0,i.$3)(n,e))return c[e]=4,n[e];Nt&&(c[e]=0)}}const d=At[e];let f,p;return d?("$attrs"===e&&(0,r.u4)(t.attrs,"get",""),d(t)):(f=l.__cssModules)&&(f=f[e])?f:n!==i.MZ&&(0,i.$3)(n,e)?(c[e]=4,n[e]):(p=u.config.globalProperties,(0,i.$3)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;return Et(s,e)?(s[e]=n,!0):r!==i.MZ&&(0,i.$3)(r,e)?(r[e]=n,!0):!(0,i.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o}},a){let c;return!!n[a]||t!==i.MZ&&(0,i.$3)(t,a)||Et(e,a)||(c=o[0])&&(0,i.$3)(c,a)||(0,i.$3)(r,a)||(0,i.$3)(At,a)||(0,i.$3)(s.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.$3)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function kt(t){return(0,i.cy)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Nt=!0;function Lt(t){const e=Rt(t),n=t.proxy,s=t.ctx;Nt=!1,e.beforeCreate&&Pt(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:l,provide:u,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:w,destroyed:_,unmounted:x,render:S,renderTracked:I,renderTriggered:A,errorCaptured:E,serverPrefetch:T,expose:k,inheritAttrs:N,components:L,directives:C,filters:P}=e,O=null;if(h&&Ct(h,s,O),c)for(const r in c){const t=c[r];(0,i.Tn)(t)&&(s[r]=t.bind(n))}if(o){0;const e=o.call(n,n);0,(0,i.Gv)(e)&&(t.data=(0,r.Kh)(e))}if(Nt=!0,a)for(const r in a){const t=a[r],e=(0,i.Tn)(t)?t.bind(n,n):(0,i.Tn)(t.get)?t.get.bind(n,n):i.tE;0;const o=!(0,i.Tn)(t)&&(0,i.Tn)(t.set)?t.set.bind(n):i.tE,c=Un({get:e,set:o});Object.defineProperty(s,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(l)for(const r in l)Ot(l[r],s,n,r);if(u){const t=(0,i.Tn)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{Kt(e,t[e])}))}function R(t,e){(0,i.cy)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Pt(d,t,"c"),R(ct,f),R(lt,p),R(ut,g),R(ht,m),R(tt,v),R(et,y),R(vt,E),R(mt,I),R(gt,A),R(dt,w),R(ft,x),R(pt,T),(0,i.cy)(k))if(k.length){const e=t.exposed||(t.exposed={});k.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});S&&t.render===i.tE&&(t.render=S),null!=N&&(t.inheritAttrs=N),L&&(t.components=L),C&&(t.directives=C),T&&Y(t)}function Ct(t,e,n=i.tE){(0,i.cy)(t)&&(t=Bt(t));for(const s in t){const n=t[s];let o;o=(0,i.Gv)(n)?"default"in n?Yt(n.from||s,n.default,!0):Yt(n.from||s):Yt(n),(0,r.i9)(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[s]=o}}function Pt(t,e,n){o((0,i.cy)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Ot(t,e,n,r){let s=r.includes(".")?Le(n,r):()=>n[r];if((0,i.Kg)(t)){const n=e[t];(0,i.Tn)(n)&&Te(s,n)}else if((0,i.Tn)(t))Te(s,t.bind(n));else if((0,i.Gv)(t))if((0,i.cy)(t))t.forEach((t=>Ot(t,e,n,r)));else{const r=(0,i.Tn)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.Tn)(r)&&Te(s,r,t)}else 0}function Rt(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,c=o.get(e);let l;return c?l=c:s.length||n||r?(l={},s.length&&s.forEach((t=>Dt(l,t,a,!0))),Dt(l,e,a)):l=e,(0,i.Gv)(e)&&o.set(e,l),l}function Dt(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Dt(t,s,n,!0),i&&i.forEach((e=>Dt(t,e,n,!0)));for(const o in e)if(r&&"expose"===o);else{const r=Mt[o]||n&&n[o];t[o]=r?r(t[o],e[o]):e[o]}return t}const Mt={data:Ft,props:qt,emits:qt,methods:Ut,computed:Ut,beforeCreate:Vt,created:Vt,beforeMount:Vt,mounted:Vt,beforeUpdate:Vt,updated:Vt,beforeDestroy:Vt,beforeUnmount:Vt,destroyed:Vt,unmounted:Vt,activated:Vt,deactivated:Vt,errorCaptured:Vt,serverPrefetch:Vt,components:Ut,directives:Ut,watch:zt,provide:Ft,inject:jt};function Ft(t,e){return e?t?function(){return(0,i.X$)((0,i.Tn)(t)?t.call(this,this):t,(0,i.Tn)(e)?e.call(this,this):e)}:e:t}function jt(t,e){return Ut(Bt(t),Bt(e))}function Bt(t){if((0,i.cy)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Vt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ut(t,e){return t?(0,i.X$)(Object.create(null),t,e):e}function qt(t,e){return t?(0,i.cy)(t)&&(0,i.cy)(e)?[...new Set([...t,...e])]:(0,i.X$)(Object.create(null),kt(t),kt(null!=e?e:{})):e}function zt(t,e){if(!t)return e;if(!e)return t;const n=(0,i.X$)(Object.create(null),t);for(const r in e)n[r]=Vt(t[r],e[r]);return n}function Ht(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Wt=0;function $t(t,e){return function(n,r=null){(0,i.Tn)(n)||(n=(0,i.X$)({},n)),null==r||(0,i.Gv)(r)||(r=null);const s=Ht(),a=new WeakSet,c=[];let l=!1;const u=s.app={_uid:Wt++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:zn,get config(){return s.config},set config(t){0},use(t,...e){return a.has(t)||(t&&(0,i.Tn)(t.install)?(a.add(t),t.install(u,...e)):(0,i.Tn)(t)&&(a.add(t),t(u,...e))),u},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),u},component(t,e){return e?(s.components[t]=e,u):s.components[t]},directive(t,e){return e?(s.directives[t]=e,u):s.directives[t]},mount(i,o,a){if(!l){0;const c=u._ceVNode||cn(n,r);return c.appContext=s,!0===a?a="svg":!1===a&&(a=void 0),o&&e?e(c,i):t(c,i,a),l=!0,u._container=i,i.__vue_app__=u,jn(c.component)}},onUnmount(t){c.push(t)},unmount(){l&&(o(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(t,e){return s.provides[t]=e,u},runWithContext(t){const e=Gt;Gt=u;try{return t()}finally{Gt=e}}};return u}}let Gt=null;function Kt(t,e){if(xn){let n=xn.provides;const r=xn.parent&&xn.parent.provides;r===n&&(n=xn.provides=Object.create(r)),n[t]=e}else 0}function Yt(t,e,n=!1){const r=xn||A;if(r||Gt){const s=Gt?Gt._context.provides:r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&(0,i.Tn)(e)?e.call(r&&r.proxy):e}else 0}const Qt={},Jt=()=>Object.create(Qt),Xt=t=>Object.getPrototypeOf(t)===Qt;function Zt(t,e,n,i=!1){const s={},o=Jt();t.propsDefaults=Object.create(null),ee(t,e,s,o);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);n?t.props=i?s:(0,r.Gc)(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function te(t,e,n,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,l=(0,r.ux)(o),[u]=t.propsOptions;let h=!1;if(!(s||c>0)||16&c){let r;ee(t,e,o,a)&&(h=!0);for(const s in l)e&&((0,i.$3)(e,s)||(r=(0,i.Tg)(s))!==s&&(0,i.$3)(e,r))||(u?!n||void 0===n[s]&&void 0===n[r]||(o[s]=ne(u,l,s,void 0,t,!0)):delete o[s]);if(a!==l)for(const t in a)e&&(0,i.$3)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];if(Re(t.emitsOptions,s))continue;const c=e[s];if(u)if((0,i.$3)(a,s))c!==a[s]&&(a[s]=c,h=!0);else{const e=(0,i.PT)(s);o[e]=ne(u,l,e,c,t,!1)}else c!==a[s]&&(a[s]=c,h=!0)}}h&&(0,r.hZ)(t.attrs,"set","")}function ee(t,e,n,s){const[o,a]=t.propsOptions;let c,l=!1;if(e)for(let r in e){if((0,i.SU)(r))continue;const u=e[r];let h;o&&(0,i.$3)(o,h=(0,i.PT)(r))?a&&a.includes(h)?(c||(c={}))[h]=u:n[h]=u:Re(t.emitsOptions,r)||r in s&&u===s[r]||(s[r]=u,l=!0)}if(a){const e=(0,r.ux)(n),s=c||i.MZ;for(let r=0;r<a.length;r++){const c=a[r];n[c]=ne(o,e,c,s[c],t,!(0,i.$3)(s,c))}}return l}function ne(t,e,n,r,s,o){const a=t[n];if(null!=a){const t=(0,i.$3)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.Tn)(t)){const{propsDefaults:i}=s;if(n in i)r=i[n];else{const o=En(s);r=i[n]=t.call(null,e),o()}}else r=t;s.ce&&s.ce._setProp(n,r)}a[0]&&(o&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.Tg)(n)||(r=!0))}return r}const re=new WeakMap;function ie(t,e,n=!1){const r=n?re:e.propsCache,s=r.get(t);if(s)return s;const o=t.props,a={},c=[];let l=!1;if(!(0,i.Tn)(t)){const r=t=>{l=!0;const[n,r]=ie(t,e,!0);(0,i.X$)(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!l)return(0,i.Gv)(t)&&r.set(t,i.Oj),i.Oj;if((0,i.cy)(o))for(let h=0;h<o.length;h++){0;const t=(0,i.PT)(o[h]);se(t)&&(a[t]=i.MZ)}else if(o){0;for(const t in o){const e=(0,i.PT)(t);if(se(e)){const n=o[t],r=a[e]=(0,i.cy)(n)||(0,i.Tn)(n)?{type:n}:(0,i.X$)({},n),s=r.type;let l=!1,u=!0;if((0,i.cy)(s))for(let t=0;t<s.length;++t){const e=s[t],n=(0,i.Tn)(e)&&e.name;if("Boolean"===n){l=!0;break}"String"===n&&(u=!1)}else l=(0,i.Tn)(s)&&"Boolean"===s.name;r[0]=l,r[1]=u,(l||(0,i.$3)(r,"default"))&&c.push(e)}}}const u=[a,c];return(0,i.Gv)(t)&&r.set(t,u),u}function se(t){return"$"!==t[0]&&!(0,i.SU)(t)}const oe=t=>"_"===t[0]||"$stable"===t,ae=t=>(0,i.cy)(t)?t.map(pn):[pn(t)],ce=(t,e,n)=>{if(e._n)return e;const r=k(((...t)=>ae(e(...t))),n);return r._c=!1,r},le=(t,e,n)=>{const r=t._ctx;for(const s in t){if(oe(s))continue;const n=t[s];if((0,i.Tn)(n))e[s]=ce(s,n,r);else if(null!=n){0;const t=ae(n);e[s]=()=>t}}},ue=(t,e)=>{const n=ae(e);t.slots.default=()=>n},he=(t,e,n)=>{for(const r in e)(n||"_"!==r)&&(t[r]=e[r])},de=(t,e,n)=>{const r=t.slots=Jt();if(32&t.vnode.shapeFlag){const t=e._;t?(he(r,e,n),n&&(0,i.yQ)(r,"_",t,!0)):le(e,r)}else e&&ue(t,e)},fe=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,a=i.MZ;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:he(s,e,n):(o=!e.$stable,le(e,s)),a=e}else e&&(ue(t,e),a={default:1});if(o)for(const i in s)oe(i)||null!=a[i]||delete s[i]};function pe(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,i.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const ge=qe;function me(t){return ve(t)}function ve(t,e){pe();const n=(0,i.We)();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=i.tE,insertStaticContent:m}=t,v=(t,e,n,r=null,i=null,s=null,o=void 0,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!rn(t,e)&&(r=Z(t),W(t,i,s,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=e;switch(l){case He:b(t,e,n,r);break;case We:w(t,e,n,r);break;case $e:null==t&&S(e,n,r,o);break;case ze:D(t,e,n,r,i,s,o,a,c);break;default:1&h?E(t,e,n,r,i,s,o,a,c):6&h?M(t,e,n,r,i,s,o,a,c):(64&h||128&h)&&l.process(t,e,n,r,i,s,o,a,c,nt)}null!=u&&i&&Q(u,t&&t.ref,s,e||t,!e)},b=(t,e,n,r)=>{if(null==t)s(e.el=l(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},w=(t,e,n,r)=>{null==t?s(e.el=u(e.children||""),n,r):e.el=t.el},S=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r,t.el,t.anchor)},I=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),s(t,n,r),t=i;s(e,n,r)},A=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),o(t),t=n;o(e)},E=(t,e,n,r,i,s,o,a,c)=>{"svg"===e.type?o="svg":"math"===e.type&&(o="mathml"),null==t?T(e,n,r,i,s,o,a,c):P(t,e,i,s,o,a,c)},T=(t,e,n,r,o,l,u,h)=>{let f,p;const{props:g,shapeFlag:m,transition:v,dirs:y}=t;if(f=t.el=c(t.type,l,g&&g.is,g),8&m?d(f,t.children):16&m&&N(t.children,f,null,r,o,ye(t,l),u,h),y&&L(t,null,r,"created"),k(f,t,t.scopeId,u,r),g){for(const t in g)"value"===t||(0,i.SU)(t)||a(f,t,null,g[t],l,r);"value"in g&&a(f,"value",null,g.value,l),(p=g.onVnodeBeforeMount)&&yn(p,r,t)}y&&L(t,null,r,"beforeMount");const b=we(o,v);b&&v.beforeEnter(f),s(f,e,n),((p=g&&g.onVnodeMounted)||b||y)&&ge((()=>{p&&yn(p,r,t),b&&v.enter(f),y&&L(t,null,r,"mounted")}),o)},k=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let s=0;s<r.length;s++)g(t,r[s]);if(i){let n=i.subTree;if(e===n||Ue(n.type)&&(n.ssContent===e||n.ssFallback===e)){const e=i.vnode;k(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},N=(t,e,n,r,i,s,o,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?gn(t[l]):pn(t[l]);v(null,c,e,n,r,i,s,o,a)}},P=(t,e,n,r,s,o,c)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.MZ,g=e.props||i.MZ;let m;if(n&&be(n,!1),(m=g.onVnodeBeforeUpdate)&&yn(m,n,e,t),f&&L(e,t,n,"beforeUpdate"),n&&be(n,!0),(p.innerHTML&&null==g.innerHTML||p.textContent&&null==g.textContent)&&d(l,""),h?O(t.dynamicChildren,h,l,n,r,ye(e,s),o):c||U(t,e,l,null,n,r,ye(e,s),o,!1),u>0){if(16&u)R(l,p,g,n,s);else if(2&u&&p.class!==g.class&&a(l,"class",null,g.class,s),4&u&&a(l,"style",p.style,g.style,s),8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e],i=p[r],o=g[r];o===i&&"value"!==r||a(l,r,i,o,s,n)}}1&u&&t.children!==e.children&&d(l,e.children)}else c||null!=h||R(l,p,g,n,s);((m=g.onVnodeUpdated)||f)&&ge((()=>{m&&yn(m,n,e,t),f&&L(e,t,n,"updated")}),r)},O=(t,e,n,r,i,s,o)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],u=c.el&&(c.type===ze||!rn(c,l)||70&c.shapeFlag)?f(c.el):n;v(c,l,u,null,r,i,s,o,!0)}},R=(t,e,n,r,s)=>{if(e!==n){if(e!==i.MZ)for(const o in e)(0,i.SU)(o)||o in n||a(t,o,e[o],null,s,r);for(const o in n){if((0,i.SU)(o))continue;const c=n[o],l=e[o];c!==l&&"value"!==o&&a(t,o,l,c,s,r)}"value"in n&&a(t,"value",e.value,n.value,s)}},D=(t,e,n,r,i,o,a,c,u)=>{const h=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(s(h,n,r),s(d,n,r),N(e.children||[],n,d,i,o,a,c,u)):f>0&&64&f&&p&&t.dynamicChildren?(O(t.dynamicChildren,p,n,i,o,a,c),(null!=e.key||i&&e===i.subTree)&&_e(t,e,!0)):U(t,e,n,d,i,o,a,c,u)},M=(t,e,n,r,i,s,o,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,o,c):F(e,n,r,i,s,o,c):j(t,e,c)},F=(t,e,n,r,i,s,o)=>{const a=t.component=_n(t,r,i);if(X(t)&&(a.ctx.renderer=nt),Pn(a,!1,o),a.asyncDep){if(i&&i.registerDep(a,B,o),!t.el){const t=a.subTree=cn(We);w(null,t,e,n)}}else B(a,t,e,n,i,s,o)},j=(t,e,n)=>{const r=e.component=t.component;if(je(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void V(r,e,n);r.next=e,r.update()}else e.el=t.el,r.vnode=e},B=(t,e,n,s,o,a,c)=>{const l=()=>{if(t.isMounted){let{next:e,bu:n,u:r,parent:s,vnode:u}=t;{const n=Se(t);if(n)return e&&(e.el=u.el,V(t,e,c)),void n.asyncDep.then((()=>{t.isUnmounted||l()}))}let h,d=e;0,be(t,!1),e?(e.el=u.el,V(t,e,c)):e=u,n&&(0,i.DY)(n),(h=e.props&&e.props.onVnodeBeforeUpdate)&&yn(h,s,e,u),be(t,!0);const p=De(t);0;const g=t.subTree;t.subTree=p,v(g,p,f(g.el),Z(g),t,o,a),e.el=p.el,null===d&&Ve(t,p.el),r&&ge(r,o),(h=e.props&&e.props.onVnodeUpdated)&&ge((()=>yn(h,s,e,u)),o)}else{let r;const{el:c,props:l}=e,{bm:u,m:h,parent:d,root:f,type:p}=t,g=J(e);if(be(t,!1),u&&(0,i.DY)(u),!g&&(r=l&&l.onVnodeBeforeMount)&&yn(r,d,e),be(t,!0),c&&it){const e=()=>{t.subTree=De(t),it(c,t.subTree,t,o,null)};g&&p.__asyncHydrate?p.__asyncHydrate(c,t,e):e()}else{f.ce&&f.ce._injectChildStyle(p);const r=t.subTree=De(t);0,v(null,r,n,s,t,o,a),e.el=r.el}if(h&&ge(h,o),!g&&(r=l&&l.onVnodeMounted)){const t=e;ge((()=>yn(r,d,t)),o)}(256&e.shapeFlag||d&&J(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&ge(t.a,o),t.isMounted=!0,e=n=s=null}};t.scope.on();const u=t.effect=new r.X2(l);t.scope.off();const h=t.update=u.run.bind(u),d=t.job=u.runIfDirty.bind(u);d.i=t,d.id=t.uid,u.scheduler=()=>y(d),be(t,!0),h()},V=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,te(t,e.props,i,n),fe(t,e.children,n),(0,r.C4)(),_(t),(0,r.bl)()},U=(t,e,n,r,i,s,o,a,c=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void z(l,h,n,r,i,s,o,a,c);if(256&f)return void q(l,h,n,r,i,s,o,a,c)}8&p?(16&u&&Y(l,i,s),h!==l&&d(n,h)):16&u?16&p?z(l,h,n,r,i,s,o,a,c):Y(l,i,s,!0):(8&u&&d(n,""),16&p&&N(h,n,r,i,s,o,a,c))},q=(t,e,n,r,s,o,a,c,l)=>{t=t||i.Oj,e=e||i.Oj;const u=t.length,h=e.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=e[f]=l?gn(e[f]):pn(e[f]);v(t[f],r,n,null,s,o,a,c,l)}u>h?Y(t,s,o,!0,!1,d):N(e,n,r,s,o,a,c,l,d)},z=(t,e,n,r,s,o,a,c,l)=>{let u=0;const h=e.length;let d=t.length-1,f=h-1;while(u<=d&&u<=f){const r=t[u],i=e[u]=l?gn(e[u]):pn(e[u]);if(!rn(r,i))break;v(r,i,n,null,s,o,a,c,l),u++}while(u<=d&&u<=f){const r=t[d],i=e[f]=l?gn(e[f]):pn(e[f]);if(!rn(r,i))break;v(r,i,n,null,s,o,a,c,l),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<h?e[t].el:r;while(u<=f)v(null,e[u]=l?gn(e[u]):pn(e[u]),n,i,s,o,a,c,l),u++}}else if(u>f)while(u<=d)W(t[u],s,o,!0),u++;else{const p=u,g=u,m=new Map;for(u=g;u<=f;u++){const t=e[u]=l?gn(e[u]):pn(e[u]);null!=t.key&&m.set(t.key,u)}let y,b=0;const w=f-g+1;let _=!1,x=0;const S=new Array(w);for(u=0;u<w;u++)S[u]=0;for(u=p;u<=d;u++){const r=t[u];if(b>=w){W(r,s,o,!0);continue}let i;if(null!=r.key)i=m.get(r.key);else for(y=g;y<=f;y++)if(0===S[y-g]&&rn(r,e[y])){i=y;break}void 0===i?W(r,s,o,!0):(S[i-g]=u+1,i>=x?x=i:_=!0,v(r,e[i],n,null,s,o,a,c,l),b++)}const I=_?xe(S):i.Oj;for(y=I.length-1,u=w-1;u>=0;u--){const t=g+u,i=e[t],d=t+1<h?e[t+1].el:r;0===S[u]?v(null,i,n,d,s,o,a,c,l):_&&(y<0||u!==I[y]?H(i,n,d,2):y--)}}},H=(t,e,n,r,i=null)=>{const{el:o,type:a,transition:c,children:l,shapeFlag:u}=t;if(6&u)return void H(t.component.subTree,e,n,r);if(128&u)return void t.suspense.move(e,n,r);if(64&u)return void a.move(t,e,n,nt);if(a===ze){s(o,e,n);for(let t=0;t<l.length;t++)H(l[t],e,n,r);return void s(t.anchor,e,n)}if(a===$e)return void I(t,e,n);const h=2!==r&&1&u&&c;if(h)if(0===r)c.beforeEnter(o),s(o,e,n),ge((()=>c.enter(o)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=c,a=()=>s(o,e,n),l=()=>{t(o,(()=>{a(),i&&i()}))};r?r(o,a,l):l()}else s(o,e,n)},W=(t,e,n,r=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d,cacheIndex:f}=t;if(-2===h&&(i=!1),null!=a&&Q(a,null,n,t,!0),null!=f&&(e.renderCache[f]=void 0),256&u)return void e.ctx.deactivate(t);const p=1&u&&d,g=!J(t);let m;if(g&&(m=o&&o.onVnodeBeforeUnmount)&&yn(m,e,t),6&u)K(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);p&&L(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,nt,r):l&&!l.hasOnce&&(s!==ze||h>0&&64&h)?Y(l,e,n,!1,!0):(s===ze&&384&h||!i&&16&u)&&Y(c,e,n),r&&$(t)}(g&&(m=o&&o.onVnodeUnmounted)||p)&&ge((()=>{m&&yn(m,e,t),p&&L(t,null,e,"unmounted")}),n)},$=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===ze)return void G(n,r);if(e===$e)return void A(t);const s=()=>{o(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,o=()=>e(n,s);r?r(t.el,s,o):o()}else s()},G=(t,e)=>{let n;while(t!==e)n=p(t),o(t),t=n;o(e)},K=(t,e,n)=>{const{bum:r,scope:s,job:o,subTree:a,um:c,m:l,a:u}=t;Ie(l),Ie(u),r&&(0,i.DY)(r),s.stop(),o&&(o.flags|=8,W(a,t,e,n)),c&&ge(c,e),ge((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Y=(t,e,n,r=!1,i=!1,s=0)=>{for(let o=s;o<t.length;o++)W(t[o],e,n,r,i)},Z=t=>{if(6&t.shapeFlag)return Z(t.component.subTree);if(128&t.shapeFlag)return t.suspense.next();const e=p(t.anchor||t.el),n=e&&e[C];return n?p(n):e};let tt=!1;const et=(t,e,n)=>{null==t?e._vnode&&W(e._vnode,null,null,!0):v(e._vnode||null,t,e,null,null,null,n),e._vnode=t,tt||(tt=!0,_(),x(),tt=!1)},nt={p:v,um:W,m:H,r:$,mt:F,mc:N,pc:U,pbc:O,n:Z,o:t};let rt,it;return e&&([rt,it]=e(nt)),{render:et,hydrate:rt,createApp:$t(et,rt)}}function ye({type:t,props:e},n){return"svg"===n&&"foreignObject"===t||"mathml"===n&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function be({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function we(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function _e(t,e,n=!1){const r=t.children,s=e.children;if((0,i.cy)(r)&&(0,i.cy)(s))for(let i=0;i<r.length;i++){const t=r[i];let e=s[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[i]=gn(s[i]),e.el=t.el),n||-2===e.patchFlag||_e(t,e)),e.type===He&&(e.el=t.el)}}function xe(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const c=t[r];if(0!==c){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=e[o];return n}function Se(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Se(e)}function Ie(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Ae=Symbol.for("v-scx"),Ee=()=>{{const t=Yt(Ae);return t}};function Te(t,e,n){return ke(t,e,n)}function ke(t,e,n=i.MZ){const{immediate:s,deep:a,flush:c,once:l}=n;const u=(0,i.X$)({},n);const h=e&&s||!e&&"post"!==c;let d;if(Cn)if("sync"===c){const t=Ee();d=t.__watcherHandles||(t.__watcherHandles=[])}else if(!h){const t=()=>{};return t.stop=i.tE,t.resume=i.tE,t.pause=i.tE,t}const f=xn;u.call=(t,e,n)=>o(t,f,e,n);let p=!1;"post"===c?u.scheduler=t=>{ge(t,f&&f.suspense)}:"sync"!==c&&(p=!0,u.scheduler=(t,e)=>{e?t():y(t)}),u.augmentJob=t=>{e&&(t.flags|=4),p&&(t.flags|=2,f&&(t.id=f.uid,t.i=f))};const g=(0,r.wB)(t,e,u);return Cn&&(d?d.push(g):h&&g()),g}function Ne(t,e,n){const r=this.proxy,s=(0,i.Kg)(t)?t.includes(".")?Le(r,t):()=>r[t]:t.bind(r,r);let o;(0,i.Tn)(e)?o=e:(o=e.handler,n=e);const a=En(this),c=ke(s,o.bind(r),n);return a(),c}function Le(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}const Ce=(t,e)=>"modelValue"===e||"model-value"===e?t.modelModifiers:t[`${e}Modifiers`]||t[`${(0,i.PT)(e)}Modifiers`]||t[`${(0,i.Tg)(e)}Modifiers`];function Pe(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.MZ;let s=n;const a=e.startsWith("update:"),c=a&&Ce(r,e.slice(7));let l;c&&(c.trim&&(s=n.map((t=>(0,i.Kg)(t)?t.trim():t))),c.number&&(s=n.map(i.bB)));let u=r[l=(0,i.rU)(e)]||r[l=(0,i.rU)((0,i.PT)(e))];!u&&a&&(u=r[l=(0,i.rU)((0,i.Tg)(e))]),u&&o(u,t,6,s);const h=r[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,o(h,t,6,s)}}function Oe(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(void 0!==s)return s;const o=t.emits;let a={},c=!1;if(!(0,i.Tn)(t)){const r=t=>{const n=Oe(t,e,!0);n&&(c=!0,(0,i.X$)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||c?((0,i.cy)(o)?o.forEach((t=>a[t]=null)):(0,i.X$)(a,o),(0,i.Gv)(t)&&r.set(t,a),a):((0,i.Gv)(t)&&r.set(t,null),null)}function Re(t,e){return!(!t||!(0,i.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,i.$3)(t,(0,i.Tg)(e))||(0,i.$3)(t,e))}function De(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[o],slots:c,attrs:l,emit:u,render:h,renderCache:d,props:f,data:p,setupState:g,ctx:m,inheritAttrs:v}=t,y=T(t);let b,w;try{if(4&n.shapeFlag){const t=s||r,e=t;b=pn(h.call(e,t,d,f,g,p,m)),w=l}else{const t=e;0,b=pn(t.length>1?t(f,{attrs:l,slots:c,emit:u}):t(f,null)),w=e.props?l:Me(l)}}catch(x){Ge.length=0,a(x,t,1),b=cn(We)}let _=b;if(w&&!1!==v){const t=Object.keys(w),{shapeFlag:e}=_;t.length&&7&e&&(o&&t.some(i.CP)&&(w=Fe(w,o)),_=hn(_,w,!1,!0))}return n.dirs&&(_=hn(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&$(_,n.transition),b=_,T(y),b}const Me=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.Mp)(n))&&((e||(e={}))[n]=t[n]);return e},Fe=(t,e)=>{const n={};for(const r in t)(0,i.CP)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function je(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==o&&(r?!o||Be(r,o,l):!!o);if(1024&c)return!0;if(16&c)return r?Be(r,o,l):!!o;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==r[n]&&!Re(l,n))return!0}}return!1}function Be(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Re(n,s))return!0}return!1}function Ve({vnode:t,parent:e},n){while(e){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r!==t)break;(t=e.vnode).el=n,e=e.parent}}const Ue=t=>t.__isSuspense;function qe(t,e){e&&e.pendingBranch?(0,i.cy)(t)?e.effects.push(...t):e.effects.push(t):w(t)}const ze=Symbol.for("v-fgt"),He=Symbol.for("v-txt"),We=Symbol.for("v-cmt"),$e=Symbol.for("v-stc"),Ge=[];let Ke=null;function Ye(t=!1){Ge.push(Ke=t?null:[])}function Qe(){Ge.pop(),Ke=Ge[Ge.length-1]||null}let Je=1;function Xe(t,e=!1){Je+=t,t<0&&Ke&&e&&(Ke.hasOnce=!0)}function Ze(t){return t.dynamicChildren=Je>0?Ke||i.Oj:null,Qe(),Je>0&&Ke&&Ke.push(t),t}function tn(t,e,n,r,i,s){return Ze(an(t,e,n,r,i,s,!0))}function en(t,e,n,r,i){return Ze(cn(t,e,n,r,i,!0))}function nn(t){return!!t&&!0===t.__v_isVNode}function rn(t,e){return t.type===e.type&&t.key===e.key}const sn=({key:t})=>null!=t?t:null,on=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.Kg)(t)||(0,r.i9)(t)||(0,i.Tn)(t)?{i:A,r:t,k:e,f:!!n}:t:null);function an(t,e=null,n=null,r=0,s=null,o=(t===ze?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&sn(e),ref:e&&on(e),scopeId:E,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:A};return c?(mn(l,n),128&o&&t.normalize(l)):n&&(l.shapeFlag|=(0,i.Kg)(n)?8:16),Je>0&&!a&&Ke&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Ke.push(l),l}const cn=ln;function ln(t,e=null,n=null,s=0,o=null,a=!1){if(t&&t!==wt||(t=We),nn(t)){const r=hn(t,e,!0);return n&&mn(r,n),Je>0&&!a&&Ke&&(6&r.shapeFlag?Ke[Ke.indexOf(t)]=r:Ke.push(r)),r.patchFlag=-2,r}if(Vn(t)&&(t=t.__vccOpts),e){e=un(e);let{class:t,style:n}=e;t&&!(0,i.Kg)(t)&&(e.class=(0,i.C4)(t)),(0,i.Gv)(n)&&((0,r.ju)(n)&&!(0,i.cy)(n)&&(n=(0,i.X$)({},n)),e.style=(0,i.Tr)(n))}const c=(0,i.Kg)(t)?1:Ue(t)?128:P(t)?64:(0,i.Gv)(t)?4:(0,i.Tn)(t)?2:0;return an(t,e,n,s,o,c,a,!0)}function un(t){return t?(0,r.ju)(t)||Xt(t)?(0,i.X$)({},t):t:null}function hn(t,e,n=!1,r=!1){const{props:s,ref:o,patchFlag:a,children:c,transition:l}=t,u=e?vn(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&sn(u),ref:e&&e.ref?n&&o?(0,i.cy)(o)?o.concat(on(e)):[o,on(e)]:on(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ze?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hn(t.ssContent),ssFallback:t.ssFallback&&hn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&$(h,l.clone(h)),h}function dn(t=" ",e=0){return cn(He,null,t,e)}function fn(t="",e=!1){return e?(Ye(),en(We,null,t)):cn(We,null,t)}function pn(t){return null==t||"boolean"===typeof t?cn(We):(0,i.cy)(t)?cn(ze,null,t.slice()):nn(t)?gn(t):cn(He,null,String(t))}function gn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:hn(t)}function mn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.cy)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),mn(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||Xt(e)?3===r&&A&&(1===A.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=A}}else(0,i.Tn)(e)?(e={default:e,_ctx:A},n=32):(e=String(e),64&r?(n=16,e=[dn(e)]):n=8);t.children=e,t.shapeFlag|=n}function vn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C4)([e.class,r.class]));else if("style"===t)e.style=(0,i.Tr)([e.style,r.style]);else if((0,i.Mp)(t)){const n=e[t],s=r[t];!s||n===s||(0,i.cy)(n)&&n.includes(s)||(e[t]=n?[].concat(n,s):s)}else""!==t&&(e[t]=r[t])}return e}function yn(t,e,n,r=null){o(t,e,7,[n,r])}const bn=Ht();let wn=0;function _n(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||bn,a={uid:wn++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new r.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ie(s,o),emitsOptions:Oe(s,o),emit:null,emitted:null,propsDefaults:i.MZ,inheritAttrs:s.inheritAttrs,ctx:i.MZ,data:i.MZ,props:i.MZ,attrs:i.MZ,slots:i.MZ,refs:i.MZ,setupState:i.MZ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Pe.bind(null,a),t.ce&&t.ce(a),a}let xn=null;const Sn=()=>xn||A;let In,An;{const t=(0,i.We)(),e=(e,n)=>{let r;return(r=t[e])||(r=t[e]=[]),r.push(n),t=>{r.length>1?r.forEach((e=>e(t))):r[0](t)}};In=e("__VUE_INSTANCE_SETTERS__",(t=>xn=t)),An=e("__VUE_SSR_SETTERS__",(t=>Cn=t))}const En=t=>{const e=xn;return In(t),t.scope.on(),()=>{t.scope.off(),In(e)}},Tn=()=>{xn&&xn.scope.off(),In(null)};function kn(t){return 4&t.vnode.shapeFlag}let Nn,Ln,Cn=!1;function Pn(t,e=!1,n=!1){e&&An(e);const{props:r,children:i}=t.vnode,s=kn(t);Zt(t,r,s,e),de(t,i,n);const o=s?On(t,e):void 0;return e&&An(!1),o}function On(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Tt);const{setup:o}=n;if(o){(0,r.C4)();const n=t.setupContext=o.length>1?Fn(t):null,c=En(t),l=s(o,t,0,[t.props,n]),u=(0,i.yL)(l);if((0,r.bl)(),c(),!u&&!t.sp||J(t)||Y(t),u){if(l.then(Tn,Tn),e)return l.then((n=>{Rn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=l}else Rn(t,l,e)}else Dn(t,e)}function Rn(t,e,n){(0,i.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Gv)(e)&&(t.setupState=(0,r.Pr)(e)),Dn(t,n)}function Dn(t,e,n){const s=t.type;if(!t.render){if(!e&&Nn&&!s.render){const e=s.template||Rt(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,c=(0,i.X$)((0,i.X$)({isCustomElement:n,delimiters:o},r),a);s.render=Nn(e,c)}}t.render=s.render||i.tE,Ln&&Ln(t)}{const e=En(t);(0,r.C4)();try{Lt(t)}finally{(0,r.bl)(),e()}}}const Mn={get(t,e){return(0,r.u4)(t,"get",""),t[e]}};function Fn(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,Mn),slots:t.slots,emit:t.emit,expose:e}}function jn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy((0,r.Pr)((0,r.IG)(t.exposed)),{get(e,n){return n in e?e[n]:n in At?At[n](t):void 0},has(t,e){return e in t||e in At}})):t.proxy}function Bn(t,e=!0){return(0,i.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function Vn(t){return(0,i.Tn)(t)&&"__vccOpts"in t}const Un=(t,e)=>{const n=(0,r.EW)(t,e,Cn);return n};function qn(t,e,n){const r=arguments.length;return 2===r?(0,i.Gv)(e)&&!(0,i.cy)(e)?nn(e)?cn(t,null,[e]):cn(t,e):cn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&nn(n)&&(n=[n]),cn(t,e,n))}const zn="3.5.13"},5130:function(t,e,n){"use strict";n.d(e,{D$:function(){return _t},Ef:function(){return At},Jo:function(){return dt},eB:function(){return b},lH:function(){return ft},u1:function(){return gt}});n(8743),n(3725),n(5019),n(9838),n(1339),n(9229),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);var r=n(6768),i=n(4232);n(144);
/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let s;const o="undefined"!==typeof window&&window.trustedTypes;if(o)try{s=o.createPolicy("vue",{createHTML:t=>t})}catch(kt){}const a=s?t=>s.createHTML(t):t=>t,c="http://www.w3.org/2000/svg",l="http://www.w3.org/1998/Math/MathML",u="undefined"!==typeof document?document:null,h=u&&u.createElement("template"),d={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i="svg"===e?u.createElementNS(c,t):"mathml"===e?u.createElementNS(l,t):n?u.createElement(t,{is:n}):u.createElement(t);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>u.createTextNode(t),createComment:t=>u.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>u.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===s||!(i=i.nextSibling))break}else{h.innerHTML=a("svg"===r?`<svg>${t}</svg>`:"mathml"===r?`<math>${t}</math>`:t);const i=h.content;if("svg"===r||"mathml"===r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},f="transition",p="animation",g=Symbol("_vtc"),m={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},v=(0,i.X$)({},r.QP,m),y=t=>(t.displayName="Transition",t.props=v,t),b=y(((t,{slots:e})=>(0,r.h)(r.pR,x(t),e))),w=(t,e=[])=>{(0,i.cy)(t)?t.forEach((t=>t(...e))):t&&t(...e)},_=t=>!!t&&((0,i.cy)(t)?t.some((t=>t.length>1)):t.length>1);function x(t){const e={};for(const i in t)i in m||(e[i]=t[i]);if(!1===t.css)return e;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:h=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=S(s),v=g&&g[0],y=g&&g[1],{onBeforeEnter:b,onEnter:x,onEnterCancelled:I,onLeave:k,onLeaveCancelled:L,onBeforeAppear:C=b,onAppear:P=x,onAppearCancelled:R=I}=e,D=(t,e,n,r)=>{t._enterCancelled=r,E(t,e?h:c),E(t,e?u:a),n&&n()},M=(t,e)=>{t._isLeaving=!1,E(t,d),E(t,p),E(t,f),e&&e()},F=t=>(e,n)=>{const i=t?P:x,s=()=>D(e,t,n);w(i,[e,s]),T((()=>{E(e,t?l:o),A(e,t?h:c),_(i)||N(e,r,v,s)}))};return(0,i.X$)(e,{onBeforeEnter(t){w(b,[t]),A(t,o),A(t,a)},onBeforeAppear(t){w(C,[t]),A(t,l),A(t,u)},onEnter:F(!1),onAppear:F(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>M(t,e);A(t,d),t._enterCancelled?(A(t,f),O()):(O(),A(t,f)),T((()=>{t._isLeaving&&(E(t,d),A(t,p),_(k)||N(t,r,y,n))})),w(k,[t,n])},onEnterCancelled(t){D(t,!1,void 0,!0),w(I,[t])},onAppearCancelled(t){D(t,!0,void 0,!0),w(R,[t])},onLeaveCancelled(t){M(t),w(L,[t])}})}function S(t){if(null==t)return null;if((0,i.Gv)(t))return[I(t.enter),I(t.leave)];{const e=I(t);return[e,e]}}function I(t){const e=(0,i.Ro)(t);return e}function A(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t[g]||(t[g]=new Set)).add(e)}function E(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const n=t[g];n&&(n.delete(e),n.size||(t[g]=void 0))}function T(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let k=0;function N(t,e,n,r){const i=t._endId=++k,s=()=>{i===t._endId&&r()};if(null!=n)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=L(t,e);if(!o)return r();const l=o+"end";let u=0;const h=()=>{t.removeEventListener(l,d),s()},d=e=>{e.target===t&&++u>=c&&h()};setTimeout((()=>{u<c&&h()}),a+1),t.addEventListener(l,d)}function L(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(`${f}Delay`),s=r(`${f}Duration`),o=C(i,s),a=r(`${p}Delay`),c=r(`${p}Duration`),l=C(a,c);let u=null,h=0,d=0;e===f?o>0&&(u=f,h=o,d=s.length):e===p?l>0&&(u=p,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?f:p:null,d=u?u===f?s.length:c.length:0);const g=u===f&&/\b(transform|all)(,|$)/.test(r(`${f}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:g}}function C(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>P(e)+P(t[n]))))}function P(t){return"auto"===t?0:1e3*Number(t.slice(0,-1).replace(",","."))}function O(){return document.body.offsetHeight}function R(t,e,n){const r=t[g];r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const D=Symbol("_vod"),M=Symbol("_vsh");const F=Symbol("");const j=/(^|;)\s*display\s*:/;function B(t,e,n){const r=t.style,s=(0,i.Kg)(n);let o=!1;if(n&&!s){if(e)if((0,i.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==n[e]&&U(r,e,"")}else for(const t in e)null==n[t]&&U(r,t,"");for(const t in n)"display"===t&&(o=!0),U(r,t,n[t])}else if(s){if(e!==n){const t=r[F];t&&(n+=";"+t),r.cssText=n,o=j.test(n)}}else e&&t.removeAttribute("style");D in t&&(t[D]=o?r.display:"",t[M]&&(r.display="none"))}const V=/\s*!important$/;function U(t,e,n){if((0,i.cy)(n))n.forEach((n=>U(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=H(t,e);V.test(n)?t.setProperty((0,i.Tg)(r),n.replace(V,""),"important"):t[r]=n}}const q=["Webkit","Moz","ms"],z={};function H(t,e){const n=z[e];if(n)return n;let r=(0,i.PT)(e);if("filter"!==r&&r in t)return z[e]=r;r=(0,i.ZH)(r);for(let i=0;i<q.length;i++){const n=q[i]+r;if(n in t)return z[e]=n}return e}const W="http://www.w3.org/1999/xlink";function $(t,e,n,r,s,o=(0,i.J$)(e)){r&&e.startsWith("xlink:")?null==n?t.removeAttributeNS(W,e.slice(6,e.length)):t.setAttributeNS(W,e,n):null==n||o&&!(0,i.Y2)(n)?t.removeAttribute(e):t.setAttribute(e,o?"":(0,i.Bm)(n)?String(n):n)}function G(t,e,n,r,s){if("innerHTML"===e||"textContent"===e)return void(null!=n&&(t[e]="innerHTML"===e?a(n):n));const o=t.tagName;if("value"===e&&"PROGRESS"!==o&&!o.includes("-")){const r="OPTION"===o?t.getAttribute("value")||"":t.value,i=null==n?"checkbox"===t.type?"on":"":String(n);return r===i&&"_value"in t||(t.value=i),null==n&&t.removeAttribute(e),void(t._value=n)}let c=!1;if(""===n||null==n){const r=typeof t[e];"boolean"===r?n=(0,i.Y2)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{t[e]=n}catch(kt){0}c&&t.removeAttribute(s||e)}function K(t,e,n,r){t.addEventListener(e,n,r)}function Y(t,e,n,r){t.removeEventListener(e,n,r)}const Q=Symbol("_vei");function J(t,e,n,r,i=null){const s=t[Q]||(t[Q]={}),o=s[e];if(r&&o)o.value=r;else{const[n,a]=Z(e);if(r){const o=s[e]=rt(r,i);K(t,n,o,a)}else o&&(Y(t,n,o,a),s[e]=void 0)}}const X=/(?:Once|Passive|Capture)$/;function Z(t){let e;if(X.test(t)){let n;e={};while(n=t.match(X))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,i.Tg)(t.slice(2));return[n,e]}let tt=0;const et=Promise.resolve(),nt=()=>tt||(et.then((()=>tt=0)),tt=Date.now());function rt(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,r.qL)(it(t,n.value),e,5,[t])};return n.value=t,n.attached=nt(),n}function it(t,e){if((0,i.cy)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const st=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ot=(t,e,n,r,s,o)=>{const a="svg"===s;"class"===e?R(t,r,a):"style"===e?B(t,n,r):(0,i.Mp)(e)?(0,i.CP)(e)||J(t,e,n,r,o):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):at(t,e,r,a))?(G(t,e,r),t.tagName.includes("-")||"value"!==e&&"checked"!==e&&"selected"!==e||$(t,e,r,a,o,"value"!==e)):!t._isVueCE||!/[A-Z]/.test(e)&&(0,i.Kg)(r)?("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),$(t,e,r,a)):G(t,(0,i.PT)(e),r,o,e)};function at(t,e,n,r){if(r)return"innerHTML"===e||"textContent"===e||!!(e in t&&st(e)&&(0,i.Tn)(n));if("spellcheck"===e||"draggable"===e||"translate"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!st(e)||!(0,i.Kg)(n))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;Symbol("_moveCb"),Symbol("_enterCb");const ct=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,i.cy)(e)?t=>(0,i.DY)(e,t):e};function lt(t){t.target.composing=!0}function ut(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ht=Symbol("_assign"),dt={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[ht]=ct(s);const o=r||s.props&&"number"===s.props.type;K(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n&&(r=r.trim()),o&&(r=(0,i.bB)(r)),t[ht](r)})),n&&K(t,"change",(()=>{t.value=t.value.trim()})),e||(K(t,"compositionstart",lt),K(t,"compositionend",ut),K(t,"change",ut))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:o}},a){if(t[ht]=ct(a),t.composing)return;const c=!o&&"number"!==t.type||/^0\d/.test(t.value)?t.value:(0,i.bB)(t.value),l=null==e?"":e;if(c!==l){if(document.activeElement===t&&"range"!==t.type){if(r&&e===n)return;if(s&&t.value.trim()===l)return}t.value=l}}},ft={deep:!0,created(t,e,n){t[ht]=ct(n),K(t,"change",(()=>{const e=t._modelValue,n=vt(t),r=t.checked,s=t[ht];if((0,i.cy)(e)){const t=(0,i.u3)(e,n),o=-1!==t;if(r&&!o)s(e.concat(n));else if(!r&&o){const n=[...e];n.splice(t,1),s(n)}}else if((0,i.vM)(e)){const t=new Set(e);r?t.add(n):t.delete(n),s(t)}else s(yt(t,r))}))},mounted:pt,beforeUpdate(t,e,n){t[ht]=ct(n),pt(t,e,n)}};function pt(t,{value:e,oldValue:n},r){let s;if(t._modelValue=e,(0,i.cy)(e))s=(0,i.u3)(e,r.props.value)>-1;else if((0,i.vM)(e))s=e.has(r.props.value);else{if(e===n)return;s=(0,i.BX)(e,yt(t,!0))}t.checked!==s&&(t.checked=s)}const gt={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const o=(0,i.vM)(e);K(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,i.bB)(vt(t)):vt(t)));t[ht](t.multiple?o?new Set(e):e:e[0]),t._assigning=!0,(0,r.dY)((()=>{t._assigning=!1}))})),t[ht]=ct(s)},mounted(t,{value:e}){mt(t,e)},beforeUpdate(t,e,n){t[ht]=ct(n)},updated(t,{value:e}){t._assigning||mt(t,e)}};function mt(t,e){const n=t.multiple,r=(0,i.cy)(e);if(!n||r||(0,i.vM)(e)){for(let s=0,o=t.options.length;s<o;s++){const o=t.options[s],a=vt(o);if(n)if(r){const t=typeof a;o.selected="string"===t||"number"===t?e.some((t=>String(t)===String(a))):(0,i.u3)(e,a)>-1}else o.selected=e.has(a);else if((0,i.BX)(vt(o),e))return void(t.selectedIndex!==s&&(t.selectedIndex=s))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function vt(t){return"_value"in t?t._value:t.value}function yt(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const bt=["ctrl","shift","alt","meta"],wt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>bt.some((n=>t[`${n}Key`]&&!e.includes(n)))},_t=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(n,...r)=>{for(let t=0;t<e.length;t++){const r=wt[e[t]];if(r&&r(n,e))return}return t(n,...r)})},xt=(0,i.X$)({patchProp:ot},d);let St;function It(){return St||(St=(0,r.K9)(xt))}const At=(...t)=>{const e=It().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=Tt(t);if(!r)return;const s=e._component;(0,i.Tn)(s)||s.render||s.template||(s.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const o=n(r,!1,Et(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Et(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function Tt(t){if((0,i.Kg)(t)){const e=document.querySelector(t);return e}return t}},4232:function(t,e,n){"use strict";n.d(e,{$3:function(){return f},$H:function(){return F},BH:function(){return W},BX:function(){return nt},Bm:function(){return _},C4:function(){return J},CE:function(){return g},CP:function(){return l},DY:function(){return j},Gv:function(){return x},J$:function(){return Z},Kg:function(){return w},MZ:function(){return i},Mp:function(){return c},NO:function(){return a},Oj:function(){return s},PT:function(){return P},Qd:function(){return T},Ro:function(){return U},SU:function(){return N},TF:function(){return h},Tg:function(){return R},Tn:function(){return b},Tr:function(){return $},We:function(){return z},X$:function(){return u},Y2:function(){return tt},ZH:function(){return D},Zf:function(){return E},bB:function(){return V},cy:function(){return p},gd:function(){return y},pD:function(){return r},rU:function(){return M},tE:function(){return o},u3:function(){return rt},vM:function(){return m},v_:function(){return st},yI:function(){return k},yL:function(){return S},yQ:function(){return B}});n(8743),n(3725),n(5019),n(9838),n(1339),n(9471);
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function r(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return t=>t in e}const i={},s=[],o=()=>{},a=()=>!1,c=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),l=t=>t.startsWith("onUpdate:"),u=Object.assign,h=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),p=Array.isArray,g=t=>"[object Map]"===A(t),m=t=>"[object Set]"===A(t),v=t=>"[object Date]"===A(t),y=t=>"[object RegExp]"===A(t),b=t=>"function"===typeof t,w=t=>"string"===typeof t,_=t=>"symbol"===typeof t,x=t=>null!==t&&"object"===typeof t,S=t=>(x(t)||b(t))&&b(t.then)&&b(t.catch),I=Object.prototype.toString,A=t=>I.call(t),E=t=>A(t).slice(8,-1),T=t=>"[object Object]"===A(t),k=t=>w(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,N=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},C=/-(\w)/g,P=L((t=>t.replace(C,((t,e)=>e?e.toUpperCase():"")))),O=/\B([A-Z])/g,R=L((t=>t.replace(O,"-$1").toLowerCase())),D=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),M=L((t=>{const e=t?`on${D(t)}`:"";return e})),F=(t,e)=>!Object.is(t,e),j=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},B=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},V=t=>{const e=parseFloat(t);return isNaN(e)?t:e},U=t=>{const e=w(t)?Number(t):NaN;return isNaN(e)?t:e};let q;const z=()=>q||(q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const H="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",W=r(H);function $(t){if(p(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=w(r)?Q(r):$(r);if(i)for(const t in i)e[t]=i[t]}return e}if(w(t)||x(t))return t}const G=/;(?![^(]*\))/g,K=/:([^]+)/,Y=/\/\*[^]*?\*\//g;function Q(t){const e={};return t.replace(Y,"").split(G).forEach((t=>{if(t){const n=t.split(K);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function J(t){let e="";if(w(t))e=t;else if(p(t))for(let n=0;n<t.length;n++){const r=J(t[n]);r&&(e+=r+" ")}else if(x(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const X="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Z=r(X);function tt(t){return!!t||""===t}function et(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nt(t[r],e[r]);return n}function nt(t,e){if(t===e)return!0;let n=v(t),r=v(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=_(t),r=_(e),n||r)return t===e;if(n=p(t),r=p(e),n||r)return!(!n||!r)&&et(t,e);if(n=x(t),r=x(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!nt(t[n],e[n]))return!1}}return String(t)===String(e)}function rt(t,e){return t.findIndex((t=>nt(t,e)))}const it=t=>!(!t||!0!==t["__v_isRef"]),st=t=>w(t)?t:null==t?"":p(t)||x(t)&&(t.toString===I||!b(t.toString))?it(t)?st(t.value):JSON.stringify(t,ot,2):String(t),ot=(t,e)=>it(e)?ot(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n],r)=>(t[at(e,r)+" =>"]=n,t)),{})}:m(e)?{[`Set(${e.size})`]:[...e.values()].map((t=>at(t)))}:_(e)?at(e):!x(e)||p(e)||T(e)?e:String(e),at=(t,e="")=>{var n;return _(t)?`Symbol(${null!=(n=t.description)?n:e})`:t}},1749:function(t,e,n){"use strict";n.d(e,{uE:function(){return Ot}});n(8743),n(8802),n(3492),n(4467),n(6736),n(9639),n(9286),n(9266),n(3725),n(5019),n(2598),n(9838),n(1339),n(9471),n(7060);var r=n(4119),i=(n(2838),Uint8Array),s=Uint16Array,o=Int32Array,a=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(t,e){for(var n=new s(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new o(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},h=u(a,2),d=h.b,f=h.r;d[28]=258,f[258]=28;for(var p=u(c,0),g=p.b,m=p.r,v=new s(32768),y=0;y<32768;++y){var b=(43690&y)>>1|(21845&y)<<1;b=(52428&b)>>2|(13107&b)<<2,b=(61680&b)>>4|(3855&b)<<4,v[y]=((65280&b)>>8|(255&b)<<8)>>1}var w=function(t,e,n){for(var r=t.length,i=0,o=new s(e);i<r;++i)t[i]&&++o[t[i]-1];var a,c=new s(e);for(i=1;i<e;++i)c[i]=c[i-1]+o[i-1]<<1;if(n){a=new s(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],h=e-t[i],d=c[t[i]-1]++<<h,f=d|(1<<h)-1;d<=f;++d)a[v[d]>>l]=u}else for(a=new s(r),i=0;i<r;++i)t[i]&&(a[i]=v[c[t[i]-1]++]>>15-t[i]);return a},_=new i(288);for(y=0;y<144;++y)_[y]=8;for(y=144;y<256;++y)_[y]=9;for(y=256;y<280;++y)_[y]=7;for(y=280;y<288;++y)_[y]=8;var x=new i(32);for(y=0;y<32;++y)x[y]=5;var S=w(_,9,0),I=w(_,9,1),A=w(x,5,0),E=w(x,5,1),T=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},k=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},N=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},L=function(t){return(t+7)/8|0},C=function(t,e,n){return(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length),new i(t.subarray(e,n))},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],O=function(t,e,n){var r=new Error(e||P[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,O),!n)throw r;return r},R=function(t,e,n,r){var s=t.length,o=r?r.length:0;if(!s||e.f&&!e.l)return n||new i(0);var u=!n,h=u||2!=e.i,f=e.i;u&&(n=new i(3*s));var p=function(t){var e=n.length;if(t>e){var r=new i(Math.max(2*e,t));r.set(n),n=r}},m=e.f||0,v=e.p||0,y=e.b||0,b=e.l,_=e.d,x=e.m,S=e.n,A=8*s;do{if(!b){m=k(t,v,1);var P=k(t,v+1,3);if(v+=3,!P){var R=L(v)+4,D=t[R-4]|t[R-3]<<8,M=R+D;if(M>s){f&&O(0);break}h&&p(y+D),n.set(t.subarray(R,M),y),e.b=y+=D,e.p=v=8*M,e.f=m;continue}if(1==P)b=I,_=E,x=9,S=5;else if(2==P){var F=k(t,v,31)+257,j=k(t,v+10,15)+4,B=F+k(t,v+5,31)+1;v+=14;for(var V=new i(B),U=new i(19),q=0;q<j;++q)U[l[q]]=k(t,v+3*q,7);v+=3*j;var z=T(U),H=(1<<z)-1,W=w(U,z,1);for(q=0;q<B;){var $=W[k(t,v,H)];v+=15&$;R=$>>4;if(R<16)V[q++]=R;else{var G=0,K=0;16==R?(K=3+k(t,v,3),v+=2,G=V[q-1]):17==R?(K=3+k(t,v,7),v+=3):18==R&&(K=11+k(t,v,127),v+=7);while(K--)V[q++]=G}}var Y=V.subarray(0,F),Q=V.subarray(F);x=T(Y),S=T(Q),b=w(Y,x,1),_=w(Q,S,1)}else O(1);if(v>A){f&&O(0);break}}h&&p(y+131072);for(var J=(1<<x)-1,X=(1<<S)-1,Z=v;;Z=v){G=b[N(t,v)&J];var tt=G>>4;if(v+=15&G,v>A){f&&O(0);break}if(G||O(2),tt<256)n[y++]=tt;else{if(256==tt){Z=v,b=null;break}var et=tt-254;if(tt>264){q=tt-257;var nt=a[q];et=k(t,v,(1<<nt)-1)+d[q],v+=nt}var rt=_[N(t,v)&X],it=rt>>4;rt||O(3),v+=15&rt;Q=g[it];if(it>3){nt=c[it];Q+=N(t,v)&(1<<nt)-1,v+=nt}if(v>A){f&&O(0);break}h&&p(y+131072);var st=y+et;if(y<Q){var ot=o-Q,at=Math.min(Q,st);for(ot+y<0&&O(3);y<at;++y)n[y]=r[ot+y]}for(;y<st;++y)n[y]=n[y-Q]}}e.l=b,e.p=Z,e.b=y,e.f=m,b&&(m=1,e.m=x,e.d=_,e.n=S)}while(!m);return y!=n.length&&u?C(n,0,y):n.subarray(0,y)},D=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},M=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},F=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var o=n.length,a=n.slice();if(!o)return{t:H,l:0};if(1==o){var c=new i(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var l=n[0],u=n[1],h=0,d=1,f=2;n[0]={s:-1,f:l.f+u.f,l:l,r:u};while(d!=o-1)l=n[n[h].f<n[f].f?h++:f++],u=n[h!=d&&n[h].f<n[f].f?h++:f++],n[d++]={s:-1,f:l.f+u.f,l:l,r:u};var p=a[0].s;for(r=1;r<o;++r)a[r].s>p&&(p=a[r].s);var g=new s(p+1),m=j(n[d-1],g,0);if(m>e){r=0;var v=0,y=m-e,b=1<<y;for(a.sort((function(t,e){return g[e.s]-g[t.s]||t.f-e.f}));r<o;++r){var w=a[r].s;if(!(g[w]>e))break;v+=b-(1<<m-g[w]),g[w]=e}v>>=y;while(v>0){var _=a[r].s;g[_]<e?v-=1<<e-g[_]++-1:++r}for(;r>=0&&v;--r){var x=a[r].s;g[x]==e&&(--g[x],++v)}m=e}return{t:new i(g),l:m}},j=function(t,e,n){return-1==t.s?Math.max(j(t.l,e,n+1),j(t.r,e,n+1)):e[t.s]=n},B=function(t){var e=t.length;while(e&&!t[--e]);for(var n=new s(++e),r=0,i=t[0],o=1,a=function(t){n[r++]=t},c=1;c<=e;++c)if(t[c]==i&&c!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}while(o--)a(i);o=1,i=t[c]}return{c:n.subarray(0,r),n:e}},V=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},U=function(t,e,n){var r=n.length,i=L(e+2);t[i]=255&r,t[i+1]=r>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},q=function(t,e,n,r,i,o,u,h,d,f,p){D(e,p++,n),++i[256];for(var g=F(i,15),m=g.t,v=g.l,y=F(o,15),b=y.t,I=y.l,E=B(m),T=E.c,k=E.n,N=B(b),L=N.c,C=N.n,P=new s(19),O=0;O<T.length;++O)++P[31&T[O]];for(O=0;O<L.length;++O)++P[31&L[O]];for(var R=F(P,7),j=R.t,q=R.l,z=19;z>4&&!j[l[z-1]];--z);var H,W,$,G,K=f+5<<3,Y=V(i,_)+V(o,x)+u,Q=V(i,m)+V(o,b)+u+14+3*z+V(P,j)+2*P[16]+3*P[17]+7*P[18];if(d>=0&&K<=Y&&K<=Q)return U(e,p,t.subarray(d,d+f));if(D(e,p,1+(Q<Y)),p+=2,Q<Y){H=w(m,v,0),W=m,$=w(b,I,0),G=b;var J=w(j,q,0);D(e,p,k-257),D(e,p+5,C-1),D(e,p+10,z-4),p+=14;for(O=0;O<z;++O)D(e,p+3*O,j[l[O]]);p+=3*z;for(var X=[T,L],Z=0;Z<2;++Z){var tt=X[Z];for(O=0;O<tt.length;++O){var et=31&tt[O];D(e,p,J[et]),p+=j[et],et>15&&(D(e,p,tt[O]>>5&127),p+=tt[O]>>12)}}}else H=S,W=_,$=A,G=x;for(O=0;O<h;++O){var nt=r[O];if(nt>255){et=nt>>18&31;M(e,p,H[et+257]),p+=W[et+257],et>7&&(D(e,p,nt>>23&31),p+=a[et]);var rt=31&nt;M(e,p,$[rt]),p+=G[rt],rt>3&&(M(e,p,nt>>5&8191),p+=c[rt])}else M(e,p,H[nt]),p+=W[nt]}return M(e,p,H[256]),p+W[256]},z=new o([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H=new i(0),W=function(t,e,n,r,l,u){var h=u.z||t.length,d=new i(r+h+5*(1+Math.ceil(h/7e3))+l),p=d.subarray(r,d.length-l),g=u.l,v=7&(u.r||0);if(e){v&&(p[0]=u.r>>3);for(var y=z[e-1],b=y>>13,w=8191&y,_=(1<<n)-1,x=u.p||new s(32768),S=u.h||new s(_+1),I=Math.ceil(n/3),A=2*I,E=function(e){return(t[e]^t[e+1]<<I^t[e+2]<<A)&_},T=new o(25e3),k=new s(288),N=new s(32),P=0,O=0,R=u.i||0,D=0,M=u.w||0,F=0;R+2<h;++R){var j=E(R),B=32767&R,V=S[j];if(x[B]=V,S[j]=B,M<=R){var H=h-R;if((P>7e3||D>24576)&&(H>423||!g)){v=q(t,p,0,T,k,N,O,D,F,R-F,v),D=P=O=0,F=R;for(var W=0;W<286;++W)k[W]=0;for(W=0;W<30;++W)N[W]=0}var $=2,G=0,K=w,Y=B-V&32767;if(H>2&&j==E(R-Y)){var Q=Math.min(b,H)-1,J=Math.min(32767,R),X=Math.min(258,H);while(Y<=J&&--K&&B!=V){if(t[R+$]==t[R+$-Y]){for(var Z=0;Z<X&&t[R+Z]==t[R+Z-Y];++Z);if(Z>$){if($=Z,G=Y,Z>Q)break;var tt=Math.min(Y,Z-2),et=0;for(W=0;W<tt;++W){var nt=R-Y+W&32767,rt=x[nt],it=nt-rt&32767;it>et&&(et=it,V=nt)}}}B=V,V=x[B],Y+=B-V&32767}}if(G){T[D++]=268435456|f[$]<<18|m[G];var st=31&f[$],ot=31&m[G];O+=a[st]+c[ot],++k[257+st],++N[ot],M=R+$,++P}else T[D++]=t[R],++k[t[R]]}}for(R=Math.max(R,M);R<h;++R)T[D++]=t[R],++k[t[R]];v=q(t,p,g,T,k,N,O,D,F,R-F,v),g||(u.r=7&v|p[v/8|0]<<3,v-=7,u.h=S,u.p=x,u.i=R,u.w=M)}else{for(R=u.w||0;R<h+g;R+=65535){var at=R+65535;at>=h&&(p[v/8|0]=g,at=h),v=U(p,v+1,t.subarray(R,at))}u.i=h}return C(d,0,r+L(v)+l)},$=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=0|n.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(255&t)<<24|(65280&t)<<8|(255&e)<<8|e>>8}}},G=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),a=new i(o.length+t.length);a.set(o),a.set(t,o.length),t=a,s.w=o.length}return W(t,null==e.level?6:e.level,null==e.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,r,s)},K=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Y=function(t,e){var n=e.level,r=0==n?0:n<6?1:9==n?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=$();i.p(e.dictionary),K(t,2,i.d())}},Q=function(t,e){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&O(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&O(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4)};function J(t,e){e||(e={});var n=$();n.p(t);var r=G(t,e,e.dictionary?6:2,4);return Y(r,e),K(r,r.length-4,n.d()),r}function X(t,e){return R(t.subarray(Q(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(H,{stream:!0})}catch(wn){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 3.0.0 Built on 2025-02-19T09:26:58.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas HollÃ¤nder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */
var tt=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function et(){tt.console&&"function"==typeof tt.console.log&&tt.console.log.apply(tt.console,arguments)}var nt={log:et,warn:function(t){tt.console&&("function"==typeof tt.console.warn?tt.console.warn.apply(tt.console,arguments):et.call(null,arguments))},error:function(t){tt.console&&("function"==typeof tt.console.error?tt.console.error.apply(tt.console,arguments):et(t))}};function rt(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ct(r.response,e,n)},r.onerror=function(){nt.error("could not download file")},r.send()}function it(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function st(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ot,at,ct=tt.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,r.A)(window))||window!==tt?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=tt.URL||tt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?it(i.href)?rt(t,e,n):st(i,i.target="_blank"):st(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){st(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(it(t))rt(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){st(i)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==(0,r.A)(e)&&(nt.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return rt(t,e,n);var s="application/octet-stream"===t.type,o=/constructor/i.test(tt.HTMLElement)||tt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&o)&&"object"===("undefined"==typeof FileReader?"undefined":(0,r.A)(FileReader))){var c=new FileReader;c.onloadend=function(){var t=c.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var l=tt.URL||tt.webkitURL,u=l.createObjectURL(t);i?i.location=u:location.href=u,i=null,setTimeout((function(){l.revokeObjectURL(u)}),4e4)}});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function lt(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ut(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=dt(n,r,i,s,e[0],7,-680876936),s=dt(s,n,r,i,e[1],12,-389564586),i=dt(i,s,n,r,e[2],17,606105819),r=dt(r,i,s,n,e[3],22,-1044525330),n=dt(n,r,i,s,e[4],7,-176418897),s=dt(s,n,r,i,e[5],12,1200080426),i=dt(i,s,n,r,e[6],17,-1473231341),r=dt(r,i,s,n,e[7],22,-45705983),n=dt(n,r,i,s,e[8],7,1770035416),s=dt(s,n,r,i,e[9],12,-1958414417),i=dt(i,s,n,r,e[10],17,-42063),r=dt(r,i,s,n,e[11],22,-1990404162),n=dt(n,r,i,s,e[12],7,1804603682),s=dt(s,n,r,i,e[13],12,-40341101),i=dt(i,s,n,r,e[14],17,-1502002290),n=ft(n,r=dt(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ft(s,n,r,i,e[6],9,-1069501632),i=ft(i,s,n,r,e[11],14,643717713),r=ft(r,i,s,n,e[0],20,-373897302),n=ft(n,r,i,s,e[5],5,-701558691),s=ft(s,n,r,i,e[10],9,38016083),i=ft(i,s,n,r,e[15],14,-660478335),r=ft(r,i,s,n,e[4],20,-405537848),n=ft(n,r,i,s,e[9],5,568446438),s=ft(s,n,r,i,e[14],9,-1019803690),i=ft(i,s,n,r,e[3],14,-187363961),r=ft(r,i,s,n,e[8],20,1163531501),n=ft(n,r,i,s,e[13],5,-1444681467),s=ft(s,n,r,i,e[2],9,-51403784),i=ft(i,s,n,r,e[7],14,1735328473),n=pt(n,r=ft(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=pt(s,n,r,i,e[8],11,-2022574463),i=pt(i,s,n,r,e[11],16,1839030562),r=pt(r,i,s,n,e[14],23,-35309556),n=pt(n,r,i,s,e[1],4,-1530992060),s=pt(s,n,r,i,e[4],11,1272893353),i=pt(i,s,n,r,e[7],16,-155497632),r=pt(r,i,s,n,e[10],23,-1094730640),n=pt(n,r,i,s,e[13],4,681279174),s=pt(s,n,r,i,e[0],11,-358537222),i=pt(i,s,n,r,e[3],16,-722521979),r=pt(r,i,s,n,e[6],23,76029189),n=pt(n,r,i,s,e[9],4,-640364487),s=pt(s,n,r,i,e[12],11,-421815835),i=pt(i,s,n,r,e[15],16,530742520),n=gt(n,r=pt(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=gt(s,n,r,i,e[7],10,1126891415),i=gt(i,s,n,r,e[14],15,-1416354905),r=gt(r,i,s,n,e[5],21,-57434055),n=gt(n,r,i,s,e[12],6,1700485571),s=gt(s,n,r,i,e[3],10,-1894986606),i=gt(i,s,n,r,e[10],15,-1051523),r=gt(r,i,s,n,e[1],21,-2054922799),n=gt(n,r,i,s,e[8],6,1873313359),s=gt(s,n,r,i,e[15],10,-30611744),i=gt(i,s,n,r,e[6],15,-1560198380),r=gt(r,i,s,n,e[13],21,1309151649),n=gt(n,r,i,s,e[4],6,-145523070),s=gt(s,n,r,i,e[11],10,-1120210379),i=gt(i,s,n,r,e[2],15,718787259),r=gt(r,i,s,n,e[9],21,-343485551),t[0]=St(n,t[0]),t[1]=St(r,t[1]),t[2]=St(i,t[2]),t[3]=St(s,t[3])}function ht(t,e,n,r,i,s){return e=St(St(e,t),St(r,s)),St(e<<i|e>>>32-i,n)}function dt(t,e,n,r,i,s,o){return ht(e&n|~e&r,t,e,i,s,o)}function ft(t,e,n,r,i,s,o){return ht(e&r|n&~r,t,e,i,s,o)}function pt(t,e,n,r,i,s,o){return ht(e^n^r,t,e,i,s,o)}function gt(t,e,n,r,i,s,o){return ht(n^(e|~r),t,e,i,s,o)}function mt(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)ut(r,vt(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(ut(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,ut(r,i),r}function vt(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}ot=tt.atob.bind(tt),at=tt.btoa.bind(tt);var yt="0123456789abcdef".split("");function bt(t){for(var e="",n=0;n<4;n++)e+=yt[t>>8*n+4&15]+yt[t>>8*n&15];return e}function wt(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function _t(t){return mt(t).map(wt).join("")}var xt="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=bt(t[e]);return t.join("")}(mt("hello"));function St(t,e){if(xt){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function It(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var l=0;for(c=0;c<256;c++){var u=a[c];l=(l+u+o.charCodeAt(c))%256,a[c]=a[l],a[l]=u}n=t,r=a}else a=r;var h=e.length,d=0,f=0,p="";for(c=0;c<h;c++)f=(f+(u=a[d=(d+1)%256]))%256,a[d]=a[f],a[f]=u,o=a[(a[d]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(c)^o);return p}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var At={print:4,modify:8,copy:16,"annot-forms":32};function Et(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach((function(t){if(void 0!==At.perm)throw new Error("Invalid permission: "+t);i+=At[t]})),this.padding="(Â¿N^NuÂAd\0NVÃ¿Ãº\b..\0Â¶Ãh>Â/\fÂ©Ã¾dSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=_t(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=It(this.encryptionKey,this.padding)}function Tt(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function kt(t){if("object"!==(0,r.A)(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!r],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(n){tt.console&&nt.error("jsPDF PubSub Error",n.message,n)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Nt(t){if(!(this instanceof Nt))return new Nt(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Lt(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ct(t,e,n,r,i){if(!(this instanceof Ct))return new Ct(t,e,n,r,i);this.type="axial"===t?2:3,this.coords=e,this.colors=n,Lt.call(this,r,i)}function Pt(t,e,n,r,i){if(!(this instanceof Pt))return new Pt(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Lt.call(this,r,i)}function Ot(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],s=arguments[2],o=arguments[3],a=[],c=1,l=16,u="S",h=null;"object"===(0,r.A)(t=t||{})&&(n=t.orientation,i=t.unit||i,s=t.format||s,o=t.compress||t.compressPdf||o,null!==(h=t.encryption||null)&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),c="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),a=t.filters||(!0===o?["FlateEncode"]:a),i=i||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=kt;var g="1.3",m=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(t){g=t};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return v};var y=p.__private__.getPageFormat=function(t){return v[t]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},w=b.COMPAT;function _(){this.saveGraphicsState(),Z(new Wt(bt,0,0,-bt,0,Vn()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),u="n",w=b.ADVANCED}function x(){this.restoreGraphicsState(),u="S",w=b.COMPAT}var S=p.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};p.advancedAPI=function(t){var e=w===b.COMPAT;return e&&_.call(this),"function"!=typeof t||(t(this),e&&x.call(this)),this},p.compatAPI=function(t){var e=w===b.ADVANCED;return e&&x.call(this),"function"!=typeof t||(t(this),e&&_.call(this)),this},p.isAdvancedAPI=function(){return w===b.ADVANCED};var I,A=function(t){if(w!==b.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=p.roundToPrecision=p.__private__.roundToPrecision=function(t,n){var r=e||n;if(isNaN(t)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(r).replace(/0+$/,"")};I=p.hpf=p.__private__.hpf="number"==typeof l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return E(t,l)}:"smart"===l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return E(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return E(t,16)};var T=p.f2=p.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return E(t,2)},k=p.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return E(t,3)},N=p.scale=p.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return w===b.COMPAT?t*bt:w===b.ADVANCED?t:void 0},L=function(t){return w===b.COMPAT?Vn()-t:w===b.ADVANCED?t:void 0},C=function(t){return N(L(t))};p.__private__.setPrecision=p.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var P,O="00000000000000000000000000000000",R=p.__private__.getFileId=function(){return O},D=p.__private__.setFileId=function(t){return O=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():O.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==h&&(Ge=new Et(h.userPermissions,h.userPassword,h.ownerPassword,O)),O};p.setFileId=function(t){return D(t),this},p.getFileId=function(){return R()};var M=p.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",r=Math.floor(Math.abs(e/60)),i=Math.abs(e%60),s=[n,U(r),"'",U(i),"'"].join("");return["D:",t.getFullYear(),U(t.getMonth()+1),U(t.getDate()),U(t.getHours()),U(t.getMinutes()),U(t.getSeconds()),s].join("")},F=p.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,r=parseInt(t.substr(8,2),10),i=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),o=parseInt(t.substr(14,2),10);return new Date(e,n,r,i,s,o,0)},j=p.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=M(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return P=e},B=p.__private__.getCreationDate=function(t){var e=P;return"jsDate"===t&&(e=F(P)),e};p.setCreationDate=function(t){return j(t),this},p.getCreationDate=function(t){return B(t)};var V,U=p.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},q=p.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},z=0,H=[],W=[],$=0,G=[],K=[],Y=!1,Q=W,J=function(){z=0,$=0,W=[],H=[],G=[],Zt=Qt(),te=Qt()};p.__private__.setCustomOutputDestination=function(t){Y=!0,Q=t};var X=function(t){Y||(Q=t)};p.__private__.resetCustomOutputDestination=function(){Y=!1,Q=W};var Z=p.__private__.out=function(t){return t=t.toString(),$+=t.length+1,Q.push(t),Q},et=p.__private__.write=function(t){return Z(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},rt=p.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},it=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return it};var st=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(t){return st=w===b.ADVANCED?t/bt:t,this};var ot,ut=p.__private__.getFontSize=p.getFontSize=function(){return w===b.COMPAT?st:st*bt},ht=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(t){return ht=t,this},p.__private__.getR2L=p.getR2L=function(){return ht};var dt,ft=p.__private__.setZoomMode=function(t){var e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))ot=t;else if(isNaN(t)){if(-1===e.indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');ot=t}else ot=parseInt(t,10)};p.__private__.getZoomMode=function(){return ot};var pt,gt=p.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');dt=t};p.__private__.getPageMode=function(){return dt};var mt=p.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');pt=t};p.__private__.getLayoutMode=function(){return pt},p.__private__.setDisplayMode=p.setDisplayMode=function(t,e,n){return ft(t),mt(e),gt(n),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(t){if(-1===Object.keys(vt).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[t]},p.__private__.getDocumentProperties=function(){return vt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(t){for(var e in vt)vt.hasOwnProperty(e)&&t[e]&&(vt[e]=t[e]);return this},p.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(vt).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[t]=e};var yt,bt,wt,_t,xt,St={},It={},At=[],Lt={},Rt={},Dt={},Mt={},Ft=null,jt=0,Bt=[],Vt=new kt(p),Ut=t.hotfixes||[],qt={},zt={},Ht=[],Wt=function t(e,n,r,i,s,o){if(!(this instanceof t))return new t(e,n,r,i,s,o);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(s)&&(s=0),isNaN(o)&&(o=0),this._matrix=[e,n,r,i,s,o]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Wt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(t)},Wt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,r=t.shx*this.sx+t.sy*this.shx,i=t.shx*this.shy+t.sy*this.sy,s=t.tx*this.sx+t.ty*this.shx+this.tx,o=t.tx*this.shy+t.ty*this.sy+this.ty;return new Wt(e,n,r,i,s,o)},Wt.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,o=Math.sqrt(t*t+e*e),a=(t/=o)*n+(e/=o)*r;n-=t*a,r-=e*a;var c=Math.sqrt(n*n+r*r);return a/=c,t*(r/=c)<e*(n/=c)&&(t=-t,e=-e,a=-a,o=-o),{scale:new Wt(o,0,0,c,0,0),translate:new Wt(1,0,0,1,i,s),rotate:new Wt(t,e,-e,t,0,0),skew:new Wt(1,0,a,1,0,0)}},Wt.prototype.toString=function(t){return this.join(" ")},Wt.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty,o=1/(t*r-e*n),a=r*o,c=-e*o,l=-n*o,u=t*o;return new Wt(a,c,l,u,-a*i-l*s,-c*i-u*s)},Wt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new Pn(e,n)},Wt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new Pn(t.x+t.w,t.y+t.h));return new On(e.x,e.y,n.x-e.x,n.y-e.y)},Wt.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,r=this.sy,i=this.tx,s=this.ty;return new Wt(t,e,n,r,i,s)},p.Matrix=Wt;var $t=p.matrixMult=function(t,e){return e.multiply(t)},Gt=new Wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Gt;var Kt=function(t,e){if(!Rt[t]){var n=(e instanceof Ct?"Sh":"P")+(Object.keys(Lt).length+1).toString(10);e.id=n,Rt[t]=n,Lt[n]=e,Vt.publish("addPattern",e)}};p.ShadingPattern=Ct,p.TilingPattern=Pt,p.addShadingPattern=function(t,e){return A("addShadingPattern()"),Kt(t,e),this},p.beginTilingPattern=function(t){A("beginTilingPattern()"),Dn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},p.endTilingPattern=function(t,e){A("endTilingPattern()"),e.stream=K[V].join("\n"),Kt(t,e),Vt.publish("endTilingPattern",e),Ht.pop().restore()};var Yt=p.__private__.newObject=function(){var t=Qt();return Jt(t,!0),t},Qt=p.__private__.newObjectDeferred=function(){return z++,H[z]=function(){return $},z},Jt=function(t,e){return e="boolean"==typeof e&&e,H[t]=$,e&&Z(t+" 0 obj"),t},Xt=p.__private__.newAdditionalObject=function(){var t={objId:Qt(),content:""};return G.push(t),t},Zt=Qt(),te=Qt(),ee=p.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(e[i])).toString(16)).slice(-2);return r},ne=p.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,i=t.ch2,s=t.ch3,o=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var c=new lt(n);if(c.ok)n=c.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,i=l>>8&255,s=255&l}if(void 0===i||void 0===o&&n===i&&i===s)if("string"==typeof n)e=n+" "+a[0];else switch(t.precision){case 2:e=T(n/255)+" "+a[0];break;case 3:default:e=k(n/255)+" "+a[0]}else if(void 0===o||"object"===(0,r.A)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)e=[n,i,s,a[1]].join(" ");else switch(t.precision){case 2:e=[T(n/255),T(i/255),T(s/255),a[1]].join(" ");break;default:case 3:e=[k(n/255),k(i/255),k(s/255),a[1]].join(" ")}}else if("string"==typeof n)e=[n,i,s,o,a[2]].join(" ");else switch(t.precision){case 2:e=[T(n),T(i),T(s),T(o),a[2]].join(" ");break;case 3:default:e=[k(n),k(i),k(s),k(o),a[2]].join(" ")}return e},re=p.__private__.getFilters=function(){return a},ie=p.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||re(),r=t.alreadyAppliedFilters||[],i=t.addLength1||!1,s=e.length,o=t.objectId,a=function(t){return t};if(null!==h&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==h&&(a=Ge.encryptor(o,0));var c={};!0===n&&(n=["FlateEncode"]);var l=t.additionalKeyValues||[],u=(c=void 0!==Ot.API.processDataByFilters?Ot.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==c.data.length&&(l.push({key:"Length",value:c.data.length}),!0===i&&l.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)l.push({key:"Filter",value:u});else{l.push({key:"Filter",value:"["+u+"]"});for(var d=0;d<l.length;d+=1)if("DecodeParms"===l[d].key){for(var f=[],p=0;p<c.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(l[d].value),l[d].value="["+f.join(" ")+"]"}}Z("<<");for(var g=0;g<l.length;g++)Z("/"+l[g].key+" "+l[g].value);Z(">>"),0!==c.data.length&&(Z("stream"),Z(a(c.data)),Z("endstream"))},se=p.__private__.putPage=function(t){var e=t.number,n=t.data,r=t.objId,i=t.contentsObjId;Jt(r,!0),Z("<</Type /Page"),Z("/Parent "+t.rootDictionaryObjId+" 0 R"),Z("/Resources "+t.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(I(t.mediaBox.bottomLeftX))+" "+parseFloat(I(t.mediaBox.bottomLeftY))+" "+I(t.mediaBox.topRightX)+" "+I(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Z("/CropBox ["+I(t.cropBox.bottomLeftX)+" "+I(t.cropBox.bottomLeftY)+" "+I(t.cropBox.topRightX)+" "+I(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Z("/BleedBox ["+I(t.bleedBox.bottomLeftX)+" "+I(t.bleedBox.bottomLeftY)+" "+I(t.bleedBox.topRightX)+" "+I(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Z("/TrimBox ["+I(t.trimBox.bottomLeftX)+" "+I(t.trimBox.bottomLeftY)+" "+I(t.trimBox.topRightX)+" "+I(t.trimBox.topRightY)+"]"),null!==t.artBox&&Z("/ArtBox ["+I(t.artBox.bottomLeftX)+" "+I(t.artBox.bottomLeftY)+" "+I(t.artBox.topRightX)+" "+I(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Z("/UserUnit "+t.userUnit),Vt.publish("putPage",{objId:r,pageContext:Bt[e],pageNumber:e,page:n}),Z("/Contents "+i+" 0 R"),Z(">>"),Z("endobj");var s=n.join("\n");return w===b.ADVANCED&&(s+="\nQ"),Jt(i,!0),ie({data:s,filters:re(),objectId:i}),Z("endobj"),r},oe=p.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=jt;t++)Bt[t].objId=Qt(),Bt[t].contentsObjId=Qt();for(t=1;t<=jt;t++)n.push(se({number:t,data:K[t],objId:Bt[t].objId,contentsObjId:Bt[t].contentsObjId,mediaBox:Bt[t].mediaBox,cropBox:Bt[t].cropBox,bleedBox:Bt[t].bleedBox,trimBox:Bt[t].trimBox,artBox:Bt[t].artBox,userUnit:Bt[t].userUnit,rootDictionaryObjId:Zt,resourceDictionaryObjId:te}));Jt(Zt,!0),Z("<</Type /Pages");var r="/Kids [";for(e=0;e<jt;e++)r+=n[e]+" 0 R ";Z(r+"]"),Z("/Count "+jt),Z(">>"),Z("endobj"),Vt.publish("postPutPages")},ae=function(t){Vt.publish("putFont",{font:t,out:Z,newObject:Yt,putStream:ie}),!0!==t.isAlreadyPutted&&(t.objectNumber=Yt(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+Tt(t.postScriptName)),Z("/Subtype /Type1"),"string"==typeof t.encoding&&Z("/Encoding /"+t.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},ce=function(){for(var t in St)St.hasOwnProperty(t)&&(!1===d||!0===d&&f.hasOwnProperty(t))&&ae(St[t])},le=function(t){t.objectNumber=Yt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[I(t.x),I(t.y),I(t.x+t.width),I(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");ie({data:n,additionalKeyValues:e,objectId:t.objectNumber}),Z("endobj")},ue=function(){for(var t in qt)qt.hasOwnProperty(t)&&le(qt[t])},he=function(t,e){var n,r=[],i=1/(e-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=t[0].offset){var s={offset:0,color:t[0].color};t.unshift(s)}if(1!=t[t.length-1].offset){var o={offset:1,color:t[t.length-1].color};t.push(o)}for(var a="",c=0,l=0;l<r.length;l++){for(n=r[l];n>t[c+1].offset;)c++;var u=t[c].offset,h=(n-u)/(t[c+1].offset-u),d=t[c].color,f=t[c+1].color;a+=q(Math.round((1-h)*d[0]+h*f[0]).toString(16))+q(Math.round((1-h)*d[1]+h*f[1]).toString(16))+q(Math.round((1-h)*d[2]+h*f[2]).toString(16))}return a.trim()},de=function(t,e){e||(e=21);var n=Yt(),r=he(t.colors,e),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+e+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ie({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Z("endobj"),t.objectNumber=Yt(),Z("<< /ShadingType "+t.type),Z("/ColorSpace /DeviceRGB");var s="/Coords ["+I(parseFloat(t.coords[0]))+" "+I(parseFloat(t.coords[1]))+" ";2===t.type?s+=I(parseFloat(t.coords[2]))+" "+I(parseFloat(t.coords[3])):s+=I(parseFloat(t.coords[2]))+" "+I(parseFloat(t.coords[3]))+" "+I(parseFloat(t.coords[4]))+" "+I(parseFloat(t.coords[5])),Z(s+="]"),t.matrix&&Z("/Matrix ["+t.matrix.toString()+"]"),Z("/Function "+n+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},fe=function(t,e){var n=Qt(),r=Yt();e.push({resourcesOid:n,objectOid:r}),t.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+t.boundingBox.map(I).join(" ")+"]"}),i.push({key:"XStep",value:I(t.xStep)}),i.push({key:"YStep",value:I(t.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),t.matrix&&i.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),ie({data:t.stream,additionalKeyValues:i,objectId:t.objectNumber}),Z("endobj")},pe=function(t){var e;for(e in Lt)Lt.hasOwnProperty(e)&&(Lt[e]instanceof Ct?de(Lt[e]):Lt[e]instanceof Pt&&fe(Lt[e],t))},ge=function(t){for(var e in t.objectNumber=Yt(),Z("<<"),t)switch(e){case"opacity":Z("/ca "+T(t[e]));break;case"stroke-opacity":Z("/CA "+T(t[e]))}Z(">>"),Z("endobj")},me=function(){var t;for(t in Dt)Dt.hasOwnProperty(t)&&ge(Dt[t])},ve=function(){for(var t in Z("/XObject <<"),qt)qt.hasOwnProperty(t)&&qt[t].objectNumber>=0&&Z("/"+t+" "+qt[t].objectNumber+" 0 R");Vt.publish("putXobjectDict"),Z(">>")},ye=function(){Ge.oid=Yt(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Ge.v),Z("/R "+Ge.r),Z("/U <"+Ge.toHexString(Ge.U)+">"),Z("/O <"+Ge.toHexString(Ge.O)+">"),Z("/P "+Ge.P),Z(">>"),Z("endobj")},be=function(){for(var t in Z("/Font <<"),St)St.hasOwnProperty(t)&&(!1===d||!0===d&&f.hasOwnProperty(t))&&Z("/"+t+" "+St[t].objectNumber+" 0 R");Z(">>")},we=function(){if(Object.keys(Lt).length>0){for(var t in Z("/Shading <<"),Lt)Lt.hasOwnProperty(t)&&Lt[t]instanceof Ct&&Lt[t].objectNumber>=0&&Z("/"+t+" "+Lt[t].objectNumber+" 0 R");Vt.publish("putShadingPatternDict"),Z(">>")}},_e=function(t){if(Object.keys(Lt).length>0){for(var e in Z("/Pattern <<"),Lt)Lt.hasOwnProperty(e)&&Lt[e]instanceof p.TilingPattern&&Lt[e].objectNumber>=0&&Lt[e].objectNumber<t&&Z("/"+e+" "+Lt[e].objectNumber+" 0 R");Vt.publish("putTilingPatternDict"),Z(">>")}},xe=function(){if(Object.keys(Dt).length>0){var t;for(t in Z("/ExtGState <<"),Dt)Dt.hasOwnProperty(t)&&Dt[t].objectNumber>=0&&Z("/"+t+" "+Dt[t].objectNumber+" 0 R");Vt.publish("putGStateDict"),Z(">>")}},Se=function(t){Jt(t.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),be(),we(),_e(t.objectOid),xe(),ve(),Z(">>"),Z("endobj")},Ie=function(){var t=[];ce(),me(),ue(),pe(t),Vt.publish("putResources"),t.forEach(Se),Se({resourcesOid:te,objectOid:Number.MAX_SAFE_INTEGER}),Vt.publish("postPutResources")},Ae=function(){Vt.publish("putAdditionalObjects");for(var t=0;t<G.length;t++){var e=G[t];Jt(e.objId,!0),Z(e.content),Z("endobj")}Vt.publish("postPutAdditionalObjects")},Ee=function(t){It[t.fontName]=It[t.fontName]||{},It[t.fontName][t.fontStyle]=t.id},Te=function(t,e,n,r,i){var s={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Vt.publish("addFont",{font:s,instance:this}),St[s.id]=s,Ee(s),s.id},ke=function(t){for(var e=0,n=it.length;e<n;e++){var r=Te.call(this,t[e][0],t[e][1],t[e][2],it[e][3],!0);!1===d&&(f[r]=!0);var i=t[e][0].split("-");Ee({id:r,fontName:i[0],fontStyle:i[1]||""})}Vt.publish("addFonts",{fonts:St,dictionary:It})},Ne=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!tt.console)throw new Error(n);tt.console.error(n,t),tt.alert&&alert(n)}},t.foo.bar=t,t.foo},Le=function(t,e){var n,r,i,s,o,a,c,l,u;if(i=(e=e||{}).sourceEncoding||"Unicode",o=e.outputEncoding,(e.autoencode||o)&&St[yt].metadata&&St[yt].metadata[i]&&St[yt].metadata[i].encoding&&(s=St[yt].metadata[i].encoding,!o&&St[yt].encoding&&(o=St[yt].encoding),!o&&s.codePages&&(o=s.codePages[0]),"string"==typeof o&&(o=s[o]),o)){for(c=!1,a=[],n=0,r=t.length;n<r;n++)(l=o[t.charCodeAt(n)])?a.push(String.fromCharCode(l)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(c=!0);t=a.join("")}for(n=t.length;void 0===c&&0!==n;)t.charCodeAt(n-1)>>8&&(c=!0),n--;if(!c)return t;for(a=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if((u=(l=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(u),a.push(l-(u<<8))}return String.fromCharCode.apply(void 0,a)},Ce=p.__private__.pdfEscape=p.pdfEscape=function(t,e){return Le(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pe=p.__private__.beginPage=function(t){K[++jt]=[],Bt[jt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},De(jt),X(K[V])},Oe=function(t,e){var r,i,o;switch(n=e||n,"string"==typeof t&&(r=y(t.toLowerCase()),Array.isArray(r)&&(i=r[0],o=r[1])),Array.isArray(t)&&(i=t[0]*bt,o=t[1]*bt),isNaN(i)&&(i=s[0],o=s[1]),(i>14400||o>14400)&&(nt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),o=Math.min(14400,o)),s=[i,o],n.substr(0,1)){case"l":o>i&&(s=[o,i]);break;case"p":i>o&&(s=[o,i])}Pe(s),gn(fn),Z(Sn),0!==Nn&&Z(Nn+" J"),0!==Ln&&Z(Ln+" j"),Vt.publish("addPage",{pageNumber:jt})},Re=function(t){t>0&&t<=jt&&(K.splice(t,1),Bt.splice(t,1),jt--,V>jt&&(V=jt),this.setPage(V))},De=function(t){t>0&&t<=jt&&(V=t)},Me=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return K.length-1},Fe=function(t,e,n){var r,i=void 0;return n=n||{},t=void 0!==t?t:St[yt].fontName,e=void 0!==e?e:St[yt].fontStyle,r=t.toLowerCase(),void 0!==It[r]&&void 0!==It[r][e]?i=It[r][e]:void 0!==It[t]&&void 0!==It[t][e]?i=It[t][e]:!1===n.disableWarning&&nt.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=It.times[e])&&(i=It.times.normal),i},je=p.__private__.putInfo=function(){var t=Yt(),e=function(t){return t};for(var n in null!==h&&(e=Ge.encryptor(t,0)),Z("<<"),Z("/Producer ("+Ce(e("jsPDF "+Ot.version))+")"),vt)vt.hasOwnProperty(n)&&vt[n]&&Z("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+Ce(e(vt[n]))+")");Z("/CreationDate ("+Ce(e(P))+")"),Z(">>"),Z("endobj")},Be=p.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Zt;switch(Yt(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+e+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ot;"%"===n.substr(n.length-1)&&(ot=parseInt(ot)/100),"number"==typeof ot&&Z("/OpenAction [3 0 R /XYZ null null "+T(ot)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}dt&&Z("/PageMode /"+dt),Vt.publish("putCatalog"),Z(">>"),Z("endobj")},Ve=p.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(z+1)),Z("/Root "+z+" 0 R"),Z("/Info "+(z-1)+" 0 R"),null!==h&&Z("/Encrypt "+Ge.oid+" 0 R"),Z("/ID [ <"+O+"> <"+O+"> ]"),Z(">>")},Ue=p.__private__.putHeader=function(){Z("%PDF-"+g),Z("%ÂºÃÂ¬Ã ")},qe=p.__private__.putXRef=function(){var t="0000000000";Z("xref"),Z("0 "+(z+1)),Z("0000000000 65535 f ");for(var e=1;e<=z;e++)"function"==typeof H[e]?Z((t+H[e]()).slice(-10)+" 00000 n "):void 0!==H[e]?Z((t+H[e]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},ze=p.__private__.buildDocument=function(){J(),X(W),Vt.publish("buildDocument"),Ue(),oe(),Ae(),Ie(),null!==h&&ye(),je(),Be();var t=$;return qe(),Ve(),Z("startxref"),Z(""+t),Z("%%EOF"),X(K[V]),W.join("\n")},He=p.__private__.getBlob=function(t){return new Blob([rt(t)],{type:"application/pdf"})},We=p.output=p.__private__.output=Ne((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return ze();case"save":p.save(e.filename);break;case"arraybuffer":return rt(ze());case"blob":return He(ze());case"bloburi":case"bloburl":if(void 0!==tt.URL&&"function"==typeof tt.URL.createObjectURL)return tt.URL&&tt.URL.createObjectURL(He(ze()))||void 0;nt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=ze();try{n=at(r)}catch(t){n=at(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(tt)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(i=e.pdfObjectUrl,s="");var o='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",a=tt.open();return null!==a&&a.document.write(o),a}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(tt)){var c='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',l=tt.open();if(null!==l){l.document.write(c);var u=this;l.document.documentElement.querySelector("#pdfViewer").onload=function(){l.document.title=e.filename,l.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return l}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(tt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',d=tt.open();if(null!==d&&(d.document.write(h),d.document.title=e.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return tt.document.location.href=this.output("datauristring",e);default:return null}})),$e=function(t){return!0===Array.isArray(Ut)&&Ut.indexOf(t)>-1};switch(i){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=1==$e("px_scaling")?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);bt=i}var Ge=null;j(),D();var Ke=function(t){return null!==h?Ge.encryptor(t,0):function(t){return t}},Ye=p.__private__.getPageInfo=p.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Bt[t].objId,pageNumber:t,pageContext:Bt[t]}},Qe=p.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in Bt)if(Bt[e].objId===t)break;return Ye(e)},Je=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Bt[V].objId,pageNumber:V,pageContext:Bt[V]}};p.addPage=function(){return Oe.apply(this,arguments),this},p.setPage=function(){return De.apply(this,arguments),X.call(this,K[V]),this},p.insertPage=function(t){return this.addPage(),this.movePage(V,t),this},p.movePage=function(t,e){var n,r;if(t>e){n=K[t],r=Bt[t];for(var i=t;i>e;i--)K[i]=K[i-1],Bt[i]=Bt[i-1];K[e]=n,Bt[e]=r,this.setPage(e)}else if(t<e){n=K[t],r=Bt[t];for(var s=t;s<e;s++)K[s]=K[s+1],Bt[s]=Bt[s+1];K[e]=n,Bt[e]=r,this.setPage(e)}return this},p.deletePage=function(){return Re.apply(this,arguments),this},p.__private__.text=p.text=function(t,e,n,i,s){var o,a,c,l,u,h,d,p,g,m=(i=i||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var v=n;n=e,e=t,t=v}if(arguments[3]instanceof Wt==0?(c=arguments[4],l=arguments[5],"object"===(0,r.A)(d=arguments[3])&&null!==d||("string"==typeof c&&(l=c,c=null),"string"==typeof d&&(l=d,d=null),"number"==typeof d&&(c=d,d=null),i={flags:d,angle:c,align:l})):(A("The transform parameter of text() with a Matrix value"),g=s),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return m;var y="",_=!1,x="number"==typeof i.lineHeightFactor?i.lineHeightFactor:dn,S=m.internal.scaleFactor;function E(t){return t=t.split("\t").join(Array(i.TabLen||9).join(" ")),Ce(t,d)}function T(t){for(var e,n=t.concat(),r=[],i=n.length;i--;)"string"==typeof(e=n.shift())?r.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?r.push(e[0]):r.push([e[0],e[1],e[2]]);return r}function k(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var r,i,s=t.concat(),o=[],a=s.length;a--;)"string"==typeof(r=s.shift())?o.push(e(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=e(r[0],r[1],r[2]),o.push([i[0],i[1],i[2]]));n=o}return n}var L=!1,C=!0;if("string"==typeof t)L=!0;else if(Array.isArray(t)){var P=t.concat();a=[];for(var O,R=P.length;R--;)("string"!=typeof(O=P.shift())||Array.isArray(O)&&"string"!=typeof O[0])&&(C=!1);L=C}if(!1===L)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var D=st/m.internal.scaleFactor,M=D*(x-1);switch(i.baseline){case"bottom":n-=M;break;case"top":n+=D-M;break;case"hanging":n+=D-2*M;break;case"middle":n+=D/2-M}if((h=i.maxWidth||0)>0&&("string"==typeof t?t=m.splitTextToSize(t,h):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(m.splitTextToSize(e,h))}),[]))),o={text:t,x:e,y:n,options:i,mutex:{pdfEscape:Ce,activeFontKey:yt,fonts:St,activeFontSize:st}},Vt.publish("preProcessText",o),t=o.text,c=(i=o.options).angle,g instanceof Wt==0&&c&&"number"==typeof c){c*=Math.PI/180,0===i.rotationDirection&&(c=-c),w===b.ADVANCED&&(c=-c);var F=Math.cos(c),j=Math.sin(c);g=new Wt(F,j,-j,F,0,0)}else c&&c instanceof Wt&&(g=c);w!==b.ADVANCED||g||(g=Gt),void 0!==(u=i.charSpace||Tn)&&(y+=I(N(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=i.horizontalScale)&&(y+=I(100*p)+" Tz\n"),i.lang;var B=-1,V=void 0!==i.renderingMode?i.renderingMode:i.stroke,U=m.internal.getCurrentPageInfo().pageContext;switch(V){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}var q=void 0!==U.usedRenderingMode?U.usedRenderingMode:-1;-1!==B?y+=B+" Tr\n":-1!==q&&(y+="0 Tr\n"),-1!==B&&(U.usedRenderingMode=B),l=i.align||"left";var z,H=st*x,W=m.internal.pageSize.getWidth(),$=St[yt];u=i.charSpace||Tn,h=i.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},i.flags);var G=[],K=function(t){return m.getStringUnitWidth(t,{font:$,charSpace:u,fontSize:st,doKerning:!1})*st/S};if("[object Array]"===Object.prototype.toString.call(t)){var Y;a=T(t),"left"!==l&&(z=a.map(K));var Q,J=0;if("right"===l){e-=z[0],t=[],R=a.length;for(var X=0;X<R;X++)0===X?(Q=bn(e),Y=wn(n)):(Q=N(J-z[X]),Y=-H),t.push([a[X],Q,Y]),J=z[X]}else if("center"===l){e-=z[0]/2,t=[],R=a.length;for(var tt=0;tt<R;tt++)0===tt?(Q=bn(e),Y=wn(n)):(Q=N((J-z[tt])/2),Y=-H),t.push([a[tt],Q,Y]),J=z[tt]}else if("left"===l){t=[],R=a.length;for(var et=0;et<R;et++)t.push(a[et])}else if("justify"===l&&"Identity-H"===$.encoding){t=[],R=a.length,h=0!==h?h:W;for(var nt=0,rt=0;rt<R;rt++)if(Y=0===rt?wn(n):-H,Q=0===rt?bn(e):nt,rt<R-1){var it=N((h-z[rt])/(a[rt].split(" ").length-1)),ot=a[rt].split(" ");t.push([ot[0]+" ",Q,Y]),nt=0;for(var at=1;at<ot.length;at++){var ct=(K(ot[at-1]+" "+ot[at])-K(ot[at]))*S+it;at==ot.length-1?t.push([ot[at],ct,0]):t.push([ot[at]+" ",ct,0]),nt-=ct}}else t.push([a[rt],Q,Y]);t.push(["",nt,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(t=[],R=a.length,h=0!==h?h:W,rt=0;rt<R;rt++)Y=0===rt?wn(n):-H,Q=0===rt?bn(e):0,rt<R-1?G.push(I(N((h-z[rt])/(a[rt].split(" ").length-1)))):G.push(0),t.push([a[rt],Q,Y])}}var lt="boolean"==typeof i.R2L?i.R2L:ht;!0===lt&&(t=k(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),o={text:t,x:e,y:n,options:i,mutex:{pdfEscape:Ce,activeFontKey:yt,fonts:St,activeFontSize:st}},Vt.publish("postProcessText",o),t=o.text,_=o.mutex.isHex||!1;var ut=St[yt].encoding;"WinAnsiEncoding"!==ut&&"StandardEncoding"!==ut||(t=k(t,(function(t,e,n){return[E(t),e,n]}))),a=T(t),t=[];for(var dt,ft,pt,gt=0,mt=1,vt=Array.isArray(a[0])?mt:gt,bt="",wt=function(t,e,n){var r="";return n instanceof Wt?(n="number"==typeof i.angle?$t(n,new Wt(1,0,0,1,t,e)):$t(new Wt(1,0,0,1,t,e),n),w===b.ADVANCED&&(n=$t(new Wt(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=I(t)+" "+I(e)+" Td\n",r},_t=0;_t<a.length;_t++){switch(bt="",vt){case mt:pt=(_?"<":"(")+a[_t][0]+(_?">":")"),dt=parseFloat(a[_t][1]),ft=parseFloat(a[_t][2]);break;case gt:pt=(_?"<":"(")+a[_t]+(_?">":")"),dt=bn(e),ft=wn(n)}void 0!==G&&void 0!==G[_t]&&(bt=G[_t]+" Tw\n"),0===_t?t.push(bt+wt(dt,ft,g)+pt):vt===gt?t.push(bt+pt):vt===mt&&t.push(bt+wt(dt,ft,g)+pt)}t=vt===gt?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var xt="BT\n/";return xt+=yt+" "+st+" Tf\n",xt+=I(st*x)+" TL\n",xt+=An+"\n",xt+=y,xt+=t,Z(xt+="ET"),f[yt]=!0,m};var Xe=p.__private__.clip=p.clip=function(t){return Z("evenodd"===t?"W*":"W"),this};p.clipEvenOdd=function(){return Xe("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Z("n"),this};var Ze=p.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(t){return Ze(t)&&(u=t),this};var tn=p.__private__.getStyle=p.getStyle=function(t){var e=u;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},en=p.close=function(){return Z("h"),this};p.stroke=function(){return Z("S"),this},p.fill=function(t){return nn("f",t),this},p.fillEvenOdd=function(t){return nn("f*",t),this},p.fillStroke=function(t){return nn("B",t),this},p.fillStrokeEvenOdd=function(t){return nn("B*",t),this};var nn=function(t,e){"object"===(0,r.A)(e)?on(e,t):Z(t)},rn=function(t){null===t||w===b.ADVANCED&&void 0===t||(t=tn(t),Z(t))};function sn(t,e,n,r,i){var s=new Pt(e||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);s.stream=this.stream;var o=t+"$$"+this.cloneIndex+++"$$";return Kt(o,s),s}var on=function(t,e){var n=Rt[t.key],r=Lt[n];if(r instanceof Ct)Z("q"),Z(an(e)),r.gState&&p.setGState(r.gState),Z(t.matrix.toString()+" cm"),Z("/"+n+" sh"),Z("Q");else if(r instanceof Pt){var i=new Wt(1,0,0,-1,0,Vn());t.matrix&&(i=i.multiply(t.matrix||Gt),n=sn.call(r,t.key,t.boundingBox,t.xStep,t.yStep,i).id),Z("q"),Z("/Pattern cs"),Z("/"+n+" scn"),r.gState&&p.setGState(r.gState),Z(e),Z("Q")}},an=function(t){switch(t){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},cn=p.moveTo=function(t,e){return Z(I(N(t))+" "+I(C(e))+" m"),this},ln=p.lineTo=function(t,e){return Z(I(N(t))+" "+I(C(e))+" l"),this},un=p.curveTo=function(t,e,n,r,i,s){return Z([I(N(t)),I(C(e)),I(N(n)),I(C(r)),I(N(i)),I(C(s)),"c"].join(" ")),this};p.__private__.line=p.line=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Ze(i))throw new Error("Invalid arguments passed to jsPDF.line");return w===b.COMPAT?this.lines([[n-t,r-e]],t,e,[1,1],i||"S"):this.lines([[n-t,r-e]],t,e,[1,1]).stroke()},p.__private__.lines=p.lines=function(t,e,n,r,i,s){var o,a,c,l,u,h,d,f,p,g,m,v;if("number"==typeof t&&(v=n,n=e,e=t,t=v),r=r||[1,1],s=s||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(r)||!Ze(i)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(cn(e,n),o=r[0],a=r[1],l=t.length,g=e,m=n,c=0;c<l;c++)2===(u=t[c]).length?(g=u[0]*o+g,m=u[1]*a+m,ln(g,m)):(h=u[0]*o+g,d=u[1]*a+m,f=u[2]*o+g,p=u[3]*a+m,g=u[4]*o+g,m=u[5]*a+m,un(h,d,f,p,g,m));return s&&en(),rn(i),this},p.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.c;switch(n.op){case"m":cn(r[0],r[1]);break;case"l":ln(r[0],r[1]);break;case"c":un.apply(this,r);break;case"h":en()}}return this},p.__private__.rect=p.rect=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Ze(i))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b.COMPAT&&(r=-r),Z([I(N(t)),I(C(e)),I(N(n)),I(N(r)),"re"].join(" ")),rn(i),this},p.__private__.triangle=p.triangle=function(t,e,n,r,i,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!Ze(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,r-e],[i-n,s-r],[t-i,e-s]],t,e,[1,1],o,!0),this},p.__private__.roundedRect=p.roundedRect=function(t,e,n,r,i,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s)||!Ze(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),s=Math.min(s,.5*r),this.lines([[n-2*i,0],[i*a,0,i,s-s*a,i,s],[0,r-2*s],[0,s*a,-i*a,s,-i,s],[2*i-n,0],[-i*a,0,-i,-s*a,-i,-s],[0,2*s-r],[0,-s*a,i*a,-s,i,-s]],t+i,e,[1,1],o,!0),this},p.__private__.ellipse=p.ellipse=function(t,e,n,r,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||!Ze(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*r;return cn(t+n,e),un(t+n,e-o,t+s,e-r,t,e-r),un(t-s,e-r,t-n,e-o,t-n,e),un(t-n,e+o,t-s,e+r,t,e+r),un(t+s,e+r,t+n,e+o,t+n,e),rn(i),this},p.__private__.circle=p.circle=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||!Ze(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,r)},p.setFont=function(t,e,n){return n&&(e=S(e,n)),yt=Fe(t,e,{disableWarning:!1}),this};var hn=p.__private__.getFont=p.getFont=function(){return St[Fe.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var t,e,n={};for(t in It)if(It.hasOwnProperty(t))for(e in n[t]=[],It[t])It[t].hasOwnProperty(e)&&n[t].push(e);return n},p.addFont=function(t,e,n,r,i){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=S(n,r)),i=i||"Identity-H",Te.call(this,t,e,n,i)};var dn,fn=t.lineWidth||.200025,pn=p.__private__.getLineWidth=p.getLineWidth=function(){return fn},gn=p.__private__.setLineWidth=p.setLineWidth=function(t){return fn=t,Z(I(N(t))+" w"),this};p.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return I(N(t))})).join(" "),e=I(N(e)),Z("["+t+"] "+e+" d"),this};var mn=p.__private__.getLineHeight=p.getLineHeight=function(){return st*dn};p.__private__.getLineHeight=p.getLineHeight=function(){return st*dn};var vn=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(dn=t),this},yn=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return dn};vn(t.lineHeight);var bn=p.__private__.getHorizontalCoordinate=function(t){return N(t)},wn=p.__private__.getVerticalCoordinate=function(t){return w===b.ADVANCED?t:Bt[V].mediaBox.topRightY-Bt[V].mediaBox.bottomLeftY-N(t)},_n=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(t){return I(bn(t))},xn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(t){return I(wn(t))},Sn=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ee(Sn)},p.__private__.setStrokeColor=p.setDrawColor=function(t,e,n,r){return Sn=ne({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Z(Sn),this};var In=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ee(In)},p.__private__.setFillColor=p.setFillColor=function(t,e,n,r){return In=ne({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Z(In),this};var An=t.textColor||"0 g",En=p.__private__.getTextColor=p.getTextColor=function(){return ee(An)};p.__private__.setTextColor=p.setTextColor=function(t,e,n,r){return An=ne({ch1:t,ch2:e,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var Tn=t.charSpace,kn=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Tn||0)};p.__private__.setCharSpace=p.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tn=t,this};var Nn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nn=e,Z(e+" J"),this};var Ln=0;p.__private__.setLineJoin=p.setLineJoin=function(t){var e=p.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ln=e,Z(e+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(I(N(t))+" M"),this},p.GState=Nt,p.setGState=function(t){(t="string"==typeof t?Dt[Mt[t]]:Cn(null,t)).equals(Ft)||(Z("/"+t.id+" gs"),Ft=t)};var Cn=function(t,e){if(!t||!Mt[t]){var n=!1;for(var r in Dt)if(Dt.hasOwnProperty(r)&&Dt[r].equals(e)){n=!0;break}if(n)e=Dt[r];else{var i="GS"+(Object.keys(Dt).length+1).toString(10);Dt[i]=e,e.id=i}return t&&(Mt[t]=e.id),Vt.publish("addGState",e),e}};p.addGState=function(t,e){return Cn(t,e),this},p.saveGraphicsState=function(){return Z("q"),At.push({key:yt,size:st,color:An}),this},p.restoreGraphicsState=function(){Z("Q");var t=At.pop();return yt=t.key,st=t.size,An=t.color,Ft=null,this},p.setCurrentTransformationMatrix=function(t){return Z(t.toString()+" cm"),this},p.comment=function(t){return Z("#"+t),this};var Pn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var r=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(t){i=t.toString()}}),this},On=function(t,e,n,r){Pn.call(this,t,e),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(t){isNaN(t)||(s=parseFloat(t))}}),this},Rn=function(){this.page=jt,this.currentPage=V,this.pages=K.slice(0),this.pagesContext=Bt.slice(0),this.x=wt,this.y=_t,this.matrix=xt,this.width=jn(V),this.height=Vn(V),this.outputDestination=Q,this.id="",this.objectNumber=-1};Rn.prototype.restore=function(){jt=this.page,V=this.currentPage,Bt=this.pagesContext,K=this.pages,wt=this.x,_t=this.y,xt=this.matrix,Bn(V,this.width),Un(V,this.height),Q=this.outputDestination};var Dn=function(t,e,n,r,i){Ht.push(new Rn),jt=V=0,K=[],wt=t,_t=e,xt=i,Pe([n,r])},Mn=function(t){if(zt[t])Ht.pop().restore();else{var e=new Rn,n="Xo"+(Object.keys(qt).length+1).toString(10);e.id=n,zt[t]=n,qt[n]=e,Vt.publish("addFormObject",e),Ht.pop().restore()}};for(var Fn in p.beginFormObject=function(t,e,n,r,i){return Dn(t,e,n,r,i),this},p.endFormObject=function(t){return Mn(t),this},p.doFormObject=function(t,e){var n=qt[zt[t]];return Z("q"),Z(e.toString()+" cm"),Z("/"+n.id+" Do"),Z("Q"),this},p.getFormObject=function(t){var e=qt[zt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},p.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(ct(He(ze()),t),"function"==typeof ct.unload&&tt.setTimeout&&setTimeout(ct.unload,911),this):new Promise((function(e,n){try{var r=ct(He(ze()),t);"function"==typeof ct.unload&&tt.setTimeout&&setTimeout(ct.unload,911),e(r)}catch(t){n(t.message)}}))},Ot.API)Ot.API.hasOwnProperty(Fn)&&("events"===Fn&&Ot.API.events.length?function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(Vt,Ot.API.events):p[Fn]=Ot.API[Fn]);var jn=p.getPageWidth=function(t){return(Bt[t=t||V].mediaBox.topRightX-Bt[t].mediaBox.bottomLeftX)/bt},Bn=p.setPageWidth=function(t,e){Bt[t].mediaBox.topRightX=e*bt+Bt[t].mediaBox.bottomLeftX},Vn=p.getPageHeight=function(t){return(Bt[t=t||V].mediaBox.topRightY-Bt[t].mediaBox.bottomLeftY)/bt},Un=p.setPageHeight=function(t,e){Bt[t].mediaBox.topRightY=e*bt+Bt[t].mediaBox.bottomLeftY};return p.internal={pdfEscape:Ce,getStyle:tn,getFont:hn,getFontSize:ut,getCharSpace:kn,getTextColor:En,getLineHeight:mn,getLineHeightFactor:yn,getLineWidth:pn,write:et,getHorizontalCoordinate:bn,getVerticalCoordinate:wn,getCoordinateString:_n,getVerticalCoordinateString:xn,collections:{},newObject:Yt,newAdditionalObject:Xt,newObjectDeferred:Qt,newObjectDeferredBegin:Jt,getFilters:re,putStream:ie,events:Vt,scaleFactor:bt,pageSize:{getWidth:function(){return jn(V)},setWidth:function(t){Bn(V,t)},getHeight:function(){return Vn(V)},setHeight:function(t){Un(V,t)}},encryptionOptions:h,encryption:Ge,getEncryptor:Ke,output:We,getNumberOfPages:Me,pages:K,out:Z,f2:T,f3:k,getPageInfo:Ye,getPageInfoByObjId:Qe,getCurrentPageInfo:Je,getPDFVersion:m,Point:Pn,Rectangle:On,Matrix:Wt,hasHotfix:$e},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return jn(V)},set:function(t){Bn(V,t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Vn(V)},set:function(t){Un(V,t)},enumerable:!0,configurable:!0}),ke.call(p,it),yt="F1",Oe(s,n),Vt.publish("initialized"),p}Et.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Et.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Et.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Et.prototype.processOwnerPassword=function(t,e){return It(_t(e).substr(0,5),t)},Et.prototype.encryptor=function(t,e){var n=_t(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return It(n,t)}},Nt.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||(0,r.A)(t)!==(0,r.A)(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return 0===i},Ot.API={events:[]},Ot.version="3.0.0";var Rt=Ot.API,Dt=1,Mt=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ft=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},jt=function(t){return t.toFixed(2)},Bt=function(t){return t.toFixed(5)};Rt.__acroform__={};var Vt=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Ut=function(t){return t*Dt},qt=function(t){var e=new oe,n=we.internal.getHeight(t)||0,r=we.internal.getWidth(t)||0;return e.BBox=[0,0,Number(jt(r)),Number(jt(n))],e},zt=Rt.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Ht=Rt.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Wt=Rt.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},$t=Rt.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Wt(t,e-1)},Gt=Rt.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zt(t,e-1)},Kt=Rt.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ht(t,e-1)},Yt=Rt.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+a)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=r(s)||0,[Number(jt(c.lowerLeft_X)),Number(jt(c.lowerLeft_Y)),Number(jt(c.upperRight_X)),Number(jt(c.upperRight_Y))]},Qt=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Jt(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+jt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=qt(t);return s.scope=t.scope,s.stream=e.join("\n"),s}},Jt=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map((function(t){return t.split("\n")})):i.map((function(t){return[t]}));var s=n,o=we.internal.getHeight(t)||0;o=o<0?-o:o;var a=we.internal.getWidth(t)||0;a=a<0?-a:a;var c=function(e,n,r){if(e+1<i.length){var s=n+" "+i[e+1][0];return Xt(s,t,r).width<=a-4}return!1};s++;t:for(;s>0;){e="",s--;var l,u,h=Xt("3",t,s).height,d=t.multiline?o-s:(o-h)/2,f=d+=2,p=0,g=0,m=0;if(s<=0){e="(...) Tj\n",e+="% Width of Text: "+Xt(e,t,s=12).width+", FieldWidth:"+a+"\n";break}for(var v="",y=0,b=0;b<i.length;b++)if(i.hasOwnProperty(b)){var w=!1;if(1!==i[b].length&&m!==i[b].length-1){if((h+2)*(y+2)+2>o)continue t;v+=i[b][m],w=!0,g=b,b--}else{v=" "==(v+=i[b][m]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var _=parseInt(b),x=c(_,v,s),S=b>=i.length-1;if(x&&!S){v+=" ",m=0;continue}if(x||S){if(S)g=_;else if(t.multiline&&(h+2)*(y+2)+2>o)continue t}else{if(!t.multiline)continue t;if((h+2)*(y+2)+2>o)continue t;g=_}}for(var I="",A=p;A<=g;A++){var E=i[A];if(t.multiline){if(A===g){I+=E[m]+" ",m=(m+1)%E.length;continue}if(A===p){I+=E[E.length-1]+" ";continue}}I+=E[0]+" "}switch(I=" "==I.substr(I.length-1)?I.substr(0,I.length-1):I,u=Xt(I,t,s).width,t.textAlign){case"right":l=a-u-2;break;case"center":l=(a-u)/2;break;case"left":default:l=2}e+=jt(l)+" "+jt(f)+" Td\n",e+="("+Mt(I)+") Tj\n",e+=-jt(l)+" 0 Td\n",f=-(s+2),u=0,p=w?g:g+1,y++,v=""}break}return r.text=e,r.fontSize=s,r},Xt=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Zt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},te=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},ee=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,r.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete t[i]}},ne=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(ce.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Zt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Dt=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ae,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){!function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}(t)})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];r.objId=void 0,r.hasAnnotation&&te(r,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var i in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(i)){var s=t[i],o=[],a=s.Rect;if(s.Rect&&(s.Rect=Yt(s.Rect,e)),e.internal.newObjectDeferredBegin(s.objId,!0),s.DA=we.createDefaultAppearanceStream(s),"object"===(0,r.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(o=s.getKeyValueListForStream()),s.Rect=a,s.hasAppearanceStream&&!s.appearanceStreamContent){var c=Qt(s);o.push({key:"AP",value:"<</N "+c+">>"}),e.internal.acroformPlugin.xForms.push(c)}if(s.appearanceStreamContent){var l="";for(var u in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(u)){var h=s.appearanceStreamContent[u];if(l+="/"+u+" ",l+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var i in h)if(h.hasOwnProperty(i)){var d=h[i];"function"==typeof d&&(d=d.call(e,s)),l+="/"+i+" "+d+" ",e.internal.acroformPlugin.xForms.indexOf(d)>=0||e.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=h)&&(d=d.call(e,s)),l+="/"+i+" "+d,e.internal.acroformPlugin.xForms.indexOf(d)>=0||e.internal.acroformPlugin.xForms.push(d);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}e.internal.putStream({additionalKeyValues:o,objectId:s.objId}),e.internal.out("endobj")}n&&ee(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},re=Rt.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(t){return t};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(0!==o&&(s+=" "),(0,r.A)(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":"/"!==t[o].substr(0,1)?(void 0!==e&&n&&(i=n.internal.getEncryptor(e)),s+="("+Mt(i(t[o].toString()))+")"):s+=t[o].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ie=function(t,e,n){var r=function(t){return t};return void 0!==e&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Mt(r(t))+")"},se=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};se.prototype.toString=function(){return this.objId+" 0 R"},se.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},se.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:re(i,this.objId,this.scope)}):i instanceof se?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&t.push({key:r,value:i}))}return t};var oe=function(){se.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};Vt(oe,se);var ae=function(){se.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Mt(e(t))+")"}},set:function(e){t=e}})};Vt(ae,se);var ce=function t(){se.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(e,3))},set:function(t){!0===Boolean(t)?this.F=Gt(e,3):this.F=Kt(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(t){r=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(t){r[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(t){r[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(t){r[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(t){r[3]=t}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof me)return;s="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Mt(e(s))+")"},set:function(t){s=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(t){s=t}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){o=t}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(t){c=t}});var l=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===l?50/Dt:l},set:function(t){l=t}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof me||this instanceof ye))return ie(h,this.objId,this.scope)},set:function(t){t=t.toString(),h=t}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof fe==0?ie(d,this.objId,this.scope):d},set:function(t){t=t.toString(),d=this instanceof fe==0?"("===t.substr(0,1)?Ft(t.substr(1,t.length-2)):Ft(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fe==1?Ft(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof fe==1?"/"+t:t}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof fe==0?ie(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof fe==0?"("===t.substr(0,1)?Ft(t.substr(1,t.length-2)):Ft(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fe==1?Ft(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof fe==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(t){t=Boolean(t),g=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(t){p=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,1):this.Ff=Kt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,2):this.Ff=Kt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,3):this.Ff=Kt(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');m=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(m){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:m=2;break;case"center":case 1:m=1;break;case"left":case 0:default:m=0}}})};Vt(ce,se);var le=function(){ce.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return re(e,this.objId,this.scope)},set:function(t){var n,r;r=[],"string"==typeof(n=t)&&(r=function(t,e,n){n||(n=1);for(var r,i=[];r=e.exec(t);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,18):this.Ff=Kt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=Gt(this.Ff,19):this.Ff=Kt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=Gt(this.Ff,20),e.sort()):this.Ff=Kt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,22):this.Ff=Kt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,23):this.Ff=Kt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,27):this.Ff=Kt(this.Ff,27)}}),this.hasAppearanceStream=!1};Vt(le,ce);var ue=function(){le.call(this),this.fontName="helvetica",this.combo=!1};Vt(ue,le);var he=function(){ue.call(this),this.combo=!0};Vt(he,ue);var de=function(){he.call(this),this.edit=!0};Vt(de,he);var fe=function(){ce.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,15):this.Ff=Kt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,16):this.Ff=Kt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,17):this.Ff=Kt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,26):this.Ff=Kt(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,r=[];for(n in r.push("<<"),e)r.push("/"+n+" ("+Mt(t(e[n]))+")");return r.push(">>"),r.join("\n")}},set:function(t){"object"===(0,r.A)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};Vt(fe,ce);var pe=function(){fe.call(this),this.pushButton=!0};Vt(pe,fe);var ge=function(){fe.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};Vt(ge,fe);var me=function(){var t,e;ce.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),i)n.push("/"+e+" ("+Mt(t(i[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===(0,r.A)(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=we.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vt(me,ce),ge.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ge.prototype.createOption=function(t){var e=new me;return e.Parent=this,e.optionName=t,this.Kids.push(e),_e.call(this.scope,e),e};var ve=function(){fe.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=we.CheckBox.createAppearanceStream()};Vt(ve,fe);var ye=function(){ce.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,13):this.Ff=Kt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,21):this.Ff=Kt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,23):this.Ff=Kt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,24):this.Ff=Kt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,25):this.Ff=Kt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,26):this.Ff=Kt(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vt(ye,ce);var be=function(){ye.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean($t(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=Gt(this.Ff,14):this.Ff=Kt(this.Ff,14)}}),this.password=!0};Vt(be,ye);var we={CheckBox:{createAppearanceStream:function(){return{N:{On:we.CheckBox.YesNormal},D:{On:we.CheckBox.YesPushDown,Off:we.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Jt(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+jt(we.internal.getWidth(t))+" "+jt(we.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+jt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=qt(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=we.internal.getHeight(t),o=we.internal.getWidth(t),a=Jt(t,t.caption);return i.push("1 g"),i.push("0 0 "+jt(o)+" "+jt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+jt(o-1)+" "+jt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+jt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+jt(we.internal.getWidth(t))+" "+jt(we.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:we.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=we.RadioButton.Circle.YesNormal,e.D[t]=we.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=qt(t);e.scope=t.scope;var n=[],r=we.internal.getWidth(t)<=we.internal.getHeight(t)?we.internal.getWidth(t)/4:we.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=we.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[],r=we.internal.getWidth(t)<=we.internal.getHeight(t)?we.internal.getWidth(t)/4:we.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*we.internal.Bezier_C).toFixed(5)),o=Number((r*we.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[],r=we.internal.getWidth(t)<=we.internal.getHeight(t)?we.internal.getWidth(t)/4:we.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*we.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:we.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=we.RadioButton.Cross.YesNormal,e.D[t]=we.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=qt(t);e.scope=t.scope;var n=[],r=we.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+jt(we.internal.getWidth(t)-2)+" "+jt(we.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(jt(r.x1.x)+" "+jt(r.x1.y)+" m"),n.push(jt(r.x2.x)+" "+jt(r.x2.y)+" l"),n.push(jt(r.x4.x)+" "+jt(r.x4.y)+" m"),n.push(jt(r.x3.x)+" "+jt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=we.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+jt(we.internal.getWidth(t))+" "+jt(we.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+jt(we.internal.getWidth(t)-2)+" "+jt(we.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(jt(n.x1.x)+" "+jt(n.x1.y)+" m"),r.push(jt(n.x2.x)+" "+jt(n.x2.y)+" l"),r.push(jt(n.x4.x)+" "+jt(n.x4.y)+" m"),r.push(jt(n.x3.x)+" "+jt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+jt(we.internal.getWidth(t))+" "+jt(we.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};we.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=we.internal.getWidth(t),n=we.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},we.internal.getWidth=function(t){var e=0;return"object"===(0,r.A)(t)&&(e=Ut(t.Rect[2])),e},we.internal.getHeight=function(t){var e=0;return"object"===(0,r.A)(t)&&(e=Ut(t.Rect[3])),e};var _e=Rt.addField=function(t){if(ne(this,t),!(t instanceof ce))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Rt.AcroFormChoiceField=le,Rt.AcroFormListBox=ue,Rt.AcroFormComboBox=he,Rt.AcroFormEditBox=de,Rt.AcroFormButton=fe,Rt.AcroFormPushButton=pe,Rt.AcroFormRadioButton=ge,Rt.AcroFormCheckBox=ve,Rt.AcroFormTextField=ye,Rt.AcroFormPasswordField=be,Rt.AcroFormAppearance=we,Rt.AcroForm={ChoiceField:le,ListBox:ue,ComboBox:he,EditBox:de,Button:fe,PushButton:pe,RadioButton:ge,CheckBox:ve,TextField:ye,PasswordField:be,Appearance:we},Ot.AcroForm={ChoiceField:le,ListBox:ue,ComboBox:he,EditBox:de,Button:fe,PushButton:pe,RadioButton:ge,CheckBox:ve,TextField:ye,PasswordField:be,Appearance:we};Ot.AcroForm;function xe(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}!function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(t,r){var i,s,o,a,c,l=e;if("RGBA"===(r=r||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(S(t))for(c in n)for(o=n[c],i=0;i<o.length;i+=1){for(a=!0,s=0;s<o[i].length;s+=1)if(void 0!==o[i][s]&&o[i][s]!==t[s]){a=!1;break}if(!0===a){l=c;break}}else for(c in n)for(o=n[c],i=0;i<o.length;i+=1){for(a=!0,s=0;s<o[i].length;s+=1)if(void 0!==o[i][s]&&o[i][s]!==t.charCodeAt(s)){a=!1;break}if(!0===a){l=c;break}}return l===e&&r!==e&&(l=r),l},s=function t(e){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:e.width}),s.push({key:"Height",value:e.height}),e.colorSpace===v.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===v.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var o="",a=0,c=e.transparency.length;a<c;a++)o+=e.transparency[a]+" "+e.transparency[a]+" ";s.push({key:"Mask",value:"["+o+"]"})}void 0!==e.sMask&&s.push({key:"SMask",value:e.objectId+1+" 0 R"});var l=void 0!==e.filter?["/"+e.filter]:void 0;if(r({data:e.data,additionalKeyValues:s,alreadyAppliedFilters:l,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var u="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:u,data:e.sMask};"filter"in e&&(h.filter=e.filter),t.call(this,h)}if(e.colorSpace===v.INDEXED){var d=this.internal.newObject();r({data:A(new Uint8Array(e.palette)),objectId:d}),n("endobj")}},o=function(){var t=this.internal.collections.addImage_images;for(var e in t)s.call(this,t[e])},a=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var r in e)n("/I"+(t=e[r]).index,t.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var t=this.internal.collections.addImage_images;return c.call(this),t},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(e){return"function"==typeof t["process"+e.toUpperCase()]},d=function(t){return"object"===(0,r.A)(t)&&1===t.nodeType},f=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var r=""+e.getAttribute("src");if(0===r.indexOf("data:image/"))return ot(unescape(r).split("base64,").pop());var i=t.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;case"JPEG":case"JPG":default:s="image/jpeg"}return ot(e.toDataURL(s,1).split("base64,").pop())}},p=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},g=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},m=function(t,e,n,r,i,s){var o=g.call(this,n,r,i),a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=l.call(this);if(n=o[0],r=o[1],u[i.index]=i,s){s*=Math.PI/180;var h=Math.cos(s),d=Math.sin(s),f=function(t){return t.toFixed(4)},p=[f(h),f(d),f(-1*d),f(h),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,a(t),c(e+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([a(n),"0","0",a(r),"0","0","cm"].join(" "))):this.internal.write([a(n),"0","0",a(r),a(t),c(e+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(t){var e,n,r=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;else if(S(t))for(n=t.byteLength/2,e=0;e<n;e++)r=(r<<5)-r+t[e],r|=0;return r},w=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},_=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(r)&&(n={mimeType:r[1],charset:r[2],data:e[1]})}return n},x=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return x()&&t instanceof ArrayBuffer};var S=t.__addimage__.isArrayBufferView=function(t){return x()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},A=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=S(t)?t:new Uint8Array(t),r=0;r<n.length;r+=8192)e+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return e};t.addImage=function(){var t,n,i,s,o,a,l,u,h;if("number"==typeof arguments[1]?(n=e,i=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],l=arguments[5],u=arguments[6],h=arguments[7]):(n=arguments[1],i=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5],l=arguments[6],u=arguments[7],h=arguments[8]),"object"===(0,r.A)(t=arguments[0])&&!d(t)&&"imageData"in t){var f=t;t=f.imageData,n=f.format||n||e,i=f.x||i||0,s=f.y||s||0,o=f.w||f.width||o,a=f.h||f.height||a,l=f.alias||l,u=f.compression||u,h=f.rotation||f.angle||h}var p=this.internal.getFilters();if(void 0===u&&-1!==p.indexOf("FlateEncode")&&(u="SLOW"),isNaN(i)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var g=E.call(this,t,n,l,u);return m.call(this,i,s,o,a,g,h),this};var E=function(n,r,s,o){var a,c,l;if("string"==typeof n&&i(n)===e){n=unescape(n);var g=T(n,!1);(""!==g||void 0!==(g=t.loadFile(n,!0)))&&(n=g)}if(d(n)&&(n=f(n,r)),r=i(n,r),!h(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(l=s)||0===l.length)&&(s=function(t){return"string"==typeof t||S(t)?b(t):S(t.data)?b(t.data):null}(n)),(a=p.call(this,s))||(x()&&(n instanceof Uint8Array||"RGBA"===r||(c=n,n=I(n))),a=this["process"+r.toUpperCase()](n,u.call(this),s,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:y.NONE}(o),c)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},T=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var r,i="";if("string"==typeof t){r=null!==(n=_(t))?n.data:t;try{i=ot(r)}catch(t){if(e)throw w(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};t.getImageProperties=function(n){var r,s,o="";if(d(n)&&(n=f(n)),"string"==typeof n&&i(n)===e&&(""===(o=T(n,!1))&&(o=t.loadFile(n)||""),n=o),s=i(n),!h(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!x()||n instanceof Uint8Array||(n=I(n)),!(r=this["process"+s.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=s,r}}(Ot.API),
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){if(void 0!==t&&""!=t)return!0};Ot.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(t){for(var n,r,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,l=!1,u=0;u<c.length&&!l;u++)switch((n=c[u]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){n=c[h];var d=this.internal.pdfEscape,f=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(p.objId),v=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+d(m(n.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+a.objId+" 0 R",i+=" /T ("+d(m(v))+") >>",p.content=i;var y=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(p.objId,"0 R",g.objId,"0 R");break;case"freetext":r="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(f(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var w=this.annotations._nameMap[n.options.name];n.options.pageNumber=w.page,n.options.top=w.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(f(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var _=o(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+_+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},t.link=function(t,e,n,r,i){var s=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:o(t),y:a(e),w:o(t+n),h:a(e+r)},options:i,type:"link"})},t.textWithLink=function(t,e,n,r){var i,s,o=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){s=r.maxWidth;var c=this.splitTextToSize(t,s).length;i=Math.ceil(a*c)}else s=o,i=a;return this.text(t,e,n,r),n+=.2*a,"center"===r.align&&(e-=o/2),"right"===r.align&&(e-=o),this.link(e,n-a,s,i,r),o},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor}}(Ot.API),
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},o=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(t){return o(t)&&i.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=1};var l=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return o(t)&&s(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,r=n,i="",s=0;for(e=0;e<t.length;e+=1)void 0!==r[t.charCodeAt(e)]?(s++,"number"==typeof(r=r[t.charCodeAt(e)])&&(i+=String.fromCharCode(r),r=n,s=0),e===t.length-1&&(r=n,i+=t.charAt(e-(s-1)),e-=s-1,s=0)):(r=n,i+=t.charAt(e-s),e-=s,s=0);return i};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==r[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,n){return o(t)?!1===s(t)?-1:!l(t)||!o(e)&&!o(n)||!o(n)&&a(e)||a(t)&&!o(e)||a(t)&&c(e)||a(t)&&a(e)?0:u(t)&&o(e)&&!a(e)&&o(n)&&l(n)?3:a(t)||!o(n)?1:2:-1},f=function(t){var n=0,r=0,i=0,s="",a="",c="",l=(t=t||"").split("\\s+"),u=[];for(n=0;n<l.length;n+=1){for(u.push(""),r=0;r<l[n].length;r+=1)s=l[n][r],a=l[n][r-1],c=l[n][r+1],o(s)?(i=d(s,a,c),u[n]+=-1!==i?String.fromCharCode(e[s.charCodeAt(0)][i]):s):u[n]+=s;u[n]=h(u[n])}return u.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var r=0;for(n=[],r=0;r<e.length;r+=1)Array.isArray(e[r])?n.push([f(e[r][0]),e[r][1],e[r][2]]):n.push([f(e[r])]);t=n}else t=f(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",p])}(Ot.API),Ot.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(t){r=t}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ot.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(t){s=t}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(t){o=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){i.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),r=e.font||this.getFont(),s=e.scaleFactor||this.internal.scaleFactor,o=0,a=0,c=0,l=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var u=e.maxWidth;u>0?"string"==typeof t?t=this.splitTextToSize(t,u):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(l.splitTextToSize(e,u))}),[])):t=Array.isArray(t)?t:[t];for(var h=0;h<t.length;h++)o<(c=this.getStringUnitWidth(t[h],{font:r})*n)&&(o=c);return 0!==o&&(a=t.length),{w:o/=s,h:Math.max((a*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var r=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,a=this.internal.__cell__.margins||e,c=this.internal.__cell__.tableHeaderRow,l=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===t.lineNumber?(t.x=(r.x||0)+(r.width||0),t.y=r.y||0):r.y+r.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,l&&c&&(this.printHeaderRow(t.lineNumber,!0),t.y+=c[0].height)):t.y=r.y+r.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-s,t.y+s,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+s,{align:"center",baseline:"top",maxWidth:t.width-s-s}):this.text(t.text,t.x+s,t.y+s,{align:"left",baseline:"top",maxWidth:t.width-s-s})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,l,u,h){if(i.call(this),!l)throw new Error("No data for PDF table.");var d,f,p,g,m=[],v=[],y=[],b={},w={},_=[],x=[],S=(h=h||{}).autoSize||!1,I=!1!==h.printHeaders,A=h.css&&void 0!==h.css["font-size"]?16*h.css["font-size"]:h.fontSize||12,E=h.margins||Object.assign({width:this.getPageWidth()},e),T="number"==typeof h.padding?h.padding:3,k=h.headerBackgroundColor||"#c8c8c8",N=h.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=A,this.internal.__cell__.padding=T,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=N,this.setFontSize(A),null==u)v=m=Object.keys(l[0]),y=m.map((function(){return"left"}));else if(Array.isArray(u)&&"object"===(0,r.A)(u[0]))for(m=u.map((function(t){return t.name})),v=u.map((function(t){return t.prompt||t.name||""})),y=u.map((function(t){return t.align||"left"})),d=0;d<u.length;d+=1)w[u[d].name]=u[d].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(v=m=u,y=m.map((function(){return"left"})));if(S||Array.isArray(u)&&"string"==typeof u[0])for(d=0;d<m.length;d+=1){for(b[g=m[d]]=l.map((function(t){return t[g]})),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(v[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=b[g],this.setFont(void 0,"normal"),p=0;p<f.length;p+=1)_.push(this.getTextDimensions(f[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);w[g]=Math.max.apply(null,_)+T+T,_=[]}if(I){var L={};for(d=0;d<m.length;d+=1)L[m[d]]={},L[m[d]].text=v[d],L[m[d]].align=y[d];var C=c.call(this,L,w);x=m.map((function(e){return new o(t,n,w[e],C,L[e].text,void 0,L[e].align)})),this.setTableHeaderRow(x),this.printHeaderRow(1,!1)}var P=u.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(d=0;d<l.length;d+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:d,data:l[d]},this);var O=c.call(this,l[d],w);for(p=0;p<m.length;p+=1){var R=l[d][m[p]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:d,col:p,data:R},this),a.call(this,new o(t,n,w[m[p]],O,R,d+2,P[m[p]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var c=function(t,e){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(t).map((function(r){var i=t[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,e[r]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*r/i+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){i.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var c=[],l=0;l<this.internal.__cell__.tableHeaderRow.length;l+=1){r=this.internal.__cell__.tableHeaderRow[l].clone(),e&&(r.y=this.internal.__cell__.margins.top||0,c.push(r)),r.lineNumber=t;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,r),this.setTextColor(u)}c.length>0&&this.setTableHeaderRow(c),this.setFont(void 0,"normal"),n=!1}}(Ot.API);var Se={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ie=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ae=xe(Ie),Ee=[100,200,300,400,500,600,700,800,900],Te=xe(Ee);function ke(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(t){return Se[t=t||"normal"]?t:"normal"}(t.style),r=function(t){if(!t)return 400;if("number"==typeof t)return t>=100&&t<=900&&t%100==0?t:400;if(/^\d00$/.test(t))return parseInt(t);switch(t){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(t){return"number"==typeof Ae[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function Ne(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Le={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ce={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Pe(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Oe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Le,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=ke(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+Pe(s)+"' and default family '"+r+"'.");if(o=function(t,e){if(e[t])return e[t];var n=Ae[t],r=n<=Ae.normal?-1:1,i=Ne(e,Ie,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+t);return i}(s.stretch,o),o=function(t,e){if(e[t])return e[t];for(var n=Se[t],r=0;r<n.length;++r)if(e[n[r]])return e[n[r]];throw new Error("Could not find a matching font-style for "+t)}(s.style,o),!(o=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=Te[t],r=Ne(e,Ee,n,t<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+t);return r}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Pe(s)+"'.");return o}function Re(t){return t.trimLeft()}function De(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Me(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var Fe,je,Be,Ve=["times"];!function(t){var e,n,i,s,o,a,c,l,u,h=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new l,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new a,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new a,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,c=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var d=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(t){r=Boolean(t)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(t){isNaN(t)||(i=t)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(t){isNaN(t)||(s=t)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),u.margin=e}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(t){o=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var c=[];Object.defineProperty(this,"pageBreaks",{get:function(){return c},set:function(t){c=t}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(t){t instanceof h&&(u=t)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(t){u.path=t}});var l=[];Object.defineProperty(this,"ctxStack",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=f(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=f(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var d=null;function p(t,e){if(null===d){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var r=null;switch(t){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:t},e.push(r))}))})),e}(t.getFontList());d=function(t){for(var e={},n=0;n<t.length;++n){var r=ke(t[n]),i=r.family,s=r.stretch,o=r.style,a=r.weight;e[i]=e[i]||{},e[i][s]=e[i][s]||{},e[i][s][o]=e[i][s][o]||{},e[i][s][o][a]=r}return e}(n.concat(e))}return d}var g=null;Object.defineProperty(this,"fontFaces",{get:function(){return g},set:function(t){d=null,g=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],r=(e[2],e[3]),i=e[4],s=(e[5],e[6]),o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===o?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var a=function(t){var e,n,r=[],i=t.trim();if(""===i)return Ve;if(i in Ce)return[Ce[i]];for(;""!==i;){switch(n=null,e=(i=Re(i)).charAt(0)){case'"':case"'":n=De(i.substring(1),e);break;default:n=Me(i)}if(null===n)return Ve;if(r.push(n[0]),""!==(i=Re(n[1]))&&","!==i.charAt(0))return Ve;i=i.replace(/^,/,"")}return r}(s);if(this.fontFaces){var c=Oe(p(this.pdf,this.fontFaces),a.map((function(t){return{family:t,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(c.ref.name,c.ref.style)}else{var l="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(l="bold"),"italic"===n&&(l+="italic"),0===l.length&&(l="normal");for(var u="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<a.length;d++){if(void 0!==this.pdf.internal.getFont(a[d],l,{noFallback:!0,disableWarning:!0})){u=a[d];break}if("bolditalic"===l&&void 0!==this.pdf.internal.getFont(a[d],"bold",{noFallback:!0,disableWarning:!0}))u=a[d],l="bold";else if(void 0!==this.pdf.internal.getFont(a[d],"normal",{noFallback:!0,disableWarning:!0})){u=a[d],l="normal";break}}if(""===u)for(var f=0;f<a.length;f++)if(h[a[f]]){u=h[a[f]];break}u=""===u?"Times":u,this.pdf.setFont(u,l)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,j.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,j.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};d.prototype.setLineDash=function(t){this.lineDash=t},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){_.call(this,"fill",!1)},d.prototype.stroke=function(){_.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(t,e)},d.prototype.closePath=function(){var t=new a(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===(0,r.A)(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new a(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(t.x,t.y)},d.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},d.prototype.quadraticCurveTo=function(t,e,n,r){if(isNaN(n)||isNaN(r)||isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new a(n,r)),s=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"qct",x1:s.x,y1:s.y,x:i.x,y:i.y}),this.ctx.lastPoint=new a(i.x,i.y)},d.prototype.bezierCurveTo=function(t,e,n,r,i,s){if(isNaN(i)||isNaN(s)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw nt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new a(i,s)),c=this.ctx.transform.applyToPoint(new a(t,e)),l=this.ctx.transform.applyToPoint(new a(n,r));this.path.push({type:"bct",x1:c.x,y1:c.y,x2:l.x,y2:l.y,x:o.x,y:o.y}),this.ctx.lastPoint=new a(o.x,o.y)},d.prototype.arc=function(t,e,n,r,i,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i))throw nt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new a(t,e));t=o.x,e=o.y;var c=this.ctx.transform.applyToPoint(new a(0,n)),l=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,counterclockwise:s})},d.prototype.arcTo=function(t,e,n,r,i){throw new Error("arcTo not implemented.")},d.prototype.rect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw nt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},d.prototype.fillRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw nt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},d.prototype.strokeRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw nt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(t,e,n,r),this.stroke())},d.prototype.clearRect=function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r))throw nt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,r))},d.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},d.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(t){var e,n,r,i;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,r=0,i=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==s)e=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(s[1]),n=parseInt(s[2]),r=parseInt(s[3]),i=parseFloat(s[4]);else{if(i=1,"string"==typeof t&&"#"!==t.charAt(0)){var o=new lt(t);t=o.ok?o.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:e,g:n,b:r,a:i,style:t}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},g=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw nt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!p.call(this)){var i=D(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;N.call(this,{text:t,x:e,y:n,scale:s,angle:i,align:this.textAlign,maxWidth:r})}},d.prototype.strokeText=function(t,e,n,r){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw nt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){r=isNaN(r)?void 0:r;var i=D(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;N.call(this,{text:t,x:e,y:n,scale:s,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},d.prototype.measureText=function(t){if("string"!=typeof t)throw nt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,r=e.internal.getFontSize(),i=e.getStringUnitWidth(t)*r/e.internal.scaleFactor,s=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new s({width:i*=Math.round(96*n/72*1e4)/1e4})},d.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.rotate=function(t){if(isNaN(t))throw nt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new l(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},d.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.transform=function(t,e,n,r,i,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(s))throw nt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new l(t,e,n,r,i,s);this.ctx.transform=this.ctx.transform.multiply(o)},d.prototype.setTransform=function(t,e,n,r,i,s){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,s=isNaN(s)?0:s,this.ctx.transform=new l(t,e,n,r,i,s)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(t,e,n,r,i,s,o,a,u){var h=this.pdf.getImageProperties(t),d=1,f=1,p=1,g=1;void 0!==r&&void 0!==a&&(p=a/r,g=u/i,d=h.width/r*a/r,f=h.height/i*u/i),void 0===s&&(s=e,o=n,e=0,n=0),void 0!==r&&void 0===a&&(a=r,u=i),void 0===r&&void 0===a&&(a=h.width,u=h.height);for(var y,_=this.ctx.transform.decompose(),S=D(_.rotate.shx),I=new l,A=(I=(I=(I=I.multiply(_.translate)).multiply(_.skew)).multiply(_.scale)).applyToRectangle(new c(s-e*p,o-n*g,r*d,i*f)),E=v.call(this,A),T=[],k=0;k<E.length;k+=1)-1===T.indexOf(E[k])&&T.push(E[k]);if(w(T),this.autoPaging)for(var N=T[0],L=T[T.length-1],C=N;C<L+1;C++){this.pdf.setPage(C);var P=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],O=1===C?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===C?0:R+(C-2)*M;if(0!==this.ctx.clip_path.length){var j=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(y,this.posX+this.margin[3],-F+O+this.ctx.prevPageLastElemOffset),x.call(this,"fill",!0),this.path=j}var B=JSON.parse(JSON.stringify(A));B=b([B],this.posX+this.margin[3],-F+O+this.ctx.prevPageLastElemOffset)[0];var V=(C>N||C<L)&&m.call(this);V&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],P,M,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",B.x,B.y,B.w,B.h,null,null,S),V&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",A.x,A.y,A.w,A.h,null,null,S)};var v=function(t,e,n){var r=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":r.push(Math.floor((t.y+i)/n)+1);break;case"arc":r.push(Math.floor((t.y+i-t.radius)/n)+1),r.push(Math.floor((t.y+i+t.radius)/n)+1);break;case"qct":var s=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);r.push(Math.floor((s.y+i)/n)+1),r.push(Math.floor((s.y+s.h+i)/n)+1);break;case"bct":var o=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);r.push(Math.floor((o.y+i)/n)+1),r.push(Math.floor((o.y+o.h+i)/n)+1);break;case"rect":r.push(Math.floor((t.y+i)/n)+1),r.push(Math.floor((t.y+t.h+i)/n)+1)}for(var a=0;a<r.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<r[a];)y.call(this);return r},y=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=s},b=function(t,e,n){for(var r=0;r<t.length;r++)switch(t[r].type){case"bct":t[r].x2+=e,t[r].y2+=n;case"qct":t[r].x1+=e,t[r].y1+=n;case"mt":case"lt":case"arc":default:t[r].x+=e,t[r].y+=n}return t},w=function(t){return t.sort((function(t,e){return t-e}))},_=function(t,e){for(var n,r,i=this.fillStyle,s=this.strokeStyle,o=this.lineCap,a=this.lineWidth,c=Math.abs(a*this.ctx.transform.scaleX),l=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),d=[],f=0;f<h.length;f++)if(void 0!==h[f].x)for(var p=v.call(this,h[f]),g=0;g<p.length;g+=1)-1===d.indexOf(p[g])&&d.push(p[g]);for(var _=0;_<d.length;_++)for(;this.pdf.internal.getNumberOfPages()<d[_];)y.call(this);if(w(d),this.autoPaging)for(var S=d[0],I=d[d.length-1],A=S;A<I+1;A++){this.pdf.setPage(A),this.fillStyle=i,this.strokeStyle=s,this.lineCap=o,this.lineWidth=c,this.lineJoin=l;var E=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],T=1===A?this.posY+this.margin[0]:this.margin[0],k=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],N=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],L=1===A?0:k+(A-2)*N;if(0!==this.ctx.clip_path.length){var C=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(n,this.posX+this.margin[3],-L+T+this.ctx.prevPageLastElemOffset),x.call(this,t,!0),this.path=C}if(r=JSON.parse(JSON.stringify(u)),this.path=b(r,this.posX+this.margin[3],-L+T+this.ctx.prevPageLastElemOffset),!1===e||0===A){var P=(A>S||A<I)&&m.call(this);P&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],E,N,null).clip().discardPath()),x.call(this,t,e),P&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=c,x.call(this,t,e),this.lineWidth=a;this.path=u},x=function(t,e){if(("stroke"!==t||e||!g.call(this))&&("stroke"===t||e||!p.call(this))){for(var n,r,i=[],s=this.path,o=0;o<s.length;o++){var a=s[o];switch(a.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:a,deltas:[],abs:[]});break;case"lt":var c=i.length;if(s[o-1]&&!isNaN(s[o-1].x)&&(n=[a.x-s[o-1].x,a.y-s[o-1].y],c>0))for(;c>=0;c--)if(!0!==i[c-1].close&&!0!==i[c-1].begin){i[c-1].deltas.push(n),i[c-1].abs.push(a);break}break;case"bct":n=[a.x1-s[o-1].x,a.y1-s[o-1].y,a.x2-s[o-1].x,a.y2-s[o-1].y,a.x-s[o-1].x,a.y-s[o-1].y],i[i.length-1].deltas.push(n);break;case"qct":var l=s[o-1].x+2/3*(a.x1-s[o-1].x),u=s[o-1].y+2/3*(a.y1-s[o-1].y),h=a.x+2/3*(a.x1-a.x),d=a.y+2/3*(a.y1-a.y),f=a.x,m=a.y;n=[l-s[o-1].x,u-s[o-1].y,h-s[o-1].x,d-s[o-1].y,f-s[o-1].x,m-s[o-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(a)}}r=e?null:"stroke"===t?"stroke":"fill";for(var v=!1,y=0;y<i.length;y++)if(i[y].arc)for(var b=i[y].abs,w=0;w<b.length;w++){var _=b[w];"arc"===_.type?A.call(this,_.x,_.y,_.radius,_.startAngle,_.endAngle,_.counterclockwise,void 0,e,!v):L.call(this,_.x,_.y),v=!0}else if(!0===i[y].close)this.pdf.internal.out("h"),v=!1;else if(!0!==i[y].begin){var x=i[y].start.x,S=i[y].start.y;C.call(this,i[y].deltas,x,S),v=!0}r&&E.call(this,r),e&&T.call(this)}},S=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}},I=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(t,e,n,r,i,s,o,a,c){for(var l=O.call(this,n,r,i,s),u=0;u<l.length;u++){var h=l[u];0===u&&(c?k.call(this,h.x1+t,h.y1+e):L.call(this,h.x1+t,h.y1+e)),P.call(this,t,e,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}a?T.call(this):E.call(this,o)},E=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},T=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(t,e){this.pdf.internal.out(n(t)+" "+i(e)+" m")},N=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;case"left":case"start":default:e="left"}var n=this.pdf.getTextDimensions(t.text),r=S.call(this,t.y),i=I.call(this,r)-n.h,s=this.ctx.transform.applyToPoint(new a(t.x,r)),o=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(o.translate)).multiply(o.skew)).multiply(o.scale);for(var h,d,f,p=this.ctx.transform.applyToRectangle(new c(t.x,r,n.w,n.h)),g=u.applyToRectangle(new c(t.x,i,n.w,n.h)),y=v.call(this,g),_=[],A=0;A<y.length;A+=1)-1===_.indexOf(y[A])&&_.push(y[A]);if(w(_),this.autoPaging)for(var E=_[0],T=_[_.length-1],k=E;k<T+1;k++){this.pdf.setPage(k);var N=1===k?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],C=this.pdf.internal.pageSize.height-this.margin[2],P=C-this.margin[0],O=this.pdf.internal.pageSize.width-this.margin[1],R=O-this.margin[3],D=1===k?0:L+(k-2)*P;if(0!==this.ctx.clip_path.length){var M=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(h,this.posX+this.margin[3],-1*D+N),x.call(this,"fill",!0),this.path=M}var F=b([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-D+N+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale);var j="text"!==this.autoPaging;if(j||F.y+F.h<=C){if(j||F.y>=N&&F.x<=O){var B=j?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||O-F.x)[0],V=b([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-D+N+this.ctx.prevPageLastElemOffset)[0],U=j&&(k>E||k<T)&&m.call(this);U&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,P,null).clip().discardPath()),this.pdf.text(B,V.x,V.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),U&&this.pdf.restoreGraphicsState()}}else F.y<C&&(this.ctx.prevPageLastElemOffset+=C-F.y);t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)}else t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale),this.pdf.text(t.text,s.x+this.posX,s.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)},L=function(t,e,r,s){r=r||0,s=s||0,this.pdf.internal.out(n(t+r)+" "+i(e+s)+" l")},C=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},P=function(t,n,r,i,a,c,l,u){this.pdf.internal.out([e(s(r+t)),e(o(i+n)),e(s(a+t)),e(o(c+n)),e(s(l+t)),e(o(u+n)),"c"].join(" "))},O=function(t,e,n,r){for(var i=2*Math.PI,s=Math.PI/2;e>n;)e-=i;var o=Math.abs(n-e);o<i&&r&&(o=i-o);for(var a=[],c=r?-1:1,l=e;o>1e-5;){var u=l+c*Math.min(o,s);a.push(R.call(this,t,l,u)),o-=Math.abs(u-l),l=u}return a},R=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),s=t*Math.sin(r),o=i,a=-s,c=o*o+a*a,l=c+o*i+a*s,u=4/3*(Math.sqrt(2*c*l)-l)/(o*s-a*i),h=o-u*a,d=a+u*o,f=h,p=-d,g=r+e,m=Math.cos(g),v=Math.sin(g);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*m-d*v,y2:h*v+d*m,x3:f*m-p*v,y3:f*v+p*m,x4:t*Math.cos(n),y4:t*Math.sin(n)}},D=function(t){return 180*t/Math.PI},M=function(t,e,n,r,i,s){var o=t+.5*(n-t),a=e+.5*(r-e),l=i+.5*(n-i),u=s+.5*(r-s),h=Math.min(t,i,o,l),d=Math.max(t,i,o,l),f=Math.min(e,s,a,u),p=Math.max(e,s,a,u);return new c(h,f,d-h,p-f)},F=function(t,e,n,r,i,s,o,a){var l,u,h,d,f,p,g,m,v,y,b,w,_,x,S=n-t,I=r-e,A=i-n,E=s-r,T=o-i,k=a-s;for(u=0;u<41;u++)v=(g=(h=t+(l=u/40)*S)+l*((f=n+l*A)-h))+l*(f+l*(i+l*T-f)-g),y=(m=(d=e+l*I)+l*((p=r+l*E)-d))+l*(p+l*(s+l*k-p)-m),0==u?(b=v,w=y,_=v,x=y):(b=Math.min(b,v),w=Math.min(w,y),_=Math.max(_,v),x=Math.max(x,y));return new c(Math.round(b),Math.round(w),Math.round(_-b),Math.round(x-w))},j=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Ot.API),
/**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){var e,n,r,i,s,o,a,c,l,u;for(/[^\x00-\xFF]/.test(t),n=[],r=0,i=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;i>r;r+=4)0!==(s=(t.charCodeAt(r)<<24)+(t.charCodeAt(r+1)<<16)+(t.charCodeAt(r+2)<<8)+t.charCodeAt(r+3))?(o=(s=((s=((s=((s=(s-(u=s%85))/85)-(l=s%85))/85)-(c=s%85))/85)-(a=s%85))/85)%85,n.push(o+33,a+33,c+33,l+33,u+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,r,i,s,o=String,a="length",c=255,l="charCodeAt",u="slice",h="replace";for(t[u](-2),t=t[u](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),r=[],i=0,s=(t+=e="uuuuu"[u](t[a]%5||5))[a];s>i;i+=5)n=52200625*(t[l](i)-33)+614125*(t[l](i+1)-33)+7225*(t[l](i+2)-33)+85*(t[l](i+3)-33)+(t[l](i+4)-33),r.push(c&n>>24,c&n>>16,c&n>>8,c&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(r,e[a]),o.fromCharCode.apply(o,r)},r=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",r=0;r<t.length;r+=2)n+=String.fromCharCode("0x"+(t[r]+t[r+1]));return n},i=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=J(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,s){var o=0,a=t||"",c=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":a=n(a),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=r(a),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=a.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=i(a),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:a,reverseChain:c.reverse().join(" ")}}}(Ot.API),
/**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(t,e,n){var r=new XMLHttpRequest,i=0,s=function(t){var e=t.length,n=[],r=String.fromCharCode;for(i=0;i<e;i+=1)n.push(r(255&t.charCodeAt(i)));return n.join("")};if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){200===r.status?n(s(this.responseText)):n(void 0)}),r.send(null),e&&200===r.status)return s(r.responseText)}(t,e,n)}catch(t){}return r}(t,e,n)},t.loadImageFile=t.loadFile}(Ot.API),function(t){function e(){return(tt.html2canvas?Promise.resolve(tt.html2canvas):n.e(125).then(n.t.bind(n,2125,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function i(){return(tt.DOMPurify?Promise.resolve(tt.DOMPurify):n.e(353).then(n.bind(n,8353))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var s=function(t){var e=(0,r.A)(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},o=function(t,e){var n=document.createElement(t);for(var r in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[r]=e.style[r];return n},a=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),n);return(r=r.setProgress(1,t,1,[t])).set(e)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(t,e){return t.__proto__=e||a.prototype,t},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(s(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(i).then((function(e){return this.set({src:o("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var r=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),i=e.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(t(i,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(r.value=e.value),r.addEventListener("load",(function(){r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var o=n[s],a=o.src.find((function(t){return"truetype"===t.format}));a&&e.addFont(a.url,o.ref.name,o.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,e.context2d.save(!0),t(this.prop.container,i)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},a.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},a.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},a.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(t){if("object"!==s(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in a.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},a.prototype.get=function(t,e){return this.then((function(){var n=t in a.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},a.prototype.setMargin=function(t){return this.then((function(){switch(s(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},a.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},a.prototype.setProgress=function(t,e,n,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(t,e,n,r){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},a.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},a.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),i=n.call(r,t,e);return a.convert(i,this.__proto__)},a.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},a.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},a.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return a.convert(e,this)},a.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},a.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Ot.getPageSize=function(t,e,n){if("object"===(0,r.A)(t)){var i=t;t=i.orientation,e=i.unit||e,n=i.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var s,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+e}var c,l=0,u=0;if(a.hasOwnProperty(o))l=a[o][1]/s,u=a[o][0]/s;else try{l=n[1],u=n[0]}catch(h){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",u>l&&(c=u,u=l,l=c);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",l>u&&(c=u,u=l,l=c)}return{width:u,height:l,unit:e,k:s,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(ke):null;var n=new a(e);return e.worker?n:n.from(t).doCallback()}}(Ot.API),Ot.API.addJS=function(t){return Be=t,this.internal.events.subscribe("postPutResources",(function(){Fe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fe+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),je=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Be+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Fe&&void 0!==je&&this.internal.out("/Names <</JavaScript "+Fe+" 0 R>>")})),this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),i=0;i<r.length;i++){var s=r[i],o=n.exec(s);if(null!=o){var a=o[1];t.internal.newObjectDeferredBegin(a,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,l=[];for(i=0;i<c;i++){var u=t.internal.newObject();l.push(u);var h=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<l.length;i++)t.internal.write("(page_"+(i+1)+")"+l[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<e.children.length;r++){var i=e.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(e)),r>0&&this.line("/Prev "+this.makeRef(e.children[r-1])),r<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var s=this.count=this.count_r({count:0},i);if(s>0&&this.line("/Count "+s),i.options&&i.options.pageNumber){var o=t.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(Ot.API),
/**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,r,i,s,o){var a,c=this.decode.DCT_DECODE,l=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var n,r=256*t.charCodeAt(4)+t.charCodeAt(5),i=t.length,s={width:0,height:0,numcomponents:1},o=4;o<i;o+=2){if(o+=r,-1!==e.indexOf(t.charCodeAt(o+1))){n=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),s={width:256*t.charCodeAt(o+7)+t.charCodeAt(o+8),height:n,numcomponents:t.charCodeAt(o+9)};break}r=256*t.charCodeAt(o+2)+t.charCodeAt(o+3)}return s}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}l={data:t,width:a.width,height:a.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:r}}return l}}(Ot.API);var Ue,qe,ze,He,We,$e=function(){var t,e,n;function r(t){var e,n,r,i,s,o,a,c,l,u,h,d,f,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),l=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),i=this.readUInt16()||100,o.delay=1e3*s/i,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,d=0;0<=e?d<e:d>e;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(f=0;0<=u?f<u:f>u;0<=u?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(h=this.read(e)).indexOf(0),c=String.fromCharCode.apply(String,h.slice(0,a)),this.text[c]=String.fromCharCode.apply(String,h.slice(a+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),r=0,i=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function s(s,o,a,c){var l,u,h,d,f,p,g,m,v,y,b,w,_,x,S,I,A,E,T,k,N,L=Math.ceil((i.width-s)/a),C=Math.ceil((i.height-o)/c),P=i.width==L&&i.height==C;for(x=e*L,w=P?n:new Uint8Array(x*C),p=t.length,_=0,u=0;_<C&&r<p;){switch(t[r++]){case 0:for(d=A=0;A<x;d=A+=1)w[u++]=t[r++];break;case 1:for(d=E=0;E<x;d=E+=1)l=t[r++],f=d<e?0:w[u-e],w[u++]=(l+f)%256;break;case 2:for(d=T=0;T<x;d=T+=1)l=t[r++],h=(d-d%e)/e,S=_&&w[(_-1)*x+h*e+d%e],w[u++]=(S+l)%256;break;case 3:for(d=k=0;k<x;d=k+=1)l=t[r++],h=(d-d%e)/e,f=d<e?0:w[u-e],S=_&&w[(_-1)*x+h*e+d%e],w[u++]=(l+Math.floor((f+S)/2))%256;break;case 4:for(d=N=0;N<x;d=N+=1)l=t[r++],h=(d-d%e)/e,f=d<e?0:w[u-e],0===_?S=I=0:(S=w[(_-1)*x+h*e+d%e],I=h&&w[(_-1)*x+(h-1)*e+d%e]),g=f+S-I,m=Math.abs(g-f),y=Math.abs(g-S),b=Math.abs(g-I),v=m<=y&&m<=b?f:y<=b?S:I,w[u++]=(l+v)%256;break;default:throw new Error("Invalid filter algorithm: "+t[r-1])}if(!P){var O=((o+_*c)*i.width+s)*e,R=_*x;for(d=0;d<L;d+=1){for(var D=0;D<e;D+=1)n[O++]=w[R++];O+=(a-1)*e}}_++}}return t=X(t),1==i.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),n},r.prototype.decodePalette=function(){var t,e,n,r,i,s,o,a,c;for(n=this.palette,s=this.transparency.indexed||[],i=new Uint8Array((s.length||0)+n.length),r=0,t=0,e=o=0,a=n.length;o<a;e=o+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(c=s[t++])?c:255;return i},r.prototype.copyToImageData=function(t,e){var n,r,i,s,o,a,c,l,u,h,d;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),l=(i=t.data||t).length,o=u||e,s=a=0,1===r)for(;s<l;)c=u?4*e[s/4]:a,h=o[c++],i[s++]=h,i[s++]=h,i[s++]=h,i[s++]=n?o[c++]:255,a=c;else for(;s<l;)c=u?4*e[s/4]:a,i[s++]=o[c++],i[s++]=o[c++],i[s++]=o[c++],i[s++]=n?o[c++]:255,a=c},r.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var i=function(){if("[object Window]"===Object.prototype.toString.call(tt)){try{e=tt.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return i(),t=function(t){var r;if(!0===i())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(r=new Image).src=e.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(e){var n,r,i,s,o,a,c,l;if(this.animation){for(l=[],r=o=0,a=(c=this.animation.frames).length;o<a;r=++o)n=c[r],i=e.createImageData(n.width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(i,s),n.imageData=i,l.push(n.image=t(i));return l}},r.prototype.renderFrame=function(t,e){var n,r,i;return n=(r=this.animation.frames)[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(t){var e,n,r,i,s,o,a=this;return n=0,o=this.animation,i=o.numFrames,r=o.frames,s=o.numPlays,(e=function(){var o,c;if(o=n++%i,c=r[o],a.renderFrame(t,o),i>1&&n/i<s)return a.animation._timeout=setTimeout(e,c.delay)})()},r.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},r.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},r}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Ge(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,c=null;s&&(a=e,c=o,e+=3*o);var l=!0,u=[],h=0,d=null,f=0,p=null;for(this.width=n,this.height=r;l&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((T=t[e++])>=0))throw Error("Invalid block size");if(0===T)break;e+=T}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var g=t[e++];h=t[e++]|t[e++]<<8,d=t[e++],0==(1&g)&&(d=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((T=t[e++])>=0))throw Error("Invalid block size");if(0===T)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var m=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],_=w>>6&1,x=1<<1+(7&w),S=a,I=c,A=!1;w>>7&&(A=!0,S=e,I=x,e+=3*x);var E=e;for(e++;;){var T;if(!((T=t[e++])>=0))throw Error("Invalid block size");if(0===T)break;e+=T}u.push({x:m,y:v,width:y,height:b,has_local_palette:A,palette_offset:S,palette_size:I,data_offset:E,data_length:e-E,transparent_index:d,interlaced:!!_,delay:h,disposal:f});break;case 59:l=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(t){if(t<0||t>=u.length)throw new Error("Frame index out of range.");return u[t]},this.decodeAndBlitFrameBGRA=function(e,r){var i=this.frameInfo(e),s=i.width*i.height,o=new Uint8Array(s);Ke(t,i.data_offset,o,s);var a=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,u=n-l,h=l,d=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=d,g=4*u;!0===i.interlaced&&(g+=4*n*7);for(var m=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===h&&(h=l,(p+=g)>=f&&(g=4*u+4*n*(m-1),p=d+(l+u)*(m<<1),m>>=1)),b===c)p+=4;else{var w=t[a+3*b],_=t[a+3*b+1],x=t[a+3*b+2];r[p++]=x,r[p++]=_,r[p++]=w,r[p++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,r){var i=this.frameInfo(e),s=i.width*i.height,o=new Uint8Array(s);Ke(t,i.data_offset,o,s);var a=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,u=n-l,h=l,d=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=d,g=4*u;!0===i.interlaced&&(g+=4*n*7);for(var m=8,v=0,y=o.length;v<y;++v){var b=o[v];if(0===h&&(h=l,(p+=g)>=f&&(g=4*u+4*n*(m-1),p=d+(l+u)*(m<<1),m>>=1)),b===c)p+=4;else{var w=t[a+3*b],_=t[a+3*b+1],x=t[a+3*b+2];r[p++]=w,r[p++]=_,r[p++]=x,r[p++]=255}--h}}}function Ke(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,c=i+1,l=(1<<c)-1,u=0,h=0,d=0,f=t[e++],p=new Int32Array(4096),g=null;;){for(;u<16&&0!==f;)h|=t[e++]<<u,u+=8,1===f?f=t[e++]:--f;if(u<c)break;var m=h&l;if(h>>=c,u-=c,m!==s){if(m===o)break;for(var v=m<a?m:g,y=0,b=v;b>s;)b=p[b]>>8,++y;var w=b;if(d+y+(v!==m?1:0)>r)return void nt.log("Warning, gif stream longer than expected.");n[d++]=w;var _=d+=y;for(v!==m&&(n[d++]=w),b=v;y--;)b=p[b],n[--_]=255&b,b>>=8;null!==g&&a<4096&&(p[a++]=g<<8|w,a>=l+1&&c<12&&(++c,l=l<<1|1)),g=m}else a=o+1,l=(1<<(c=i+1))-1,g=null}return d!==r&&nt.log("Warning, gif stream shorter than expected."),n
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/}function Ye(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),f=new Array(64),p=new Array(64),g=[],m=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),_=new Array(256),x=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],C=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function P(t,e){for(var n=0,r=0,i=new Array,s=1;s<=16;s++){for(var o=1;o<=t[s];o++)i[e[r]]=[],i[e[r]][0]=n,i[e[r]][1]=s,r++,n++;n*=2}return i}function O(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(m|=1<<v),n--,--v<0&&(255==m?(R(255),R(0)):R(m),v=7,m=0)}function R(t){g.push(t)}function D(t){R(t>>8&255),R(255&t)}function M(t,e,n,r,i){for(var s,o=i[0],a=i[240],c=function(t,e){var n,r,i,s,o,a,c,l,u,h,d=0;for(u=0;u<8;++u){n=t[d],r=t[d+1],i=t[d+2],s=t[d+3],o=t[d+4],a=t[d+5],c=t[d+6];var p=n+(l=t[d+7]),g=n-l,m=r+c,v=r-c,y=i+a,b=i-a,w=s+o,_=s-o,x=p+w,S=p-w,I=m+y,A=m-y;t[d]=x+I,t[d+4]=x-I;var E=.707106781*(A+S);t[d+2]=S+E,t[d+6]=S-E;var T=.382683433*((x=_+b)-(A=v+g)),k=.5411961*x+T,N=1.306562965*A+T,L=.707106781*(I=b+v),C=g+L,P=g-L;t[d+5]=P+k,t[d+3]=P-k,t[d+1]=C+N,t[d+7]=C-N,d+=8}for(d=0,u=0;u<8;++u){n=t[d],r=t[d+8],i=t[d+16],s=t[d+24],o=t[d+32],a=t[d+40],c=t[d+48];var O=n+(l=t[d+56]),R=n-l,D=r+c,M=r-c,F=i+a,j=i-a,B=s+o,V=s-o,U=O+B,q=O-B,z=D+F,H=D-F;t[d]=U+z,t[d+32]=U-z;var W=.707106781*(H+q);t[d+16]=q+W,t[d+48]=q-W;var $=.382683433*((U=V+j)-(H=M+R)),G=.5411961*U+$,K=1.306562965*H+$,Y=.707106781*(z=j+M),Q=R+Y,J=R-Y;t[d+40]=J+G,t[d+24]=J-G,t[d+8]=Q+K,t[d+56]=Q-K,d++}for(u=0;u<64;++u)h=t[u]*e[u],f[u]=h>0?h+.5|0:h-.5|0;return f}(t,e),l=0;l<64;++l)p[S[l]]=c[l];var u=p[0]-n;n=p[0],0==u?O(r[0]):(O(r[d[s=32767+u]]),O(h[s]));for(var g=63;g>0&&0==p[g];)g--;if(0==g)return O(o),n;for(var m,v=1;v<=g;){for(var y=v;0==p[v]&&v<=g;)++v;var b=v-y;if(b>=16){m=b>>4;for(var w=1;w<=m;++w)O(a);b&=15}s=32767+p[v],O(i[(b<<4)+d[s]]),O(h[s]),v++}return 63!=g&&O(o),n}function F(t){t=Math.min(Math.max(t,1),100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=o((e[n]*t+50)/100);r=Math.min(Math.max(r,1),255),a[S[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var h=o((i[s]*t+50)/100);h=Math.min(Math.max(h,1),255),c[S[s]]=h}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var g=0;g<8;g++)l[f]=1/(a[S[f]]*d[p]*d[g]*8),u[f]=1/(c[S[f]]*d[p]*d[g]*8),f++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){s&&F(s),g=new Array,m=0,v=7,D(65496),D(65504),D(16),R(74),R(70),R(73),R(70),R(0),R(1),R(1),R(0),D(1),D(1),R(0),R(0),function(){D(65499),D(132),R(0);for(var t=0;t<64;t++)R(a[t]);R(1);for(var e=0;e<64;e++)R(c[e])}(),function(t,e){D(65472),D(17),R(8),D(e),D(t),R(3),R(1),R(17),R(0),R(2),R(17),R(1),R(3),R(17),R(1)}(t.width,t.height),function(){D(65476),D(418),R(0);for(var t=0;t<16;t++)R(I[t+1]);for(var e=0;e<=11;e++)R(A[e]);R(16);for(var n=0;n<16;n++)R(E[n+1]);for(var r=0;r<=161;r++)R(T[r]);R(1);for(var i=0;i<16;i++)R(k[i+1]);for(var s=0;s<=11;s++)R(N[s]);R(17);for(var o=0;o<16;o++)R(L[o+1]);for(var a=0;a<=161;a++)R(C[a])}(),D(65498),D(12),R(3),R(1),R(0),R(2),R(17),R(3),R(17),R(0),R(63),R(0);var o=0,h=0,d=0;m=0,v=7,this.encode.displayName="_encode_";for(var f,p,_,S,P,j,B,V,U,q=t.data,z=t.width,H=t.height,W=4*z,$=0;$<H;){for(f=0;f<W;){for(P=W*$+f,B=-1,V=0,U=0;U<64;U++)j=P+(V=U>>3)*W+(B=4*(7&U)),$+V>=H&&(j-=W*($+1+V-H)),f+B>=W&&(j-=f+B-W+4),p=q[j++],_=q[j++],S=q[j++],y[U]=(x[p]+x[_+256|0]+x[S+512|0]>>16)-128,b[U]=(x[p+768|0]+x[_+1024|0]+x[S+1280|0]>>16)-128,w[U]=(x[p+1280|0]+x[_+1536|0]+x[S+1792|0]>>16)-128;o=M(y,l,o,e,r),h=M(b,u,h,n,i),d=M(w,u,d,n,i),f+=32}$+=8}if(v>=0){var G=[];G[1]=v+1,G[0]=(1<<v+1)-1,O(G)}return D(65497),new Uint8Array(g)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)_[e]=t(e)}(),e=P(I,A),n=P(k,N),r=P(E,T),i=P(L,C),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)d[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=r;for(var i=-(e-1);i<=-t;i++)d[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=e-1+i;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)x[t]=19595*t,x[t+256|0]=38470*t,x[t+512|0]=7471*t+32768,x[t+768|0]=-11059*t,x[t+1024|0]=-21709*t,x[t+1280|0]=32768*t+8421375,x[t+1536|0]=-27439*t,x[t+1792|0]=-5329*t}(),F(t)}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qe(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Je(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var r=0;4>r;r++)if(t[e+r]!=n.charCodeAt(r))return!0;return!1}function r(t,e,n,r,i){for(var s=0;s<i;s++)t[e+s]=n[r+s]}function i(t,e,n,r){for(var i=0;i<r;i++)t[e+i]=n}function s(t){return new Int32Array(t)}function o(t,e){for(var n=[],r=0;r<t;r++)n.push(new e);return n}function a(t,e){var n=[];return function t(n,r,i){for(var s=i[r],o=0;o<s&&(n.push(i.length>r+1?[]:new e),!(i.length<r+1));o++)t(n[o],r+1,i)}(n,0,t),n}var c=function(){var t=this;function c(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function l(t,n,r,i,s){e(!(i%r));do{t[n+(i-=r)]=s}while(0<i)}function u(t,n,r,i,o){if(e(2328>=o),512>=o)var a=s(512);else if(null==(a=s(o)))return 0;return function(t,n,r,i,o,a){var u,d,f=n,p=1<<r,g=s(16),m=s(16);for(e(0!=o),e(null!=i),e(null!=t),e(0<r),d=0;d<o;++d){if(15<i[d])return 0;++g[i[d]]}if(g[0]==o)return 0;for(m[1]=0,u=1;15>u;++u){if(g[u]>1<<u)return 0;m[u+1]=m[u]+g[u]}for(d=0;d<o;++d)u=i[d],0<i[d]&&(a[m[u]++]=d);if(1==m[15])return(i=new h).g=0,i.value=a[0],l(t,f,1,p,i),p;var v,y=-1,b=p-1,w=0,_=1,x=1,S=1<<r;for(d=0,u=1,o=2;u<=r;++u,o<<=1){if(_+=x<<=1,0>(x-=g[u]))return 0;for(;0<g[u];--g[u])(i=new h).g=u,i.value=a[d++],l(t,f+w,o,S,i),w=c(w,u)}for(u=r+1,o=2;15>=u;++u,o<<=1){if(_+=x<<=1,0>(x-=g[u]))return 0;for(;0<g[u];--g[u]){if(i=new h,(w&b)!=y){for(f+=S,v=1<<(y=u)-r;15>y&&!(0>=(v-=g[y]));)++y,v<<=1;p+=S=1<<(v=y-r),t[n+(y=w&b)].g=v+r,t[n+y].value=f-n-y}i.g=u-r,i.value=a[d++],l(t,f+(w>>r),o,S,i),w=c(w,u)}}return _!=2*m[15]-1?0:p}(t,n,r,i,o,a)}function h(){this.value=this.g=0}function d(){this.value=this.g=0}function f(){this.G=o(5,h),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Bn,d)}function p(t,n,r,i){e(null!=t),e(null!=n),e(2147483648>i),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=r,t.Jd=n,t.Yc=r+i,t.Zc=4<=i?r+i-4+1:r,E(t)}function g(t,e){for(var n=0;0<e--;)n|=k(t,128)<<e;return n}function m(t,e){var n=g(t,e);return T(t)?-n:n}function v(t,n,r,i){var s,o=0;for(e(null!=t),e(null!=n),e(4294967288>i),t.Sb=i,t.Ra=0,t.u=0,t.h=0,4<i&&(i=4),s=0;s<i;++s)o+=n[r+s]<<8*s;t.Ra=o,t.bb=i,t.oa=n,t.pa=r}function y(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<qn-8>>>0,++t.bb,t.u-=8;S(t)&&(t.h=1,t.u=0)}function b(t,n){if(e(0<=n),!t.h&&n<=Un){var r=x(t)&Vn[n];return t.u+=n,y(t),r}return t.h=1,t.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(t){return t.Ra>>>(t.u&qn-1)>>>0}function S(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>qn}function I(t,e){t.u=e,t.h=S(t)}function A(t){t.u>=zn&&(e(t.u>=zn),y(t))}function E(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function T(t){return g(t,1)}function k(t,e){var n=t.Ca;0>t.b&&E(t);var r=t.b,i=n*e>>>8,s=(t.I>>>r>i)+0;for(s?(n-=i,t.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Hn[r],t.b-=r,t.Ca=(n<<r)-1,s}function N(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function L(t,e){return t[e+0]|t[e+1]<<8}function C(t,e){return L(t,e)|t[e+2]<<16}function P(t,e){return L(t,e)|L(t,e+2)<<16}function O(t,n){var r=1<<n;return e(null!=t),e(0<n),t.X=s(r),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function R(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),r(n.X,0,t.X,0,1<<n.Xa)}function D(){this.X=[],this.Xa=this.Mb=0}function M(t,n,r,i){e(null!=r),e(null!=i);var s=r[0],o=i[0];return 0==s&&(s=(t*o+n/2)/n),0==o&&(o=(n*s+t/2)/t),0>=s||0>=o?0:(r[0]=s,i[0]=o,1)}function F(t,e){return t+(1<<e)-1>>>e}function j(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function B(e,n){t[n]=function(n,r,i,s,o,a,c){var l;for(l=0;l<o;++l){var u=t[e](a[c+l-1],i,s+l);a[c+l]=j(n[r+l],u)}}}function V(){this.ud=this.hd=this.jd=0}function U(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function q(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function z(t,e){return q(t+(t-e+.5>>1))}function H(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function W(t,e,n,r,i,s,o){for(r=s[o-1],n=0;n<i;++n)s[o+n]=r=j(t[e+n],r)}function $(t,e,n,r,i){var s;for(s=0;s<n;++s){var o=t[e+s],a=o>>8&255,c=16711935&(c=(c=16711935&o)+((a<<16)+a));r[i+s]=(4278255360&o)+c>>>0}}function G(t,e){e.jd=255&t,e.hd=t>>8&255,e.ud=t>>16&255}function K(t,e,n,r,i,s){var o;for(o=0;o<r;++o){var a=e[n+o],c=a>>>8,l=a,u=255&(u=(u=a>>>16)+((t.jd<<24>>24)*(c<<24>>24)>>>5));l=255&(l=(l+=(t.hd<<24>>24)*(c<<24>>24)>>>5)+((t.ud<<24>>24)*(u<<24>>24)>>>5)),i[s+o]=(4278255360&a)+(u<<16)+l}}function Y(e,n,r,i,s){t[n]=function(t,e,n,r,o,a,c,l,u){for(r=c;r<l;++r)for(c=0;c<u;++c)o[a++]=s(n[i(t[e++])])},t[e]=function(e,n,o,a,c,l,u){var h=8>>e.b,d=e.Ea,f=e.K[0],p=e.w;if(8>h)for(e=(1<<e.b)-1,p=(1<<h)-1;n<o;++n){var g,m=0;for(g=0;g<d;++g)g&e||(m=i(a[c++])),l[u++]=s(f[m&p]),m>>=h}else t["VP8LMapColor"+r](a,c,f,p,l,u,n,o,d)}}function Q(t,e,n,r,i){for(n=e+n;e<n;){var s=t[e++];r[i++]=s>>16&255,r[i++]=s>>8&255,r[i++]=255&s}}function J(t,e,n,r,i){for(n=e+n;e<n;){var s=t[e++];r[i++]=s>>16&255,r[i++]=s>>8&255,r[i++]=255&s,r[i++]=s>>24&255}}function X(t,e,n,r,i){for(n=e+n;e<n;){var s=(o=t[e++])>>16&240|o>>12&15,o=240&o|o>>28&15;r[i++]=s,r[i++]=o}}function Z(t,e,n,r,i){for(n=e+n;e<n;){var s=(o=t[e++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;r[i++]=s,r[i++]=o}}function tt(t,e,n,r,i){for(n=e+n;e<n;){var s=t[e++];r[i++]=255&s,r[i++]=s>>8&255,r[i++]=s>>16&255}}function et(t,e,n,i,s,o){if(0==o)for(n=e+n;e<n;)N(i,((o=t[e++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),s+=32;else r(i,s,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function rt(t){return t==zr||t==Hr||t==Wr||t==$r}function it(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ot(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new it,this.f.kb=new st,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ct(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lt(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ut(t,e){var n=t.T,i=e.ba.f.RGBA,s=i.eb,o=i.fb+t.ka*i.A,a=vi[e.ba.S],c=t.y,l=t.O,u=t.f,h=t.N,d=t.ea,f=t.W,p=e.cc,g=e.dc,m=e.Mc,v=e.Nc,y=t.ka,b=t.ka+t.T,w=t.U,_=w+1>>1;for(0==y?a(c,l,null,null,u,h,d,f,u,h,d,f,s,o,null,null,w):(a(e.ec,e.fc,c,l,p,g,m,v,u,h,d,f,s,o-i.A,s,o,w),++n);y+2<b;y+=2)p=u,g=h,m=d,v=f,h+=t.Rc,f+=t.Rc,o+=2*i.A,a(c,(l+=2*t.fa)-t.fa,c,l,p,g,m,v,u,h,d,f,s,o-i.A,s,o,w);return l+=t.fa,t.j+b<t.o?(r(e.ec,e.fc,c,l,w),r(e.cc,e.dc,u,h,_),r(e.Mc,e.Nc,d,f,_),n--):1&b||a(c,l,null,null,u,h,d,f,u,h,d,f,s,o+i.A,null,null,w),n}function ht(t,n,r){var i=t.F,s=[t.J];if(null!=i){var o=t.U,a=n.ba.S,c=a==Vr||a==Wr;n=n.ba.f.RGBA;var l=[0],u=t.ka;l[0]=t.T,t.Kb&&(0==u?--l[0]:(--u,s[0]-=t.width),t.j+t.ka+t.T==t.o&&(l[0]=t.o-t.j-u));var h=n.eb;u=n.fb+u*n.A,t=Ar(i,s[0],t.width,o,l,h,u+(c?0:3),n.A),e(r==l),t&&rt(a)&&Sr(h,u,c,o,l,n.A)}return 0}function dt(t){var e=t.ma,n=e.ba.S,r=11>n,i=n==Fr||n==Br||n==Vr||n==Ur||12==n||rt(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Mn(e.Oa,t,i?11:12))return 0;if(i&&rt(n)&&bn(),t.da)alert("todo:use_scaling");else{if(r){if(e.Ib=lt,t.Kb){if(n=t.U+1>>1,e.memory=s(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ut,bn()}}else alert("todo:EmitYUV");i&&(e.Jb=ht,r&&vn())}if(r&&!Ci){for(t=0;256>t;++t)Pi[t]=89858*(t-128)+Ei>>Ai,Di[t]=-22014*(t-128)+Ei,Ri[t]=-45773*(t-128),Oi[t]=113618*(t-128)+Ei>>Ai;for(t=Ti;t<ki;++t)e=76283*(t-16)+Ei>>Ai,Mi[t-Ti]=Wt(e,255),Fi[t-Ti]=Wt(e+8>>4,15);Ci=1}return 1}function ft(t){var n=t.ma,r=t.U,i=t.T;return e(!(1&t.ka)),0>=r||0>=i?0:(r=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,r),n.Dc+=r,1)}function pt(t){t.ma.memory=null}function gt(t,e,n,r){return 47!=b(t,8)?0:(e[0]=b(t,14)+1,n[0]=b(t,14)+1,r[0]=b(t,1),0!=b(t,3)?0:!t.h)}function mt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+b(e,n)+1}function vt(t,e){return 120<e?e-120:1<=(n=((n=Xr[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function yt(t,e,n){var r=x(n),i=t[e+=255&r].g-8;return 0<i&&(I(n,n.u+8),r=x(n),e+=t[e].value,e+=r&(1<<i)-1),I(n,n.u+t[e].g),t[e].value}function bt(t,n,r){return r.g+=t.g,r.value+=t.value<<n>>>0,e(8>=r.g),t.g}function wt(t,n,r){var i=t.xc;return e((n=0==i?0:t.vc[t.md*(r>>i)+(n>>i)])<t.Wb),t.Ya[n]}function _t(t,n,i,s){var o=t.ab,a=t.c*n,c=t.C;n=c+n;var l=i,u=s;for(s=t.Ta,i=t.Ua;0<o--;){var h=t.gc[o],d=c,f=n,p=l,g=u,m=(u=s,l=i,h.Ea);switch(e(d<f),e(f<=h.nc),h.hc){case 2:Gn(p,g,(f-d)*m,u,l);break;case 0:var v=d,y=f,b=u,w=l,_=(E=h).Ea;0==v&&(Wn(p,g,null,null,1,b,w),W(p,g+1,0,0,_-1,b,w+1),g+=_,w+=_,++v);for(var x=1<<E.b,S=x-1,I=F(_,E.b),A=E.K,E=E.w+(v>>E.b)*I;v<y;){var T=A,k=E,N=1;for($n(p,g,b,w-_,1,b,w);N<_;){var L=(N&~S)+x;L>_&&(L=_),(0,Xn[T[k++]>>8&15])(p,g+ +N,b,w+N-_,L-N,b,w+N),N=L}g+=_,w+=_,++v&S||(E+=I)}f!=h.nc&&r(u,l-m,u,l+(f-d-1)*m,m);break;case 1:for(m=p,y=g,_=(p=h.Ea)-(w=p&~(b=(g=1<<h.b)-1)),v=F(p,h.b),x=h.K,h=h.w+(d>>h.b)*v;d<f;){for(S=x,I=h,A=new V,E=y+w,T=y+p;y<E;)G(S[I++],A),Zn(A,m,y,g,u,l),y+=g,l+=g;y<T&&(G(S[I++],A),Zn(A,m,y,_,u,l),y+=_,l+=_),++d&b||(h+=v)}break;case 3:if(p==u&&g==l&&0<h.b){for(y=u,p=m=l+(f-d)*m-(w=(f-d)*F(h.Ea,h.b)),g=u,b=l,v=[],w=(_=w)-1;0<=w;--w)v[w]=g[b+w];for(w=_-1;0<=w;--w)y[p+w]=v[w];Kn(h,d,f,u,m,u,l)}else Kn(h,d,f,p,g,u,l)}l=s,u=i}u!=i&&r(s,i,l,u,a)}function xt(t,n){var r=t.V,i=t.Ba+t.c*t.C,s=n-t.C;if(e(n<=t.l.o),e(16>=s),0<s){var o=t.l,a=t.Ta,c=t.Ua,l=o.width;if(_t(t,s,r,i),s=c=[c],e((r=t.C)<(i=n)),e(o.v<o.va),i>o.o&&(i=o.o),r<o.j){var u=o.j-r;r=o.j,s[0]+=u*l}if(r>=i?r=0:(s[0]+=4*o.v,o.ka=r-o.j,o.U=o.va-o.v,o.T=i-r,r=1),r){if(c=c[0],11>(r=t.ca).S){var h=r.f.RGBA,d=(i=r.S,s=o.U,o=o.T,u=h.eb,h.A),f=o;for(h=h.fb+t.Ma*h.A;0<f--;){var p=a,g=c,m=s,v=u,y=h;switch(i){case Mr:tr(p,g,m,v,y);break;case Fr:er(p,g,m,v,y);break;case zr:er(p,g,m,v,y),Sr(v,y,0,m,1,0);break;case jr:ir(p,g,m,v,y);break;case Br:et(p,g,m,v,y,1);break;case Hr:et(p,g,m,v,y,1),Sr(v,y,0,m,1,0);break;case Vr:et(p,g,m,v,y,0);break;case Wr:et(p,g,m,v,y,0),Sr(v,y,1,m,1,0);break;case Ur:nr(p,g,m,v,y);break;case $r:nr(p,g,m,v,y),Ir(v,y,m,1,0);break;case qr:rr(p,g,m,v,y);break;default:e(0)}c+=l,h+=d}t.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=r.height)}}t.C=n,e(t.C<=t.i)}function St(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,r=t.Ya[e].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function It(t,n,r,i,s,o){if(0!=t.Z){var a=t.qd,c=t.rd;for(e(null!=mi[t.Z]);n<r;++n)mi[t.Z](a,c,i,s,i,s,o),a=i,c=s,s+=o;t.qd=a,t.rd=c}}function At(t,n){var r=t.l.ma,i=0==r.Z||1==r.Z?t.l.j:t.C;if(i=t.C<i?i:t.C,e(n<=t.l.o),n>i){var s=t.l.width,o=r.ca,a=r.tb+s*i,c=t.V,l=t.Ba+t.c*i,u=t.gc;e(1==t.ab),e(3==u[0].hc),Qn(u[0],i,n,c,l,o,a),It(r,i,n,o,a,s)}t.C=t.Ma=n}function Et(t,n,r,i,s,o,a){var c=t.$/i,l=t.$%i,u=t.m,h=t.s,d=r+t.$,f=d;s=r+i*s;var p=r+i*o,g=280+h.ua,m=t.Pb?c:16777216,v=0<h.ua?h.Wa:null,y=h.wc,b=d<p?wt(h,l,c):null;e(t.C<o),e(p<=s);var w=!1;t:for(;;){for(;w||d<p;){var _=0;if(c>=m){var E=d-r;e((m=t).Pb),m.wd=m.m,m.xd=E,0<m.s.ua&&R(m.s.Wa,m.s.vb),m=c+ti}if(l&y||(b=wt(h,l,c)),e(null!=b),b.Qb&&(n[d]=b.qb,w=!0),!w)if(A(u),b.jc){_=u,E=n;var T=d,k=b.pd[x(_)&Bn-1];e(b.jc),256>k.g?(I(_,_.u+k.g),E[T]=k.value,_=0):(I(_,_.u+k.g-256),e(256<=k.value),_=k.value),0==_&&(w=!0)}else _=yt(b.G[0],b.H[0],u);if(u.h)break;if(w||256>_){if(!w)if(b.nd)n[d]=(b.qb|_<<8)>>>0;else{if(A(u),w=yt(b.G[1],b.H[1],u),A(u),E=yt(b.G[2],b.H[2],u),T=yt(b.G[3],b.H[3],u),u.h)break;n[d]=(T<<24|w<<16|_<<8|E)>>>0}if(w=!1,++d,++l>=i&&(l=0,++c,null!=a&&c<=o&&!(c%16)&&a(t,c),null!=v))for(;f<d;)_=n[f++],v.X[(506832829*_&4294967295)>>>v.Mb]=_}else if(280>_){if(_=mt(_-256,u),E=yt(b.G[4],b.H[4],u),A(u),E=vt(i,E=mt(E,u)),u.h)break;if(d-r<E||s-d<_)break t;for(T=0;T<_;++T)n[d+T]=n[d+T-E];for(d+=_,l+=_;l>=i;)l-=i,++c,null!=a&&c<=o&&!(c%16)&&a(t,c);if(e(d<=s),l&y&&(b=wt(h,l,c)),null!=v)for(;f<d;)_=n[f++],v.X[(506832829*_&4294967295)>>>v.Mb]=_}else{if(!(_<g))break t;for(w=_-280,e(null!=v);f<d;)_=n[f++],v.X[(506832829*_&4294967295)>>>v.Mb]=_;_=d,e(!(w>>>(E=v).Xa)),n[_]=E.X[w],w=!0}w||e(u.h==S(u))}if(t.Pb&&u.h&&d<s)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&R(t.s.vb,t.s.Wa);else{if(u.h)break t;null!=a&&a(t,c>o?o:c),t.a=0,t.$=d-r}return 1}return t.a=3,0}function Tt(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function kt(){var e=new an;return null==e?null:(e.a=0,e.xb=gi,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Gn=$,Zn=K,tr=Q,er=J,nr=X,rr=Z,ir=tt,t.VP8LMapColor32b=Yn,t.VP8LMapColor8b=Jn,e)}function Nt(t,n,r,a,c){var l=1,d=[t],p=[n],g=a.m,m=a.s,v=null,y=0;t:for(;;){if(r)for(;l&&b(g,1);){var w=d,_=p,S=a,E=1,T=S.m,k=S.gc[S.ab],N=b(T,2);if(S.Oc&1<<N)l=0;else{switch(S.Oc|=1<<N,k.hc=N,k.Ea=w[0],k.nc=_[0],k.K=[null],++S.ab,e(4>=S.ab),N){case 0:case 1:k.b=b(T,3)+2,E=Nt(F(k.Ea,k.b),F(k.nc,k.b),0,S,k.K),k.K=k.K[0];break;case 3:var L,C=b(T,8)+1,P=16<C?0:4<C?1:2<C?2:3;if(w[0]=F(k.Ea,P),k.b=P,L=E=Nt(C,1,0,S,k.K)){var R,D=C,M=k,B=1<<(8>>M.b),V=s(B);if(null==V)L=0;else{var U=M.K[0],q=M.w;for(V[0]=M.K[0][0],R=1;R<1*D;++R)V[R]=j(U[q+R],V[R-1]);for(;R<4*B;++R)V[R]=0;M.K[0]=null,M.K[0]=V,L=1}}E=L;break;case 2:break;default:e(0)}l=E}}if(d=d[0],p=p[0],l&&b(g,1)&&!(l=1<=(y=b(g,4))&&11>=y)){a.a=3;break t}var z;if(z=l)e:{var H,W,$,G=a,K=d,Y=p,Q=y,J=r,X=G.m,Z=G.s,tt=[null],et=1,nt=0,rt=Zr[Q];n:for(;;){if(J&&b(X,1)){var it=b(X,3)+2,st=F(K,it),ot=F(Y,it),at=st*ot;if(!Nt(st,ot,0,G,tt))break n;for(tt=tt[0],Z.xc=it,H=0;H<at;++H){var ct=tt[H]>>8&65535;tt[H]=ct,ct>=et&&(et=ct+1)}}if(X.h)break n;for(W=0;5>W;++W){var lt=Yr[W];!W&&0<Q&&(lt+=1<<Q),nt<lt&&(nt=lt)}var ut=o(et*rt,h),ht=et,dt=o(ht,f);if(null==dt)var ft=null;else e(65536>=ht),ft=dt;var pt=s(nt);if(null==ft||null==pt||null==ut){G.a=1;break n}var gt=ut;for(H=$=0;H<et;++H){var mt=ft[H],vt=mt.G,yt=mt.H,wt=0,_t=1,xt=0;for(W=0;5>W;++W){lt=Yr[W],vt[W]=gt,yt[W]=$,!W&&0<Q&&(lt+=1<<Q);r:{var St,It=lt,At=G,kt=pt,Lt=gt,Ct=$,Pt=0,Ot=At.m,Rt=b(Ot,1);if(i(kt,0,0,It),Rt){var Dt=b(Ot,1)+1,Mt=b(Ot,1),Ft=b(Ot,0==Mt?1:8);kt[Ft]=1,2==Dt&&(kt[Ft=b(Ot,8)]=1);var jt=1}else{var Bt=s(19),Vt=b(Ot,4)+4;if(19<Vt){At.a=3;var Ut=0;break r}for(St=0;St<Vt;++St)Bt[Jr[St]]=b(Ot,3);var qt=void 0,zt=void 0,Ht=At,Wt=Bt,$t=It,Gt=kt,Kt=0,Yt=Ht.m,Qt=8,Jt=o(128,h);i:for(;u(Jt,0,7,Wt,19);){if(b(Yt,1)){var Xt=2+2*b(Yt,3);if((qt=2+b(Yt,Xt))>$t)break i}else qt=$t;for(zt=0;zt<$t&&qt--;){A(Yt);var Zt=Jt[0+(127&x(Yt))];I(Yt,Yt.u+Zt.g);var te=Zt.value;if(16>te)Gt[zt++]=te,0!=te&&(Qt=te);else{var ee=16==te,ne=te-16,re=Kr[ne],ie=b(Yt,Gr[ne])+re;if(zt+ie>$t)break i;for(var se=ee?Qt:0;0<ie--;)Gt[zt++]=se}}Kt=1;break i}Kt||(Ht.a=3),jt=Kt}(jt=jt&&!Ot.h)&&(Pt=u(Lt,Ct,8,kt,It)),jt&&0!=Pt?Ut=Pt:(At.a=3,Ut=0)}if(0==Ut)break n;if(_t&&1==Qr[W]&&(_t=0==gt[$].g),wt+=gt[$].g,$+=Ut,3>=W){var oe,ae=pt[0];for(oe=1;oe<lt;++oe)pt[oe]>ae&&(ae=pt[oe]);xt+=ae}}if(mt.nd=_t,mt.Qb=0,_t&&(mt.qb=(vt[3][yt[3]+0].value<<24|vt[1][yt[1]+0].value<<16|vt[2][yt[2]+0].value)>>>0,0==wt&&256>vt[0][yt[0]+0].value&&(mt.Qb=1,mt.qb+=vt[0][yt[0]+0].value<<8)),mt.jc=!mt.Qb&&6>xt,mt.jc){var ce,le=mt;for(ce=0;ce<Bn;++ce){var ue=ce,he=le.pd[ue],de=le.G[0][le.H[0]+ue];256<=de.value?(he.g=de.g+256,he.value=de.value):(he.g=0,he.value=0,ue>>=bt(de,8,he),ue>>=bt(le.G[1][le.H[1]+ue],16,he),ue>>=bt(le.G[2][le.H[2]+ue],0,he),bt(le.G[3][le.H[3]+ue],24,he))}}}Z.vc=tt,Z.Wb=et,Z.Ya=ft,Z.yc=ut,z=1;break e}z=0}if(!(l=z)){a.a=3;break t}if(0<y){if(m.ua=1<<y,!O(m.Wa,y)){a.a=1,l=0;break t}}else m.ua=0;var fe=a,pe=d,ge=p,me=fe.s,ve=me.xc;if(fe.c=pe,fe.i=ge,me.md=F(pe,ve),me.wc=0==ve?-1:(1<<ve)-1,r){a.xb=pi;break t}if(null==(v=s(d*p))){a.a=1,l=0;break t}l=(l=Et(a,v,0,d,p,p,null))&&!g.h;break t}return l?(null!=c?c[0]=v:(e(null==v),e(r)),a.$=0,r||Tt(m)):Tt(m),l}function Lt(t,n){var r=t.c*t.i,i=r+n+16*n;return e(t.c<=n),t.V=s(i),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+r+n,1)}function Ct(t,n){var r=t.C,i=n-r,s=t.V,o=t.Ba+t.c*r;for(e(n<=t.l.o);0<i;){var a=16<i?16:i,c=t.l.ma,l=t.l.width,u=l*a,h=c.ca,d=c.tb+l*r,f=t.Ta,p=t.Ua;_t(t,a,s,o),Er(f,p,h,d,u),It(c,r,r+a,h,d,l),i-=a,s+=a*t.c,r+=a}e(r==n),t.C=t.Ma=n}function Pt(){this.ub=this.yd=this.td=this.Rb=0}function Ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Dt(){this.Yb=function(){var t=[];return function t(e,n,r){for(var i=r[n],s=0;s<i&&(e.push(r.length>n+1?[]:0),!(r.length<n+1));s++)t(e[s],n+1,r)}(t,0,[3,11]),t}()}function Mt(){this.jb=s(3),this.Wc=a([4,8],Dt),this.Xc=a([4,17],Dt)}function Ft(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function jt(){this.ld=this.La=this.dd=this.tc=0}function Bt(){this.Na=this.la=0}function Vt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ut(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qt(){this.uc=this.M=this.Nb=0,this.wa=Array(new jt),this.Y=0,this.ya=Array(new Ut),this.aa=0,this.l=new $t}function zt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ht(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Pt,this.Kc=new Ot,this.ed=new Ft,this.Qa=new Rt,this.Ic=this.$c=this.Aa=0,this.D=new qt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,w),this.ia=0,this.pb=o(4,Vt),this.Pa=new Mt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zt),this.Hd=0,this.rb=Array(new Bt),this.sb=0,this.wa=Array(new jt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ut),this.L=this.aa=0,this.gd=a([4,2],jt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wt(t,e){return 0>t?0:t>e?e:t}function $t(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gt(){var t=new Ht;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ri||(ri=Jt)),t}function Kt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Yt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Qt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Kt(t,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,s=n.w,o=n.ha;if(4>o)return Kt(t,7,"Truncated header.");var a=r[s+0]|r[s+1]<<8|r[s+2]<<16,c=t.Od;if(c.Rb=!(1&a),c.td=a>>1&7,c.yd=a>>4&1,c.ub=a>>5,3<c.td)return Kt(t,3,"Incorrect keyframe parameters.");if(!c.yd)return Kt(t,4,"Frame not displayable.");s+=3,o-=3;var l=t.Kc;if(c.Rb){if(7>o)return Kt(t,7,"cannot parse picture header");if(!Yt(r,s,o))return Kt(t,3,"Bad code word");l.c=16383&(r[s+4]<<8|r[s+3]),l.Td=r[s+4]>>6,l.i=16383&(r[s+6]<<8|r[s+5]),l.Ud=r[s+6]>>6,s+=7,o-=7,t.za=l.c+15>>4,t.Ub=l.i+15>>4,n.width=l.c,n.height=l.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,i(a.Zb,0,0,a.Zb.length),i(a.Lb,0,0,a.Lb)}if(c.ub>o)return Kt(t,7,"bad partition length");p(a=t.m,r,s,c.ub),s+=c.ub,o-=c.ub,c.Rb&&(l.Ld=T(a),l.Kd=T(a)),l=t.Qa;var u,h=t.Pa;if(e(null!=a),e(null!=l),l.Cb=T(a),l.Cb){if(l.Bb=T(a),T(a)){for(l.Fb=T(a),u=0;4>u;++u)l.Zb[u]=T(a)?m(a,7):0;for(u=0;4>u;++u)l.Lb[u]=T(a)?m(a,6):0}if(l.Bb)for(u=0;3>u;++u)h.jb[u]=T(a)?g(a,8):255}else l.Bb=0;if(a.Ka)return Kt(t,3,"cannot parse segment header");if((l=t.ed).zd=T(a),l.Tb=g(a,6),l.wb=g(a,3),l.Pc=T(a),l.Pc&&T(a)){for(h=0;4>h;++h)T(a)&&(l.vd[h]=m(a,6));for(h=0;4>h;++h)T(a)&&(l.od[h]=m(a,6))}if(t.L=0==l.Tb?0:l.zd?1:2,a.Ka)return Kt(t,3,"cannot parse filter header");var d=o;if(o=u=s,s=u+d,l=d,t.Xb=(1<<g(t.m,2))-1,d<3*(h=t.Xb))r=7;else{for(u+=3*h,l-=3*h,d=0;d<h;++d){var f=r[o+0]|r[o+1]<<8|r[o+2]<<16;f>l&&(f=l),p(t.Jc[+d],r,u,f),u+=f,l-=f,o+=3}p(t.Jc[+h],r,u,l),r=u<s?0:5}if(0!=r)return Kt(t,r,"cannot parse partitions");for(r=g(u=t.m,7),o=T(u)?m(u,4):0,s=T(u)?m(u,4):0,l=T(u)?m(u,4):0,h=T(u)?m(u,4):0,u=T(u)?m(u,4):0,d=t.Qa,f=0;4>f;++f){if(d.Cb){var v=d.Zb[f];d.Fb||(v+=r)}else{if(0<f){t.pb[f]=t.pb[0];continue}v=r}var y=t.pb[f];y.Sc[0]=ei[Wt(v+o,127)],y.Sc[1]=ni[Wt(v+0,127)],y.Eb[0]=2*ei[Wt(v+s,127)],y.Eb[1]=101581*ni[Wt(v+l,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ei[Wt(v+h,117)],y.Qc[1]=ni[Wt(v+u,127)],y.lc=v+u}if(!c.Rb)return Kt(t,4,"Not a key frame.");for(T(a),c=t.Pa,r=0;4>r;++r){for(o=0;8>o;++o)for(s=0;3>s;++s)for(l=0;11>l;++l)h=k(a,li[r][o][s][l])?g(a,8):ai[r][o][s][l],c.Wc[r][o].Yb[s][l]=h;for(o=0;17>o;++o)c.Xc[r][o]=c.Wc[r][ui[o]]}return t.kc=T(a),t.kc&&(t.Bd=g(a,8)),t.cb=1}function Jt(t,e,n,r,i,s,o){var a=e[i].Yb[n];for(n=0;16>i;++i){if(!k(t,a[n+0]))return i;for(;!k(t,a[n+1]);)if(a=e[++i].Yb[0],n=0,16==i)return 16;var c=e[i+1].Yb;if(k(t,a[n+2])){var l=t,u=0;if(k(l,(d=a)[(h=n)+3]))if(k(l,d[h+6])){for(a=0,h=2*(u=k(l,d[h+8]))+(d=k(l,d[h+9+u])),u=0,d=ii[h];d[a];++a)u+=u+k(l,d[a]);u+=3+(8<<h)}else k(l,d[h+7])?(u=7+2*k(l,165),u+=k(l,145)):u=5+k(l,159);else u=k(l,d[h+4])?3+k(l,d[h+5]):2;a=c[2]}else u=1,a=c[1];c=o+si[i],0>(l=t).b&&E(l);var h,d=l.b,f=(h=l.Ca>>1)-(l.I>>d)>>31;--l.b,l.Ca+=f,l.Ca|=1,l.I-=(h+1&f)<<d,s[c]=((u^f)-f)*r[(0<i)+0]}return 16}function Xt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,i(t.zc,0,0,t.zc.length),t.ja=0}function Zt(t,n){if(null==t)return 0;if(null==n)return Kt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Qt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var a=Bi[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-a>>4,t.zb=n.j-a>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+a>>4,t.Hb=n.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var c=t.ed;for(a=0;4>a;++a){var l;if(t.Qa.Cb){var u=t.Qa.Lb[a];t.Qa.Fb||(u+=c.Tb)}else u=c.Tb;for(l=0;1>=l;++l){var h=t.gd[a][l],d=u;if(c.Pc&&(d+=c.vd[0],l&&(d+=c.od[0])),0<(d=0>d?0:63<d?63:d)){var f=d;0<c.wb&&(f=4<c.wb?f>>2:f>>1)>9-c.wb&&(f=9-c.wb),1>f&&(f=1),h.dd=f,h.tc=2*d+f,h.ld=40<=d?2:15<=d?1:0}else h.tc=0;h.La=l}}}a=0}else Kt(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){t.$c=0,0<t.Aa||(t.Ic=Ui);t:{a=t.Ic,c=4*(f=t.za);var p=32*f,g=f+1,m=0<t.L?f*(0<t.Aa?2:1):0,v=(2==t.Aa?2:1)*f;if((h=c+832+(l=3*(16*a+Bi[t.L])/2*p)+(u=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)a=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=s(h),t.Fc=0,null==t.Ec){a=Kt(t,1,"no memory during frame initialization.");break t}t.Vb=h}h=t.Ec,d=t.Fc,t.Ac=h,t.Bc=d,d+=c,t.Gd=o(p,zt),t.Hd=0,t.rb=o(g+1,Bt),t.sb=1,t.wa=m?o(m,jt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=f),e(!0),t.oc=h,t.pc=d,d+=832,t.ya=o(v,Ut),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=f),t.R=16*f,t.B=8*f,f=(p=Bi[t.L])*t.R,p=p/2*t.B,t.sa=h,t.ta=d+f,t.qa=t.sa,t.ra=t.ta+16*a*t.R+p,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+p,t.$c=0,d+=l,t.mb=u?h:null,t.nb=u?d:null,e(d+u<=t.Fc+t.Vb),Xt(t),i(t.Ac,t.Bc,0,c),a=1}}if(a){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Cr){for(a=-255;255>=a;++a)Tr[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)kr[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)Nr[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Lr[255+a]=0>a?0:255<a?255:a;Cr=1}sr=le,or=se,cr=oe,lr=ae,ur=ce,ar=ie,hr=Ke,dr=Ye,fr=Xe,pr=Ze,gr=Qe,mr=Je,vr=tn,yr=en,br=qe,wr=ze,_r=He,xr=We,di[0]=Ie,di[1]=he,di[2]=xe,di[3]=Se,di[4]=Ae,di[5]=Te,di[6]=Ee,di[7]=ke,di[8]=Le,di[9]=Ne,hi[0]=ve,hi[1]=fe,hi[2]=pe,hi[3]=ge,hi[4]=ye,hi[5]=be,hi[6]=we,fi[0]=Re,fi[1]=de,fi[2]=Ce,fi[3]=Pe,fi[4]=Me,fi[5]=De,fi[6]=Fe,a=1}else a=0}a&&(a=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var o,a=t.Jc[t.M&t.Xb],c=t.m,l=t;for(o=0;o<l.za;++o){var u=c,h=l,d=h.Ac,f=h.Bc+4*o,p=h.zc,g=h.ya[h.aa+o];if(h.Qa.Bb?g.$b=k(u,h.Pa.jb[0])?2+k(u,h.Pa.jb[2]):k(u,h.Pa.jb[1]):g.$b=0,h.kc&&(g.Ad=k(u,h.Bd)),g.Za=!k(u,145)+0,g.Za){var m=g.Ob,v=0;for(h=0;4>h;++h){var y,b=p[0+h];for(y=0;4>y;++y){b=ci[d[f+y]][b];for(var w=oi[k(u,b[0])];0<w;)w=oi[2*w+k(u,b[w])];b=-w,d[f+y]=b}r(m,v,d,f,4),v+=4,p[0+h]=b}}else b=k(u,156)?k(u,128)?1:3:k(u,163)?2:0,g.Ob[0]=b,i(d,f,b,4),i(p,0,b,4);g.Dd=k(u,142)?k(u,114)?k(u,183)?1:3:2:0}if(l.m.Ka)return Kt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(l=a,u=(c=t).rb[c.sb-1],d=c.rb[c.sb+c.ja],o=c.ya[c.aa+c.ja],f=c.kc?o.Ad:0)u.la=d.la=0,o.Za||(u.Na=d.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var _,x;if(u=d,d=l,f=c.Pa.Xc,p=c.ya[c.aa+c.ja],g=c.pb[p.$b],h=p.ad,m=0,v=c.rb[c.sb-1],b=y=0,i(h,m,0,384),p.Za)var S=0,I=f[3];else{w=s(16);var A=u.Na+v.Na;if(A=ri(d,f[1],A,g.Eb,0,w,0),u.Na=v.Na=(0<A)+0,1<A)sr(w,0,h,m);else{var E=w[0]+3>>3;for(w=0;256>w;w+=16)h[m+w]=E}S=1,I=f[0]}var T=15&u.la,N=15&v.la;for(w=0;4>w;++w){var L=1&N;for(E=x=0;4>E;++E)T=T>>1|(L=(A=ri(d,I,A=L+(1&T),g.Sc,S,h,m))>S)<<7,x=x<<2|(3<A?3:1<A?2:0!=h[m+0]),m+=16;T>>=4,N=N>>1|L<<7,y=(y<<8|x)>>>0}for(I=T,S=N>>4,_=0;4>_;_+=2){for(x=0,T=u.la>>4+_,N=v.la>>4+_,w=0;2>w;++w){for(L=1&N,E=0;2>E;++E)A=L+(1&T),T=T>>1|(L=0<(A=ri(d,f[2],A,g.Qc,0,h,m)))<<3,x=x<<2|(3<A?3:1<A?2:0!=h[m+0]),m+=16;T>>=2,N=N>>1|L<<5}b|=x<<4*_,I|=T<<4<<_,S|=(240&N)<<_}u.la=I,v.la=S,p.Hc=y,p.Gc=b,p.ia=43690&b?0:g.ia,f=!(y|b)}if(0<c.L&&(c.wa[c.Y+c.ja]=c.gd[o.$b][o.Za],c.wa[c.Y+c.ja].La|=!f),l.Ka)return Kt(t,7,"Premature end-of-file encountered.")}if(Xt(t),c=n,l=1,o=(a=t).D,u=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(o.M=a.M,o.uc=u,Rn(a,o),l=1,o=(x=a.D).Nb,u=(b=Bi[a.L])*a.R,d=b/2*a.B,w=16*o*a.R,E=8*o*a.B,f=a.sa,p=a.ta-u+w,g=a.qa,h=a.ra-d+E,m=a.Ha,v=a.Ia-d+E,N=0==(T=x.M),y=T>=a.Va-1,2==a.Aa&&Rn(a,x),x.uc)for(L=(A=a).D.M,e(A.D.uc),x=A.yb;x<A.Hb;++x){S=x,I=L;var C=(P=(U=A).D).Nb;_=U.R;var P=P.wa[P.Y+S],O=U.sa,R=U.ta+16*C*_+16*S,D=P.dd,M=P.tc;if(0!=M)if(e(3<=M),1==U.L)0<S&&wr(O,R,_,M+4),P.La&&xr(O,R,_,M),0<I&&br(O,R,_,M+4),P.La&&_r(O,R,_,M);else{var F=U.B,j=U.qa,B=U.ra+8*C*F+8*S,V=U.Ha,U=U.Ia+8*C*F+8*S;C=P.ld,0<S&&(dr(O,R,_,M+4,D,C),pr(j,B,V,U,F,M+4,D,C)),P.La&&(mr(O,R,_,M,D,C),yr(j,B,V,U,F,M,D,C)),0<I&&(hr(O,R,_,M+4,D,C),fr(j,B,V,U,F,M+4,D,C)),P.La&&(gr(O,R,_,M,D,C),vr(j,B,V,U,F,M,D,C))}}if(a.ia&&alert("todo:DitherRow"),null!=c.put){if(x=16*T,T=16*(T+1),N?(c.y=a.sa,c.O=a.ta+w,c.f=a.qa,c.N=a.ra+E,c.ea=a.Ha,c.W=a.Ia+E):(x-=b,c.y=f,c.O=p,c.f=g,c.N=h,c.ea=m,c.W=v),y||(T-=b),T>c.o&&(T=c.o),c.F=null,c.J=null,null!=a.Fa&&0<a.Fa.length&&x<T&&(c.J=dn(a,c,x,T-x),c.F=a.mb,null==c.F&&0==c.F.length)){l=Kt(a,3,"Could not decode alpha data.");break t}x<c.j&&(b=c.j-x,x=c.j,e(!(1&b)),c.O+=a.R*b,c.N+=a.B*(b>>1),c.W+=a.B*(b>>1),null!=c.F&&(c.J+=c.width*b)),x<T&&(c.O+=c.v,c.N+=c.v>>1,c.W+=c.v>>1,null!=c.F&&(c.J+=c.v),c.ka=x-c.j,c.U=c.va-c.v,c.T=T-x,l=c.put(c))}o+1!=a.Ic||y||(r(a.sa,a.ta-u,f,p+16*a.R,u),r(a.qa,a.ra-d,g,h+8*a.B,d),r(a.Ha,a.Ia-d,m,v+8*a.B,d))}if(!l)return Kt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),a&=1}return a?(t.cb=0,a):0}function te(t,e,n,r,i){i=t[e+n+32*r]+(i>>3),t[e+n+32*r]=-256&i?0>i?0:255:i}function ee(t,e,n,r,i,s){te(t,e,0,n,r+i),te(t,e,1,n,r+s),te(t,e,2,n,r-s),te(t,e,3,n,r-i)}function ne(t){return(20091*t>>16)+t}function re(t,e,n,r){var i,o=0,a=s(16);for(i=0;4>i;++i){var c=t[e+0]+t[e+8],l=t[e+0]-t[e+8],u=(35468*t[e+4]>>16)-ne(t[e+12]),h=ne(t[e+4])+(35468*t[e+12]>>16);a[o+0]=c+h,a[o+1]=l+u,a[o+2]=l-u,a[o+3]=c-h,o+=4,e++}for(i=o=0;4>i;++i)c=(t=a[o+0]+4)+a[o+8],l=t-a[o+8],u=(35468*a[o+4]>>16)-ne(a[o+12]),te(n,r,0,0,c+(h=ne(a[o+4])+(35468*a[o+12]>>16))),te(n,r,1,0,l+u),te(n,r,2,0,l-u),te(n,r,3,0,c-h),o++,r+=32}function ie(t,e,n,r){var i=t[e+0]+4,s=35468*t[e+4]>>16,o=ne(t[e+4]),a=35468*t[e+1]>>16;ee(n,r,0,i+o,t=ne(t[e+1]),a),ee(n,r,1,i+s,t,a),ee(n,r,2,i-s,t,a),ee(n,r,3,i-o,t,a)}function se(t,e,n,r,i){re(t,e,n,r),i&&re(t,e+16,n,r+4)}function oe(t,e,n,r){or(t,e+0,n,r,1),or(t,e+32,n,r+128,1)}function ae(t,e,n,r){var i;for(t=t[e+0]+4,i=0;4>i;++i)for(e=0;4>e;++e)te(n,r,e,i,t)}function ce(t,e,n,r){t[e+0]&&lr(t,e+0,n,r),t[e+16]&&lr(t,e+16,n,r+4),t[e+32]&&lr(t,e+32,n,r+128),t[e+48]&&lr(t,e+48,n,r+128+4)}function le(t,e,n,r){var i,o=s(16);for(i=0;4>i;++i){var a=t[e+0+i]+t[e+12+i],c=t[e+4+i]+t[e+8+i],l=t[e+4+i]-t[e+8+i],u=t[e+0+i]-t[e+12+i];o[0+i]=a+c,o[8+i]=a-c,o[4+i]=u+l,o[12+i]=u-l}for(i=0;4>i;++i)a=(t=o[0+4*i]+3)+o[3+4*i],c=o[1+4*i]+o[2+4*i],l=o[1+4*i]-o[2+4*i],u=t-o[3+4*i],n[r+0]=a+c>>3,n[r+16]=u+l>>3,n[r+32]=a-c>>3,n[r+48]=u-l>>3,r+=64}function ue(t,e,n){var r,i=e-32,s=Rr,o=255-t[i-1];for(r=0;r<n;++r){var a,c=s,l=o+t[e-1];for(a=0;a<n;++a)t[e+a]=c[l+t[i+a]];e+=32}}function he(t,e){ue(t,e,4)}function de(t,e){ue(t,e,8)}function fe(t,e){ue(t,e,16)}function pe(t,e){var n;for(n=0;16>n;++n)r(t,e+32*n,t,e-32,16)}function ge(t,e){var n;for(n=16;0<n;--n)i(t,e,t[e-1],16),e+=32}function me(t,e,n){var r;for(r=0;16>r;++r)i(e,n+32*r,t,16)}function ve(t,e){var n,r=16;for(n=0;16>n;++n)r+=t[e-1+32*n]+t[e+n-32];me(r>>5,t,e)}function ye(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e-1+32*n];me(r>>4,t,e)}function be(t,e){var n,r=8;for(n=0;16>n;++n)r+=t[e+n-32];me(r>>4,t,e)}function we(t,e){me(128,t,e)}function _e(t,e,n){return t+2*e+n+2>>2}function xe(t,e){var n,i=e-32;for(i=new Uint8Array([_e(t[i-1],t[i+0],t[i+1]),_e(t[i+0],t[i+1],t[i+2]),_e(t[i+1],t[i+2],t[i+3]),_e(t[i+2],t[i+3],t[i+4])]),n=0;4>n;++n)r(t,e+32*n,i,0,i.length)}function Se(t,e){var n=t[e-1],r=t[e-1+32],i=t[e-1+64],s=t[e-1+96];N(t,e+0,16843009*_e(t[e-1-32],n,r)),N(t,e+32,16843009*_e(n,r,i)),N(t,e+64,16843009*_e(r,i,s)),N(t,e+96,16843009*_e(i,s,s))}function Ie(t,e){var n,r=4;for(n=0;4>n;++n)r+=t[e+n-32]+t[e-1+32*n];for(r>>=3,n=0;4>n;++n)i(t,e+32*n,r,4)}function Ae(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],c=t[e+2-32],l=t[e+3-32];t[e+0+96]=_e(r,i,t[e-1+96]),t[e+1+96]=t[e+0+64]=_e(n,r,i),t[e+2+96]=t[e+1+64]=t[e+0+32]=_e(s,n,r),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=_e(o,s,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=_e(a,o,s),t[e+3+32]=t[e+2+0]=_e(c,a,o),t[e+3+0]=_e(l,c,a)}function Ee(t,e){var n=t[e+1-32],r=t[e+2-32],i=t[e+3-32],s=t[e+4-32],o=t[e+5-32],a=t[e+6-32],c=t[e+7-32];t[e+0+0]=_e(t[e+0-32],n,r),t[e+1+0]=t[e+0+32]=_e(n,r,i),t[e+2+0]=t[e+1+32]=t[e+0+64]=_e(r,i,s),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=_e(i,s,o),t[e+3+32]=t[e+2+64]=t[e+1+96]=_e(s,o,a),t[e+3+64]=t[e+2+96]=_e(o,a,c),t[e+3+96]=_e(a,c,c)}function Te(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],c=t[e+2-32],l=t[e+3-32];t[e+0+0]=t[e+1+64]=s+o+1>>1,t[e+1+0]=t[e+2+64]=o+a+1>>1,t[e+2+0]=t[e+3+64]=a+c+1>>1,t[e+3+0]=c+l+1>>1,t[e+0+96]=_e(i,r,n),t[e+0+64]=_e(r,n,s),t[e+0+32]=t[e+1+96]=_e(n,s,o),t[e+1+32]=t[e+2+96]=_e(s,o,a),t[e+2+32]=t[e+3+96]=_e(o,a,c),t[e+3+32]=_e(a,c,l)}function ke(t,e){var n=t[e+0-32],r=t[e+1-32],i=t[e+2-32],s=t[e+3-32],o=t[e+4-32],a=t[e+5-32],c=t[e+6-32],l=t[e+7-32];t[e+0+0]=n+r+1>>1,t[e+1+0]=t[e+0+64]=r+i+1>>1,t[e+2+0]=t[e+1+64]=i+s+1>>1,t[e+3+0]=t[e+2+64]=s+o+1>>1,t[e+0+32]=_e(n,r,i),t[e+1+32]=t[e+0+96]=_e(r,i,s),t[e+2+32]=t[e+1+96]=_e(i,s,o),t[e+3+32]=t[e+2+96]=_e(s,o,a),t[e+3+64]=_e(o,a,c),t[e+3+96]=_e(a,c,l)}function Ne(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],s=t[e-1+96];t[e+0+0]=n+r+1>>1,t[e+2+0]=t[e+0+32]=r+i+1>>1,t[e+2+32]=t[e+0+64]=i+s+1>>1,t[e+1+0]=_e(n,r,i),t[e+3+0]=t[e+1+32]=_e(r,i,s),t[e+3+32]=t[e+1+64]=_e(i,s,s),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=s}function Le(t,e){var n=t[e-1+0],r=t[e-1+32],i=t[e-1+64],s=t[e-1+96],o=t[e-1-32],a=t[e+0-32],c=t[e+1-32],l=t[e+2-32];t[e+0+0]=t[e+2+32]=n+o+1>>1,t[e+0+32]=t[e+2+64]=r+n+1>>1,t[e+0+64]=t[e+2+96]=i+r+1>>1,t[e+0+96]=s+i+1>>1,t[e+3+0]=_e(a,c,l),t[e+2+0]=_e(o,a,c),t[e+1+0]=t[e+3+32]=_e(n,o,a),t[e+1+32]=t[e+3+64]=_e(r,n,o),t[e+1+64]=t[e+3+96]=_e(i,r,n),t[e+1+96]=_e(s,i,r)}function Ce(t,e){var n;for(n=0;8>n;++n)r(t,e+32*n,t,e-32,8)}function Pe(t,e){var n;for(n=0;8>n;++n)i(t,e,t[e-1],8),e+=32}function Oe(t,e,n){var r;for(r=0;8>r;++r)i(e,n+32*r,t,8)}function Re(t,e){var n,r=8;for(n=0;8>n;++n)r+=t[e+n-32]+t[e-1+32*n];Oe(r>>4,t,e)}function De(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e+n-32];Oe(r>>3,t,e)}function Me(t,e){var n,r=4;for(n=0;8>n;++n)r+=t[e-1+32*n];Oe(r>>3,t,e)}function Fe(t,e){Oe(128,t,e)}function je(t,e,n){var r=t[e-n],i=t[e+0],s=3*(i-r)+Pr[1020+t[e-2*n]-t[e+n]],o=Or[112+(s+4>>3)];t[e-n]=Rr[255+r+Or[112+(s+3>>3)]],t[e+0]=Rr[255+i-o]}function Be(t,e,n,r){var i=t[e+0],s=t[e+n];return Dr[255+t[e-2*n]-t[e-n]]>r||Dr[255+s-i]>r}function Ve(t,e,n,r){return 4*Dr[255+t[e-n]-t[e+0]]+Dr[255+t[e-2*n]-t[e+n]]<=r}function Ue(t,e,n,r,i){var s=t[e-3*n],o=t[e-2*n],a=t[e-n],c=t[e+0],l=t[e+n],u=t[e+2*n],h=t[e+3*n];return 4*Dr[255+a-c]+Dr[255+o-l]>r?0:Dr[255+t[e-4*n]-s]<=i&&Dr[255+s-o]<=i&&Dr[255+o-a]<=i&&Dr[255+h-u]<=i&&Dr[255+u-l]<=i&&Dr[255+l-c]<=i}function qe(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)Ve(t,e+r,n,i)&&je(t,e+r,n)}function ze(t,e,n,r){var i=2*r+1;for(r=0;16>r;++r)Ve(t,e+r*n,1,i)&&je(t,e+r*n,1)}function He(t,e,n,r){var i;for(i=3;0<i;--i)qe(t,e+=4*n,n,r)}function We(t,e,n,r){var i;for(i=3;0<i;--i)ze(t,e+=4,n,r)}function $e(t,e,n,r,i,s,o,a){for(s=2*s+1;0<i--;){if(Ue(t,e,n,s,o))if(Be(t,e,n,a))je(t,e,n);else{var c=t,l=e,u=n,h=c[l-2*u],d=c[l-u],f=c[l+0],p=c[l+u],g=c[l+2*u],m=27*(y=Pr[1020+3*(f-d)+Pr[1020+h-p]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;c[l-3*u]=Rr[255+c[l-3*u]+y],c[l-2*u]=Rr[255+h+v],c[l-u]=Rr[255+d+m],c[l+0]=Rr[255+f-m],c[l+u]=Rr[255+p-v],c[l+2*u]=Rr[255+g-y]}e+=r}}function Ge(t,e,n,r,i,s,o,a){for(s=2*s+1;0<i--;){if(Ue(t,e,n,s,o))if(Be(t,e,n,a))je(t,e,n);else{var c=t,l=e,u=n,h=c[l-u],d=c[l+0],f=c[l+u],p=Or[112+(4+(g=3*(d-h))>>3)],g=Or[112+(g+3>>3)],m=p+1>>1;c[l-2*u]=Rr[255+c[l-2*u]+m],c[l-u]=Rr[255+h+g],c[l+0]=Rr[255+d-p],c[l+u]=Rr[255+f-m]}e+=r}}function Ke(t,e,n,r,i,s){$e(t,e,n,1,16,r,i,s)}function Ye(t,e,n,r,i,s){$e(t,e,1,n,16,r,i,s)}function Qe(t,e,n,r,i,s){var o;for(o=3;0<o;--o)Ge(t,e+=4*n,n,1,16,r,i,s)}function Je(t,e,n,r,i,s){var o;for(o=3;0<o;--o)Ge(t,e+=4,1,n,16,r,i,s)}function Xe(t,e,n,r,i,s,o,a){$e(t,e,i,1,8,s,o,a),$e(n,r,i,1,8,s,o,a)}function Ze(t,e,n,r,i,s,o,a){$e(t,e,1,i,8,s,o,a),$e(n,r,1,i,8,s,o,a)}function tn(t,e,n,r,i,s,o,a){Ge(t,e+4*i,i,1,8,s,o,a),Ge(n,r+4*i,i,1,8,s,o,a)}function en(t,e,n,r,i,s,o,a){Ge(t,e+4,1,i,8,s,o,a),Ge(n,r+4,1,i,8,s,o,a)}function nn(){this.ba=new ot,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ct,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new D,this.vb=new D,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new h}function an(){this.xb=this.a=0,this.l=new $t,this.ca=new ot,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _,this.Pb=0,this.wd=new _,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=o(4,sn),this.Oc=0}function cn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $t,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(t,e,n,r,i,s,o){for(t=null==t?0:t[e+0],e=0;e<o;++e)i[s+e]=t+n[r+e]&255,t=i[s+e]}function un(t,e,n,r,i,s,o){var a;if(null==t)ln(null,null,n,r,i,s,o);else for(a=0;a<o;++a)i[s+a]=t[e+a]+n[r+a]&255}function hn(t,e,n,r,i,s,o){if(null==t)ln(null,null,n,r,i,s,o);else{var a,c=t[e+0],l=c,u=c;for(a=0;a<o;++a)l=u+(c=t[e+a])-l,u=n[r+a]+(-256&l?0>l?0:255:l)&255,l=c,i[s+a]=u}}function dn(t,n,i,o){var a=n.width,c=n.o;if(e(null!=t&&null!=n),0>i||0>=o||i+o>c)return null;if(!t.Cc){if(null==t.ga){var l;if(t.ga=new cn,(l=null==t.ga)||(l=n.width*n.o,e(0==t.Gb.length),t.Gb=s(l),t.Uc=0,null==t.Gb?l=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,l=1),l=!l),!l){l=t.ga;var u=t.Fa,h=t.P,d=t.qc,f=t.mb,p=t.nb,g=h+1,m=d-1,y=l.l;if(e(null!=u&&null!=f&&null!=n),mi[0]=null,mi[1]=ln,mi[2]=un,mi[3]=hn,l.ca=f,l.tb=p,l.c=n.width,l.i=n.height,e(0<l.c&&0<l.i),1>=d)n=0;else if(l.$a=3&u[h+0],l.Z=u[h+0]>>2&3,l.Lc=u[h+0]>>4&3,h=u[h+0]>>6&3,0>l.$a||1<l.$a||4<=l.Z||1<l.Lc||h)n=0;else if(y.put=ft,y.ac=dt,y.bc=pt,y.ma=l,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,l.$a)t:{e(1==l.$a),n=kt();e:for(;;){if(null==n){n=0;break t}if(e(null!=l),l.mc=n,n.c=l.c,n.i=l.i,n.l=l.l,n.l.ma=l,n.l.width=l.c,n.l.height=l.i,n.a=0,v(n.m,u,g,m),!Nt(l.c,l.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&St(n.s)?(l.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(l.ic=0,n=Lt(n,l.c)),!n)break e;n=1;break t}l.mc=null,n=0}else n=m>=l.c*l.i;l=!n}if(l)return null;1!=t.ga.Lc?t.Ga=0:o=c-i}e(null!=t.ga),e(i+o<=c);t:{if(n=(u=t.ga).c,c=u.l.o,0==u.$a){if(g=t.rc,m=t.Vc,y=t.Fa,h=t.P+1+i*n,d=t.mb,f=t.nb+i*n,e(h<=t.P+t.qc),0!=u.Z)for(e(null!=mi[u.Z]),l=0;l<o;++l)mi[u.Z](g,m,y,h,d,f,n),g=d,m=f,f+=n,h+=n;else for(l=0;l<o;++l)r(d,f,y,h,n),g=d,m=f,f+=n,h+=n;t.rc=g,t.Vc=m}else{if(e(null!=u.mc),n=i+o,e(null!=(l=u.mc)),e(n<=l.i),l.C>=n)n=1;else if(u.ic||vn(),u.ic){u=l.V,g=l.Ba,m=l.c;var b=l.i,w=(y=1,h=l.$/m,d=l.$%m,f=l.m,p=l.s,l.$),_=m*b,x=m*n,I=p.wc,E=w<x?wt(p,d,h):null;e(w<=_),e(n<=b),e(St(p));e:for(;;){for(;!f.h&&w<x;){if(d&I||(E=wt(p,d,h)),e(null!=E),A(f),256>(b=yt(E.G[0],E.H[0],f)))u[g+w]=b,++w,++d>=m&&(d=0,++h<=n&&!(h%16)&&At(l,h));else{if(!(280>b)){y=0;break e}b=mt(b-256,f);var T,k=yt(E.G[4],E.H[4],f);if(A(f),!(w>=(k=vt(m,k=mt(k,f)))&&_-w>=b)){y=0;break e}for(T=0;T<b;++T)u[g+w+T]=u[g+w+T-k];for(w+=b,d+=b;d>=m;)d-=m,++h<=n&&!(h%16)&&At(l,h);w<x&&d&I&&(E=wt(p,d,h))}e(f.h==S(f))}At(l,h>n?n:h);break e}!y||f.h&&w<_?(y=0,l.a=f.h?5:3):l.$=w,n=y}else n=Et(l,l.V,l.Ba,l.c,l.i,n,Ct);if(!n){o=0;break t}}i+o>=c&&(t.Cc=1),o=1}if(!o)return null;if(t.Cc&&(null!=(o=t.ga)&&(o.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+i*a}function fn(t,e,n,r,i,s){for(;0<i--;){var o,a=t,c=e+(n?1:0),l=t,u=e+(n?0:3);for(o=0;o<r;++o){var h=l[u+4*o];255!=h&&(h*=32897,a[c+4*o+0]=a[c+4*o+0]*h>>23,a[c+4*o+1]=a[c+4*o+1]*h>>23,a[c+4*o+2]=a[c+4*o+2]*h>>23)}e+=s}}function pn(t,e,n,r,i){for(;0<r--;){var s;for(s=0;s<n;++s){var o=t[e+2*s+0],a=15&(l=t[e+2*s+1]),c=4369*a,l=(240&l|l>>4)*c>>16;t[e+2*s+0]=(240&o|o>>4)*c>>16&240|(15&o|o<<4)*c>>16>>4&15,t[e+2*s+1]=240&l|a}e+=i}}function gn(t,e,n,r,i,s,o,a){var c,l,u=255;for(l=0;l<i;++l){for(c=0;c<r;++c){var h=t[e+c];s[o+4*c]=h,u&=h}e+=n,o+=a}return 255!=u}function mn(t,e,n,r,i){var s;for(s=0;s<i;++s)n[r+s]=t[e+s]>>8}function vn(){Sr=fn,Ir=pn,Ar=gn,Er=mn}function yn(n,r,i){t[n]=function(t,n,s,o,a,c,l,u,h,d,f,p,g,m,v,y,b){var w,_=b-1>>1,x=a[c+0]|l[u+0]<<16,S=h[d+0]|f[p+0]<<16;e(null!=t);var I=3*x+S+131074>>2;for(r(t[n+0],255&I,I>>16,g,m),null!=s&&(I=3*S+x+131074>>2,r(s[o+0],255&I,I>>16,v,y)),w=1;w<=_;++w){var A=a[c+w]|l[u+w]<<16,E=h[d+w]|f[p+w]<<16,T=x+A+S+E+524296,k=T+2*(A+S)>>3;I=k+x>>1,x=(T=T+2*(x+E)>>3)+A>>1,r(t[n+2*w-1],255&I,I>>16,g,m+(2*w-1)*i),r(t[n+2*w-0],255&x,x>>16,g,m+(2*w-0)*i),null!=s&&(I=T+S>>1,x=k+E>>1,r(s[o+2*w-1],255&I,I>>16,v,y+(2*w-1)*i),r(s[o+2*w+0],255&x,x>>16,v,y+(2*w+0)*i)),x=A,S=E}1&b||(I=3*x+S+131074>>2,r(t[n+b-1],255&I,I>>16,g,m+(b-1)*i),null!=s&&(I=3*S+x+131074>>2,r(s[o+b-1],255&I,I>>16,v,y+(b-1)*i)))}}function bn(){vi[Mr]=yi,vi[Fr]=wi,vi[jr]=bi,vi[Br]=_i,vi[Vr]=xi,vi[Ur]=Si,vi[qr]=Ii,vi[zr]=wi,vi[Hr]=_i,vi[Wr]=xi,vi[$r]=Si}function wn(t){return t&~Li?0>t?0:255:t>>Ni}function _n(t,e){return wn((19077*t>>8)+(26149*e>>8)-14234)}function xn(t,e,n){return wn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function Sn(t,e){return wn((19077*t>>8)+(33050*e>>8)-17685)}function In(t,e,n,r,i){r[i+0]=_n(t,n),r[i+1]=xn(t,e,n),r[i+2]=Sn(t,e)}function An(t,e,n,r,i){r[i+0]=Sn(t,e),r[i+1]=xn(t,e,n),r[i+2]=_n(t,n)}function En(t,e,n,r,i){var s=xn(t,e,n);e=s<<3&224|Sn(t,e)>>3,r[i+0]=248&_n(t,n)|s>>5,r[i+1]=e}function Tn(t,e,n,r,i){var s=240&Sn(t,e)|15;r[i+0]=240&_n(t,n)|xn(t,e,n)>>4,r[i+1]=s}function kn(t,e,n,r,i){r[i+0]=255,In(t,e,n,r,i+1)}function Nn(t,e,n,r,i){An(t,e,n,r,i),r[i+3]=255}function Ln(t,e,n,r,i){In(t,e,n,r,i),r[i+3]=255}function Wt(t,e){return 0>t?0:t>e?e:t}function Cn(e,n,r){t[e]=function(t,e,i,s,o,a,c,l,u){for(var h=l+(-2&u)*r;l!=h;)n(t[e+0],i[s+0],o[a+0],c,l),n(t[e+1],i[s+0],o[a+0],c,l+r),e+=2,++s,++a,l+=2*r;1&u&&n(t[e+0],i[s+0],o[a+0],c,l)}}function Pn(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function On(t,e,n,r,i){switch(t>>>30){case 3:or(e,n,r,i,0);break;case 2:ar(e,n,r,i);break;case 1:lr(e,n,r,i)}}function Rn(t,e){var n,s,o=e.M,a=e.Nb,c=t.oc,l=t.pc+40,u=t.oc,h=t.pc+584,d=t.oc,f=t.pc+600;for(n=0;16>n;++n)c[l+32*n-1]=129;for(n=0;8>n;++n)u[h+32*n-1]=129,d[f+32*n-1]=129;for(0<o?c[l-1-32]=u[h-1-32]=d[f-1-32]=129:(i(c,l-32-1,127,21),i(u,h-32-1,127,9),i(d,f-32-1,127,9)),s=0;s<t.za;++s){var p=e.ya[e.aa+s];if(0<s){for(n=-1;16>n;++n)r(c,l+32*n-4,c,l+32*n+12,4);for(n=-1;8>n;++n)r(u,h+32*n-4,u,h+32*n+4,4),r(d,f+32*n-4,d,f+32*n+4,4)}var g=t.Gd,m=t.Hd+s,v=p.ad,y=p.Hc;if(0<o&&(r(c,l-32,g[m].y,0,16),r(u,h-32,g[m].f,0,8),r(d,f-32,g[m].ea,0,8)),p.Za){var b=c,w=l-32+16;for(0<o&&(s>=t.za-1?i(b,w,g[m].y[15],4):r(b,w,g[m+1].y,0,4)),n=0;4>n;n++)b[w+128+n]=b[w+256+n]=b[w+384+n]=b[w+0+n];for(n=0;16>n;++n,y<<=2)b=c,w=l+ji[n],di[p.Ob[n]](b,w),On(y,v,16*+n,b,w)}else if(b=Pn(s,o,p.Ob[0]),hi[b](c,l),0!=y)for(n=0;16>n;++n,y<<=2)On(y,v,16*+n,c,l+ji[n]);for(n=p.Gc,b=Pn(s,o,p.Dd),fi[b](u,h),fi[b](d,f),y=v,b=u,w=h,255&(p=n|0)&&(170&p?cr(y,256,b,w):ur(y,256,b,w)),p=d,y=f,255&(n>>=8)&&(170&n?cr(v,320,p,y):ur(v,320,p,y)),o<t.Ub-1&&(r(g[m].y,0,c,l+480,16),r(g[m].f,0,u,h+224,8),r(g[m].ea,0,d,f+224,8)),n=8*a*t.B,g=t.sa,m=t.ta+16*s+16*a*t.R,v=t.qa,p=t.ra+8*s+n,y=t.Ha,b=t.Ia+8*s+n,n=0;16>n;++n)r(g,m+n*t.R,c,l+32*n,16);for(n=0;8>n;++n)r(v,p+n*t.B,u,h+32*n,8),r(y,b+n*t.B,d,f+32*n,8)}}function Dn(t,r,i,s,o,a,c,l,u){var h=[0],d=[0],f=0,p=null!=u?u.kd:0,g=null!=u?u:new rn;if(null==t||12>i)return 7;g.data=t,g.w=r,g.ha=i,r=[r],i=[i],g.gb=[g.gb];t:{var m=r,y=i,b=g.gb;if(e(null!=t),e(null!=y),e(null!=b),b[0]=0,12<=y[0]&&!n(t,m[0],"RIFF")){if(n(t,m[0]+8,"WEBP")){b=3;break t}var w=P(t,m[0]+4);if(12>w||4294967286<w){b=3;break t}if(p&&w>y[0]-8){b=7;break t}b[0]=w,m[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(w=0<g.gb[0],i=i[0];;){t:{var x=t;y=r,b=i;var S=h,I=d,A=m=[0];if((k=f=[f])[0]=0,8>b[0])b=7;else{if(!n(x,y[0],"VP8X")){if(10!=P(x,y[0]+4)){b=3;break t}if(18>b[0]){b=7;break t}var E=P(x,y[0]+8),T=1+C(x,y[0]+12);if(2147483648<=T*(x=1+C(x,y[0]+15))){b=3;break t}null!=A&&(A[0]=E),null!=S&&(S[0]=T),null!=I&&(I[0]=x),y[0]+=18,b[0]-=18,k[0]=1}b=0}}if(f=f[0],m=m[0],0!=b)return b;if(y=!!(2&m),!w&&f)return 3;if(null!=a&&(a[0]=!!(16&m)),null!=c&&(c[0]=y),null!=l&&(l[0]=0),c=h[0],m=d[0],f&&y&&null==u){b=0;break}if(4>i){b=7;break}if(w&&f||!w&&!f&&!n(t,r[0],"ALPH")){i=[i],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];t:{E=t,b=r,w=i;var k=g.gb;S=g.na,I=g.P,A=g.Sa,T=22,e(null!=E),e(null!=w),x=b[0];var N=w[0];for(e(null!=S),e(null!=A),S[0]=null,I[0]=null,A[0]=0;;){if(b[0]=x,w[0]=N,8>N){b=7;break t}var L=P(E,x+4);if(4294967286<L){b=3;break t}var O=8+L+1&-2;if(T+=O,0<k&&T>k){b=3;break t}if(!n(E,x,"VP8 ")||!n(E,x,"VP8L")){b=0;break t}if(N[0]<O){b=7;break t}n(E,x,"ALPH")||(S[0]=E,I[0]=x+8,A[0]=L),x+=O,N-=O}}if(i=i[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=b)break}i=[i],g.Ja=[g.Ja],g.xa=[g.xa];t:if(k=t,b=r,w=i,S=g.gb[0],I=g.Ja,A=g.xa,E=b[0],x=!n(k,E,"VP8 "),T=!n(k,E,"VP8L"),e(null!=k),e(null!=w),e(null!=I),e(null!=A),8>w[0])b=7;else{if(x||T){if(k=P(k,E+4),12<=S&&k>S-12){b=3;break t}if(p&&k>w[0]-8){b=7;break t}I[0]=k,b[0]+=8,w[0]-=8,A[0]=T}else A[0]=5<=w[0]&&47==k[E+0]&&!(k[E+4]>>5),I[0]=w[0];b=0}if(i=i[0],g.Ja=g.Ja[0],g.xa=g.xa[0],r=r[0],0!=b)break;if(4294967286<g.Ja)return 3;if(null==l||y||(l[0]=g.xa?2:1),c=[c],m=[m],g.xa){if(5>i){b=7;break}l=c,p=m,y=a,null==t||5>i?t=0:5<=i&&47==t[r+0]&&!(t[r+4]>>5)?(w=[0],k=[0],S=[0],v(I=new _,t,r,i),gt(I,w,k,S)?(null!=l&&(l[0]=w[0]),null!=p&&(p[0]=k[0]),null!=y&&(y[0]=S[0]),t=1):t=0):t=0}else{if(10>i){b=7;break}l=m,null==t||10>i||!Yt(t,r+3,i-3)?t=0:(p=t[r+0]|t[r+1]<<8|t[r+2]<<16,y=16383&(t[r+7]<<8|t[r+6]),t=16383&(t[r+9]<<8|t[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=g.Ja||!y||!t?t=0:(c&&(c[0]=y),l&&(l[0]=t),t=1))}if(!t)return 3;if(c=c[0],m=m[0],f&&(h[0]!=c||d[0]!=m))return 3;null!=u&&(u[0]=g,u.offset=r-u.w,e(4294967286>r-u.w),e(u.offset==u.ha-i));break}return 0==b||7==b&&f&&null==u?(null!=a&&(a[0]|=null!=g.na&&0<g.na.length),null!=s&&(s[0]=c),null!=o&&(o[0]=m),0):b}function Mn(t,e,n){var r=e.width,i=e.height,s=0,o=0,a=r,c=i;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,c=t.bd,s=t.v,o=t.j,11>n||(s&=-2,o&=-2),0>s||0>o||0>=a||0>=c||s+a>r||o+c>i))return 0;if(e.v=s,e.j=o,e.va=s+a,e.o=o+c,e.U=a,e.T=c,e.da=null!=t&&0<t.da,e.da){if(!M(a,c,n=[t.ib],s=[t.hb]))return 0;e.ib=n[0],e.hb=s[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*r/4&&e.hb<3*i/4,e.Kb=0),1}function Fn(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function jn(t,e,n,r){if(null==r||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var i=n.cd,o=n.bd,a=-2&n.v,c=-2&n.j;if(0>a||0>c||0>=i||0>=o||a+i>t||c+o>e)return 2;t=i,e=o}if(n.da){if(!M(t,e,i=[n.ib],o=[n.hb]))return 2;t=i[0],e=o[0]}}r.width=t,r.height=e;t:{var l=r.width,u=r.height;if(t=r.S,0>=l||0>=u||!(t>=Mr&&13>t))t=2;else{if(0>=r.Rd&&null==r.sd){a=o=i=e=0;var h=(c=l*qi[t])*u;if(11>t||(o=(u+1)/2*(e=(l+1)/2),12==t&&(a=(i=l)*u)),null==(u=s(h+2*o+a))){t=1;break t}r.sd=u,11>t?((l=r.f.RGBA).eb=u,l.fb=0,l.A=c,l.size=h):((l=r.f.kb).y=u,l.O=0,l.fa=c,l.Fd=h,l.f=u,l.N=0+h,l.Ab=e,l.Cd=o,l.ea=u,l.W=0+h+o,l.Db=e,l.Ed=o,12==t&&(l.F=u,l.J=0+h+2*o),l.Tc=a,l.lb=i)}if(e=1,i=r.S,o=r.width,a=r.height,i>=Mr&&13>i)if(11>i)t=r.f.RGBA,e&=(c=Math.abs(t.A))*(a-1)+o<=t.size,e&=c>=o*qi[i],e&=null!=t.eb;else{t=r.f.kb,c=(o+1)/2,h=(a+1)/2,l=Math.abs(t.fa),u=Math.abs(t.Ab);var d=Math.abs(t.Db),f=Math.abs(t.lb),p=f*(a-1)+o;e&=l*(a-1)+o<=t.Fd,e&=u*(h-1)+c<=t.Cd,e=(e&=d*(h-1)+c<=t.Ed)&l>=o&u>=c&d>=c,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==i&&(e&=f>=o,e&=p<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=Fn(r)),t}var Bn=64,Vn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Un=24,qn=32,zn=8,Hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return U(U(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return U(t,e[n-1])},t.Predictor7=function(t,e,n){return U(t,e[n+0])},t.Predictor8=function(t,e,n){return U(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return U(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return U(U(t,e[n-1]),U(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var r=e[n+0];return 0>=H(r>>24&255,t>>24&255,(e=e[n-1])>>24&255)+H(r>>16&255,t>>16&255,e>>16&255)+H(r>>8&255,t>>8&255,e>>8&255)+H(255&r,255&t,255&e)?r:t},t.Predictor12=function(t,e,n){var r=e[n+0];return(q((t>>24&255)+(r>>24&255)-((e=e[n-1])>>24&255))<<24|q((t>>16&255)+(r>>16&255)-(e>>16&255))<<16|q((t>>8&255)+(r>>8&255)-(e>>8&255))<<8|q((255&t)+(255&r)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var r=e[n-1];return(z((t=U(t,e[n+0]))>>24&255,r>>24&255)<<24|z(t>>16&255,r>>16&255)<<16|z(t>>8&255,r>>8&255)<<8|z(255&t,255&r))>>>0};var Wn=t.PredictorAdd0;t.PredictorAdd1=W,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var $n=t.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Gn,Kn=t.ColorIndexInverseTransform,Yn=t.MapARGB,Qn=t.VP8LColorIndexInverseTransformAlpha,Jn=t.MapAlpha,Xn=t.VP8LPredictorsAdd=[];Xn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Zn,tr,er,nr,rr,ir,sr,or,ar,cr,lr,ur,hr,dr,fr,pr,gr,mr,vr,yr,br,wr,_r,xr,Sr,Ir,Ar,Er,Tr=s(511),kr=s(2041),Nr=s(225),Lr=s(767),Cr=0,Pr=kr,Or=Nr,Rr=Lr,Dr=Tr,Mr=0,Fr=1,jr=2,Br=3,Vr=4,Ur=5,qr=6,zr=7,Hr=8,Wr=9,$r=10,Gr=[2,3,7],Kr=[3,3,11],Yr=[280,256,256,256,40],Qr=[0,1,1,1,0],Jr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ti=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ni=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ri=null,ii=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],si=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ai=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],li=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ui=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hi=[],di=[],fi=[],pi=1,gi=2,mi=[],vi=[];yn("UpsampleRgbLinePair",In,3),yn("UpsampleBgrLinePair",An,3),yn("UpsampleRgbaLinePair",Ln,4),yn("UpsampleBgraLinePair",Nn,4),yn("UpsampleArgbLinePair",kn,4),yn("UpsampleRgba4444LinePair",Tn,2),yn("UpsampleRgb565LinePair",En,2);var yi=t.UpsampleRgbLinePair,bi=t.UpsampleBgrLinePair,wi=t.UpsampleRgbaLinePair,_i=t.UpsampleBgraLinePair,xi=t.UpsampleArgbLinePair,Si=t.UpsampleRgba4444LinePair,Ii=t.UpsampleRgb565LinePair,Ai=16,Ei=1<<Ai-1,Ti=-227,ki=482,Ni=6,Li=(256<<Ni)-1,Ci=0,Pi=s(256),Oi=s(256),Ri=s(256),Di=s(256),Mi=s(ki-Ti),Fi=s(ki-Ti);Cn("YuvToRgbRow",In,3),Cn("YuvToBgrRow",An,3),Cn("YuvToRgbaRow",Ln,4),Cn("YuvToBgraRow",Nn,4),Cn("YuvToArgbRow",kn,4),Cn("YuvToRgba4444Row",Tn,2),Cn("YuvToRgb565Row",En,2);var ji=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bi=[0,2,8],Vi=[8,7,6,4,4,2,2,2,1,1,1,1],Ui=1;this.WebPDecodeRGBA=function(t,n,r,i,s){var o=Fr,a=new nn,c=new ot;a.ba=c,c.S=o,c.width=[c.width],c.height=[c.height];var l=c.width,u=c.height,h=new at;if(null==h||null==t)var d=2;else e(null!=h),d=Dn(t,n,r,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=d?l=0:(null!=l&&(l[0]=h.width[0]),null!=u&&(u[0]=h.height[0]),l=1),l){c.width=c.width[0],c.height=c.height[0],null!=i&&(i[0]=c.width),null!=s&&(s[0]=c.height);t:{if(i=new $t,(s=new rn).data=t,s.w=n,s.ha=r,s.kd=1,n=[0],e(null!=s),(0==(t=Dn(s.data,s.w,s.ha,null,null,null,n,null,s))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=a),i.data=s.data,i.w=s.w+s.offset,i.ha=s.ha-s.offset,i.put=ft,i.ac=dt,i.bc=pt,i.ma=a,s.xa){if(null==(t=kt())){a=1;break t}if(function(t,n){var r=[0],i=[0],s=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,v(t.m,n.data,n.w,n.ha),!gt(t.m,r,i,s)){t.a=3;break e}if(t.xb=gi,n.width=r[0],n.height=i[0],!Nt(r[0],i[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,i)){if(i=0==(n=jn(i.width,i.height,a.Oa,a.ba))){e:{i=t;n:for(;;){if(null==i){i=0;break e}if(e(null!=i.s.yc),e(null!=i.s.Ya),e(0<i.s.Wb),e(null!=(r=i.l)),e(null!=(s=r.ma)),0!=i.xb){if(i.ca=s.ba,i.tb=s.tb,e(null!=i.ca),!Mn(s.Oa,r,Br)){i.a=2;break n}if(!Lt(i,r.width))break n;if(r.da)break n;if((r.da||rt(i.ca.S))&&vn(),11>i.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=i.ca.f.kb.F&&vn()),i.Pb&&0<i.s.ua&&null==i.s.vb.X&&!O(i.s.vb,i.s.Wa.Xa)){i.a=1;break n}i.xb=0}if(!Et(i,i.V,i.Ba,i.c,i.i,r.o,xt))break n;s.Dc=i.Ma,i=1;break e}e(0!=i.a),i=0}i=!i}i&&(n=t.a)}else n=t.a}else{if(null==(t=new Gt)){a=1;break t}if(t.Fa=s.na,t.P=s.P,t.qc=s.Sa,Qt(t,i)){if(0==(n=jn(i.width,i.height,a.Oa,a.ba))){if(t.Aa=0,r=a.Oa,e(null!=(s=t)),null!=r){if(0<(l=0>(l=r.Md)?0:100<l?255:255*l/100)){for(u=h=0;4>u;++u)12>(d=s.pb[u]).lc&&(d.ia=l*Vi[0>d.lc?0:d.lc]>>3),h|=d.ia;h&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=r.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Zt(t,i)||(n=t.a)}}else n=t.a}0==n&&null!=a.Oa&&a.Oa.fd&&(n=Fn(a.ba))}a=n}o=0!=a?null:11>o?c.f.RGBA.eb:c.f.kb.y}else o=null;return o};var qi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function l(t,e){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(t[e++]);return n}function u(t,e){return(t[e+0]|t[e+1]<<8|t[e+2]<<16)>>>0}function h(t,e){return(t[e+0]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new c;var d=[0],f=[0],p=[],g=new c,m=t,v=function(t,e){var n={},r=0,i=!1,s=0,o=0;if(n.frames=[],!
/** @license
         * Copyright (c) 2017 Dominik Homberger
        Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
        The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
        https://webpjs.appspot.com
        WebPRiffParser dominikhlbg@gmail.com
        */
function(t,e,n,r){for(var i=0;i<r;i++)if(t[e+i]!=n.charCodeAt(i))return!0;return!1}(t,e,"RIFF",4)){var a,c;for(h(t,e+=4),e+=8;e<t.length;){var d=l(t,e),f=h(t,e+=4);e+=4;var p=f+(1&f);switch(d){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(v=n.frames[r]).src_off=i?o:e-8,v.src_size=s+f+8,r++,i&&(i=!1,s=0,o=0);break;case"VP8X":(v=n.header={}).feature_flags=t[e];var g=e+4;v.canvas_width=1+u(t,g),g+=3,v.canvas_height=1+u(t,g),g+=3;break;case"ALPH":i=!0,s=p+8,o=e-8;break;case"ANIM":(v=n.header).bgcolor=h(t,e),g=e+4,v.loop_count=(a=t)[(c=g)+0]|a[c+1]<<8,g+=2;break;case"ANMF":var m,v;(v=n.frames[r]={}).offset_x=2*u(t,e),e+=3,v.offset_y=2*u(t,e),e+=3,v.width=1+u(t,e),e+=3,v.height=1+u(t,e),e+=3,v.duration=u(t,e),e+=3,m=t[e++],v.dispose=1&m,v.blend=m>>1&1}"ANMF"!=d&&(e+=p)}return n}}(m,0);v.response=m,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,b=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],f=[y.canvas_width];for(var w=0;w<b.length&&0!=b[w].blend;w++);}var _=b[0],x=g.WebPDecodeRGBA(m,_.src_off,_.src_size,f,d);_.rgba=x,_.imgwidth=f[0],_.imgheight=d[0];for(var S=0;S<f[0]*d[0]*4;S++)p[S]=x[S];return this.width=f,this.height=d,this.data=p,this}!function(t){var e=function(){return"function"==typeof J},n=function(e,n,i,l){var u=4,h=o;switch(l){case t.image_compression.FAST:u=1,h=s;break;case t.image_compression.MEDIUM:u=6,h=a;break;case t.image_compression.SLOW:u=9,h=c}e=r(e,n,i,h);var d=J(e,{level:u});return t.__addimage__.arrayBufferToBinaryString(d)},r=function(t,e,n,r){for(var i,s,o,a=t.length/e,c=new Uint8Array(t.length+a),l=u(),d=0;d<a;d+=1){if(o=d*e,i=t.subarray(o,o+e),r)c.set(r(i,n,s),o+d);else{for(var f,p=l.length,g=[];f<p;f+=1)g[f]=l[f](i,n,s);var m=h(g.concat());c.set(g[m],o+d)}s=i}return c},i=function(t){var e=Array.apply([],t);return e.unshift(0),e},s=function(t,e){var n,r=[],i=t.length;r[0]=1;for(var s=0;s<i;s+=1)n=t[s-e]||0,r[s+1]=t[s]-n+256&255;return r},o=function(t,e,n){var r,i=[],s=t.length;i[0]=2;for(var o=0;o<s;o+=1)r=n&&n[o]||0,i[o+1]=t[o]-r+256&255;return i},a=function(t,e,n){var r,i,s=[],o=t.length;s[0]=3;for(var a=0;a<o;a+=1)r=t[a-e]||0,i=n&&n[a]||0,s[a+1]=t[a]+256-(r+i>>>1)&255;return s},c=function(t,e,n){var r,i,s,o,a=[],c=t.length;a[0]=4;for(var u=0;u<c;u+=1)r=t[u-e]||0,i=n&&n[u]||0,s=n&&n[u-e]||0,o=l(r,i,s),a[u+1]=t[u]-o+256&255;return a},l=function(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n},u=function(){return[i,s,o,a,c]},h=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(r,i,s,o){var a,c,l,u,h,d,f,p,g,m,v,y,b,w,_,x=this.decode.FLATE_DECODE,S="";if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){if(r=(l=new $e(r)).imgData,c=l.bits,a=l.colorSpace,h=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){g=(p=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,v=new Uint8Array(g*l.colors),m=new Uint8Array(g);var I,A=l.pixelBitlength-l.bits;for(w=0,_=0;w<g;w++){for(b=p[w],I=0;I<A;)v[_++]=b>>>I&255,I+=l.bits;m[w]=b>>>I&255}}if(16===l.bits){g=(p=new Uint32Array(l.decodePixels().buffer)).length,v=new Uint8Array(g*(32/l.pixelBitlength)*l.colors),m=new Uint8Array(g*(32/l.pixelBitlength)),y=l.colors>1,w=0,_=0;for(var E=0;w<g;)b=p[w++],v[_++]=b>>>0&255,y&&(v[_++]=b>>>16&255,b=p[w++],v[_++]=b>>>0&255),m[E++]=b>>>16&255;c=8}o!==t.image_compression.NONE&&e()?(r=n(v,l.width*l.colors,l.colors,o),f=n(m,l.width,1,o)):(r=v,f=m,x=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,d=l.palette,l.transparency.indexed)){var T=l.transparency.indexed,k=0;for(w=0,g=T.length;w<g;++w)k+=T[w];if((k/=255)===g-1&&-1!==T.indexOf(0))u=[T.indexOf(0)];else if(k!==g){for(p=l.decodePixels(),m=new Uint8Array(p.length),w=0,g=p.length;w<g;w++)m[w]=T[p[w]];f=n(m,l.width,1)}}var N=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return x===this.decode.FLATE_DECODE&&(S="/Predictor "+N+" "),S+="/Colors "+h+" /BitsPerComponent "+c+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:s,data:r,index:i,filter:x,decodeParameters:S,transparency:u,palette:d,sMask:f,predictor:N,width:l.width,height:l.height,bitsPerComponent:c,colorSpace:a}}}}(Ot.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new Ge(e),o=s.width,a=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var l={data:c,width:o,height:a},u=new Ye(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(Ot.API),Qe.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qe.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){nt.log("bit decode error:"+t)}},Qe.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[s>>7-a&1];this.data[o+4*a]=c.blue,this.data[o+4*a+1]=c.green,this.data[o+4*a+2]=c.red,this.data[o+4*a+3]=255}0!==n&&(this.pos+=4-n)}},Qe.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,c=15&s,l=this.palette[a];if(this.data[o]=l.blue,this.data[o+1]=l.green,this.data[o+2]=l.red,this.data[o+3]=255,2*i+1>=this.width)break;l=this.palette[c],this.data[o+4]=l.blue,this.data[o+4+1]=l.green,this.data[o+4+2]=l.red,this.data[o+4+3]=255}0!==e&&(this.pos+=4-e)}},Qe.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==t&&(this.pos+=4-t)}},Qe.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,l=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=c,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=l}this.pos+=t}},Qe.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,c=(o>>5&n)/n*255|0,l=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=l,this.data[u+1]=c,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Qe.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Qe.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Qe.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processBMP=function(e,n,r,i){var s=new Qe(e,!1),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},l=new Ye(100).encode(c,100);return t.processJPEG.call(this,l,n,r,i)}}(Ot.API),Je.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processWEBP=function(e,n,r,i){var s=new Je(e,!1),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},l=new Ye(100).encode(c,100);return t.processJPEG.call(this,l,n,r,i)}}(Ot.API),Ot.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,c=0,l=0;l<i;l+=4){var u=r[l],h=r[l+1],d=r[l+2],f=r[l+3];s[a++]=u,s[a++]=h,s[a++]=d,o[c++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Ot.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Ue=Ot.API,qe=Ue.getCharWidthsArray=function(t,e){var n,i,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:s.metadata.Unicode.widths,l=c.fof?c.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,h=u.fof?u.fof:1,d=!1!==e.doKerning,f=0,p=t.length,g=0,m=c[0]||l,v=[];for(n=0;n<p;n++)i=t.charCodeAt(n),"function"==typeof s.metadata.widthOfString?v.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+a*(1e3/o)||0)/1e3):(f=d&&"object"===(0,r.A)(u[i])&&!isNaN(parseInt(u[i][g],10))?u[i][g]/h:0,v.push((c[i]||m)/l+f)),g=i;return v},ze=Ue.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Ue.processArabic&&(t=Ue.processArabic(t)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(t,n,i)/n:qe.apply(this,arguments).reduce((function(t,e){return t+e}),0)},He=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var c=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(c,s)),a=0,c=s),a+=e[s],s++;return c!==s&&i.push(t.slice(c,s)),i},We=function(t,e,n){n||(n={});var r,i,s,o,a,c,l,u=[],h=[u],d=n.textIndent||0,f=0,p=0,g=t.split(" "),m=qe.apply(this,[" ",n])[0];if(c=-1===n.lineIndent?g[0].length+2:n.lineIndent||0){var v=Array(c).join(" "),y=[];g.map((function(t){(t=t.split(/\s*\n/)).length>1?y=y.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):y.push(t[0])})),g=y,c=ze.apply(this,[v,n])}for(s=0,o=g.length;s<o;s++){var b=0;if(r=g[s],c&&"\n"==r[0]&&(r=r.substr(1),b=1),d+f+(p=(i=qe.apply(this,[r,n])).reduce((function(t,e){return t+e}),0))>e||b){if(p>e){for(a=He.apply(this,[r,i,e-(d+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);p=i.slice(r.length-(u[0]?u[0].length:0)).reduce((function(t,e){return t+e}),0)}else u=[r];h.push(u),d=p+c,f=m}else u.push(r),d+=f+p,f=m}return l=c?function(t,e){return(e?v:"")+t.join(" ")}:function(t){return t.join(" ")},h.map(l)},Ue.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,c,l=[];for(a=0,c=r.length;a<c;a++)l=l.concat(We.apply(this,[r[a],o,s]));return l},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=e[s];var o=function(t){return"0x"+parseInt(t,10).toString(16)},a=t.__fontmetrics__.compress=function(t){var e,n,s,c,l=["{"];for(var u in t){if(e=t[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=o(u).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof e)e<0?(s=o(e).slice(3),c="-"):(s=o(e).slice(2),c=""),s=c+s.slice(0,-1)+i[s.slice(-1)];else{if("object"!==(0,r.A)(e))throw new Error("Don't know what to do with value type "+(0,r.A)(e)+".");s=a(e)}l.push(n+s)}return l.push("}"),l.join("")},c=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,r,i,s,o={},a=1,c=o,l=[],u="",h="",d=t.length-1,f=1;f<d;f+=1)"'"==(s=t[f])?e?(i=e.join(""),e=void 0):e=[]:e?e.push(s):"{"==s?(l.push([c,i]),c={},i=void 0):"}"==s?((r=l.pop())[0][r[1]]=c,i=void 0,c=r[0]):"-"==s?a=-1:void 0===i?n.hasOwnProperty(s)?(u+=n[s],i=parseInt(u,16)*a,a=1,u=""):u+=s:n.hasOwnProperty(s)?(h+=n[s],c[i]=parseInt(h,16)*a,a=1,i=void 0,h=""):h+=s;return o},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=h.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[e.postScriptName];r&&(e.metadata.Unicode.encoding=r,e.encoding=r.codePages[0])}])}(Ot.API),
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(i.postScriptName)?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?e(r):e(ot(r)),n.metadata=t.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(Ot),
/** @license
 * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(){function t(){return(tt.canvg?Promise.resolve(tt.canvg):n.e(234).then(n.bind(n,6234))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}Ot.API.addSvgAsImage=function(e,n,r,i,s,o,a,c){if(isNaN(n)||isNaN(r))throw nt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw nt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=i,l.height=s;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return t().then((function(t){return t.fromString(u,e,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){d.addImage(l.toDataURL("image/jpeg",1),n,r,i,s,a,c)}))}}(),Ot.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Ot.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,s,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(a),l=[],u=0,h=0,d=0;function f(t,e){var n,r=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var p=c.length;for(d=0;d<p;d+=1)n[c[d]].value=n[c[d]].defaultValue,n[c[d]].explicitSet=!1}if("object"===(0,r.A)(t))for(s in t)if(o=t[s],f(c,s)&&void 0!==o){if("boolean"===n[s].type&&"boolean"==typeof o)n[s].value=o;else if("name"===n[s].type&&f(n[s].valueSet,o))n[s].value=o;else if("integer"===n[s].type&&Number.isInteger(o))n[s].value=o;else if("array"===n[s].type){for(u=0;u<o.length;u+=1)if(i=!0,1===o[u].length&&"number"==typeof o[u][0])l.push(String(o[u]-1));else if(o[u].length>1){for(h=0;h<o[u].length;h+=1)"number"!=typeof o[u][h]&&(i=!1);!0===i&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},
/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+r.length+i.length+e.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(e+n+r+i+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Ot.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,r=e.metadata.Unicode.widths,i=["","0","00","000","0000"],s=[""],o=0,a=t.length;o<a;++o){if(n=e.metadata.characterToGlyph(t.charCodeAt(o)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(o),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(i[4-n.length],n)}return s.join("")},r=function(t){var e,n,r,i,s,o,a;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],o=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;o<a;o++)e=n[o],r.length>=100&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(i=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),r.push("<"+e+"><"+i+">"));return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,s=e.newObject,o=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var a=n.metadata.Unicode.widths,c=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),l="",u=0;u<c.length;u++)l+=String.fromCharCode(c[u]);var h=s();o({data:l,addLength1:!0,objectId:h}),i("endobj");var d=s();o({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),i("endobj");var f=s();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+Tt(n.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var p=s();i("<<"),i("/Type /Font"),i("/BaseFont /"+Tt(n.fontName)),i("/FontDescriptor "+f+" 0 R"),i("/W "+t.API.PDFObject.convert(a)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=s(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+d+" 0 R"),i("/BaseFont /"+Tt(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+p+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,i=e.out,s=e.newObject,o=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var a=n.metadata.rawData,c="",l=0;l<a.length;l++)c+=String.fromCharCode(a[l]);var u=s();o({data:c,addLength1:!0,objectId:u}),i("endobj");var h=s();o({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var d=s();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+u+" 0 R"),i("/Flags 96"),i("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+Tt(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=s();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+Tt(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(e)}]);var i=function(t){var e,r=t.text||"",i=t.x,s=t.y,o=t.options||{},a=t.mutex||{},c=a.pdfEscape,l=a.activeFontKey,u=a.fonts,h=l,d="",f=0,p="",g=u[h].encoding;if("Identity-H"!==u[h].encoding)return{text:r,x:i,y:s,options:o,mutex:a};for(p=r,h=l,Array.isArray(r)&&(p=r[0]),f=0;f<p.length;f+=1)u[h].metadata.hasOwnProperty("cmap")&&(e=u[h].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),e||p[f].charCodeAt(0)<256&&u[h].metadata.hasOwnProperty("Unicode")?d+=p[f]:d+="";var m="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===g?m=c(d,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===g&&(m=n(d,u[h])),a.isHex=!0,{text:m,x:i,y:s,options:o,mutex:a}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],r={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var s=0;for(s=0;s<e.length;s+=1)Array.isArray(e[s])&&3===e[s].length?n.push([i(Object.assign({},r,{text:e[s][0]})).text,e[s][1],e[s][2]]):n.push(i(Object.assign({},r,{text:e[s]})).text);t.text=n}else t.text=i(Object.assign({},r,{text:e})).text}])}(Ot),
/**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(Ot.API),
/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,r,i,s,o,a,c,l=e,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","Â«","Â»","Â«","â¹","âº","â¹","â","â","â","â½","â¾","â½","â","â","â","â¤","â¥","â¤","â©","âª","â©","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹¤","ï¹¥","ï¹¤"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,v=0;this.__bidiEngine__={};var y=function(t){var e=t.charCodeAt(),n=e>>8,r=f[n];return void 0!==r?l[256*r+(255&e)]:252===n||253===n?"AL":g.test(n)?"L":8===n?"R":"N"},b=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=y(t.charAt(n))))return!1;if("R"===e)return!0}return!1},w=function(t,e,o,a){var c,l,u,h,d=e[a];switch(d){case"L":case"R":m=!1;break;case"N":case"AN":break;case"EN":m&&(d="AN");break;case"AL":m=!0,d="R";break;case"WS":d="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(c=o[a-1])&&"AN"!==c||"EN"!==(l=e[a+1])&&"AN"!==l?d="N":m&&(l="AN"),d=l===c?l:"N";break;case"ES":d="EN"===(c=a>0?o[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===o[a-1]){d="EN";break}if(m){d="N";break}for(u=a+1,h=e.length;u<h&&"ET"===e[u];)u++;d=u<h&&"EN"===e[u]?"EN":"N";break;case"NSM":if(i&&!s){for(h=e.length,u=a+1;u<h&&"NSM"===e[u];)u++;if(u<h){var f=t[a],p=f>=1425&&f<=2303||64286===f;if(c=e[u],p&&("R"===c||"AL"===c)){d="R";break}}}d=a<1||"B"===(c=e[a-1])?"N":o[a-1];break;case"B":m=!1,n=!0,d=v;break;case"S":r=!0,d="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"BN":d="N"}return d},_=function(t,e,n){var r=t.split("");return n&&x(r,n,{hiLevel:v}),r.reverse(),e&&e.reverse(),r.join("")},x=function(t,e,i){var s,o,a,c,l,f=-1,p=t.length,g=0,b=[],_=v?h:u,x=[];for(m=!1,n=!1,r=!1,o=0;o<p;o++)x[o]=y(t[o]);for(a=0;a<p;a++){if(l=g,b[a]=w(t,x,b,a),s=240&(g=_[l][d[b[a]]]),g&=15,e[a]=c=_[g][5],s>0)if(16===s){for(o=f;o<a;o++)e[o]=1;f=-1}else f=-1;if(_[g][6])-1===f&&(f=a);else if(f>-1){for(o=f;o<a;o++)e[o]=c;f=-1}"B"===x[a]&&(e[a]=0),i.hiLevel|=c}r&&function(t,e,n){for(var r=0;r<n;r++)if("S"===t[r]){e[r]=v;for(var i=r-1;i>=0&&"WS"===t[i];i--)e[i]=v}}(x,e,p)},S=function(t,e,r,i,s){if(!(s.hiLevel<t)){if(1===t&&1===v&&!n)return e.reverse(),void(r&&r.reverse());for(var o,a,c,l,u=e.length,h=0;h<u;){if(i[h]>=t){for(c=h+1;c<u&&i[c]>=t;)c++;for(l=h,a=c-1;l<a;l++,a--)o=e[l],e[l]=e[a],e[a]=o,r&&(o=r[l],r[l]=r[a],r[a]=o);h=c}h++}}},I=function(t,e,n){var r=t.split(""),i={hiLevel:v};return n||(n=[]),x(r,n,i),function(t,e,n){if(0!==n.hiLevel&&c)for(var r,i=0;i<t.length;i++)1===e[i]&&(r=p.indexOf(t[i]))>=0&&(t[i]=p[r+1])}(r,n,i),S(2,r,e,n,i),S(1,r,e,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===s&&(s=b(t)),void 0===a&&(a=b(t))}(t,e),i||!o||a)if(i&&o&&s^a)v=s?1:0,t=_(t,e,n);else if(!i&&o&&a)v=s?1:0,t=I(t,e,n),t=_(t,e);else if(!i||s||o||a){if(i&&!o&&s^a)t=_(t,e),s?(v=0,t=I(t,e,n)):(v=1,t=I(t,e,n),t=_(t,e));else if(i&&s&&!o&&a)v=1,t=I(t,e,n),t=_(t,e);else if(!i&&!o&&s^a){var r=c;s?(v=1,t=I(t,e,n),v=0,c=!1,t=I(t,e,n),c=r):(v=0,t=I(t,e,n),t=_(t,e),v=1,c=!1,t=I(t,e,n),c=r,t=_(t,e))}}else v=0,t=I(t,e,n);else v=s?1:0,t=I(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(i=t.isInputVisual,o=t.isOutputVisual,s=t.isInputRtl,a=t.isOutputRtl,c=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,r=(t.x,t.y,t.options||{}),i=(t.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(e)){var s=0;for(i=[],s=0;s<e.length;s+=1)"[object Array]"===Object.prototype.toString.call(e[s])?i.push([n.doBidiReorder(e[s][0]),e[s][1],e[s][2]]):i.push([n.doBidiReorder(e[s])]);t.text=i}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(Ot),Ot.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new Ze(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new bn(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new tn(this.contents),this.head=new rn(this),this.name=new hn(this),this.cmap=new on(this),this.toUnicode={},this.hhea=new an(this),this.maxp=new dn(this),this.hmtx=new fn(this),this.post=new ln(this),this.os2=new cn(this),this.loca=new yn(this),this.glyf=new gn(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,r,i;for(i=[],e=0,n=(r=this.bbox).length;e<n;e++)t=r[e],i.push(Math.round(t*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(e=r>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var r,i,s,o;for(s=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)r=t.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/e)||0;return s*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var Xe,Ze=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,r;for(r=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,r,i,s,o,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*r+16777216*i+65536*s+256*o+a},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(this.writeByte(e));return i},t}(),tn=function(){var t;function e(t){var e,n,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,r,i,s,o,a,c,l,u,h,d,f,p;for(p in d=Object.keys(e).length,a=Math.log(2),u=16*Math.floor(Math.log(d)/a),s=Math.floor(u/a),l=16*d-u,(r=new Ze).writeInt(this.scalarType),r.writeShort(d),r.writeShort(u),r.writeShort(s),r.writeShort(l),i=16*d,c=r.pos+i,o=null,f=[],e)for(h=e[p],r.writeString(p),r.writeInt(t(h)),r.writeInt(c),r.writeInt(h.length),f=f.concat(h),"head"===p&&(o=c),c+=h.length;c%4;)f.push(0),c++;return r.write(f),n=2981146554-t(r.data),r.pos=o+8,r.writeUInt32(n),r.data},t=function(t){var e,n,r,i;for(t=pn.call(t);t.length%4;)t.push(0);for(r=new Ze(t),n=0,e=0,i=t.length;e<i;e=e+=4)n+=r.readUInt32();return 4294967295&n},e}(),en={}.hasOwnProperty,nn=function(t,e){for(var n in e)en.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Xe=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var rn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="head",t.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},t.prototype.encode=function(t){var e;return(e=new Ze).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},t}(),sn=function(){function t(t,e){var n,r,i,s,o,a,c,l,u,h,d,f,p,g,m,v,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(d=t.readUInt16(),h=d/2,t.pos+=6,i=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,p=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),c=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),r=(this.length-t.pos+this.offset)/2,o=function(){var e,n;for(n=[],a=e=0;0<=r?e<r:e>r;a=0<=r?++e:--e)n.push(t.readUInt16());return n}(),a=m=0,y=i.length;m<y;a=++m)for(g=i[a],n=v=f=p[a];f<=g?v<=g:v>=g;n=f<=g?++v:--v)0===l[a]?s=n+c[a]:0!==(s=o[l[a]/2+(n-f)-(h-a)]||0)&&(s+=c[a]),this.codeMap[n]=65535&s}t.pos=u}return t.encode=function(t,e){var n,r,i,s,o,a,c,l,u,h,d,f,p,g,m,v,y,b,w,_,x,S,I,A,E,T,k,N,L,C,P,O,R,D,M,F,j,B,V,U,q,z,H,W,$,G;switch(N=new Ze,s=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(p=0,g=function(){var t=[];for(f=0;f<256;++f)t.push(0);return t}(),v={0:0},i={},L=0,R=s.length;L<R;L++)null==v[H=t[r=s[L]]]&&(v[H]=++p),i[r]={old:t[r],new:v[t[r]]},g[r]=v[t[r]];return N.writeUInt16(1),N.writeUInt16(0),N.writeUInt32(12),N.writeUInt16(0),N.writeUInt16(262),N.writeUInt16(0),N.write(g),{charMap:i,subtable:N.data,maxGlyphID:p+1};case"unicode":for(T=[],u=[],y=0,v={},n={},m=c=null,C=0,D=s.length;C<D;C++)null==v[w=t[r=s[C]]]&&(v[w]=++y),n[r]={old:w,new:v[w]},o=v[w]-r,null!=m&&o===c||(m&&u.push(m),T.push(r),c=o),m=r;for(m&&u.push(m),u.push(65535),T.push(65535),A=2*(I=T.length),S=2*Math.pow(Math.log(I)/Math.LN2,2),h=Math.log(S/2)/Math.LN2,x=2*I-S,a=[],_=[],d=[],f=P=0,M=T.length;P<M;f=++P){if(E=T[f],l=u[f],65535===E){a.push(0),_.push(0);break}if(E-(k=n[E].new)>=32768)for(a.push(0),_.push(2*(d.length+I-f)),r=O=E;E<=l?O<=l:O>=l;r=E<=l?++O:--O)d.push(n[r].new);else a.push(k-E),_.push(0)}for(N.writeUInt16(3),N.writeUInt16(1),N.writeUInt32(12),N.writeUInt16(4),N.writeUInt16(16+8*I+2*d.length),N.writeUInt16(0),N.writeUInt16(A),N.writeUInt16(S),N.writeUInt16(h),N.writeUInt16(x),q=0,F=u.length;q<F;q++)r=u[q],N.writeUInt16(r);for(N.writeUInt16(0),z=0,j=T.length;z<j;z++)r=T[z],N.writeUInt16(r);for(W=0,B=a.length;W<B;W++)o=a[W],N.writeUInt16(o);for($=0,V=_.length;$<V;$++)b=_[$],N.writeUInt16(b);for(G=0,U=d.length;G<U;G++)p=d[G],N.writeUInt16(p);return{charMap:n,subtable:N.data,maxGlyphID:y+1}}},t}(),on=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="cmap",t.prototype.parse=function(t){var e,n,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)e=new sn(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},t.encode=function(t,e){var n,r;return null==e&&(e="macroman"),n=sn.encode(t,e),(r=new Ze).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},t}(),an=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="hhea",t.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},t}(),cn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="OS/2",t.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},t}(),ln=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="post",t.prototype.parse=function(t){var e,n,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=function(){var e,n,r;for(r=[],i=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;i=0<=n?++e:--e)r.push(t.readUInt32());return r}.call(this)}},t}(),un=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},hn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="name",t.prototype.parse=function(t){var e,n,r,i,s,o,a,c,l,u,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(a={},i=l=0,u=n.length;l<u;i=++l)r=n[i],t.pos=r.offset,c=t.readString(r.length),s=new un(c,r),null==a[h=r.nameID]&&(a[h]=[]),a[r.nameID].push(s);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},t}(),dn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="maxp",t.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},t}(),fn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="hmtx",t.prototype.parse=function(t){var e,n,r,i,s,o,a;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],e=n=0;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(t.readInt16());return i}(),this.widths=function(){var t,e,n,r;for(r=[],t=0,e=(n=this.metrics).length;t<e;t++)i=n[t],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],a=[],e=s=0;0<=r?s<r:s>r;e=0<=r?++s:--s)a.push(this.widths.push(n));return a},t.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},t}(),pn=[].slice,gn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(t){var e,n,r,i,s,o,a,c,l,u;return t in this.cache?this.cache[t]:(i=this.file.loca,e=this.file.contents,n=i.indexOf(t),0===(r=i.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,s=(o=new Ze(e.read(r))).readShort(),c=o.readShort(),u=o.readShort(),a=o.readShort(),l=o.readShort(),this.cache[t]=-1===s?new vn(o,c,u,a,l):new mn(o,s,c,u,a,l),this.cache[t]))},t.prototype.encode=function(t,e,n){var r,i,s,o,a;for(s=[],i=[],o=0,a=e.length;o<a;o++)r=t[e[o]],i.push(s.length),r&&(s=s.concat(r.encode(n)));return i.push(s.length),{table:s,offsets:i}},t}(),mn=function(){function t(t,e,n,r,i,s){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),vn=function(){function t(t,e,n,r,i){var s,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new Ze(pn.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),yn=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nn(t,Xe),t.prototype.tag="loca",t.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=2)r.push(2*t.readUInt16());return r}.call(this):function(){var e,r;for(r=[],n=0,e=this.length;n<e;n+=4)r.push(t.readUInt32());return r}.call(this)},t.prototype.indexOf=function(t){return this.offsets[t]},t.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},t.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,s=0;s<n.length;++s)if(n[s]=r,i<e.length&&e[i]==s){++i,n[s]=r;var o=this.offsets[s],a=this.offsets[s+1]-o;a>0&&(r+=a)}for(var c=new Array(4*n.length),l=0;l<n.length;++l)c[4*l+3]=255&n[l],c[4*l+2]=(65280&n[l])>>8,c[4*l+1]=(16711680&n[l])>>16,c[4*l]=(4278190080&n[l])>>24;return c},t}(),bn=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,r,i;for(e in r=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[e],t[e]=r[n];return t},t.prototype.glyphsFor=function(t){var e,n,r,i,s,o,a;for(r={},s=0,o=t.length;s<o;s++)r[i=t[s]]=this.font.glyf.glyphFor(i);for(i in e=[],r)(null!=(n=r[i])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(i in a=this.glyphsFor(e))n=a[i],r[i]=n;return r},t.prototype.encode=function(t,e){var n,r,i,s,o,a,c,l,u,h,d,f,p,g,m;for(r in n=on.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),d={0:0},m=n.charMap)d[(a=m[r]).old]=a.new;for(f in h=n.maxGlyphID,s)f in d||(d[f]=h++);return l=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(d),u=Object.keys(l).sort((function(t,e){return t-e})),p=function(){var t,e,n;for(n=[],t=0,e=u.length;t<e;t++)o=u[t],n.push(l[o]);return n}(),i=this.font.glyf.encode(s,p,d),c=this.font.loca.encode(i.offsets,p),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();Ot.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var t,i,s;for(s=[],t=0,i=n.length;t<i;t++)r=n[t],s.push(e.convert(r));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join("\n")}return""+n},e}()},1241:function(t,e){"use strict";e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},9357:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(4119);function i(t,e){if("object"!=(0,r.A)(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t){var e=i(t,"string");return"symbol"==(0,r.A)(e)?e:e+""}function o(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},4119:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{A:function(){return r}})},6082:function(t,e,n){"use strict";n.d(e,{A:function(){return S}});n(1339);var r=n(4046);n(3725),n(5019),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);class i{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s=n(2986);n(8743);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o=[];var a;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(a||(a={}));const c={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},l=a.INFO,u={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},h=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=u[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class d{constructor(t){this.name=t,this._logLevel=l,this._logHandler=h,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in a))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?c[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...t),this._logHandler(this,a.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...t),this._logHandler(this,a.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,a.INFO,...t),this._logHandler(this,a.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,a.WARN,...t),this._logHandler(this,a.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...t),this._logHandler(this,a.ERROR,...t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class f{constructor(t,e){this._delegate=t,this.firebase=e,(0,s._addComponent)(t,new i("app-compat",(()=>this),"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((t=>{this._delegate.checkDestroyed(),t()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(t,e=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t,e=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,s._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,s._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},g=new r.FA("app-compat","Firebase",p);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function m(t){const e={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:l,removeApp:i,useAsService:u,modularAPIs:s}};function i(t){delete e[t]}function o(t){if(t=t||s._DEFAULT_ENTRY_NAME,!(0,r.gR)(e,t))throw g.create("no-app",{appName:t});return e[t]}function a(i,o={}){const a=s.initializeApp(i,o);if((0,r.gR)(e,a.name))return e[a.name];const c=new t(a,n);return e[a.name]=c,c}function c(){return Object.keys(e).map((t=>e[t]))}function l(e){const i=e.name,a=i.replace("-compat","");if(s._registerComponent(e)&&"PUBLIC"===e.type){const s=(t=o())=>{if("function"!==typeof t[a])throw g.create("invalid-app-argument",{appName:i});return t[a]()};void 0!==e.serviceProps&&(0,r.zw)(s,e.serviceProps),n[a]=s,t.prototype[a]=function(...t){const n=this._getService.bind(this,i);return n.apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null}function u(t,e){if("serverAuth"===e)return null;const n=e;return n}return n["default"]=n,Object.defineProperty(n,"apps",{get:c}),o["App"]=t,n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(){const t=m(f);function e(e){(0,r.zw)(t,e)}return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:v,extendNamespace:e,createSubscribe:r.tD,ErrorFactory:r.FA,deepExtend:r.zw}),t}const y=v(),b=new d("@firebase/app-compat"),w="@firebase/app-compat",_="0.2.47";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function x(t){(0,s.registerVersion)(w,_,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=(0,r.mS)();if(void 0!==t.firebase){b.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&b.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(I){}const S=y;x()},2986:function(t,e,n){"use strict";n.r(e),n.d(e,{FirebaseError:function(){return r.g},SDK_VERSION:function(){return Ft},_DEFAULT_ENTRY_NAME:function(){return wt},_addComponent:function(){return At},_addOrOverwriteComponent:function(){return Et},_apps:function(){return xt},_clearComponents:function(){return Pt},_components:function(){return It},_getProvider:function(){return kt},_isFirebaseApp:function(){return Lt},_isFirebaseServerApp:function(){return Ct},_registerComponent:function(){return Tt},_removeServiceInstance:function(){return Nt},_serverApps:function(){return St},deleteApp:function(){return qt},getApp:function(){return Vt},getApps:function(){return Ut},initializeApp:function(){return jt},initializeServerApp:function(){return Bt},onLog:function(){return Ht},registerVersion:function(){return zt},setLogLevel:function(){return Wt}});n(8743),n(3725),n(5019),n(1339),n(9471),n(9229),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);var r=n(4046);class i{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new r.cY;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(c(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(t=s){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=s){return this.instances.has(t)}getOptions(t=s){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,s]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(i);n===t&&s.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(r){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(r){}return n||null}normalizeInstanceIdentifier(t=s){return this.component?this.component.multipleInstances?t:s:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(t){return t===s?void 0:t}function c(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const u=[];var h;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(h||(h={}));const d={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},f=h.INFO,p={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},g=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=p[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class m{constructor(t){this.name=t,this._logLevel=f,this._logHandler=g,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in h))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?d[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...t),this._logHandler(this,h.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...t),this._logHandler(this,h.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,h.INFO,...t),this._logHandler(this,h.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,h.WARN,...t),this._logHandler(this,h.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...t),this._logHandler(this,h.ERROR,...t)}}function v(t){u.forEach((e=>{e.setLogLevel(t)}))}function y(t,e){for(const n of u){let r=null;e&&e.level&&(r=d[e.level]),n.userLogHandler=null===t?null:(e,n,...i)=>{const s=i.map((t=>{if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((t=>t)).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:h[n].toLowerCase(),message:s,args:i,type:e.name})}}}n(9078);const b=(t,e)=>e.some((e=>t instanceof e));let w,_;function x(){return w||(w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S(){return _||(_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I=new WeakMap,A=new WeakMap,E=new WeakMap,T=new WeakMap,k=new WeakMap;function N(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(D(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&I.set(e,t)})).catch((()=>{})),k.set(e,t),e}function L(t){if(A.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));A.set(t,e)}let C={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return A.get(t);if("objectStoreNames"===e)return t.objectStoreNames||E.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return D(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function P(t){C=t(C)}function O(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?S().includes(t)?function(...e){return t.apply(M(this),e),D(I.get(this))}:function(...e){return D(t.apply(M(this),e))}:function(e,...n){const r=t.call(M(this),e,...n);return E.set(r,e.sort?e.sort():[e]),D(r)}}function R(t){return"function"===typeof t?O(t):(t instanceof IDBTransaction&&L(t),b(t,x())?new Proxy(t,C):t)}function D(t){if(t instanceof IDBRequest)return N(t);if(T.has(t))return T.get(t);const e=R(t);return e!==t&&(T.set(t,e),k.set(e,t)),e}const M=t=>k.get(t);function F(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=D(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(D(o.result),t.oldVersion,t.newVersion,D(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const j=["get","getKey","getAll","getAllKeys","count"],B=["put","add","delete","clear"],V=new Map;function U(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(V.get(e))return V.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=B.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!j.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return V.set(e,s),s}P((t=>({...t,get:(e,n,r)=>U(e,n)||t.get(e,n,r),has:(e,n)=>!!U(e,n)||t.has(e,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class q{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(z(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function z(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const H="@firebase/app",W="0.10.17",$=new m("@firebase/app"),G="@firebase/app-compat",K="@firebase/analytics-compat",Y="@firebase/analytics",Q="@firebase/app-check-compat",J="@firebase/app-check",X="@firebase/auth",Z="@firebase/auth-compat",tt="@firebase/database",et="@firebase/data-connect",nt="@firebase/database-compat",rt="@firebase/functions",it="@firebase/functions-compat",st="@firebase/installations",ot="@firebase/installations-compat",at="@firebase/messaging",ct="@firebase/messaging-compat",lt="@firebase/performance",ut="@firebase/performance-compat",ht="@firebase/remote-config",dt="@firebase/remote-config-compat",ft="@firebase/storage",pt="@firebase/storage-compat",gt="@firebase/firestore",mt="@firebase/vertexai",vt="@firebase/firestore-compat",yt="firebase",bt="11.1.0",wt="[DEFAULT]",_t={[H]:"fire-core",[G]:"fire-core-compat",[Y]:"fire-analytics",[K]:"fire-analytics-compat",[J]:"fire-app-check",[Q]:"fire-app-check-compat",[X]:"fire-auth",[Z]:"fire-auth-compat",[tt]:"fire-rtdb",[et]:"fire-data-connect",[nt]:"fire-rtdb-compat",[rt]:"fire-fn",[it]:"fire-fn-compat",[st]:"fire-iid",[ot]:"fire-iid-compat",[at]:"fire-fcm",[ct]:"fire-fcm-compat",[lt]:"fire-perf",[ut]:"fire-perf-compat",[ht]:"fire-rc",[dt]:"fire-rc-compat",[ft]:"fire-gcs",[pt]:"fire-gcs-compat",[gt]:"fire-fst",[vt]:"fire-fst-compat",[mt]:"fire-vertex","fire-js":"fire-js",[yt]:"fire-js-all"},xt=new Map,St=new Map,It=new Map;function At(t,e){try{t.container.addComponent(e)}catch(n){$.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Et(t,e){t.container.addOrOverwriteComponent(e)}function Tt(t){const e=t.name;if(It.has(e))return $.debug(`There were multiple attempts to register component ${e}.`),!1;It.set(e,t);for(const n of xt.values())At(n,t);for(const n of St.values())At(n,t);return!0}function kt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nt(t,e,n=wt){kt(t,e).clearInstance(n)}function Lt(t){return void 0!==t.options}function Ct(t){return void 0!==t.settings}function Pt(){It.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}'",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["server-app-deleted"]:"Firebase Server App has been deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",["finalization-registry-not-supported"]:"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.",["invalid-server-app-environment"]:"FirebaseServerApp is not for use in browser environments."},Rt=new r.FA("app","Firebase",Ot);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends Dt{constructor(t,e,n,r){const i=void 0!==e.automaticDataCollectionEnabled&&e.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==t.apiKey)super(t,s,r);else{const e=t;super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},e),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,zt(H,W,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,void 0!==t&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){qt(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Rt.create("server-app-deleted")}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=bt;function jt(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const i=Object.assign({name:wt,automaticDataCollectionEnabled:!1},e),s=i.name;if("string"!==typeof s||!s)throw Rt.create("bad-app-name",{appName:String(s)});if(n||(n=(0,r.T9)()),!n)throw Rt.create("no-options");const o=xt.get(s);if(o){if((0,r.bD)(n,o.options)&&(0,r.bD)(i,o.config))return o;throw Rt.create("duplicate-app",{appName:s})}const a=new l(s);for(const r of It.values())a.addComponent(r);const c=new Dt(n,i,a);return xt.set(s,c),c}function Bt(t,e){if((0,r.Bd)()&&!(0,r.p7)())throw Rt.create("invalid-server-app-environment");let n;void 0===e.automaticDataCollectionEnabled&&(e.automaticDataCollectionEnabled=!1),n=Lt(t)?t.options:t;const i=Object.assign(Object.assign({},e),n);void 0!==i.releaseOnDeref&&delete i.releaseOnDeref;const s=t=>[...t].reduce(((t,e)=>Math.imul(31,t)+e.charCodeAt(0)|0),0);if(void 0!==e.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Rt.create("finalization-registry-not-supported",{});const o=""+s(JSON.stringify(i)),a=St.get(o);if(a)return a.incRefCount(e.releaseOnDeref),a;const c=new l(o);for(const r of It.values())c.addComponent(r);const u=new Mt(n,e,o,c);return St.set(o,u),u}function Vt(t=wt){const e=xt.get(t);if(!e&&t===wt&&(0,r.T9)())return jt();if(!e)throw Rt.create("no-app",{appName:t});return e}function Ut(){return Array.from(xt.values())}async function qt(t){let e=!1;const n=t.name;if(xt.has(n))e=!0,xt.delete(n);else if(St.has(n)){const r=t;r.decRefCount()<=0&&(St.delete(n),e=!0)}e&&(await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function zt(t,e,n){var r;let s=null!==(r=_t[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void $.warn(t.join(" "))}Tt(new i(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}function Ht(t,e){if(null!==t&&"function"!==typeof t)throw Rt.create("invalid-log-argument");y(t,e)}function Wt(t){v(t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="firebase-heartbeat-database",Gt=1,Kt="firebase-heartbeat-store";let Yt=null;function Qt(){return Yt||(Yt=F($t,Gt,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Kt)}catch(n){console.warn(n)}}}}).catch((t=>{throw Rt.create("idb-open",{originalErrorMessage:t.message})}))),Yt}async function Jt(t){try{const e=await Qt(),n=e.transaction(Kt),r=await n.objectStore(Kt).get(Zt(t));return await n.done,r}catch(e){if(e instanceof r.g)$.warn(e.message);else{const t=Rt.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});$.warn(t.message)}}}async function Xt(t,e){try{const n=await Qt(),r=n.transaction(Kt,"readwrite"),i=r.objectStore(Kt);await i.put(e,Zt(t)),await r.done}catch(n){if(n instanceof r.g)$.warn(n.message);else{const t=Rt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});$.warn(t.message)}}}function Zt(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=1024,ee=2592e6;class ne{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new se(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate(),r=n.getPlatformInfoString(),i=re();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((t=>t.date===i)))return;return this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),n=Date.now();return n-e<=ee})),this._storage.overwrite(this._heartbeatsCache)}catch(n){$.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=re(),{heartbeatsToSend:n,unsentEntries:i}=ie(this._heartbeatsCache.heartbeats),s=(0,r.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return $.warn(e),""}}}function re(){const t=new Date;return t.toISOString().substring(0,10)}function ie(t,e=te){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),oe(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),oe(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class se{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,r.zW)()&&(0,r.eX)().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await Jt(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Xt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return Xt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function oe(t){return(0,r.Uj)(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t){Tt(new i("platform-logger",(t=>new q(t)),"PRIVATE")),Tt(new i("heartbeat",(t=>new ne(t)),"PRIVATE")),zt(H,W,t),zt(H,W,"esm2017"),zt("fire-js","")}ae("")},5524:function(t,e,n){"use strict";n.d(e,{A6:function(){return fi},E8:function(){return ha},PP:function(){return sc},t1:function(){return Co},Jy:function(){return xa},s$:function(){return Ca},kc:function(){return lc},hE:function(){return Ra},m_:function(){return tc}});var r=n(9357);n(8743),n(3725),n(5019),n(9838),n(1339),n(9471),n(9229),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
function i(t){return t+.5|0}const s=(t,e,n)=>Math.max(Math.min(t,n),e);function o(t){return s(i(2.55*t),0,255)}function a(t){return s(i(255*t),0,255)}function c(t){return s(i(t/2.55)/100,0,1)}function l(t){return s(i(100*t),0,100)}const u={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},h=[..."0123456789ABCDEF"],d=t=>h[15&t],f=t=>h[(240&t)>>4]+h[15&t],p=t=>(240&t)>>4===(15&t),g=t=>p(t.r)&&p(t.g)&&p(t.b)&&p(t.a);function m(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*u[t[1]],g:255&17*u[t[2]],b:255&17*u[t[3]],a:5===n?17*u[t[4]]:255}:7!==n&&9!==n||(e={r:u[t[1]]<<4|u[t[2]],g:u[t[3]]<<4|u[t[4]],b:u[t[5]]<<4|u[t[6]],a:9===n?u[t[7]]<<4|u[t[8]]:255})),e}const v=(t,e)=>t<255?e(t):"";function y(t){var e=g(t)?d:f;return t?"#"+e(t.r)+e(t.g)+e(t.b)+v(t.a,e):void 0}const b=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function w(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function _(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function x(t,e,n){const r=w(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function S(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function I(t){const e=255,n=t.r/e,r=t.g/e,i=t.b/e,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=S(n,r,i,u,s),c=60*c+.5),[0|c,l||0,a]}function A(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(a)}function E(t,e,n){return A(w,t,e,n)}function T(t,e,n){return A(x,t,e,n)}function k(t,e,n){return A(_,t,e,n)}function N(t){return(t%360+360)%360}function L(t){const e=b.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?o(+e[5]):a(+e[5]));const i=N(+e[2]),s=+e[3]/100,c=+e[4]/100;return n="hwb"===e[1]?T(i,s,c):"hsv"===e[1]?k(i,s,c):E(i,s,c),{r:n[0],g:n[1],b:n[2],a:r}}function C(t,e){var n=I(t);n[0]=N(n[0]+e),n=E(n),t.r=n[0],t.g=n[1],t.b=n[2]}function P(t){if(!t)return;const e=I(t),n=e[0],r=l(e[1]),i=l(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${c(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const O={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},R={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D(){const t={},e=Object.keys(R),n=Object.keys(O);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,O[s]);s=parseInt(R[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}let M;function F(t){M||(M=D(),M.transparent=[0,0,0,0]);const e=M[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const j=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function B(t){const e=j.exec(t);let n,r,i,a=255;if(e){if(e[7]!==n){const t=+e[7];a=e[8]?o(t):s(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?o(n):s(n,0,255)),r=255&(e[4]?o(r):s(r,0,255)),i=255&(e[6]?o(i):s(i,0,255)),{r:n,g:r,b:i,a:a}}}function V(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${c(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const U=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,q=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function z(t,e,n){const r=q(c(t.r)),i=q(c(t.g)),s=q(c(t.b));return{r:a(U(r+n*(q(c(e.r))-r))),g:a(U(i+n*(q(c(e.g))-i))),b:a(U(s+n*(q(c(e.b))-s))),a:t.a+n*(e.a-t.a)}}function H(t,e,n){if(t){let r=I(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=E(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function W(t,e){return t?Object.assign(e||{},t):t}function $(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=a(t[3]))):(e=W(t,{r:0,g:0,b:0,a:1}),e.a=a(e.a)),e}function G(t){return"r"===t.charAt(0)?B(t):L(t)}class K{constructor(t){if(t instanceof K)return t;const e=typeof t;let n;"object"===e?n=$(t):"string"===e&&(n=m(t)||F(t)||G(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=W(this._rgb);return t&&(t.a=c(t.a)),t}set rgb(t){this._rgb=$(t)}rgbString(){return this._valid?V(this._rgb):void 0}hexString(){return this._valid?y(this._rgb):void 0}hslString(){return this._valid?P(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const s=e===i?.5:e,o=2*s-1,a=n.a-r.a,c=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-c,n.r=255&c*n.r+i*r.r+.5,n.g=255&c*n.g+i*r.g+.5,n.b=255&c*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=z(this._rgb,t._rgb,e)),this}clone(){return new K(this.rgb)}alpha(t){return this._rgb.a=a(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=i(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return H(this._rgb,2,t),this}darken(t){return H(this._rgb,2,-t),this}saturate(t){return H(this._rgb,1,t),this}desaturate(t){return H(this._rgb,1,-t),this}rotate(t){return C(this._rgb,t),this}}
/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
function Y(){}const Q=(()=>{let t=0;return()=>t++})();function J(t){return null===t||"undefined"===typeof t}function X(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Z(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function tt(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function et(t,e){return tt(t)?t:e}function nt(t,e){return"undefined"===typeof t?e:t}const rt=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,it=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function st(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function ot(t,e,n,r){let i,s,o;if(X(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Z(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function at(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ct(t){if(X(t))return t.map(ct);if(Z(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ct(t[n[i]]);return e}return t}function lt(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ut(t,e,n,r){if(!lt(t))return;const i=e[t],s=n[t];Z(i)&&Z(s)?ht(i,s,r):e[t]=ct(s)}function ht(t,e,n){const r=X(e)?e:[e],i=r.length;if(!Z(t))return t;n=n||{};const s=n.merger||ut;let o;for(let a=0;a<i;++a){if(o=r[a],!Z(o))continue;const e=Object.keys(o);for(let r=0,i=e.length;r<i;++r)s(e[r],t,o,n)}return t}function dt(t,e){return ht(t,e,{merger:ft})}function ft(t,e,n){if(!lt(t))return;const r=e[t],i=n[t];Z(r)&&Z(i)?dt(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ct(i))}const pt={"":t=>t,x:t=>t.x,y:t=>t.y};function gt(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function mt(t){const e=gt(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}function vt(t,e){const n=pt[e]||(pt[e]=mt(e));return n(t)}function yt(t){return t.charAt(0).toUpperCase()+t.slice(1)}const bt=t=>"undefined"!==typeof t,wt=t=>"function"===typeof t,_t=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function xt(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const St=Math.PI,It=2*St,At=It+St,Et=Number.POSITIVE_INFINITY,Tt=St/180,kt=St/2,Nt=St/4,Lt=2*St/3,Ct=Math.log10,Pt=Math.sign;function Ot(t,e,n){return Math.abs(t-e)<n}function Rt(t){const e=Math.round(t);t=Ot(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ct(t))),r=t/n,i=r<=1?1:r<=2?2:r<=5?5:10;return i*n}function Dt(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}function Mt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ft(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function jt(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Bt(t){return t*(St/180)}function Vt(t){return t*(180/St)}function Ut(t){if(!tt(t))return;let e=1,n=0;while(Math.round(t*e)/e!==t)e*=10,n++;return n}function qt(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*St&&(s+=It),{angle:s,distance:i}}function zt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ht(t,e){return(t-e+At)%It-St}function Wt(t){return(t%It+It)%It}function $t(t,e,n,r){const i=Wt(t),s=Wt(e),o=Wt(n),a=Wt(s-i),c=Wt(o-i),l=Wt(i-s),u=Wt(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function Gt(t,e,n){return Math.max(e,Math.min(n,t))}function Kt(t){return Gt(t,-32768,32767)}function Yt(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Qt(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,s=0;while(i-s>1)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Jt=(t,e,n,r)=>Qt(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Xt=(t,e,n)=>Qt(t,n,(r=>t[r][e]>=n));function Zt(t,e,n){let r=0,i=t.length;while(r<i&&t[r]<e)r++;while(i>r&&t[i-1]>n)i--;return r>0||i<t.length?t.slice(r,i):t}const te=["push","pop","shift","splice","unshift"];function ee(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),te.forEach((e=>{const n="_onData"+yt(e),r=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const i=r.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"===typeof t[n]&&t[n](...e)})),i}})})))}function ne(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(te.forEach((e=>{delete t[e]})),delete t._chartjs)}function re(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ie=function(){return"undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame}();function se(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,ie.call(window,(()=>{r=!1,t.apply(e,n)})))}}function oe(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const ae=t=>"start"===t?"left":"end"===t?"right":"center",ce=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,le=(t,e,n,r)=>{const i=r?"left":"right";return t===i?n:"center"===t?(e+n)/2:e};function ue(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=Gt(Math.min(Jt(a,o.axis,l).lo,n?r:Jt(e,c,o.getPixelForValue(l)).lo),0,r-1)),s=d?Gt(Math.max(Jt(a,o.axis,u,!0).hi+1,n?0:Jt(e,c,o.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function he(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const de=t=>0===t||1===t,fe=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*It/n),pe=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*It/n)+1,ge={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*kt),easeOutSine:t=>Math.sin(t*kt),easeInOutSine:t=>-.5*(Math.cos(St*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>de(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>de(t)?t:fe(t,.075,.3),easeOutElastic:t=>de(t)?t:pe(t,.075,.3),easeInOutElastic(t){const e=.1125,n=.45;return de(t)?t:t<.5?.5*fe(2*t,e,n):.5+.5*pe(2*t-1,e,n)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-ge.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*ge.easeInBounce(2*t):.5*ge.easeOutBounce(2*t-1)+.5};function me(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function ve(t){return me(t)?t:new K(t)}function ye(t){return me(t)?t:new K(t).saturate(.5).darken(.1).hexString()}const be=["x","y","borderWidth","radius","tension"],we=["color","borderColor","backgroundColor"];function _e(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:we},numbers:{type:"number",properties:be}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})}function xe(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Se=new Map;function Ie(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Se.get(n);return r||(r=new Intl.NumberFormat(t,e),Se.set(n,r)),r}function Ae(t,e,n){return Ie(e,n).format(t)}const Ee={values(t){return X(t)?t:""+t},numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),s=Te(t,n)}const o=Ct(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Ae(t,r,c)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Ct(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?Ee.numeric.call(this,t,e,n):""}};function Te(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ke={formatters:Ee};function Ne(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ke.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}const Le=Object.create(null),Ce=Object.create(null);function Pe(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const e=n[r];t=t[e]||(t[e]=Object.create(null))}return t}function Oe(t,e,n){return"string"===typeof e?ht(Pe(t,e),n):ht(Pe(t,""),e)}class Re{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ye(e.backgroundColor),this.hoverBorderColor=(t,e)=>ye(e.borderColor),this.hoverColor=(t,e)=>ye(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Oe(this,t,e)}get(t){return Pe(this,t)}describe(t,e){return Oe(Ce,t,e)}override(t,e){return Oe(Le,t,e)}route(t,e,n,r){const i=Pe(this,t),s=Pe(this,n),o="_"+e;Object.defineProperties(i,{[o]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[r];return Z(t)?Object.assign({},e,t):nt(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach((t=>t(this)))}}var De=new Re({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_e,xe,Ne]);function Me(t){return!t||J(t.size)||J(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Fe(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function je(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,u,h,d;for(c=0;c<a;c++)if(h=n[c],void 0===h||null===h||X(h)){if(X(h))for(l=0,u=h.length;l<u;l++)d=h[l],void 0===d||null===d||X(d)||(o=Fe(t,i,s,o,d))}else o=Fe(t,i,s,o,h);t.restore();const f=s.length/2;if(f>n.length){for(c=0;c<f;c++)delete i[s[c]];s.splice(0,f)}return o}function Be(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Ve(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Ue(t,e,n,r){qe(t,e,n,r,null)}function qe(t,e,n,r,i){let s,o,a,c,l,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*Tt;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,It):t.arc(n,r,g,0,It),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=Lt,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=Lt,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":l=.516*g,c=g-l,o=Math.cos(m+Nt)*c,h=Math.cos(m+Nt)*(i?i/2-l:c),a=Math.sin(m+Nt)*c,d=Math.sin(m+Nt)*(i?i/2-l:c),t.arc(n-h,r-a,l,m-St,m-kt),t.arc(n+d,r-o,l,m-kt,m),t.arc(n+h,r+a,l,m,m+kt),t.arc(n-d,r+o,l,m+kt,m+St),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=i?i/2:c,t.rect(n-u,r-c,2*u,2*c);break}m+=Nt;case"rectRot":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+d,r-o),t.lineTo(n+h,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":m+=Nt;case"cross":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),m+=Nt,h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ze(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function He(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function We(t){t.restore()}function $e(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!==!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Ge(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Ke(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),J(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ye(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,l=n+s.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Qe(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Je(t,e,n,r,i,s={}){const o=X(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let c,l;for(t.save(),t.font=i.string,Ke(t,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&Qe(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),J(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(l,n,r,s.maxWidth)),t.fillText(l,n,r,s.maxWidth),Ye(t,n,r,l,s),r+=Number(i.lineHeight);t.restore()}function Xe(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,-kt,St,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,St,kt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,kt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-kt,!0),t.lineTo(n+o.topLeft,r)}const Ze=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,tn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function en(t,e){const n=(""+t).match(Ze);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const nn=t=>+t||0;function rn(t,e){const n={},r=Z(e),i=r?Object.keys(e):e,s=Z(t)?r?n=>nt(t[n],t[e[n]]):e=>t[e]:()=>t;for(const o of i)n[o]=nn(s(o));return n}function sn(t){return rn(t,{top:"y",right:"x",bottom:"y",left:"x"})}function on(t){return rn(t,["topLeft","topRight","bottomLeft","bottomRight"])}function an(t){const e=sn(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function cn(t,e){t=t||{},e=e||De.font;let n=nt(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let r=nt(t.style,e.style);r&&!(""+r).match(tn)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:nt(t.family,e.family),lineHeight:en(nt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:nt(t.weight,e.weight),string:""};return i.string=Me(i),i}function ln(t,e,n,r){let i,s,o,a=!0;for(i=0,s=t.length;i<s;++i)if(o=t[i],void 0!==o&&(void 0!==e&&"function"===typeof o&&(o=o(e),a=!1),void 0!==n&&X(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function un(t,e,n){const{min:r,max:i}=t,s=it(e,(i-r)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function hn(t,e){return Object.assign(Object.create(t),e)}function dn(t,e=[""],n,r,i=()=>t[0]){const s=n||t;"undefined"===typeof r&&(r=kn("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:n=>dn([n,...t],e,s,r)};return new Proxy(o,{deleteProperty(e,n){return delete e[n],delete e._keys,delete t[0][n],!0},get(n,r){return vn(n,r,(()=>Tn(r,e,t,n)))},getOwnPropertyDescriptor(t,e){return Reflect.getOwnPropertyDescriptor(t._scopes[0],e)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(t,e){return Nn(t).includes(e)},ownKeys(t){return Nn(t)},set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function fn(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:pn(t,r),setContext:e=>fn(t,e,n,r),override:i=>fn(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty(e,n){return delete e[n],delete t[n],!0},get(t,e,n){return vn(t,e,(()=>yn(t,e,n)))},getOwnPropertyDescriptor(e,n){return e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(e,n){return Reflect.has(t,n)},ownKeys(){return Reflect.ownKeys(t)},set(e,n,r){return t[n]=r,delete e[n],!0}})}function pn(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:wt(n)?n:()=>n,isIndexable:wt(r)?r:()=>r}}const gn=(t,e)=>t?t+yt(e):e,mn=(t,e)=>Z(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function vn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function yn(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return wt(a)&&o.isScriptable(e)&&(a=bn(e,a,t,n)),X(a)&&a.length&&(a=wn(e,a,t,o.isIndexable)),mn(e,a)&&(a=fn(a,i,s&&s[e],o)),a}function bn(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let c=e(s,o||r);return a.delete(t),mn(t,c)&&(c=In(i._scopes,i,t,c)),c}function wn(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&r(t))return e[s.index%e.length];if(Z(e[0])){const n=e,r=i._scopes.filter((t=>t!==n));e=[];for(const c of n){const n=In(r,i,t,c);e.push(fn(n,s,o&&o[t],a))}}return e}function _n(t,e,n){return wt(t)?t(e,n):t}const xn=(t,e)=>!0===t?e:"string"===typeof t?vt(e,t):void 0;function Sn(t,e,n,r,i){for(const s of e){const e=xn(n,s);if(e){t.add(e);const s=_n(e._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===e&&"undefined"!==typeof r&&n!==r)return null}return!1}function In(t,e,n,r){const i=e._rootScopes,s=_n(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let c=An(a,o,n,s||n,r);return null!==c&&(("undefined"===typeof s||s===n||(c=An(a,o,s,c,r),null!==c))&&dn(Array.from(a),[""],i,s,(()=>En(e,n,r))))}function An(t,e,n,r,i){while(n)n=Sn(t,e,n,r,i);return n}function En(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return X(i)&&Z(n)?n:i||{}}function Tn(t,e,n,r){let i;for(const s of e)if(i=kn(gn(s,t),n),"undefined"!==typeof i)return mn(t,i)?In(n,r,t,i):i}function kn(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function Nn(t){let e=t._keys;return e||(e=t._keys=Ln(t._scopes)),e}function Ln(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}function Cn(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,c,l,u;for(a=0,c=r;a<c;++a)l=a+n,u=e[l],o[a]={r:i.parse(vt(u,s),l)};return o}const Pn=Number.EPSILON||1e-14,On=(t,e)=>e<t.length&&!t[e].skip&&t[e],Rn=t=>"x"===t?"y":"x";function Dn(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=zt(s,i),c=zt(o,s);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=r*l,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function Mn(t,e,n){const r=t.length;let i,s,o,a,c,l=On(t,0);for(let u=0;u<r-1;++u)c=l,l=On(t,u+1),c&&l&&(Ot(e[u],0,Pn)?n[u]=n[u+1]=0:(i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])))}function Fn(t,e,n="x"){const r=Rn(n),i=t.length;let s,o,a,c=On(t,0);for(let l=0;l<i;++l){if(o=a,a=c,c=On(t,l+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a[`cp1${n}`]=i-s,a[`cp1${r}`]=u-s*e[l]),c&&(s=(c[n]-i)/3,a[`cp2${n}`]=i+s,a[`cp2${r}`]=u+s*e[l])}}function jn(t,e="x"){const n=Rn(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,c,l=On(t,0);for(o=0;o<r;++o)if(a=c,c=l,l=On(t,o+1),c){if(l){const t=l[e]-c[e];i[o]=0!==t?(l[n]-c[n])/t:0}s[o]=a?l?Pt(i[o-1])!==Pt(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Mn(t,i,s),Fn(t,s,e)}function Bn(t,e,n){return Math.max(Math.min(t,n),e)}function Vn(t,e){let n,r,i,s,o,a=ze(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&ze(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Bn(i.cp1x,e.left,e.right),i.cp1y=Bn(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Bn(i.cp2x,e.left,e.right),i.cp2y=Bn(i.cp2y,e.top,e.bottom)))}function Un(t,e,n,r,i){let s,o,a,c;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)jn(t,i);else{let n=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],c=Dn(n,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}e.capBezierPoints&&Vn(t,n)}function qn(){return"undefined"!==typeof window&&"undefined"!==typeof document}function zn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Hn(t,e,n){let r;return"string"===typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const Wn=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function $n(t,e){return Wn(t).getPropertyValue(e)}const Gn=["top","right","bottom","left"];function Kn(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Gn[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Yn=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Qn(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o,a,c=!1;if(Yn(i,s,t.target))o=i,a=s;else{const t=e.getBoundingClientRect();o=r.clientX-t.left,a=r.clientY-t.top,c=!0}return{x:o,y:a,box:c}}function Jn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Wn(n),s="border-box"===i.boxSizing,o=Kn(i,"padding"),a=Kn(i,"border","width"),{x:c,y:l,box:u}=Qn(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/r),y:Math.round((l-d)/p*n.height/r)}}function Xn(t,e,n){let r,i;if(void 0===e||void 0===n){const s=zn(t);if(s){const t=s.getBoundingClientRect(),o=Wn(s),a=Kn(o,"border","width"),c=Kn(o,"padding");e=t.width-c.width-a.width,n=t.height-c.height-a.height,r=Hn(o.maxWidth,s,"clientWidth"),i=Hn(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||Et,maxHeight:i||Et}}const Zn=t=>Math.round(10*t)/10;function tr(t,e,n,r){const i=Wn(t),s=Kn(i,"margin"),o=Hn(i.maxWidth,t,"clientWidth")||Et,a=Hn(i.maxHeight,t,"clientHeight")||Et,c=Xn(t,e,n);let{width:l,height:u}=c;if("content-box"===i.boxSizing){const t=Kn(i,"border","width"),e=Kn(i,"padding");l-=e.width+t.width,u-=e.height+t.height}l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=Zn(Math.min(l,o,c.maxWidth)),u=Zn(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Zn(l/2));const h=void 0!==e||void 0!==n;return h&&r&&c.height&&u>c.height&&(u=c.height,l=Zn(Math.floor(u*r))),{width:l,height:u}}function er(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0)}const nr=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}return t}();function rr(t,e){const n=$n(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ir(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function sr(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function or(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ir(t,i,n),a=ir(i,s,n),c=ir(s,e,n),l=ir(o,a,n),u=ir(a,c,n);return ir(l,u,n)}const ar=function(t,e){return{x(n){return t+t+e-n},setWidth(t){e=t},textAlign(t){return"center"===t?t:"right"===t?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}},cr=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function lr(t,e,n){return t?ar(e,n):cr()}function ur(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function hr(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function dr(t){return"angle"===t?{between:$t,compare:Ht,normalize:Wt}:{between:Yt,compare:(t,e)=>t-e,normalize:t=>t}}function fr({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function pr(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=dr(r),c=e.length;let l,u,{start:h,end:d,loop:f}=t;if(f){for(h+=c,d+=c,l=0,u=c;l<u;++l){if(!o(a(e[h%c][r]),i,s))break;h--,d--}h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:f,style:t.style}}function gr(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:c,normalize:l}=dr(r),{start:u,end:h,loop:d,style:f}=pr(t,e,n),p=[];let g,m,v,y=!1,b=null;const w=()=>c(i,v,g)&&0!==a(i,v),_=()=>0===a(s,g)||c(s,v,g),x=()=>y||w(),S=()=>!y||_();for(let I=u,A=u;I<=h;++I)m=e[I%o],m.skip||(g=l(m[r]),g!==v&&(y=c(g,i,s),null===b&&x()&&(b=0===a(g,i)?I:A),null!==b&&S()&&(p.push(fr({start:b,end:I,loop:d,count:o,style:f})),b=null),A=I,v=g));return null!==b&&p.push(fr({start:b,end:h,loop:d,count:o,style:f})),p}function mr(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=gr(r[i],t.points,e);s.length&&n.push(...s)}return n}function vr(t,e,n,r){let i=0,s=e-1;if(n&&!r)while(i<e&&!t[i].skip)i++;while(i<e&&t[i].skip)i++;i%=e,n&&(s+=i);while(s>i&&t[s%e].skip)s--;return s%=e,{start:i,end:s}}function yr(t,e,n,r){const i=t.length,s=[];let o,a=e,c=t[e];for(o=e+1;o<=n;++o){const n=t[o%i];n.skip||n.stop?c.skip||(r=!1,s.push({start:e%i,end:(o-1)%i,loop:r}),e=a=n.stop?o:null):(a=o,c.skip&&(e=o)),c=n}return null!==a&&s.push({start:e%i,end:a%i,loop:r}),s}function br(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=vr(n,i,s,r);if(!0===r)return wr(t,[{start:o,end:a,loop:s}],n,e);const c=a<o?a+i:a,l=!!t._fullLoop&&0===o&&a===i-1;return wr(t,yr(n,o,c,l),n,e)}function wr(t,e,n,r){return r&&r.setContext&&n?_r(t,e,n,r):e}function _r(t,e,n,r){const i=t._chart.getContext(),s=xr(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=s,h=e[0].start,d=h;function f(t,e,r,i){const s=a?-1:1;if(t!==e){t+=c;while(n[t%c].skip)t-=s;while(n[e%c].skip)e+=s;t%c!==e%c&&(l.push({start:t%c,end:e%c,loop:r,style:i}),u=i,h=e%c)}}for(const p of e){h=a?h:p.start;let t,e=n[h%c];for(d=h+1;d<=p.end;d++){const s=n[d%c];t=xr(r.setContext(hn(i,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),Sr(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return l}function xr(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Sr(t,e){if(!e)return!1;const n=[],r=function(t,e){return me(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}
/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */
class Ir{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],s=e.duration;i.forEach((r=>r({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=ie.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ar=new Ir;const Er="transparent",Tr={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=ve(t||Er),i=r.valid&&ve(e||Er);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class kr{constructor(t,e,n,r){const i=e[n];r=ln([t.to,r,i,t.from]);const s=ln([t.from,i,r]);this._active=!0,this._fn=t.fn||Tr[t.type||typeof s],this._easing=ge[t.easing]||ge.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=ln([t.to,e,r,t.from]),this._from=ln([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||e<n),!this._active)return this._target[r]=o,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}class Nr{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Z(t))return;const e=Object.keys(De.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((r=>{const i=t[r];if(!Z(i))return;const s={};for(const t of e)s[t]=i[t];(X(i.properties)&&i.properties||[r]).forEach((t=>{t!==r&&n.has(t)||n.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,r=Cr(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Lr(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const c=s[a];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(t,e));continue}const l=e[c];let u=i[c];const h=n.get(c);if(u){if(h&&u.active()){u.update(h,l,o);continue}u.cancel()}h&&h.duration?(i[c]=u=new kr(h,t,c,l),r.push(u)):t[c]=l}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Ar.add(this._chart,n),!0):void 0}}function Lr(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const e=t[r[i]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}function Cr(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}function Pr(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:r?s:i,end:r?i:s}}function Or(t,e,n){if(!1===n)return!1;const r=Pr(t,n),i=Pr(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Rr(t){let e,n,r,i;return Z(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}function Dr(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Mr(t,e,n,r={}){const i=t.keys,s="single"===r.mode;let o,a,c,l;if(null!==e){for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(r.all)continue;break}l=t.values[c],tt(l)&&(s||0===e||Pt(e)===Pt(l))&&(e+=l)}return e}}function Fr(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function jr(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Br(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Vr(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Ur(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function qr(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function zr(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=Br(s,o,r),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[c]:n,[l]:s}=t,h=t._stacks||(t._stacks={});d=h[l]=Ur(i,u,n),d[a]=s,d._top=qr(d,o,!0,r.type),d._bottom=qr(d,o,!1,r.type);const p=d._visualValues||(d._visualValues={});p[a]=s}}function Hr(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Wr(t,e){return hn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $r(t,e,n){return hn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Gr(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Kr=t=>"reset"===t||"none"===t,Yr=(t,e)=>e?t:Object.assign({},t),Qr=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Dr(n,!0),values:null};class Jr{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=jr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=nt(n.xAxisID,Hr(t,"x")),s=e.yAxisID=nt(n.yAxisID,Hr(t,"y")),o=e.rAxisID=nt(n.rAxisID,Hr(t,"r")),a=e.indexAxis,c=e.iAxisID=r(a,i,s,o),l=e.vAxisID=r(a,s,i,o);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ne(this._data,this),t._stacked&&Gr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Z(e))this._data=Fr(e);else if(n!==e){if(n){ne(n,this);const t=this._cachedMeta;Gr(t),t._parsed=[]}e&&Object.isExtensible(e)&&ee(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=jr(e.vScale,e),e.stack!==n.stack&&(r=!0,Gr(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&zr(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,c,l,u=0===t&&e===r.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,l=r;else{l=X(r[t])?this.parseArrayData(n,r,t,e):Z(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===c[o]||h&&c[o]<h[o];for(a=0;a<e;++a)n._parsed[a+t]=c=l[a],u&&(i()&&(u=!1),h=c);n._sorted=u}s&&zr(this,l)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:s}=t,o=i.axis,a=s.axis,c=i.getLabels(),l=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[o]:l||i.parse(c[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,r){const{xScale:i,yScale:s}=t,o=new Array(r);let a,c,l,u;for(a=0,c=r;a<c;++a)l=a+n,u=e[l],o[a]={x:i.parse(u[0],l),y:s.parse(u[1],l)};return o}parseObjectData(t,e,n,r){const{xScale:i,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+n,d=e[h],c[l]={x:i.parse(vt(d,o),h),y:s.parse(vt(d,a),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,s=e[t.axis],o={keys:Dr(r,!0),values:e._stacks[t.axis]._visualValues};return Mr(o,s,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let s=null===i?NaN:i;const o=r&&n._stacks[e.axis];r&&o&&(r.values=o,s=Mr(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,s=r.length,o=this._getOtherScale(t),a=Qr(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:u}=Vr(o);let h,d;function f(){d=r[h];const e=d[o.axis];return!tt(d[t.axis])||l>e||u<e}for(h=0;h<s;++h)if(!f()&&(this.updateRangeFromParsed(c,t,d,a),i))break;if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(c,t,d,a);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r][t.axis],tt(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Rr(nt(this.options.clip,Or(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,c=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(t,i,o,a),l=o;l<o+a;++l){const e=r[l];e.hidden||(e.active&&c?s.push(e):e.draw(t,i))}for(l=0;l<s.length;++l)s[l].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=$r(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=Wr(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r="active"===e,i=this._cachedDataOpts,s=t+"-"+e,o=i[s],a=this.enableOptionSharing&&bt(n);if(o)return Yr(o,a);const c=this.chart.config,l=c.datasetElementScopeKeys(this._type,t),u=r?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),l),d=Object.keys(De.elements[t]),f=()=>this.getContext(n,r,e),p=c.resolveNamedOptions(h,d,f,u);return p.$shared&&(p.$shared=a,i[s]=Object.freeze(Yr(p,a))),p}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,s=`animation-${e}`,o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(t,n,e))}const c=new Nr(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Kr(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:s}}updateElement(t,e,n,r){Kr(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Kr(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,a,c]of this._syncList)this[o](a,c);this._syncList=[];const r=n.length,i=e.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(i),o=t;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Gr(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Xr(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=re(r.sort(((t,e)=>t-e)))}return t._cache.$bar}function Zr(t){const e=t.iScale,n=Xr(e,t.type);let r,i,s,o,a=e._length;const c=()=>{32767!==s&&-32768!==s&&(bt(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=e.getPixelForValue(n[r]),c();for(o=void 0,r=0,i=e.ticks.length;r<i;++r)s=e.getPixelForTick(r),c();return a}function ti(t,e,n,r){const i=n.barThickness;let s,o;return J(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function ei(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const c=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const l=s-(s-Math.min(o,a))/2*c,u=Math.abs(a-o)/2*c;return{chunk:u/r,ratio:n.barPercentage,start:l}}function ni(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}function ri(t,e,n,r){return X(t)?ni(t,e,n,r):e[n.axis]=n.parse(t,r),e}function ii(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,c=[];let l,u,h,d;for(l=n,u=n+r;l<u;++l)d=e[l],h={},h[i.axis]=a||i.parse(o[l],l),c.push(ri(d,h,s,l));return c}function si(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function oi(t,e,n){return 0!==t?Pt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function ai(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function ci(t,e,n,r){let i=e.borderSkipped;const s={};if(!i)return void(t.borderSkipped=s);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:c,top:l,bottom:u}=ai(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=l:(n._bottom||0)===r?i=u:(s[li(u,o,a,c)]=!0,i=l)),s[li(i,o,a,c)]=!0,t.borderSkipped=s}function li(t,e,n,r){return r?(t=ui(t,e,n),t=hi(t,n,e)):t=hi(t,e,n),t}function ui(t,e,n){return t===e?n:t===n?e:t}function hi(t,e,n){return"start"===t?e:"end"===t?n:t}function di(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}(0,r.A)(Jr,"defaults",{}),(0,r.A)(Jr,"datasetElementType",null),(0,r.A)(Jr,"dataElementType",null);class fi extends Jr{parsePrimitiveData(t,e,n,r){return ii(t,e,n,r)}parseArrayData(t,e,n,r){return ii(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c="x"===i.axis?o:a,l="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=e[h],f={},f[i.axis]=i.parse(vt(p,c),h),u.push(ri(vt(p,l),f,s,h));return u}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),s=i._custom,o=si(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),l=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,r);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=i||J(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,l),p=(e._stacks||{})[o.axis],g={horizontal:c,base:n.base,enableBorderRadius:!p||si(e._custom)||s===p._top||s===p._bottom,x:c?n.head:f.center,y:c?f.center:n.head,height:c?f.size:Math.abs(n.size),width:c?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":r));const m=g.options||t[d].options;ci(g,m,p,s),di(g,m,l.ratio),this.updateElement(t[d],d,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),i=n.options.stacked,s=[],o=t=>{const n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(J(r)||isNaN(r))return!0};for(const a of r)if((void 0===e||!o(a))&&((!1===i||-1===s.indexOf(a.stack)||void 0===i&&void 0===a.stack)&&s.push(a.stack),a.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,s;for(i=0,s=e.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=t.barThickness,a=o||Zr(e);return{min:a,pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(t),c=a._custom,l=si(c);let u,h,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),l&&(d=c.barStart,p=c.barEnd-c.barStart,0!==d&&Pt(d)!==Pt(c.barEnd)&&(f=0),f+=d);const g=J(i)||l?f:i;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=oi(h,e,o)*s,d===o&&(m-=h/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),c=Math.min(t,i),f=Math.max(t,i);m=Math.max(Math.min(m,f),c),u=m+h,n&&!l&&(a._stacks[e.axis]._visualValues[r]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=Pt(h)*e.getLineWidthForValue(o)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,s=nt(r.maxBarThickness,1/0);let o,a;if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,c="flex"===r.barThickness?ei(t,e,r,n):ti(t,e,r,n),l=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0);o=c.start+c.chunk*l+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[e.axis]&&n[i].draw(this._ctx)}}(0,r.A)(fi,"id","bar"),(0,r.A)(fi,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,r.A)(fi,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class pi extends Jr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let s=0;s<i.length;s++){const t=e[n+s];i[s]._custom=nt(t[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let s=0;s<i.length;s++){const t=e[n+s];i[s]._custom=nt(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),c=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:c}=this._getSharedOptions(e,r),l=s.axis,u=o.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!i&&this.getParsed(h),d={},f=d[l]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[l]),p=d[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),c&&(d.options=a||this.resolveDataElementOptions(h,e.active?"active":r),i&&(d.options.radius=0)),this.updateElement(e,h,d,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=nt(n&&n._custom,i),r}}function gi(t,e,n){let r=1,i=1,s=0,o=0;if(e<It){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(t,e,r)=>$t(t,a,c,!0)?1:Math.max(e,e*n,r,r*n),p=(t,e,r)=>$t(t,a,c,!0)?-1:Math.min(e,e*n,r,r*n),g=f(0,l,h),m=f(kt,u,d),v=p(St,l,h),y=p(St+kt,u,d);r=(g-v)/2,i=(m-y)/2,s=-(g+v)/2,o=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(0,r.A)(pi,"id","bubble"),(0,r.A)(pi,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,r.A)(pi,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class mi extends Jr{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=t=>+n[t];if(Z(n[t])){const{key:t="value"}=this._parsing;o=e=>+vt(n[e],t)}for(i=t,s=t+e;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return Bt(this.options.rotation-90)}_getCircumference(){return Bt(this.options.circumference)}_getRotationExtents(){let t=It,e=-It;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min(rt(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:l,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:f,offsetY:p}=gi(u,l,a),g=(n.width-s)/h,m=(n.height-s)/d,v=Math.max(Math.min(g,m)/2,0),y=it(this.options.radius,v),b=Math.max(y*a,0),w=(y-b)/this._getVisibleDatasetWeightTotal();this.offsetX=f*y,this.offsetY=p*y,r.total=this.calculateTotal(),this.outerRadius=y-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/It)}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options,c=a.animation,l=(o.left+o.right)/2,u=(o.top+o.bottom)/2,h=i&&c.animateScale,d=h?0:this.innerRadius,f=h?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(e,r);let m,v=this._getRotation();for(m=0;m<e;++m)v+=this._circumference(m,i);for(m=e;m<e+n;++m){const e=this._circumference(m,i),n=t[m],s={x:l+this.offsetX,y:u+this.offsetY,startAngle:v,endAngle:v+e,circumference:e,outerRadius:f,innerRadius:d};g&&(s.options=p||this.resolveDataElementOptions(m,n.active?"active":r)),v+=e,this.updateElement(n,m,s,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?It*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Ae(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,s,o,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),t=s.data,o=s.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(nt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,r.A)(mi,"id","doughnut"),(0,r.A)(mi,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,r.A)(mi,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),(0,r.A)(mi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const s=t.getDatasetMeta(0),o=s.controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class vi extends Jr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=ue(e,r,s);this._drawStart=o,this._drawCount=a,he(e)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:c},t),this.updateElements(r,o,a,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(e,r),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=Mt(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,v=e+n,y=t.length;let b=e>0&&this.getParsed(e-1);for(let w=0;w<y;++w){const n=t[w],f=m?n:{};if(w<e||w>=v){f.skip=!0;continue}const y=this.getParsed(w),_=J(y[d]),x=f[h]=s.getPixelForValue(y[h],w),S=f[d]=i||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,y,a):y[d],w);f.skip=isNaN(x)||isNaN(S)||_,f.stop=w>0&&Math.abs(y[h]-b[h])>g,p&&(f.parsed=y,f.raw=c.data[w]),u&&(f.options=l||this.resolveDataElementOptions(w,n.active?"active":r)),m||this.updateElement(n,w,f,r),b=y}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}(0,r.A)(vi,"id","line"),(0,r.A)(vi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,r.A)(vi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class yi extends Jr{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Ae(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return Cn.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),s=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),o=(i-s)/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.options,a=o.animation,c=this._cachedMeta.rScale,l=c.xCenter,u=c.yCenter,h=c.getIndexAngle(0)-.5*St;let d,f=h;const p=360/this.countVisibleElements();for(d=0;d<e;++d)f+=this._computeAngle(d,r,p);for(d=e;d<e+n;d++){const e=t[d];let n=f,o=f+this._computeAngle(d,r,p),g=s.getDataVisibility(d)?c.getDistanceFromCenterForValue(this.getParsed(d).r):0;f=o,i&&(a.animateScale&&(g=0),a.animateRotate&&(n=o=h));const m={x:l,y:u,innerRadius:0,outerRadius:g,startAngle:n,endAngle:o,options:this.resolveDataElementOptions(d,e.active?"active":r)};this.updateElement(e,d,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Bt(this.resolveDataElementOptions(t,e).angle||n):0}}(0,r.A)(yi,"id","polarArea"),(0,r.A)(yi,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,r.A)(yi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const s=t.getDatasetMeta(0),o=s.controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class bi extends mi{}(0,r.A)(bi,"id","pie"),(0,r.A)(bi,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class wi extends Jr{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return Cn.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),c=s?i.xCenter:a.x,l=s?i.yCenter:a.y,u={x:c,y:l,angle:a.angle,skip:isNaN(c)||isNaN(l),options:n};this.updateElement(e,o,u,r)}}}(0,r.A)(wi,"id","radar"),(0,r.A)(wi,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,r.A)(wi,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class _i extends Jr{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:s}=ue(e,n,r);if(this._drawStart=i,this._drawCount=s,he(e)&&(i=0,s=n.length),this.options.showLine){const{dataset:i,_dataset:s}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},t)}this.updateElements(n,i,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,l=this.resolveDataElementOptions(e,r),u=this.getSharedOptions(l),h=this.includeOptions(r,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=Mt(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),l=v?e:{},p=J(n[f]),w=l[d]=s.getPixelForValue(n[d],b),_=l[f]=i||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);l.skip=isNaN(w)||isNaN(_)||p,l.stop=b>0&&Math.abs(n[d]-y[d])>m,g&&(l.parsed=n,l.raw=c.data[b]),h&&(l.options=u||this.resolveDataElementOptions(b,e.active?"active":r)),v||this.updateElement(e,b,l,r),y=n}this.updateSharedOptions(u,r,l)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,s)/2}}(0,r.A)(_i,"id","scatter"),(0,r.A)(_i,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,r.A)(_i,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function xi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Si{static override(t){Object.assign(Si.prototype,t)}constructor(t){(0,r.A)(this,"options",void 0),this.options=t||{}}init(){}formats(){return xi()}parse(){return xi()}format(){return xi()}add(){return xi()}diff(){return xi()}startOf(){return xi()}endOf(){return xi()}}var Ii={_date:Si};function Ai(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const t=a._reversePixels?Xt:Jt;if(!r)return t(s,e,n);if(i._sharedOptions){const r=s[0],i="function"===typeof r.getRange&&r.getRange(e);if(i){const r=t(s,e,n-i),o=t(s,e,n+i);return{lo:r.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function Ei(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,c=s.length;a<c;++a){const{index:t,data:n}=s[a],{lo:c,hi:l}=Ai(s[a],e,o,i);for(let e=c;e<=l;++e){const i=n[e];i.skip||r(i,t,e)}}}function Ti(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,s=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}function ki(t,e,n,r,i){const s=[];if(!i&&!t.isPointInArea(e))return s;const o=function(n,o,a){(i||ze(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&s.push({element:n,datasetIndex:o,index:a})};return Ei(t,n,e,o,!0),s}function Ni(t,e,n,r){let i=[];function s(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:c}=qt(t,{x:e.x,y:e.y});$t(c,o,a)&&i.push({element:t,datasetIndex:n,index:s})}return Ei(t,n,e,s),i}function Li(t,e,n,r,i,s){let o=[];const a=Ti(n);let c=Number.POSITIVE_INFINITY;function l(n,l,u){const h=n.inRange(e.x,e.y,i);if(r&&!h)return;const d=n.getCenterPoint(i),f=!!s||t.isPointInArea(d);if(!f&&!h)return;const p=a(e,d);p<c?(o=[{element:n,datasetIndex:l,index:u}],c=p):p===c&&o.push({element:n,datasetIndex:l,index:u})}return Ei(t,n,e,l),o}function Ci(t,e,n,r,i,s){return s||t.isPointInArea(e)?"r"!==n||r?Li(t,e,n,r,i,s):Ni(t,e,n,i):[]}function Pi(t,e,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return Ei(t,n,e,((t,r,c)=>{t[o](e[n],i)&&(s.push({element:t,datasetIndex:r,index:c}),a=a||t.inRange(e.x,e.y,i))})),r&&!a?[]:s}var Oi={evaluateInteractionItems:Ei,modes:{index(t,e,n,r){const i=Jn(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ki(t,i,s,r,o):Ci(t,i,s,!1,r,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&c.push({element:n,datasetIndex:t.index,index:e})})),c):[]},dataset(t,e,n,r){const i=Jn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ki(t,i,s,r,o):Ci(t,i,s,!1,r,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point(t,e,n,r){const i=Jn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return ki(t,i,s,r,o)},nearest(t,e,n,r){const i=Jn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Ci(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Jn(e,t);return Pi(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Jn(e,t);return Pi(t,i,"y",n.intersect,r)}}};const Ri=["left","top","right","bottom"];function Di(t,e){return t.filter((t=>t.pos===e))}function Mi(t,e){return t.filter((t=>-1===Ri.indexOf(t.pos)&&t.box.axis===e))}function Fi(t,e){return t.sort(((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function ji(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Bi(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!Ri.includes(r))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return e}function Vi(t,e){const n=Bi(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,c=n[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*r:o&&e.availableWidth,a.height=i):(a.width=r,a.height=l?l*i:o&&e.availableHeight)}return n}function Ui(t){const e=ji(t),n=Fi(e.filter((t=>t.box.fullSize)),!0),r=Fi(Di(e,"left"),!0),i=Fi(Di(e,"right")),s=Fi(Di(e,"top"),!0),o=Fi(Di(e,"bottom")),a=Mi(e,"x"),c=Mi(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:Di(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function qi(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function zi(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hi(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Z(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[i]+=n.size}s.getPadding&&zi(o,s.getPadding());const a=Math.max(0,e.outerWidth-qi(o,t,"left","right")),c=Math.max(0,e.outerHeight-qi(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function Wi(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function $i(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function Gi(t,e,n,r){const i=[];let s,o,a,c,l,u;for(s=0,o=t.length,l=0;s<o;++s){a=t[s],c=a.box,c.update(a.width||e.w,a.height||e.h,$i(a.horizontal,e));const{same:o,other:h}=Hi(e,n,a,r);l|=o&&i.length,u=u||h,c.fullSize||i.push(a)}return l&&Gi(i,e,n,r)||u}function Ki(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Yi(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){const r=e.w*l,s=c.size||t.height;bt(c.start)&&(o=c.start),t.fullSize?Ki(t,i.left,o,n.outerWidth-i.right-i.left,s):Ki(t,e.left+c.placed,o,r,s),c.start=o,c.placed+=r,o=t.bottom}else{const r=e.h*l,o=c.size||t.width;bt(c.start)&&(s=c.start),t.fullSize?Ki(t,s,i.top,o,n.outerHeight-i.bottom-i.top):Ki(t,s,e.top+c.placed,o,r),c.start=s,c.placed+=r,s=t.right}}e.x=s,e.y=o}var Qi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=an(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=Ui(t.boxes),c=a.vertical,l=a.horizontal;ot(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const u=c.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);zi(d,an(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),p=Vi(c.concat(l),h);Gi(a.fullSize,f,h,p),Gi(c,f,h,p),Gi(l,f,h,p)&&Gi(c,f,h,p),Wi(f),Yi(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Yi(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ot(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Ji{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Xi extends Ji{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Zi="$chartjs",ts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},es=t=>null===t||""===t;function ns(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Zi]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",es(i)){const e=rr(t,"width");void 0!==e&&(t.width=e)}if(es(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=rr(t,"height");void 0!==e&&(t.height=e)}return t}const rs=!!nr&&{passive:!0};function is(t,e,n){t.addEventListener(e,n,rs)}function ss(t,e,n){t.canvas.removeEventListener(e,n,rs)}function os(t,e){const n=ts[t.type]||t.type,{x:r,y:i}=Jn(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}function as(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function cs(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||as(n.addedNodes,r),e=e&&!as(n.removedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function ls(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||as(n.removedNodes,r),e=e&&!as(n.addedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const us=new Map;let hs=0;function ds(){const t=window.devicePixelRatio;t!==hs&&(hs=t,us.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function fs(t,e){us.size||window.addEventListener("resize",ds),us.set(t,e)}function ps(t){us.delete(t),us.size||window.removeEventListener("resize",ds)}function gs(t,e,n){const r=t.canvas,i=r&&zn(r);if(!i)return;const s=se(((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()}),window),o=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||s(n,r)}));return o.observe(i),fs(t,s),o}function ms(t,e,n){n&&n.disconnect(),"resize"===e&&ps(t)}function vs(t,e,n){const r=t.canvas,i=se((e=>{null!==t.ctx&&n(os(e,t))}),t);return is(r,e,i),i}class ys extends Ji{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(ns(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Zi])return!1;const n=e[Zi].initial;["height","width"].forEach((t=>{const r=n[t];J(r)?e.removeAttribute(t):e.setAttribute(t,r)}));const r=n.style||{};return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[Zi],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:cs,detach:ls,resize:gs},s=i[e]||vs;r[e]=s(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;const i={attach:ms,detach:ms,resize:ms},s=i[e]||ss;s(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return tr(t,e,n,r)}isAttached(t){const e=zn(t);return!(!e||!e.isConnected)}}function bs(t){return!qn()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Xi:ys}class ws{constructor(){(0,r.A)(this,"x",void 0),(0,r.A)(this,"y",void 0),(0,r.A)(this,"active",!1),(0,r.A)(this,"options",void 0),(0,r.A)(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Mt(this.x)&&Mt(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach((t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),r}}function _s(t,e){const n=t.options.ticks,r=xs(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Is(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return As(e,l,s,o/i),l;const u=Ss(s,e,i);if(o>0){let t,n;const r=o>1?Math.round((c-a)/(o-1)):null;for(Es(e,l,u,J(r)?0:a-r,a),t=0,n=o-1;t<n;t++)Es(e,l,u,s[t],s[t+1]);return Es(e,l,u,c,J(r)?e.length:c+r),l}return Es(e,l,u),l}function xs(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function Ss(t,e,n){const r=Ts(t),i=e.length/n;if(!r)return Math.max(i,1);const s=Dt(r);for(let o=0,a=s.length-1;o<a;o++){const t=s[o];if(t>i)return t}return Math.max(i,1)}function Is(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function As(t,e,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===o&&(e.push(t[i]),s++,o=n[s*r])}function Es(t,e,n,r,i){const s=nt(r,0),o=Math.min(nt(i,t.length),t.length);let a,c,l,u=0;n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),l=s;while(l<0)u++,l=Math.round(s+u*n);for(c=Math.max(s,0);c<o;c++)c===l&&(e.push(t[c]),u++,l=Math.round(s+u*n))}function Ts(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(0,r.A)(ws,"defaults",{}),(0,r.A)(ws,"defaultRoutes",void 0);const ks=t=>"left"===t?"right":"right"===t?"left":t,Ns=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Ls=(t,e)=>Math.min(e||t,t);function Cs(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function Ps(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(i);if(!(n&&(c=1===r?Math.max(l-s,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function Os(t,e){ot(t,(t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}}))}function Rs(t){return t.drawTicks?t.tickLength:0}function Ds(t,e){if(!t.display)return 0;const n=cn(t.font,e),r=an(t.padding),i=X(t.text)?t.text.length:1;return i*n.lineHeight+r.height}function Ms(t,e){return hn(t,{scale:e,type:"scale"})}function Fs(t,e,n){return hn(t,{tick:n,index:e,type:"tick"})}function js(t,e,n){let r=ae(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=ks(r)),r}function Bs(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:c}=t,{chartArea:l,scales:u}=c;let h,d,f,p=0;const g=o-i,m=a-s;if(t.isHorizontal()){if(d=ce(r,s,a),Z(n)){const t=Object.keys(n)[0],r=n[t];f=u[t].getPixelForValue(r)+g-e}else f="center"===n?(l.bottom+l.top)/2+g-e:Ns(t,n,e);h=a-s}else{if(Z(n)){const t=Object.keys(n)[0],r=n[t];d=u[t].getPixelForValue(r)-m+e}else d="center"===n?(l.left+l.right)/2-m+e:Ns(t,n,e);f=ce(r,o,i),p="left"===n?-kt:kt}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}class Vs extends ws{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=et(t,Number.POSITIVE_INFINITY),e=et(e,Number.NEGATIVE_INFINITY),n=et(n,Number.POSITIVE_INFINITY),r=et(r,Number.NEGATIVE_INFINITY),{min:et(t,n),max:et(e,r),minDefined:tt(t),maxDefined:tt(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,c=o.length;a<c;++a)e=o[a].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),s||(r=Math.max(r,e.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:et(n,et(r,n)),max:et(r,et(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){const e=this._labelItems||(this._labelItems=this._computeLabelItems(t));return e}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=un(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Cs(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=_s(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),st(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=st(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Ls(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let s,o,a,c=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const l=this._getLabelSizes(),u=l.widest.width,h=l.highest.height,d=Gt(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),o=this.maxHeight-Rs(t.grid)-e.padding-Ds(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),c=Vt(Math.min(Math.asin(Gt((l.highest.height+6)/s,-1,1)),Math.asin(Gt(o/a,-1,1))-Math.asin(Gt(h/a,-1,1)))),c=Math.max(r,Math.min(i,c))),this.labelRotation=c}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=Ds(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=Rs(i)+s):(t.height=this.maxHeight,t.width=Rs(i)+s),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,c=Bt(this.labelRotation),l=Math.cos(c),u=Math.sin(c);if(o){const e=n.mirror?0:u*i.width+l*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:l*i.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,u,l)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,c="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?c?(u=r*t.width,h=n*e.height):(u=n*t.height,h=r*e.width):"start"===i?h=e.width:"end"===i?u=t.width:"inner"!==i&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-l+s)*this.width/(this.width-l),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)J(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Cs(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(e/Ls(e,n));let c,l,u,h,d,f,p,g,m,v,y,b=0,w=0;for(c=0;c<e;c+=a){if(h=t[c].label,d=this._resolveTickFontOptions(c),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,J(h)||X(h)){if(X(h))for(l=0,u=h.length;l<u;++l)y=h[l],J(y)||X(y)||(m=Fe(r,p.data,p.gc,m,y),v+=g)}else m=Fe(r,p.data,p.gc,m,h),v=g;s.push(m),o.push(v),b=Math.max(m,b),w=Math.max(v,w)}Os(i,e);const _=s.indexOf(b),x=o.indexOf(w),S=t=>({width:s[t]||0,height:o[t]||0});return{first:S(0),last:S(e-1),widest:S(_),highest:S(x),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Kt(this._alignToPixels?Be(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=Fs(this.getContext(),t,n))}return this.$context||(this.$context=Ms(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Bt(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),s=t.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,c=this.isHorizontal(),l=this.ticks,u=l.length+(a?1:0),h=Rs(i),d=[],f=o.setContext(this.getContext()),p=f.display?f.width:0,g=p/2,m=function(t){return Be(n,t,p)};let v,y,b,w,_,x,S,I,A,E,T,k;if("top"===s)v=m(this.bottom),x=this.bottom-h,I=v-g,E=m(t.top)+g,k=t.bottom;else if("bottom"===s)v=m(this.top),E=t.top,k=m(t.bottom)-g,x=v+g,I=this.top+h;else if("left"===s)v=m(this.right),_=this.right-h,S=v-g,A=m(t.left)+g,T=t.right;else if("right"===s)v=m(this.left),A=t.left,T=m(t.right)-g,_=v+g,S=this.left+h;else if("x"===e){if("center"===s)v=m((t.top+t.bottom)/2+.5);else if(Z(s)){const t=Object.keys(s)[0],e=s[t];v=m(this.chart.scales[t].getPixelForValue(e))}E=t.top,k=t.bottom,x=v+g,I=x+h}else if("y"===e){if("center"===s)v=m((t.left+t.right)/2);else if(Z(s)){const t=Object.keys(s)[0],e=s[t];v=m(this.chart.scales[t].getPixelForValue(e))}_=v-g,S=_-h,A=t.left,T=t.right}const N=nt(r.ticks.maxTicksLimit,u),L=Math.max(1,Math.ceil(u/N));for(y=0;y<u;y+=L){const t=this.getContext(y),e=i.setContext(t),r=o.setContext(t),s=e.lineWidth,l=e.color,u=r.dash||[],h=r.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=Ps(this,y,a),void 0!==b&&(w=Be(n,b,s),c?_=S=A=T=w:x=I=E=k=w,d.push({tx1:_,ty1:x,tx2:S,ty2:I,x1:A,y1:E,x2:T,y2:k,width:s,color:l,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=u,this._borderValue=v,d}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:c,padding:l,mirror:u}=i,h=Rs(n.grid),d=h+l,f=u?-l:d,p=-Bt(this.labelRotation),g=[];let m,v,y,b,w,_,x,S,I,A,E,T,k="middle";if("top"===r)_=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===r)_=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,w=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,w=t.x}else if("x"===e){if("center"===r)_=(t.top+t.bottom)/2+d;else if(Z(r)){const t=Object.keys(r)[0],e=r[t];_=this.chart.scales[t].getPixelForValue(e)+d}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)w=(t.left+t.right)/2-d;else if(Z(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===a?k="top":"end"===a&&(k="bottom"));const N=this._getLabelSizes();for(m=0,v=o.length;m<v;++m){y=o[m],b=y.label;const t=i.setContext(this.getContext(m));S=this.getPixelForTick(m)+i.labelOffset,I=this._resolveTickFontOptions(m),A=I.lineHeight,E=X(b)?b.length:1;const e=E/2,n=t.color,a=t.textStrokeColor,l=t.textStrokeWidth;let h,d=x;if(s?(w=S,"inner"===x&&(d=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===r?"near"===c||0!==p?-E*A+A/2:"center"===c?-N.highest.height/2-e*A+A:-N.highest.height+A/2:"near"===c||0!==p?A/2:"center"===c?N.highest.height/2-e*A:N.highest.height-E*A,u&&(T*=-1),0===p||t.showLabelBackdrop||(w+=A/2*Math.sin(p))):(_=S,T=(1-E)*A/2),t.showLabelBackdrop){const e=an(t.backdropPadding),n=N.heights[m],r=N.widths[m];let i=T-e.top,s=0-e.left;switch(k){case"middle":i-=n/2;break;case"bottom":i-=n;break}switch(x){case"center":s-=r/2;break;case"right":s-=r;break}h={left:s,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:I,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:l,textAlign:d,textBaseline:k,translation:[w,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options,n=-Bt(this.labelRotation);if(n)return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=this._getLabelSizes(),o=t+i,a=s.widest.width;let c,l;return"left"===e?r?(l=this.right+i,"near"===n?c="left":"center"===n?(c="center",l+=a/2):(c="right",l+=a)):(l=this.right-o,"near"===n?c="right":"center"===n?(c="center",l-=a/2):(c="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?c="right":"center"===n?(c="center",l-=a/2):(c="left",l-=a)):(l=this.left+o,"near"===n?c="left":"center"===n?(c="center",l+=a/2):(c="right",l=this.right)):c="right",{textAlign:c,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks,r=n.findIndex((e=>e.value===t));if(r>=0){const t=e.setContext(this.getContext(r));return t.lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,s;const o=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,s=r.length;i<s;++i){const t=r[i];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let c,l,u,h;this.isHorizontal()?(c=Be(t,this.left,s)-s/2,l=Be(t,this.right,o)+o/2,u=h=a):(u=Be(t,this.top,s)-s/2,h=Be(t,this.bottom,o)+o/2,c=l=a),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(c,u),e.lineTo(l,h),e.stroke(),e.restore()}drawLabels(t){const e=this.options.ticks;if(!e.display)return;const n=this.ctx,r=this._computeLabelArea();r&&He(n,r);const i=this.getLabelItems(t);for(const s of i){const t=s.options,e=s.font,r=s.label,i=s.textOffset;Je(n,r,0,i,e,t)}r&&We(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=cn(n.font),s=an(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||Z(e)?(a+=s.bottom,X(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:c,titleY:l,maxWidth:u,rotation:h}=Bs(this,a,e,o);Je(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:js(o,e,r),textBaseline:"middle",translation:[c,l]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=nt(t.grid&&t.grid.z,-1),r=nt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Vs.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];s[n]!==this.id||t&&s.type!==t||r.push(s)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return cn(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Us{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;Hs(e)&&(n=this.register(e));const r=this.items,i=t.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,qs(t,s,n),this.override&&De.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in De[r]&&(delete De[r][n],this.override&&delete Le[n])}}function qs(t,e,n){const r=ht(Object.create(null),[n?De.get(n):{},De.get(e),t.defaults]);De.set(e,r),t.defaultRoutes&&zs(e,t.defaultRoutes),t.descriptors&&De.describe(e,t.descriptors)}function zs(t,e){Object.keys(e).forEach((n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");De.route(s,i,c,a)}))}function Hs(t){return"id"in t&&"defaults"in t}class Ws{constructor(){this.controllers=new Us(Jr,"datasets",!0),this.elements=new Us(ws,"elements"),this.plugins=new Us(Object,"plugins"),this.scales=new Us(Vs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):ot(e,(e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)}))}))}_exec(t,e,n){const r=yt(t);st(n["before"+r],[],n),e[t](n),st(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var $s=new Ws;class Gs{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),s=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin,s=t[n],o=[e,r,i.options];if(!1===st(s,o,t)&&r.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=nt(n.options&&n.options.plugins,{}),i=Ks(n);return!1!==r||e?Qs(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function Ks(t){const e={},n=[],r=Object.keys($s.plugins.items);for(let s=0;s<r.length;s++)n.push($s.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const t=i[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}function Ys(t,e){return e||!1!==t?!0===t?{}:t:null}function Qs(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const e=a.id,c=Ys(r[e],i);null!==c&&s.push({plugin:a,options:Js(t.config,{plugin:a,local:n[e]},c,o)})}return s}function Js(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Xs(t,e){const n=De.datasets[t]||{},r=(e.datasets||{})[t]||{};return r.indexAxis||e.indexAxis||n.indexAxis||"x"}function Zs(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}function to(t,e){return t===e?"_index_":"_value_"}function eo(t){if("x"===t||"y"===t||"r"===t)return t}function no(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function ro(t,...e){if(eo(t))return t;for(const n of e){const e=n.axis||no(n.position)||t.length>1&&eo(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function io(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function so(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return io(t,"x",n[0])||io(t,"y",n[0])}return{}}function oo(t,e){const n=Le[t.type]||{scales:{}},r=e.scales||{},i=Xs(t.type,e),s=Object.create(null);return Object.keys(r).forEach((e=>{const o=r[e];if(!Z(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=ro(e,o,so(e,t),De.scales[o.type]),c=to(a,i),l=n.scales||{};s[e]=dt(Object.create(null),[{axis:a},o,l[a],l[c]])})),t.data.datasets.forEach((n=>{const i=n.type||t.type,o=n.indexAxis||Xs(i,e),a=Le[i]||{},c=a.scales||{};Object.keys(c).forEach((t=>{const e=Zs(t,o),i=n[e+"AxisID"]||e;s[i]=s[i]||Object.create(null),dt(s[i],[{axis:e},r[i],c[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];dt(e,[De.scales[e.type],De.scale])})),s}function ao(t){const e=t.options||(t.options={});e.plugins=nt(e.plugins,{}),e.scales=oo(t,e)}function co(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function lo(t){return t=t||{},t.data=co(t.data),ao(t),t}const uo=new Map,ho=new Set;function fo(t,e){let n=uo.get(t);return n||(n=e(),uo.set(t,n),ho.add(n)),n}const po=(t,e,n)=>{const r=vt(e,n);void 0!==r&&t.add(r)};class go{constructor(t){this._config=lo(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=co(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ao(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fo(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return fo(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return fo(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return fo(`${n}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>po(a,t,e)))),e.forEach((t=>po(a,r,t))),e.forEach((t=>po(a,Le[i]||{},t))),e.forEach((t=>po(a,De,t))),e.forEach((t=>po(a,Ce,t)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),ho.has(e)&&s.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Le[e]||{},De.datasets[e]||{},{type:e},De,Ce]}resolveNamedOptions(t,e,n,r=[""]){const i={$shared:!0},{resolver:s,subPrefixes:o}=mo(this._resolverCache,t,r);let a=s;if(yo(s,e)){i.$shared=!1,n=wt(n)?n():n;const e=this.createResolver(t,n,o);a=fn(s,n,e)}for(const c of e)i[c]=a[c];return i}createResolver(t,e,n=[""],r){const{resolver:i}=mo(this._resolverCache,t,n);return Z(e)?fn(i,e,void 0,r):i}}function mo(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);if(!s){const t=dn(e,n);s={resolver:t,subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},r.set(i,s)}return s}const vo=t=>Z(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||wt(t[n])),!1);function yo(t,e){const{isScriptable:n,isIndexable:r}=pn(t);for(const i of e){const e=n(i),s=r(i),o=(s||e)&&t[i];if(e&&(wt(o)||vo(o))||s&&X(o))return!0}return!1}var bo="4.3.0";const wo=["top","bottom","left","right","chartArea"];function _o(t,e){return"top"===t||"bottom"===t||-1===wo.indexOf(t)&&"x"===e}function xo(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function So(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),st(n&&n.onComplete,[t],e)}function Io(t){const e=t.chart,n=e.options.animation;st(n&&n.onProgress,[t],e)}function Ao(t){return qn()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Eo={},To=t=>{const e=Ao(t);return Object.values(Eo).filter((t=>t.canvas===e)).pop()};function ko(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const s=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=s)}}}function No(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}function Lo(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}class Co{static register(...t){$s.add(...t),Po()}static unregister(...t){$s.remove(...t),Po()}constructor(t,e){const n=this.config=new go(e),r=Ao(t),i=To(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||bs(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,c=a&&a.height,l=a&&a.width;this.id=Q(),this.ctx=o,this.canvas=a,this.width=l,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gs,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oe((t=>this.update(t)),s.resizeDelay||0),this._dataChanges=[],Eo[this.id]=this,o&&a?(Ar.listen(this,"complete",So),Ar.listen(this,"progress",Io),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return J(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return $s}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():er(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ve(this.canvas,this.ctx),this}stop(){return Ar.stop(this),this}resize(t,e){Ar.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,t,e,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,er(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),st(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){const t=this.options,e=t.scales||{};ot(e,((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let i=[];e&&(i=i.concat(Object.keys(e).map((t=>{const n=e[t],r=ro(t,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),ot(i,(e=>{const i=e.options,s=i.id,o=ro(s,i),a=nt(i.type,e.dtype);void 0!==i.position&&_o(i.position,o)===_o(e.dposition)||(i.position=e.dposition),r[s]=!0;let c=null;if(s in n&&n[s].type===a)c=n[s];else{const t=$s.getScale(a);c=new t({id:s,type:a,ctx:this.ctx,chart:this}),n[c.id]=c}c.init(i,t)})),ot(r,((t,e)=>{t||delete n[e]})),ot(n,(t=>{Qi.configure(this,t,t.options),Qi.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(xo("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||Xs(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=$s.getController(s),{datasetElementType:r,dataElementType:o}=De.datasets[s];Object.assign(e,{dataElementType:$s.getElement(o),datasetElementType:r&&$s.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){ot(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let c=0,l=this.data.datasets.length;c<l;c++){const{controller:t}=this.getDatasetMeta(c),e=!r&&-1===i.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||ot(i,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xo("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ot(this.scales,(t=>{Qi.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);_t(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){const e="_removeElements"===n?-i:i;ko(t,r,e)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),r=n(0);for(let i=1;i<e;i++)if(!_t(r,n(i)))return;return Array.from(r).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Qi.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],ot(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,wt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ar.has(this)?this.attached&&!Ar.running(this)&&Ar.start(this):(this.draw(),So({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,i=Lo(t)||this.chartArea,s={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&He(e,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),t.controller.draw(),r&&We(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return ze(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=Oi.modes[e];return"function"===typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter((t=>t&&t._dataset===e)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=hn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),s=i.controller._resolveAnimations(void 0,r);bt(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(i,{visible:n}),this.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ar.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ve(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Eo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};ot(this.options.events,(t=>n(t,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){ot(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},ot(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!at(n,e);r&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),s=i(e,t),o=n?t:i(t,e);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,s=e,o=this._getActiveElements(t,r,n,s),a=xt(t),c=No(t,this._lastEvent,n,a);n&&(this._lastEvent=null,st(i.onHover,[t,o,this],this),a&&st(i.onClick,[t,o,this],this));const l=!at(o,r);return(l||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=c,l}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function Po(){return ot(Co.instances,(t=>t._plugins.invalidate()))}function Oo(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:c}=e;let l=i/a;t.beginPath(),t.arc(s,o,a,r-l,n+l),c>i?(l=i/c,t.arc(s,o,c,n+l,r-l,!0)):t.arc(s,o,i,n+kt,r-kt),t.closePath(),t.clip()}function Ro(t){return rn(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Do(t,e,n,r){const i=Ro(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=t=>{const e=(n-Math.min(s,t))*r/2;return Gt(t,0,Math.min(s,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Gt(i.innerStart,0,o),innerEnd:Gt(i.innerEnd,0,o)}}function Mo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Fo(t,e,n,r,i,s){const{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-l,0),d=u>0?u+r+n+l:0;let f=0;const p=i-c;if(r){const t=u>0?u-r:0,e=h>0?h-r:0,n=(t+e)/2,i=0!==n?p*n/(n+r):p;f=(p-i)/2}const g=Math.max(.001,p*h-n/St)/h,m=(p-g)/2,v=c+m+f,y=i-m-f,{outerStart:b,outerEnd:w,innerStart:_,innerEnd:x}=Do(e,d,h,y-v),S=h-b,I=h-w,A=v+b/S,E=y-w/I,T=d+_,k=d+x,N=v+_/T,L=y-x/k;if(t.beginPath(),s){const e=(A+E)/2;if(t.arc(o,a,h,A,e),t.arc(o,a,h,e,E),w>0){const e=Mo(I,E,o,a);t.arc(e.x,e.y,w,E,y+kt)}const n=Mo(k,y,o,a);if(t.lineTo(n.x,n.y),x>0){const e=Mo(k,L,o,a);t.arc(e.x,e.y,x,y+kt,L+Math.PI)}const r=(y-x/d+(v+_/d))/2;if(t.arc(o,a,d,y-x/d,r,!0),t.arc(o,a,d,r,v+_/d,!0),_>0){const e=Mo(T,N,o,a);t.arc(e.x,e.y,_,N+Math.PI,v-kt)}const i=Mo(S,v,o,a);if(t.lineTo(i.x,i.y),b>0){const e=Mo(S,A,o,a);t.arc(e.x,e.y,b,v-kt,A)}}else{t.moveTo(o,a);const e=Math.cos(A)*h+o,n=Math.sin(A)*h+a;t.lineTo(e,n);const r=Math.cos(E)*h+o,i=Math.sin(E)*h+a;t.lineTo(r,i)}t.closePath()}function jo(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let c=e.endAngle;if(s){Fo(t,e,n,r,c,i);for(let e=0;e<s;++e)t.fill();isNaN(a)||(c=o+(a%It||It))}return Fo(t,e,n,r,c,i),t.fill(),c}function Bo(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=c,f="inner"===c.borderAlign;if(!l)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*l,t.lineJoin=u||"round"):(t.lineWidth=l,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){Fo(t,e,n,r,p,i);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(p=o+(a%It||It))}f&&Oo(t,e,p),s||(Fo(t,e,n,r,p,i),t.stroke())}(0,r.A)(Co,"defaults",De),(0,r.A)(Co,"instances",Eo),(0,r.A)(Co,"overrides",Le),(0,r.A)(Co,"registry",$s),(0,r.A)(Co,"version",bo),(0,r.A)(Co,"getChart",To);class Vo extends ws{constructor(t){super(),(0,r.A)(this,"circumference",void 0),(0,r.A)(this,"endAngle",void 0),(0,r.A)(this,"fullCircles",void 0),(0,r.A)(this,"innerRadius",void 0),(0,r.A)(this,"outerRadius",void 0),(0,r.A)(this,"pixelMargin",void 0),(0,r.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=qt(r,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:l,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=nt(u,a-o),f=d>=It||$t(i,o,a),p=Yt(s,c+h,l+h);return f&&p}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:c}=this.options,l=(r+i)/2,u=(s+o+c+a)/2;return{x:e+Math.cos(l)*u,y:n+Math.sin(l)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>It?Math.floor(n/It):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const a=1-Math.sin(Math.min(St,n||0)),c=r*a;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,jo(t,this,c,i,s),Bo(t,this,c,i,s),t.restore()}}function Uo(t,e,n=e){t.lineCap=nt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(nt(n.borderDash,e.borderDash)),t.lineDashOffset=nt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=nt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=nt(n.borderWidth,e.borderWidth),t.strokeStyle=nt(n.borderColor,e.borderColor)}function qo(t,e,n){t.lineTo(n.x,n.y)}function zo(t){return t.stepped?$e:t.tension||"monotone"===t.cubicInterpolationMode?Ge:qo}function Ho(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function Wo(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=Ho(i,n,r),u=zo(s);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=l;++h)d=i[(a+(g?l-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return c&&(d=i[(a+(g?l:0))%o],u(t,f,d,g,s.stepped)),!!c}function $o(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=Ho(i,n,r),{move:c=!0,reverse:l}=r||{};let u,h,d,f,p,g,m=0,v=0;const y=t=>(o+(l?a-t:t))%s,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(c&&(h=i[y(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=i[y(u)],h.skip)continue;const e=h.x,n=h.y,r=0|e;r===d?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=r,v=0,f=p=n),g=n}b()}function Go(t){const e=t.options,n=e.borderDash&&e.borderDash.length,r=!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n;return r?$o:Wo}function Ko(t){return t.stepped?sr:t.tension||"monotone"===t.cubicInterpolationMode?or:ir}function Yo(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Uo(t,e.options),t.stroke(i)}function Qo(t,e,n,r){const{segments:i,options:s}=e,o=Go(e);for(const a of i)Uo(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(0,r.A)(Vo,"id","arc"),(0,r.A)(Vo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,r.A)(Vo,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,r.A)(Vo,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const Jo="function"===typeof Path2D;function Xo(t,e,n,r){Jo&&!e.options.segment?Yo(t,e,n,r):Qo(t,e,n,r)}class Zo extends ws{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Un(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=br(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,s=mr(this,{property:e,start:r,end:r});if(!s.length)return;const o=[],a=Ko(n);let c,l;for(c=0,l=s.length;c<l;++c){const{start:l,end:u}=s[c],h=i[l],d=i[u];if(h===d){o.push(h);continue}const f=Math.abs((r-h[e])/(d[e]-h[e])),p=a(h,d,f,n.stepped);p[e]=t[e],o.push(p)}return 1===o.length?o[0]:o}pathSegment(t,e,n){const r=Go(this);return r(t,this,e,n)}path(t,e,n){const r=this.segments,i=Go(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of r)s&=i(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,r){const i=this.options||{},s=this.points||[];s.length&&i.borderWidth&&(t.save(),Xo(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ta(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}(0,r.A)(Zo,"id","line"),(0,r.A)(Zo,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,r.A)(Zo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,r.A)(Zo,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class ea extends ws{constructor(t){super(),(0,r.A)(this,"parsed",void 0),(0,r.A)(this,"skip",void 0),(0,r.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return ta(this,t,"x",e)}inYRange(t,e){return ta(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const n=e&&t.borderWidth||0;return 2*(e+n)}draw(t,e){const n=this.options;this.skip||n.radius<.1||!ze(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Ue(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function na(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),c=Math.max(n,i),l=r-h,u=r+h):(h=s/2,a=n-h,c=n+h,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function ra(t,e,n,r){return t?0:Gt(e,n,r)}function ia(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=sn(r);return{t:ra(i.top,s.top,0,n),r:ra(i.right,s.right,0,e),b:ra(i.bottom,s.bottom,0,n),l:ra(i.left,s.left,0,e)}}function sa(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=on(i),o=Math.min(e,n),a=t.borderSkipped,c=r||Z(i);return{topLeft:ra(!c||a.top||a.left,s.topLeft,0,o),topRight:ra(!c||a.top||a.right,s.topRight,0,o),bottomLeft:ra(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ra(!c||a.bottom||a.right,s.bottomRight,0,o)}}function oa(t){const e=na(t),n=e.right-e.left,r=e.bottom-e.top,i=ia(t,n/2,r/2),s=sa(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function aa(t,e,n,r){const i=null===e,s=null===n,o=i&&s,a=t&&!o&&na(t,r);return a&&(i||Yt(e,a.left,a.right))&&(s||Yt(n,a.top,a.bottom))}function ca(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function la(t,e){t.rect(e.x,e.y,e.w,e.h)}function ua(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}(0,r.A)(ea,"id","point"),(0,r.A)(ea,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,r.A)(ea,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class ha extends ws{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=oa(this),o=ca(s.radius)?Xe:la;t.save(),s.w===i.w&&s.h===i.h||(t.beginPath(),o(t,ua(s,e,i)),t.clip(),o(t,ua(i,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,ua(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return aa(this,t,e,n)}inXRange(t,e){return aa(this,t,null,e)}inYRange(t,e){return aa(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}(0,r.A)(ha,"id","bar"),(0,r.A)(ha,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,r.A)(ha,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const da=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],fa=da.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function pa(t){return da[t%da.length]}function ga(t){return fa[t%fa.length]}function ma(t,e){return t.borderColor=pa(e),t.backgroundColor=ga(e),++e}function va(t,e){return t.backgroundColor=t.data.map((()=>pa(e++))),e}function ya(t,e){return t.backgroundColor=t.data.map((()=>ga(e++))),e}function ba(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof mi?e=va(n,e):i instanceof yi?e=ya(n,e):i&&(e=ma(n,e))}}function wa(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function _a(t){return t&&(t.borderColor||t.backgroundColor)}var xa={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(wa(r)||_a(i)||s&&wa(s)))return;const o=ba(t);r.forEach(o)}};const Sa=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Ia=(t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Aa extends ws{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=st(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=cn(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Sa(n,i);let c,l;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,l=this._fitRows(s,i,o,a)+10):(l=this.maxHeight,c=this._fitCols(s,r,o,a)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],l=r+o;let u=t;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-l;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+i.measureText(t.text).width;(0===f||c[c.length-1]+p+2*o>s)&&(u+=l,c[c.length-(f>0?0:1)]=0,d+=l,h++),a[f]={left:0,top:d,row:h,width:p,height:r},c[c.length-1]+=p+o})),u}_fitCols(t,e,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],l=s-t;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,s)=>{const{itemWidth:g,itemHeight:m}=Ea(n,e,i,t,r);s>0&&d+m+2*o>l&&(u+=h+o,c.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,c.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,s=lr(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=ce(n,this.left+r,this.right-this.lineWidths[i]);for(const a of e)i!==a.row&&(i=a.row,o=ce(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+t+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=ce(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const a of e)a.col!==i&&(i=a.col,o=ce(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;He(t,this),this._draw(),We(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:s}=t,o=De.color,a=lr(t.rtl,this.left,this.width),c=cn(s.font),{padding:l}=s,u=c.size,h=u/2;let d;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Sa(s,u),m=function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=nt(n.lineWidth,1);if(r.fillStyle=nt(n.fillStyle,o),r.lineCap=nt(n.lineCap,"butt"),r.lineDashOffset=nt(n.lineDashOffset,0),r.lineJoin=nt(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=nt(n.strokeStyle,o),r.setLineDash(nt(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},c=a.xPlus(t,f/2),l=e+h;qe(r,o,c,l,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),o=a.leftForLtr(t,f),c=on(n.borderRadius);r.beginPath(),Object.values(c).some((t=>0!==t))?Xe(r,{x:o,y:s,w:f,h:p,radius:c}):r.rect(o,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()},v=function(t,e,n){Je(r,n.text,t,e+g/2,c,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})},y=this.isHorizontal(),b=this._computeTitleHeight();d=y?{x:ce(i,this.left+l,this.right-n[0]),y:this.top+l+b,line:0}:{x:this.left+l,y:ce(i,this.top+b+l,this.bottom-e[0].height),line:0},ur(this.ctx,t.textDirection);const w=g+l;this.legendItems.forEach(((o,u)=>{r.strokeStyle=o.fontColor,r.fillStyle=o.fontColor;const p=r.measureText(o.text).width,g=a.textAlign(o.textAlign||(o.textAlign=s.textAlign)),_=f+h+p;let x=d.x,S=d.y;a.setWidth(this.width),y?u>0&&x+_+l>this.right&&(S=d.y+=w,d.line++,x=d.x=ce(i,this.left+l,this.right-n[d.line])):u>0&&S+w>this.bottom&&(x=d.x=x+e[d.line].width+l,d.line++,S=d.y=ce(i,this.top+b+l,this.bottom-e[d.line].height));const I=a.x(x);if(m(I,S,o),x=le(g,x+f+h,y?x+_:this.right,t.rtl),v(a.x(x),S,o),y)d.x+=_+l;else if("string"!==typeof o.text){const t=c.lineHeight;d.y+=Na(o,t)}else d.y+=w})),hr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=cn(e.font),r=an(e.padding);if(!e.display)return;const i=lr(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,c=r.top+a;let l,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),l=this.top+c,u=ce(t.align,u,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);l=c+ce(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=ce(o,u,u+h);s.textAlign=i.textAlign(ae(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,Je(s,e.text,d,l,n)}_computeTitleHeight(){const t=this.options.title,e=cn(t.font),n=an(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(Yt(t,this.left,this.right)&&Yt(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Yt(t,r.left,r.left+r.width)&&Yt(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!La(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,i=Ia(r,n);r&&!i&&st(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!i&&st(e.onHover,[t,n,this],this)}else n&&st(e.onClick,[t,n,this],this)}}function Ea(t,e,n,r,i){const s=Ta(r,t,e,n),o=ka(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Ta(t,e,n,r){let i=t.text;return i&&"string"!==typeof i&&(i=i.reduce(((t,e)=>t.length>e.length?t:e))),e+n.size/2+r.measureText(i).width}function ka(t,e,n){let r=t;return"string"!==typeof e.text&&(r=Na(e,n)),r}function Na(t,e){const n=t.text?t.text.length+.5:0;return e*n}function La(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}var Ca={id:"legend",_element:Aa,start(t,e,n){const r=t.legend=new Aa({ctx:t.ctx,options:n,chart:t});Qi.configure(t,r,n),Qi.addBox(t,r)},stop(t){Qi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Qi.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const c=t.controller.getStyle(n?0:void 0),l=an(c.borderWidth);return{text:e[t.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Pa extends ws{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=X(n.text)?n.text.length:1;this._padding=an(n.padding);const i=r*cn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,c,l,u=0;return this.isHorizontal()?(c=ce(o,n,i),l=e+t,a=i-n):("left"===s.position?(c=n+t,l=ce(o,r,e),u=-.5*St):(c=i-t,l=ce(o,e,r),u=.5*St),a=r-e),{titleX:c,titleY:l,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=cn(e.font),r=n.lineHeight,i=r/2+this._padding.top,{titleX:s,titleY:o,maxWidth:a,rotation:c}=this._drawArgs(i);Je(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:c,textAlign:ae(e.align),textBaseline:"middle",translation:[s,o]})}}function Oa(t,e){const n=new Pa({ctx:t.ctx,options:e,chart:t});Qi.configure(t,n,e),Qi.addBox(t,n),t.titleBlock=n}var Ra={id:"title",_element:Pa,start(t,e,n){Oa(t,n)},stop(t){const e=t.titleBlock;Qi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Qi.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Da={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r+=t.x,i+=t.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n,r,i,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=r.getCenterPoint(),n=zt(e,t);n<a&&(a=n,i=r)}}if(i){const t=i.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function Ma(t,e){return e&&(X(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fa(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ja(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Ba(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,c=cn(e.bodyFont),l=cn(e.titleFont),u=cn(e.footerFont),h=s.length,d=i.length,f=r.length,p=an(e.padding);let g=p.height,m=0,v=r.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const t=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;g+=f*t+(v-f)*c.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=l.string,ot(t.title,b),n.font=c.string,ot(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?o+2+e.boxPadding:0,ot(r,(t=>{ot(t.before,b),ot(t.lines,b),ot(t.after,b)})),y=0,n.font=u.string,ot(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Va(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Ua(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===t&&i+s+o>e.width||("right"===t&&i-s-o<0||void 0)}function qa(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return"center"===r?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),Ua(l,t,e,n)&&(l="center"),l}function za(t,e,n){const r=n.yAlign||e.yAlign||Va(t,n);return{xAlign:n.xAlign||e.xAlign||qa(t,e,n,r),yAlign:r}}function Ha(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}function Wa(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}function $a(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=on(o);let p=Ha(e,a);const g=Wa(e,c,l);return"center"===c?"left"===a?p+=l:"right"===a&&(p-=l):"left"===a?p-=Math.max(u,d)+i:"right"===a&&(p+=Math.max(h,f)+i),{x:Gt(p,0,r.width-e.width),y:Gt(g,0,r.height-e.height)}}function Ga(t,e,n){const r=an(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function Ka(t){return Ma([],Fa(t))}function Ya(t,e,n){return hn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Qa(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ja={beforeTitle:Y,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Y,beforeBody:Y,beforeLabel:Y,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return J(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex),n=e.controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex),n=e.controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Y,afterBody:Y,beforeFooter:Y,footer:Y,afterFooter:Y};function Xa(t,e,n,r){const i=t[e].call(n,r);return"undefined"===typeof i?Ja[e].call(n,r):i}class Za extends ws{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Nr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Ya(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,r=Xa(n,"beforeTitle",this,t),i=Xa(n,"title",this,t),s=Xa(n,"afterTitle",this,t);let o=[];return o=Ma(o,Fa(r)),o=Ma(o,Fa(i)),o=Ma(o,Fa(s)),o}getBeforeBody(t,e){return Ka(Xa(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return ot(t,(t=>{const e={before:[],lines:[],after:[]},i=Qa(n,t);Ma(e.before,Fa(Xa(i,"beforeLabel",this,t))),Ma(e.lines,Xa(i,"label",this,t)),Ma(e.after,Fa(Xa(i,"afterLabel",this,t))),r.push(e)})),r}getAfterBody(t,e){return Ka(Xa(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=Xa(n,"beforeFooter",this,t),i=Xa(n,"footer",this,t),s=Xa(n,"afterFooter",this,t);let o=[];return o=Ma(o,Fa(r)),o=Ma(o,Fa(i)),o=Ma(o,Fa(s)),o}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,c=[];for(o=0,a=e.length;o<a;++o)c.push(ja(this.chart,e[o]));return t.filter&&(c=c.filter(((e,r,i)=>t.filter(e,r,i,n)))),t.itemSort&&(c=c.sort(((e,r)=>t.itemSort(e,r,n)))),ot(c,(e=>{const n=Qa(t.callbacks,e);r.push(Xa(n,"labelColor",this,e)),i.push(Xa(n,"labelPointStyle",this,e)),s.push(Xa(n,"labelTextColor",this,e))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=c,c}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const t=Da[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=Ba(this,n),o=Object.assign({},t,e),a=za(this.chart,n,o),c=$a(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:c,bottomLeft:l,bottomRight:u}=on(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,v,y,b,w;return"center"===i?(b=d+p/2,"left"===r?(g=h,m=g-s,y=b+s,w=b-s):(g=h+f,m=g+s,y=b-s,w=b+s),v=g):(m="left"===r?h+Math.max(a,l)+s:"right"===r?h+f-Math.max(c,u)-s:this.caretX,"top"===i?(y=d,b=y-s,g=m-s,v=m+s):(y=d+p,b=y+s,g=m+s,v=m-s),w=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:w}}drawTitle(t,e,n){const r=this.title,i=r.length;let s,o,a;if(i){const c=lr(n.rtl,this.x,this.width);for(t.x=Ga(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",s=cn(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<i;++a)e.fillText(r[a],c.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===i&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:c}=i,l=cn(i.bodyFont),u=Ga(this,"left",i),h=r.x(u),d=a<l.lineHeight?(l.lineHeight-a)/2:0,f=e.y+d;if(i.usePointStyle){const e={radius:Math.min(c,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(h,c)+c/2,l=f+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Ue(t,e,n,l),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,Ue(t,e,n,l)}else{t.lineWidth=Z(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=r.leftForLtr(h,c),n=r.leftForLtr(r.xPlus(h,1),c-2),o=on(s.borderRadius);Object.values(o).some((t=>0!==t))?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Xe(t,{x:e,y:f,w:c,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Xe(t,{x:n,y:f+1,w:c-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,f,c,a),t.strokeRect(e,f,c,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,c-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:c,boxPadding:l}=n,u=cn(n.bodyFont);let h=u.lineHeight,d=0;const f=lr(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+i},g=f.textAlign(s);let m,v,y,b,w,_,x;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=Ga(this,g,n),e.fillStyle=n.bodyColor,ot(this.beforeBody,p),d=o&&"right"!==g?"center"===s?c/2+l:c+2+l:0,b=0,_=r.length;b<_;++b){for(m=r[b],v=this.labelTextColors[b],e.fillStyle=v,ot(m.before,p),y=m.lines,o&&y.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(u.lineHeight,a)),w=0,x=y.length;w<x;++w)p(y[w]),h=u.lineHeight;ot(m.after,p)}d=0,h=u.lineHeight,ot(this.afterBody,p),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let s,o;if(i){const a=lr(n.rtl,this.x,this.width);for(t.x=Ga(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=cn(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<i;++o)e.fillText(r[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=t,{width:c,height:l}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=on(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+c-h,a),e.quadraticCurveTo(o+c,a,o+c,a+h),"center"===s&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(o+c,a+l-f),e.quadraticCurveTo(o+c,a+l,o+c-f,a+l),"bottom"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+d,a+l),e.quadraticCurveTo(o,a+l,o,a+l-d),"center"===s&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Da[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Ba(this,t),o=Object.assign({},n,this._size),a=za(e,t,o),c=$a(t,o,a,e);r._to===c.x&&i._to===c.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=an(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),ur(t,e.textDirection),i.y+=s.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),hr(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),i=!at(n,r),s=this._positionChanged(r,e);(i||s)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(t,i,e,n),o=this._positionChanged(s,t),a=e||!at(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e;const s=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,s=Da[i.position].call(this,t,e);return!1!==s&&(n!==s.x||r!==s.y)}}(0,r.A)(Za,"positioners",Da);var tc={id:"tooltip",_element:Za,positioners:Da,afterInit(t,e,n){n&&(t.tooltip=new Za({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ja},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const ec=(t,e,n,r)=>("string"===typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function nc(t,e,n,r){const i=t.indexOf(e);if(-1===i)return ec(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const rc=(t,e)=>null===t?null:Gt(Math.round(t),0,e);function ic(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class sc extends Vs{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(J(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:nc(n,t,nt(e,t),this._addedLabels),rc(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)r.push({value:s});return r}getLabelForValue(t){return ic.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function oc(t,e){const n=[],r=1e-14,{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,p=u-1,{min:g,max:m}=e,v=!J(o),y=!J(a),b=!J(l),w=(m-g)/(h+1);let _,x,S,I,A=Rt((m-g)/p/f)*f;if(A<r&&!v&&!y)return[{value:g},{value:m}];I=Math.ceil(m/A)-Math.floor(g/A),I>p&&(A=Rt(I*A/p/f)*f),J(c)||(_=Math.pow(10,c),A=Math.ceil(A*_)/_),"ticks"===i?(x=Math.floor(g/A)*A,S=Math.ceil(m/A)*A):(x=g,S=m),v&&y&&s&&Ft((a-o)/s,A/1e3)?(I=Math.round(Math.min((a-o)/A,u)),A=(a-o)/I,x=o,S=a):b?(x=v?o:x,S=y?a:S,I=l-1,A=(S-x)/I):(I=(S-x)/A,I=Ot(I,Math.round(I),A/1e3)?Math.round(I):Math.ceil(I));const E=Math.max(Ut(A),Ut(x));_=Math.pow(10,J(c)?E:c),x=Math.round(x*_)/_,S=Math.round(S*_)/_;let T=0;for(v&&(d&&x!==o?(n.push({value:o}),x<o&&T++,Ot(Math.round((x+T*A)*_)/_,o,ac(o,w,t))&&T++):x<o&&T++);T<I;++T){const t=Math.round((x+T*A)*_)/_;if(y&&t>a)break;n.push({value:t})}return y&&d&&S!==a?n.length&&Ot(n[n.length-1].value,a,ac(a,w,t))?n[n.length-1].value=a:n.push({value:a}):y&&S!==a||n.push({value:S}),n}function ac(t,e,{horizontal:n,minRotation:r}){const i=Bt(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}(0,r.A)(sc,"id","category"),(0,r.A)(sc,"defaults",{ticks:{callback:ic}});class cc extends Vs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return J(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=t=>r=e?r:t,o=t=>i=n?i:t;if(t){const t=Pt(r),e=Pt(i);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);o(i+e),t||s(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},i=this._range||this,s=oc(r,i);return"ticks"===t.bounds&&jt(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Ae(t,this.chart.options.locale,this.options.ticks.format)}}class lc extends cc{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=tt(t)?t:0,this.max=tt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Bt(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}(0,r.A)(lc,"id","linear"),(0,r.A)(lc,"defaults",{ticks:{callback:ke.formatters.numeric}});const uc=t=>Math.floor(Ct(t)),hc=(t,e)=>Math.pow(10,uc(t)+e);function dc(t){const e=t/Math.pow(10,uc(t));return 1===e}function fc(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r),s=Math.ceil(e/r);return s-i}function pc(t,e){const n=e-t;let r=uc(n);while(fc(t,e,r)>10)r++;while(fc(t,e,r)<10)r--;return Math.min(r,uc(t))}function gc(t,{min:e,max:n}){e=et(t.min,e);const r=[],i=uc(e);let s=pc(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10;let h=Math.floor((l-u)/Math.pow(10,s)),d=et(t.min,Math.round((c+u+h*Math.pow(10,s))*o)/o);while(d<n)r.push({value:d,major:dc(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((c+u+h*Math.pow(10,s))*o)/o;const f=et(t.max,d);return r.push({value:f,major:dc(f),significand:h}),r}class mc extends Vs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=cc.prototype.parse.apply(this,[t,e]);if(0!==n)return tt(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=tt(t)?Math.max(0,t):null,this.max=tt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!tt(this._userMin)&&(this.min=t===hc(this.min,0)?hc(this.min,-1):hc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,s=t=>r=e?r:t;n===r&&(n<=0?(i(1),s(10)):(i(hc(n,-1)),s(hc(r,1)))),n<=0&&i(hc(r,-1)),r<=0&&s(hc(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},n=gc(e,this);return"ticks"===t.bounds&&jt(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":Ae(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ct(t),this._valueRange=Ct(this.max)-Ct(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ct(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function vc(t){const e=t.ticks;if(e.display&&t.display){const t=an(e.backdropPadding);return nt(e.font&&e.font.size,De.font.size)+t.height}return 0}function yc(t,e,n){return n=X(n)?n:[n],{w:je(t,e.string,n),h:n.length*e.lineHeight}}function bc(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function wc(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?St/s:0;for(let c=0;c<s;c++){const s=o.setContext(t.getPointLabelContext(c));i[c]=s.padding;const l=t.getPointPosition(c,t.drawingArea+i[c],a),u=cn(s.font),h=yc(t.ctx,u,t._pointLabels[c]);r[c]=h;const d=Wt(t.getIndexAngle(c)+a),f=Math.round(Vt(d)),p=bc(f,l.x,h.w,0,180),g=bc(f,l.y,h.h,90,270);_c(n,e,d,p,g)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Ic(t,r,i)}function _c(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function xc(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,c=t.getPointPosition(e,r+i+o,s),l=Math.round(Vt(Wt(c.angle+kt))),u=Tc(c.y,a.h,l),h=Ac(l),d=Ec(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function Sc(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t,o=ze({x:n,y:r},e)||ze({x:n,y:s},e)||ze({x:i,y:r},e)||ze({x:i,y:s},e);return!o}function Ic(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:vc(s)/2,additionalAngle:o?St/i:0};let l;for(let u=0;u<i;u++){c.padding=n[u],c.size=e[u];const i=xc(t,u,c);r.push(i),"auto"===a&&(i.visible=Sc(i,l),i.visible&&(l=i))}return r}function Ac(t){return 0===t||180===t?"center":t<180?"left":"right"}function Ec(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function Tc(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function kc(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!J(a)){const n=on(e.borderRadius),c=an(e.backdropPadding);t.fillStyle=a;const l=r-c.left,u=i-c.top,h=s-r+c.width,d=o-i+c.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),Xe(t,{x:l,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(l,u,h,d)}}function Nc(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const s=r.setContext(t.getPointLabelContext(i));kc(n,s,e);const o=cn(s.font),{x:a,y:c,textAlign:l}=e;Je(n,t._pointLabels[i],a,c+o.lineHeight/2,o,{color:s.color,textAlign:l,textBaseline:"middle"})}}function Lc(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,It);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=t.getPointPosition(s,e),i.lineTo(n.x,n.y)}}function Cc(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),Lc(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function Pc(t,e,n){return hn(t,{label:n,index:e,type:"pointLabel"})}(0,r.A)(mc,"id","logarithmic"),(0,r.A)(mc,"defaults",{ticks:{callback:ke.formatters.logarithmic,major:{enabled:!0}}});class Oc extends cc{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=an(vc(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=tt(t)&&!isNaN(t)?t:0,this.max=tt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vc(this.options))}generateTickLabels(t){cc.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=st(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?wc(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){const e=It/(this._pointLabels.length||1),n=this.options.startAngle||0;return Wt(t*e+Bt(n))}getDistanceFromCenterForValue(t){if(J(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(J(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return Pc(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-kt+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Lc(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,s=this._pointLabels.length;let o,a,c;if(e.pointLabels.display&&Nc(this,s),r.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=r.setContext(n),c=i.setContext(n);Cc(this,o,a,s,c)}})),n.display){for(t.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(t.lineWidth=s,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((r,o)=>{if(0===o&&!e.reverse)return;const a=n.setContext(this.getContext(o)),c=cn(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=c.string,s=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=an(a.backdropPadding);t.fillRect(-s/2-e.left,-i-c.size/2-e.top,s+e.width,c.size+e.height)}Je(t,r.label,0,-i,c,{color:a.color})})),t.restore()}drawTitle(){}}(0,r.A)(Oc,"id","radialLinear"),(0,r.A)(Oc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ke.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),(0,r.A)(Oc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,r.A)(Oc,"descriptors",{angleLines:{_fallback:"grid"}});const Rc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dc=Object.keys(Rc);function Mc(t,e){return t-e}function Fc(t,e){if(J(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return"function"===typeof r&&(o=r(o)),tt(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!Mt(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function jc(t,e,n,r){const i=Dc.length;for(let s=Dc.indexOf(t);s<i-1;++s){const t=Rc[Dc[s]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return Dc[s]}return Dc[i-1]}function Bc(t,e,n,r,i){for(let s=Dc.length-1;s>=Dc.indexOf(n);s--){const n=Dc[s];if(Rc[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return Dc[n?Dc.indexOf(n):0]}function Vc(t){for(let e=Dc.indexOf(t)+1,n=Dc.length;e<n;++e)if(Rc[Dc[e]].common)return Dc[e]}function Uc(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=Qt(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}else t[e]=!0}function qc(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=n[a],c>=0&&(e[c].major=!0);return e}function zc(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?qc(t,r,i,n):r}class Hc extends Vs{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new Ii._date(t.adapters.date);r.init(e),dt(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Fc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(r=Math.min(r,t.min)),o||isNaN(t.max)||(i=Math.max(i,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=tt(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=tt(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=this.max,o=Zt(r,i,s);return this._unit=e.unit||(n.autoSkip?jc(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):Bc(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?Vc(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),zc(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;r=Gt(r,0,s),i=Gt(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||jc(i.minUnit,e,n,this._getLabelCapacity(e)),o=nt(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,c=Mt(a)||!0===a,l={};let u,h,d=e;if(c&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,c?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,s),h++)Uc(l,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||Uc(l,u,f),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options,r=n.time.displayFormats,i=this._unit,s=e||r[i];return this._adapter.format(t,s)}_tickFormatFunction(t,e,n,r){const i=this.options,s=i.ticks.callback;if(s)return st(s,[t,e,n],this);const o=i.time.displayFormats,a=this._unit,c=this._majorUnit,l=a&&o[a],u=c&&o[c],h=n[e],d=c&&u&&h&&h.major;return this._adapter.format(t,r||(d?u:l))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=Bt(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,zc(this,[t],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(Fc(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return re(t.sort(Mc))}}function Wc(t,e,n){let r,i,s,o,a=0,c=t.length-1;n?(e>=t[a].pos&&e<=t[c].pos&&({lo:a,hi:c}=Jt(t,"pos",e)),({pos:r,time:s}=t[a]),({pos:i,time:o}=t[c])):(e>=t[a].time&&e<=t[c].time&&({lo:a,hi:c}=Jt(t,"time",e)),({time:r,pos:s}=t[a]),({time:i,pos:o}=t[c]));const l=i-r;return l?s+(o-s)*(e-r)/l:s}(0,r.A)(Hc,"id","time"),(0,r.A)(Hc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class $c extends Hc{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Wc(e,this.min),this._tableRange=Wc(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let s,o,a,c,l;for(s=0,o=t.length;s<o;++s)c=t[s],c>=e&&c<=n&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)l=r[s+1],a=r[s-1],c=r[s],Math.round((l+a)/2)!==c&&i.push({time:c,pos:s/(o-1)});return i}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Wc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Wc(this._table,n*this._tableRange+this._minPos,!0)}}(0,r.A)($c,"id","timeseries"),(0,r.A)($c,"defaults",Hc.defaults)},3801:function(t,e,n){"use strict";n.d(e,{A:function(){return r.A}});var r=n(6082),i="firebase",s="11.1.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.A.registerVersion(i,s,"app-compat")},3351:function(t,e,n){"use strict";n(8743);var r=n(6082),i=(n(3492),n(4467),n(6736),n(9639),n(9286),n(9266),n(3725),n(9838),n(1339),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784),n(5019),n(2598),n(9471),n(9229),n(2838),n(2986)),s=n(4046);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o=[];var a;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(a||(a={}));const c={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},l=a.INFO,u={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},h=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=u[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class d{constructor(t){this.name=t,this._logLevel=l,this._logHandler=h,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in a))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?c[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...t),this._logHandler(this,a.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...t),this._logHandler(this,a.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,a.INFO,...t),this._logHandler(this,a.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,a.WARN,...t),this._logHandler(this,a.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...t),this._logHandler(this,a.ERROR,...t)}}function f(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;class p{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const g={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},m={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registered for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is incorrect, malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend.",["unsupported-password-policy-schema-version"]:"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.",["password-does-not-meet-requirements"]:"The password does not meet the requirements."}}function y(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const b=v,w=y,_=new s.FA("auth","Firebase",y()),x=new d("@firebase/auth");function S(t,...e){x.logLevel<=a.WARN&&x.warn(`Auth (${i.SDK_VERSION}): ${t}`,...e)}function I(t,...e){x.logLevel<=a.ERROR&&x.error(`Auth (${i.SDK_VERSION}): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t,...e){throw L(t,...e)}function E(t,...e){return L(t,...e)}function T(t,e,n){const r=Object.assign(Object.assign({},w()),{[e]:n}),i=new s.FA("auth","Firebase",r);return i.create(e,{appName:t.name})}function k(t){return T(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function N(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&A(t,"argument-error"),T(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function L(t,...e){if("string"!==typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _.create(t,...e)}function C(t,e,...n){if(!t)throw L(e,...n)}function P(t){const e="INTERNAL ASSERTION FAILED: "+t;throw I(e),new Error(e)}function O(t,e){t||P(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function D(){return"http:"===M()||"https:"===M()}function M(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(D()||(0,s.sr)()||"connection"in navigator))||navigator.onLine}function j(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(t,e){this.shortDelay=t,this.longDelay=e,O(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return F()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t,e){O(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void P("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void P("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void P("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["INVALID_LOGIN_CREDENTIALS"]:"invalid-credential",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["PASSWORD_DOES_NOT_MEET_REQUIREMENTS"]:"password-does-not-meet-requirements",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},z=new B(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function W(t,e,n,r,i={}){return $(t,i,(async()=>{let i={},o={};r&&("GET"===e?o=r:i={body:JSON.stringify(r)});const a=(0,s.Am)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const l=Object.assign({method:e,headers:c},i);return(0,s.c1)()||(l.referrerPolicy="no-referrer"),U.fetch()(K(t,t.config.apiHost,n,a),l)}))}async function $(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},q),e);try{const e=new Q(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw J(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw J(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw J(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw J(t,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw T(t,a,o);A(t,a)}}catch(i){if(i instanceof s.g)throw i;A(t,"network-request-failed",{message:String(i)})}}async function G(t,e,n,r,i={}){const s=await W(t,e,n,r,i);return"mfaPendingCredential"in s&&A(t,"multi-factor-auth-required",{_serverResponse:s}),s}function K(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?V(t.config,i):`${t.config.apiScheme}://${i}`}function Y(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Q{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(E(this.auth,"network-request-failed"))),z.get())}))}}function J(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=E(t,e,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t){return void 0!==t&&void 0!==t.getResponse}function Z(t){return void 0!==t&&void 0!==t.enterprise}class tt{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return Y(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function et(t){return(await W(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function nt(t,e){return W(t,"GET","/v2/recaptchaConfig",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rt(t,e){return W(t,"POST","/v1/accounts:delete",e)}async function it(t,e){return W(t,"POST","/v1/accounts:update",e)}async function st(t,e){return W(t,"POST","/v1/accounts:lookup",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function at(t,e=!1){const n=(0,s.Ku)(t),r=await n.getIdToken(e),i=lt(r);C(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:i,token:r,authTime:ot(ct(i.auth_time)),issuedAtTime:ot(ct(i.iat)),expirationTime:ot(ct(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function ct(t){return 1e3*Number(t)}function lt(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return I("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,s.u)(n);return t?JSON.parse(t):(I("Failed to decode base64 JWT payload"),null)}catch(i){return I("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function ut(t){const e=lt(t);return C(e,"internal-error"),C("undefined"!==typeof e.exp,"internal-error"),C("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ht(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof s.g&&dt(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dt({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0,n=t-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===t||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=ot(this.lastLoginAt),this.creationTime=ot(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gt(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ht(t,st(n,{idToken:r}));C(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?yt(s.providerUserInfo):[],a=vt(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!c&&l,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pt(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function mt(t){const e=(0,s.Ku)(t);await gt(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vt(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}function yt(t){return t.map((t=>{var{providerId:e}=t,n=f(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bt(t,e){const n=await $(t,{},(async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=K(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",U.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wt(t,e){return W(t,"POST","/v2/accounts:revokeToken",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){C(t.idToken,"internal-error"),C("undefined"!==typeof t.idToken,"internal-error"),C("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):ut(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){C(0!==t.length,"internal-error");const e=ut(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return e||!this.accessToken||this.isExpired?(C(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:i}=await bt(t,e);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new _t;return n&&(C("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(C("string"===typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(C("number"===typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return P("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){C("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class St{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=f(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ft(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await ht(this,this.stsTokenManager.getToken(this.auth,t));return C(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return at(this,t)}reload(){return mt(this)}_assign(t){this!==t&&(C(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new St(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await gt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,i._isFirebaseServerApp)(this.auth.app))return Promise.reject(k(this.auth));const t=await this.getIdToken();return await ht(this,rt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,v=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:x}=e;C(y&&x,t,"internal-error");const S=_t.fromJSON(this.name,x);C("string"===typeof y,t,"internal-error"),xt(u,t.name),xt(h,t.name),C("boolean"===typeof b,t,"internal-error"),C("boolean"===typeof w,t,"internal-error"),xt(d,t.name),xt(f,t.name),xt(p,t.name),xt(g,t.name),xt(m,t.name),xt(v,t.name);const I=new St({uid:y,auth:t,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((t=>Object.assign({},t)))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,e,n=!1){const r=new _t;r.updateFromServerResponse(e);const i=new St({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return await gt(i),i}static async _fromGetAccountInfoResponse(t,e,n){const r=e.users[0];C(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?yt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new _t;o.updateFromIdToken(n);const a=new St({uid:r.localId,auth:t,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new pt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new Map;function At(t){O(t instanceof Function,"Expected a class definition");let e=It.get(t);return e?(O(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,It.set(t,e),e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Et.type="NONE";const Tt=Et;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t,e,n){return`firebase:${t}:${e}:${n}`}class Nt{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=kt(this.userKey,r.apiKey,i),this.fullPersistenceKey=kt("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?St._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new Nt(At(Tt),t,n);const r=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let i=r[0]||At(Tt);const s=kt(n,t.config.apiKey,t.name);let o=null;for(const l of e)try{const e=await l._get(s);if(e){const n=St._fromJSON(t,e);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((t=>t._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==i)try{await t._remove(s)}catch(c){}}))),new Nt(i,t,n)):new Nt(i,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ct(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mt(e))return"Blackberry";if(Ft(e))return"Webos";if(Pt(e))return"Safari";if((e.includes("chrome/")||Ot(e))&&!e.includes("edge/"))return"Chrome";if(Dt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ct(t=(0,s.ZQ)()){return/firefox\//i.test(t)}function Pt(t=(0,s.ZQ)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ot(t=(0,s.ZQ)()){return/crios\//i.test(t)}function Rt(t=(0,s.ZQ)()){return/iemobile/i.test(t)}function Dt(t=(0,s.ZQ)()){return/android/i.test(t)}function Mt(t=(0,s.ZQ)()){return/blackberry/i.test(t)}function Ft(t=(0,s.ZQ)()){return/webos/i.test(t)}function jt(t=(0,s.ZQ)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bt(t=(0,s.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Vt(t=(0,s.ZQ)()){var e;return jt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ut(){return(0,s.lT)()&&10===document.documentMode}function qt(t=(0,s.ZQ)()){return jt(t)||Dt(t)||Ft(t)||Mt(t)||/windows phone/i.test(t)||Rt(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t,e=[]){let n;switch(t){case"Browser":n=Lt((0,s.ZQ)());break;case"Worker":n=`${Lt((0,s.ZQ)())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.SDK_VERSION}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,r)=>{try{const r=t(e);n(r)}catch(i){r(i)}}));n.onAbort=e,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wt(t,e={}){return W(t,"GET","/v2/passwordPolicy",H(t,e))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t=6;class Gt{constructor(t){var e,n,r,i;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:$t,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=t.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let r=0;r<t.length;r++)n=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t,e,n,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qt(this),this.idTokenSubscription=new Qt(this),this.beforeStateQueue=new Ht(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=At(e)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Nt.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUserFromIdToken(t){try{const e=await st(this,{idToken:t}),n=await St._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var e;if((0,i._isFirebaseServerApp)(this.app)){const t=this.app.settings.authIdToken;return t?new Promise((e=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(t).then(e,e)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==i||!(null===o||void 0===o?void 0:o.user)||(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return C(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await gt(t)}catch(e){if("auth/network-request-failed"!==(null===e||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=j()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if((0,i._isFirebaseServerApp)(this.app))return Promise.reject(k(this));const e=t?(0,s.Ku)(t):null;return e&&C(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&C(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(0,i._isFirebaseServerApp)(this.app)?Promise.reject(k(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return(0,i._isFirebaseServerApp)(this.app)?Promise.reject(k(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(At(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Wt(this),e=new Gt(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new s.FA("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};null!=this.tenantId&&(n.tenantId=this.tenantId),await wt(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&At(t)||this._popupRedirectResolver;C(e,this,"argument-error"),this.redirectPersistenceManager=await Nt.create(this,[At(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"===typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(C(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof e){const i=t.addObserver(e,n,r);return()=>{s=!0,i()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=zt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&S(`Error while retrieving App Check token: ${e.error}`),null===e||void 0===e?void 0:e.token}}function Yt(t){return(0,s.Ku)(t)}class Qt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,s.tD)((t=>this.observer=t))}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xt(t){Jt=t}function Zt(t){return Jt.loadJS(t)}function te(){return Jt.recaptchaV2Script}function ee(){return Jt.recaptchaEnterpriseScript}function ne(){return Jt.gapiScript}function re(t){return`__${t}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=500,se=6e4,oe=1e12;class ae{constructor(t){this.auth=t,this.counter=oe,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new ue(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||oe;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||oe;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||oe;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class ce{constructor(){this.enterprise=new le}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class le{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class ue{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof t?document.getElementById(t):t;C(r,"argument-error",{appName:e}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=he(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()}),se)}),ie))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function he(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const de="recaptcha-enterprise",fe="NO_RECAPTCHA";class pe{constructor(t){this.type=de,this.auth=Yt(t)}async verify(t="verify",e=!1){async function n(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{nt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new tt(r);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))}function r(e,n,r){const i=window.grecaptcha;Z(i)?i.enterprise.ready((()=>{i.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n(fe)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){const t=new ce;return t.execute("siteKey",{action:"verify"})}return new Promise(((t,i)=>{n(this.auth).then((n=>{if(!e&&Z(window.grecaptcha))r(n,t,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let e=ee();0!==e.length&&(e+=n),Zt(e).then((()=>{r(n,t,i)})).catch((t=>{i(t)}))}})).catch((t=>{i(t)}))}))}}async function ge(t,e,n,r=!1,i=!1){const s=new pe(t);let o;if(i)o=fe;else try{o=await s.verify(n)}catch(c){o=await s.verify(n,!0)}const a=Object.assign({},e);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const t=a.phoneEnrollmentInfo.phoneNumber,e=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const t=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function me(t,e,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=t._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ge(t,e,n,"getOobCode"===n);return r(t,i)}return r(t,e).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ge(t,e,n,"getOobCode"===n);return r(t,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=t._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await ge(t,e,n);return r(t,i).catch((async i=>{var s;if("AUDIT"===(null===(s=t._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await ge(t,e,n,!1,!0);return r(t,i)}return Promise.reject(i)}))}{const i=await ge(t,e,n,!1,!0);return r(t,i)}}return Promise.reject(i+" provider is not supported.")}async function ve(t){const e=Yt(t),n=await nt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new tt(n);if(null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()){const t=new pe(e);t.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(At);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null===e||void 0===e?void 0:e.popupRedirectResolver)}function be(t,e,n){const r=Yt(t);C(r._canInitEmulator,r,"emulator-config-failed"),C(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=we(e),{host:o,port:a}=_e(e),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Se()}function we(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _e(t){const e=we(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const t=i[1];return{host:t,port:xe(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:xe(e)}}}function xe(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Se(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return P("not implemented")}_getIdTokenResponse(t){return P("not implemented")}_linkToIdToken(t,e){return P("not implemented")}_getReauthenticationResolver(t){return P("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ae(t,e){return W(t,"POST","/v1/accounts:resetPassword",H(t,e))}async function Ee(t,e){return W(t,"POST","/v1/accounts:update",e)}async function Te(t,e){return W(t,"POST","/v1/accounts:signUp",e)}async function ke(t,e){return W(t,"POST","/v1/accounts:update",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ne(t,e){return G(t,"POST","/v1/accounts:signInWithPassword",H(t,e))}async function Le(t,e){return W(t,"POST","/v1/accounts:sendOobCode",H(t,e))}async function Ce(t,e){return Le(t,e)}async function Pe(t,e){return Le(t,e)}async function Oe(t,e){return Le(t,e)}async function Re(t,e){return Le(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function De(t,e){return G(t,"POST","/v1/accounts:signInWithEmailLink",H(t,e))}async function Me(t,e){return G(t,"POST","/v1/accounts:signInWithEmailLink",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends Ie{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Fe(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Fe(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return me(t,e,"signInWithPassword",Ne,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return De(t,{email:this._email,oobCode:this._password});default:A(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return me(t,n,"signUpPassword",Te,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Me(t,{idToken:e,email:this._email,oobCode:this._password});default:A(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function je(t,e){return G(t,"POST","/v1/accounts:signInWithIdp",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be="http://localhost";class Ve extends Ie{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ve(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):A("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,i=f(e,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ve(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(t){const e=this.buildRequest();return je(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,je(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,je(t,e)}buildRequest(){const t={requestUri:Be,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e["id_token"]=this.idToken),this.accessToken&&(e["access_token"]=this.accessToken),this.secret&&(e["oauth_token_secret"]=this.secret),e["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(e["nonce"]=this.nonce),t.postBody=(0,s.Am)(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ue(t,e){return W(t,"POST","/v1/accounts:sendVerificationCode",H(t,e))}async function qe(t,e){return G(t,"POST","/v1/accounts:signInWithPhoneNumber",H(t,e))}async function ze(t,e){const n=await G(t,"POST","/v1/accounts:signInWithPhoneNumber",H(t,e));if(n.temporaryProof)throw J(t,"account-exists-with-different-credential",n);return n}const He={["USER_NOT_FOUND"]:"user-not-found"};async function We(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return G(t,"POST","/v1/accounts:signInWithPhoneNumber",H(t,n),He)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e extends Ie{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new $e({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new $e({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return qe(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return ze(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return We(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new $e({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ke(t){const e=(0,s.I9)((0,s.hp)(t))["link"],n=e?(0,s.I9)((0,s.hp)(e))["deep_link_id"]:null,r=(0,s.I9)((0,s.hp)(t))["deep_link_id"],i=r?(0,s.I9)((0,s.hp)(r))["link"]:null;return i||r||n||e||t}class Ye{constructor(t){var e,n,r,i,o,a;const c=(0,s.I9)((0,s.hp)(t)),l=null!==(e=c["apiKey"])&&void 0!==e?e:null,u=null!==(n=c["oobCode"])&&void 0!==n?n:null,h=Ge(null!==(r=c["mode"])&&void 0!==r?r:null);C(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(i=c["continueUrl"])&&void 0!==i?i:null,this.languageCode=null!==(o=c["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=c["tenantId"])&&void 0!==a?a:null}static parseLink(t){const e=Ke(t);try{return new Ye(e)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qe{constructor(){this.providerId=Qe.PROVIDER_ID}static credential(t,e){return Fe._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ye.parseLink(e);return C(n,"argument-error"),Fe._fromEmailAndCode(t,n.code,n.tenantId)}}Qe.PROVIDER_ID="password",Qe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Je{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe extends Je{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ze extends Xe{static credentialFromJSON(t){const e="string"===typeof t?JSON.parse(t):t;return C("providerId"in e&&"signInMethod"in e,"argument-error"),Ve._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return C(t.idToken||t.accessToken,"argument-error"),Ve._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return Ze.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Ze.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=t;if(!n&&!r&&!e&&!i)return null;if(!o)return null;try{return new Ze(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Xe{constructor(){super("facebook.com")}static credential(t){return Ve._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return tn.credentialFromTaggedObject(t)}static credentialFromError(t){return tn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return tn.credential(t.oauthAccessToken)}catch(e){return null}}}tn.FACEBOOK_SIGN_IN_METHOD="facebook.com",tn.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class en extends Xe{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ve._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return en.credentialFromTaggedObject(t)}static credentialFromError(t){return en.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return en.credential(e,n)}catch(r){return null}}}en.GOOGLE_SIGN_IN_METHOD="google.com",en.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nn extends Xe{constructor(){super("github.com")}static credential(t){return Ve._fromParams({providerId:nn.PROVIDER_ID,signInMethod:nn.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return nn.credentialFromTaggedObject(t)}static credentialFromError(t){return nn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return nn.credential(t.oauthAccessToken)}catch(e){return null}}}nn.GITHUB_SIGN_IN_METHOD="github.com",nn.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const rn="http://localhost";class sn extends Ie{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return je(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,je(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,je(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r,pendingToken:i}=e;return n&&r&&i&&n===r?new sn(n,i):null}static _create(t,e){return new sn(t,e)}buildRequest(){return{requestUri:rn,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="saml.";class an extends Je{constructor(t){C(t.startsWith(on),"argument-error"),super(t)}static credentialFromResult(t){return an.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return an.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=sn.fromJSON(t);return C(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return sn._create(n,e)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends Xe{constructor(){super("twitter.com")}static credential(t,e){return Ve._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return cn.credentialFromTaggedObject(t)}static credentialFromError(t){return cn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return cn.credential(e,n)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ln(t,e){return G(t,"POST","/v1/accounts:signUp",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.TWITTER_SIGN_IN_METHOD="twitter.com",cn.PROVIDER_ID="twitter.com";class un{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,r=!1){const i=await St._fromIdTokenResponse(t,n,r),s=hn(n),o=new un({user:i,providerId:s,_tokenResponse:n,operationType:e});return o}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const r=hn(n);return new un({user:t,providerId:r,_tokenResponse:n,operationType:e})}}function hn(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dn(t){var e;if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const n=Yt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new un({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ln(n,{returnSecureToken:!0}),s=await un._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends s.g{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,fn.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new fn(t,e,n,r)}}function pn(t,e,n,r){const i="reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t);return i.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw fn._fromErrorAndOperation(t,n,e,r);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mn(t,e){const n=(0,s.Ku)(t);await yn(!0,n,e);const{providerUserInfo:r}=await it(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=gn(r||[]);return n.providerData=n.providerData.filter((t=>i.has(t.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function vn(t,e,n=!1){const r=await ht(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return un._forOperation(t,"link",r)}async function yn(t,e,n){await gt(e);const r=gn(e.providerData),i=!1===t?"provider-already-linked":"no-such-provider";C(r.has(n)===t,e.auth,i)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bn(t,e,n=!1){const{auth:r}=t;if((0,i._isFirebaseServerApp)(r.app))return Promise.reject(k(r));const s="reauthenticate";try{const i=await ht(t,pn(r,s,e,t),n);C(i.idToken,r,"internal-error");const o=lt(i.idToken);C(o,r,"internal-error");const{sub:a}=o;return C(t.uid===a,r,"user-mismatch"),un._forOperation(t,s,i)}catch(o){throw"auth/user-not-found"===(null===o||void 0===o?void 0:o.code)&&A(r,"user-mismatch"),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wn(t,e,n=!1){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const r="signIn",s=await pn(t,r,e),o=await un._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function _n(t,e){return wn(Yt(t),e)}async function xn(t,e){const n=(0,s.Ku)(t);return await yn(!1,n,e.providerId),vn(n,e)}async function Sn(t,e){return bn((0,s.Ku)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function In(t,e){return G(t,"POST","/v1/accounts:signInWithCustomToken",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function An(t,e){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const n=Yt(t),r=await In(n,{token:e,returnSecureToken:!0}),s=await un._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?Tn._fromServerResponse(t,e):"totpInfo"in e?kn._fromServerResponse(t,e):A(t,"internal-error")}}class Tn extends En{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new Tn(e)}}class kn extends En{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new kn(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e,n){var r;C((null===(r=n.url)||void 0===r?void 0:r.length)>0,t,"invalid-continue-uri"),C("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(C(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(C(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ln(t){const e=Yt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Cn(t,e,n){const r=Yt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Nn(r,i,n),await me(r,i,"getOobCode",Pe,"EMAIL_PASSWORD_PROVIDER")}async function Pn(t,e,n){await Ae((0,s.Ku)(t),{oobCode:e,newPassword:n}).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&Ln(t),e}))}async function On(t,e){await ke((0,s.Ku)(t),{oobCode:e})}async function Rn(t,e){const n=(0,s.Ku)(t),r=await Ae(n,{oobCode:e}),i=r.requestType;switch(C(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":C(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":C(r.mfaInfo,n,"internal-error");default:C(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=En._fromServerResponse(Yt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function Dn(t,e){const{data:n}=await Rn((0,s.Ku)(t),e);return n.email}async function Mn(t,e,n){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const r=Yt(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},o=me(r,s,"signUpPassword",ln,"EMAIL_PASSWORD_PROVIDER"),a=await o.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&Ln(t),e})),c=await un._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Fn(t,e,n){return(0,i._isFirebaseServerApp)(t.app)?Promise.reject(k(t)):_n((0,s.Ku)(t),Qe.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&Ln(t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jn(t,e,n){const r=Yt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(t,e){C(e.handleCodeInApp,r,"argument-error"),e&&Nn(r,t,e)}s(i,n),await me(r,i,"getOobCode",Oe,"EMAIL_PASSWORD_PROVIDER")}function Bn(t,e){const n=Ye.parseLink(e);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function Vn(t,e,n){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const r=(0,s.Ku)(t),o=Qe.credentialWithLink(e,n||R());return C(o._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),_n(r,o)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Un(t,e){return W(t,"POST","/v1/accounts:createAuthUri",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qn(t,e){const n=D()?R():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Un((0,s.Ku)(t),r);return i||[]}async function zn(t,e){const n=(0,s.Ku)(t),r=await t.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&Nn(n.auth,i,e);const{email:o}=await Ce(n.auth,i);o!==t.email&&await t.reload()}async function Hn(t,e,n){const r=(0,s.Ku)(t),i=await t.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:e};n&&Nn(r.auth,o,n);const{email:a}=await Re(r.auth,o);a!==t.email&&await t.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wn(t,e){return W(t,"POST","/v1/accounts:update",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $n(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=(0,s.Ku)(t),i=await r.getIdToken(),o={idToken:i,displayName:e,photoUrl:n,returnSecureToken:!0},a=await ht(r,Wn(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find((({providerId:t})=>"password"===t));c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Gn(t,e){const n=(0,s.Ku)(t);return(0,i._isFirebaseServerApp)(n.auth.app)?Promise.reject(k(n.auth)):Yn(n,e,null)}function Kn(t,e){return Yn((0,s.Ku)(t),null,e)}async function Yn(t,e,n){const{auth:r}=t,i=await t.getIdToken(),s={idToken:i,returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await ht(t,Ee(r,s));await t._updateTokensIfNecessary(o,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!r&&(null===t||void 0===t?void 0:t.idToken)){const r=null===(n=null===(e=lt(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n["sign_in_provider"];if(r){const t="anonymous"!==r&&"custom"!==r?r:null;return new Jn(s,t)}}if(!r)return null;switch(r){case"facebook.com":return new Zn(s,i);case"github.com":return new tr(s,i);case"google.com":return new er(s,i);case"twitter.com":return new nr(s,i,t.screenName||null);case"custom":case"anonymous":return new Jn(s,null);default:return new Jn(s,r,i)}}class Jn{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class Xn extends Jn{constructor(t,e,n,r){super(t,e,n),this.username=r}}class Zn extends Jn{constructor(t,e){super(t,"facebook.com",e)}}class tr extends Xn{constructor(t,e){super(t,"github.com",e,"string"===typeof(null===e||void 0===e?void 0:e.login)?null===e||void 0===e?void 0:e.login:null)}}class er extends Jn{constructor(t,e){super(t,"google.com",e)}}class nr extends Xn{constructor(t,e,n){super(t,"twitter.com",e,n)}}function rr(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Qn(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ir{constructor(t,e,n){this.type=t,this.credential=e,this.user=n}static _fromIdtoken(t,e){return new ir("enroll",t,e)}static _fromMfaPendingCredential(t){return new ir("signin",t)}toJSON(){const t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[t]:this.credential}}}static fromJSON(t){var e,n;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return ir._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return ir._fromIdtoken(t.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Yt(t),r=e.customData._serverResponse,i=(r.mfaInfo||[]).map((t=>En._fromServerResponse(n,t)));C(r.mfaPendingCredential,n,"internal-error");const s=ir._fromMfaPendingCredential(r.mfaPendingCredential);return new sr(s,i,(async t=>{const i=await t._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(e.operationType){case"signIn":const t=await un._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return C(e.user,n,"internal-error"),un._forOperation(e.user,e.operationType,o);default:A(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function or(t,e){var n;const r=(0,s.Ku)(t),i=e;return C(e.customData.operationType,r,"argument-error"),C(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),sr._fromError(r,i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(t,e){return W(t,"POST","/v2/accounts/mfaEnrollment:start",H(t,e))}function cr(t,e){return W(t,"POST","/v2/accounts/mfaEnrollment:finalize",H(t,e))}function lr(t,e){return W(t,"POST","/v2/accounts/mfaEnrollment:start",H(t,e))}function ur(t,e){return W(t,"POST","/v2/accounts/mfaEnrollment:finalize",H(t,e))}function hr(t,e){return W(t,"POST","/v2/accounts/mfaEnrollment:withdraw",H(t,e))}class dr{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>En._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new dr(t)}async getSession(){return ir._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,e){const n=t,r=await this.getSession(),i=await ht(this.user,n._process(this.user.auth,r,e));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(t){const e="string"===typeof t?t:t.uid,n=await this.user.getIdToken();try{const t=await ht(this.user,hr(this.user.auth,{idToken:n,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(t),await this.user.reload()}catch(r){throw r}}}const fr=new WeakMap;function pr(t){const e=(0,s.Ku)(t);return fr.has(e)||fr.set(e,dr._fromUser(e)),fr.get(e)}const gr="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(gr,"1"),this.storage.removeItem(gr),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=1e3,yr=10;class br extends mr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qt(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);Ut()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,yr):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),vr)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}br.type="LOCAL";const wr=br;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends mr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}_r.type="SESSION";const xr=_r;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){return Promise.all(t.map((async t=>{try{const e=await t;return{fulfilled:!0,value:e}}catch(e){return{fulfilled:!1,reason:e}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Ir(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:r,data:i}=e.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async t=>t(e.origin,i))),a=await Sr(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ar(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.receivers=[];class Er{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Ar("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(e.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"));break}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function kr(t){Tr().location.href=t}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return"undefined"!==typeof Tr()["WorkerGlobalScope"]&&"function"===typeof Tr()["importScripts"]}async function Lr(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const t=await navigator.serviceWorker.ready;return t.active}catch(t){return null}}function Cr(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}function Pr(){return Nr()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="firebaseLocalStorageDb",Rr=1,Dr="firebaseLocalStorage",Mr="fbase_key";class Fr{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function jr(t,e){return t.transaction([Dr],e?"readwrite":"readonly").objectStore(Dr)}function Br(){const t=indexedDB.deleteDatabase(Or);return new Fr(t).toPromise()}function Vr(){const t=indexedDB.open(Or,Rr);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Dr,{keyPath:Mr})}catch(r){n(r)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Dr)?e(n):(n.close(),await Br(),e(await Vr()))}))}))}async function Ur(t,e,n){const r=jr(t,!0).put({[Mr]:e,value:n});return new Fr(r).toPromise()}async function qr(t,e){const n=jr(t,!1).get(e),r=await new Fr(n).toPromise();return void 0===r?null:r.value}function zr(t,e){const n=jr(t,!0).delete(e);return new Fr(n).toPromise()}const Hr=800,Wr=3;class $r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Vr()),this.db}async _withRetries(t){let e=0;while(1)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>Wr)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ir._getInstance(Pr()),this.receiver._subscribe("keyChanged",(async(t,e)=>{const n=await this._poll();return{keyProcessed:n.includes(e.key)}})),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await Lr(),!this.activeServiceWorker)return;this.sender=new Er(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&Cr()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Vr();return await Ur(t,gr,"1"),await zr(t,gr),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ur(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>qr(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>zr(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=jr(t,!1).getAll();return new Fr(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:r,value:i}of t)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),Hr)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$r.type="LOCAL";const Gr=$r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,e){return W(t,"POST","/v2/accounts/mfaSignIn:start",H(t,e))}function Yr(t,e){return W(t,"POST","/v2/accounts/mfaSignIn:finalize",H(t,e))}function Qr(t,e){return W(t,"POST","/v2/accounts/mfaSignIn:finalize",H(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=re("rcb"),Xr=new B(3e4,6e4);class Zr{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Tr().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return C(ti(e),t,"argument-error"),this.shouldResolveImmediately(e)&&X(Tr().grecaptcha)?Promise.resolve(Tr().grecaptcha):new Promise(((n,r)=>{const i=Tr().setTimeout((()=>{r(E(t,"network-request-failed"))}),Xr.get());Tr()[Jr]=()=>{Tr().clearTimeout(i),delete Tr()[Jr];const s=Tr().grecaptcha;if(!s||!X(s))return void r(E(t,"internal-error"));const o=s.render;s.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(s)};const o=`${te()}?${(0,s.Am)({onload:Jr,render:"explicit",hl:e})}`;Zt(o).catch((()=>{clearTimeout(i),r(E(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=Tr().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function ti(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class ei{async load(t){return new ae(t)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="recaptcha",ri={theme:"light",type:"image"};class ii{constructor(t,e,n=Object.assign({},ri)){this.parameters=n,this.type=ni,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yt(t),this.isInvisible="invisible"===this.parameters.size,C("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;C(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ei:new Zr,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),n=e.getResponse(t);return n||new Promise((n=>{const r=t=>{t&&(this.tokenChangeListeners.delete(r),n(t))};this.tokenChangeListeners.add(r),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){C(!this.parameters.sitekey,this.auth,"argument-error"),C(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),C("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"===typeof t)t(e);else if("string"===typeof t){const n=Tr()[t];"function"===typeof n&&n(e)}}}assertNotDestroyed(){C(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){C(D()&&!Nr(),this.auth,"internal-error"),await si(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await et(this.auth);C(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return C(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function si(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=$e._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function ai(t,e,n){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const r=Yt(t),o=await ui(r,e,(0,s.Ku)(n));return new oi(o,(t=>_n(r,t)))}async function ci(t,e,n){const r=(0,s.Ku)(t);await yn(!1,r,"phone");const i=await ui(r.auth,e,(0,s.Ku)(n));return new oi(i,(t=>xn(r,t)))}async function li(t,e,n){const r=(0,s.Ku)(t);if((0,i._isFirebaseServerApp)(r.auth.app))return Promise.reject(k(r.auth));const o=await ui(r.auth,e,(0,s.Ku)(n));return new oi(o,(t=>Sn(r,t)))}async function ui(t,e,n){var r;if(!t._getRecaptchaConfig())try{await ve(t)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof e?{phoneNumber:e}:e,"session"in i){const e=i.session;if("phoneNumber"in i){C("enroll"===e.type,t,"internal-error");const r={idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(t,e)=>{if(e.phoneEnrollmentInfo.captchaResponse===fe){C((null===n||void 0===n?void 0:n.type)===ni,t,"argument-error");const r=await di(t,e,n);return ar(t,r)}return ar(t,e)},o=me(t,r,"mfaSmsEnrollment",s,"PHONE_PROVIDER"),a=await o.catch((t=>Promise.reject(t)));return a.phoneSessionInfo.sessionInfo}{C("signin"===e.type,t,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;C(s,t,"missing-multi-factor-info");const o={mfaPendingCredential:e.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=async(t,e)=>{if(e.phoneSignInInfo.captchaResponse===fe){C((null===n||void 0===n?void 0:n.type)===ni,t,"argument-error");const r=await di(t,e,n);return Kr(t,r)}return Kr(t,e)},c=me(t,o,"mfaSmsSignIn",a,"PHONE_PROVIDER"),l=await c.catch((t=>Promise.reject(t)));return l.phoneResponseInfo.sessionInfo}}{const e={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(t,e)=>{if(e.captchaResponse===fe){C((null===n||void 0===n?void 0:n.type)===ni,t,"argument-error");const r=await di(t,e,n);return Ue(t,r)}return Ue(t,e)},s=me(t,e,"sendVerificationCode",r,"PHONE_PROVIDER"),o=await s.catch((t=>Promise.reject(t)));return o.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function hi(t,e){const n=(0,s.Ku)(t);if((0,i._isFirebaseServerApp)(n.auth.app))return Promise.reject(k(n.auth));await vn(n,e)}async function di(t,e,n){C(n.type===ni,t,"argument-error");const r=await n.verify();C("string"===typeof r,t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const t=i.phoneEnrollmentInfo.phoneNumber,e=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:t,recaptchaToken:r,captchaResponse:e,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const t=i.phoneSignInInfo.captchaResponse,e=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:t,clientType:e,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(t){this.providerId=fi.PROVIDER_ID,this.auth=Yt(t)}verifyPhoneNumber(t,e){return ui(this.auth,t,(0,s.Ku)(e))}static credential(t,e){return $e._fromVerification(t,e)}static credentialFromResult(t){const e=t;return fi.credentialFromTaggedObject(e)}static credentialFromError(t){return fi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?$e._fromTokenResponse(e,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pi(t,e){return e?At(e):(C(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi.PROVIDER_ID="phone",fi.PHONE_SIGN_IN_METHOD="phone";class gi extends Ie{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return je(t,this._buildIdpRequest())}_linkToIdToken(t,e){return je(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return je(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function mi(t){return wn(t.auth,new gi(t),t.bypassAuthState)}function vi(t){const{auth:e,user:n}=t;return C(n,e,"internal-error"),bn(n,new gi(t),t.bypassAuthState)}async function yi(t){const{auth:e,user:n}=t;return C(n,e,"internal-error"),vn(n,new gi(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mi;case"linkViaPopup":case"linkViaRedirect":return yi;case"reauthViaPopup":case"reauthViaRedirect":return vi;default:A(this.auth,"internal-error")}}resolve(t){O(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){O(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new B(2e3,1e4);async function _i(t,e,n){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(E(t,"operation-not-supported-in-this-environment"));const r=Yt(t);N(t,e,Je);const s=pi(r,n),o=new Ii(r,"signInViaPopup",e,s);return o.executeNotNull()}async function xi(t,e,n){const r=(0,s.Ku)(t);if((0,i._isFirebaseServerApp)(r.auth.app))return Promise.reject(E(r.auth,"operation-not-supported-in-this-environment"));N(r.auth,e,Je);const o=pi(r.auth,n),a=new Ii(r.auth,"reauthViaPopup",e,o,r);return a.executeNotNull()}async function Si(t,e,n){const r=(0,s.Ku)(t);N(r.auth,e,Je);const i=pi(r.auth,n),o=new Ii(r.auth,"linkViaPopup",e,i,r);return o.executeNotNull()}class Ii extends bi{constructor(t,e,n,r,i){super(t,e,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return C(t,this.auth,"internal-error"),t}async onExecution(){O(1===this.filter.length,"Popup operations only handle one event");const t=Ar();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(E(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(E(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(E(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,wi.get())};t()}}Ii.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ai="pendingRedirect",Ei=new Map;class Ti extends bi{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Ei.get(this.auth._key());if(!t){try{const e=await ki(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Ei.set(this.auth._key(),t)}return this.bypassAuthState||Ei.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ki(t,e){const n=Oi(e),r=Pi(t);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}async function Ni(t,e){return Pi(t)._set(Oi(e),"true")}function Li(){Ei.clear()}function Ci(t,e){Ei.set(t._key(),e)}function Pi(t){return At(t._redirectPersistence)}function Oi(t){return kt(Ai,t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e,n){return Di(t,e,n)}async function Di(t,e,n){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const r=Yt(t);N(t,e,Je),await r._initializationPromise;const s=pi(r,n);return await Ni(s,r),s._openRedirect(r,e,"signInViaRedirect")}function Mi(t,e,n){return Fi(t,e,n)}async function Fi(t,e,n){const r=(0,s.Ku)(t);if(N(r.auth,e,Je),(0,i._isFirebaseServerApp)(r.auth.app))return Promise.reject(k(r.auth));await r.auth._initializationPromise;const o=pi(r.auth,n);await Ni(o,r.auth);const a=await qi(r);return o._openRedirect(r.auth,e,"reauthViaRedirect",a)}function ji(t,e,n){return Bi(t,e,n)}async function Bi(t,e,n){const r=(0,s.Ku)(t);N(r.auth,e,Je),await r.auth._initializationPromise;const i=pi(r.auth,n);await yn(!1,r,e.providerId),await Ni(i,r.auth);const o=await qi(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function Vi(t,e){return await Yt(t)._initializationPromise,Ui(t,e,!1)}async function Ui(t,e,n=!1){if((0,i._isFirebaseServerApp)(t.app))return Promise.reject(k(t));const r=Yt(t),s=pi(r,e),o=new Ti(r,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function qi(t){const e=Ar(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=6e5;class Hi{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!Gi(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!$i(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(E(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=zi&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wi(t))}saveEventToCache(t){this.cachedEventUids.add(Wi(t)),this.lastProcessedEventTime=Date.now()}}function Wi(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function $i({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null===e||void 0===e?void 0:e.code)}function Gi(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $i(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(t,e={}){return W(t,"GET","/v1/projects",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qi=/^https?/;async function Ji(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ki(t);for(const r of e)try{if(Xi(r))return}catch(n){}A(t,"unauthorized-domain")}function Xi(t){const e=R(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Qi.test(n))return!1;if(Yi.test(t))return r===t;const i=t.replace(/\./g,"\\."),s=new RegExp("^(.+\\."+i+"|"+i+")$","i");return s.test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new B(3e4,6e4);function ts(){const t=Tr().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function es(t){return new Promise(((e,n)=>{var r,i,s;function o(){ts(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ts(),n(E(t,"network-request-failed"))},timeout:Zi.get()})}if(null===(i=null===(r=Tr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Tr().gapi)||void 0===s?void 0:s.load)){const e=re("iframefcb");return Tr()[e]=()=>{gapi.load?o():n(E(t,"network-request-failed"))},Zt(`${ne()}?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw ns=null,t}))}let ns=null;function rs(t){return ns=ns||es(t),ns}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new B(5e3,15e3),ss="__/auth/iframe",os="emulator/auth/iframe",as={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ls(t){const e=t.config;C(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?V(e,os):`https://${t.config.authDomain}/${ss}`,r={apiKey:e.apiKey,appName:t.name,v:i.SDK_VERSION},o=cs.get(t.config.apiHost);o&&(r.eid=o);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.Am)(r).slice(1)}`}async function us(t){const e=await rs(t),n=Tr().gapi;return C(n,t,"internal-error"),e.open({where:document.body,url:ls(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:as,dontclear:!0},(e=>new Promise((async(n,r)=>{await e.restyle({setHideOnLeave:!1});const i=E(t,"network-request-failed"),s=Tr().setTimeout((()=>{r(i)}),is.get());function o(){Tr().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{r(i)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ds=500,fs=600,ps="_blank",gs="http://localhost";class ms{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function vs(t,e,n,r=ds,i=fs){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},hs),{width:r.toString(),height:i.toString(),top:o,left:a}),u=(0,s.ZQ)().toLowerCase();n&&(c=Ot(u)?ps:n),Ct(u)&&(e=e||gs,l.scrollbars="yes");const h=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(Vt(u)&&"_self"!==c)return ys(e||"",c),new ms(null);const d=window.open(e||"",c,h);C(d,t,"popup-blocked");try{d.focus()}catch(f){}return new ms(d)}function ys(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="__/auth/handler",ws="emulator/auth/handler",_s=encodeURIComponent("fac");async function xs(t,e,n,r,o,a){C(t.config.authDomain,t,"auth-domain-config-required"),C(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:i.SDK_VERSION,eventId:o};if(e instanceof Je){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,s.Im)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof Xe){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const i of Object.keys(l))void 0===l[i]&&delete l[i];const u=await t._getAppCheckToken(),h=u?`#${_s}=${encodeURIComponent(u)}`:"";return`${Ss(t)}?${(0,s.Am)(l).slice(1)}${h}`}function Ss({config:t}){return t.emulator?V(t,ws):`https://${t.authDomain}/${bs}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="webStorageSupport";class As{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xr,this._completeRedirectFn=Ui,this._overrideRedirectResult=Ci}async _openPopup(t,e,n,r){var i;O(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await xs(t,e,n,R(),r);return vs(t,s,Ar())}async _openRedirect(t,e,n,r){await this._originValidation(t);const i=await xs(t,e,n,R(),r);return kr(i),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(O(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await us(t),n=new Hi(t);return e.register("authEvent",(e=>{C(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");const r=n.onEvent(e.authEvent);return{status:r?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){const n=this.iframes[t._key()];n.send(Is,{type:Is},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Is];void 0!==i&&e(!!i),A(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Ji(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return qt()||Pt()||jt()}}const Es=As;class Ts{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return P("unexpected MultiFactorSessionType")}}}class ks extends Ts{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new ks(t)}_finalizeEnroll(t,e,n){return cr(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return Yr(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ns{constructor(){}static assertion(t){return ks._fromCredential(t)}}Ns.FACTOR_ID="phone";class Ls{static assertionForEnrollment(t,e){return Cs._fromSecret(t,e)}static assertionForSignIn(t,e){return Cs._fromEnrollmentId(t,e)}static async generateSecret(t){var e;const n=t;C("undefined"!==typeof(null===(e=n.user)||void 0===e?void 0:e.auth),"internal-error");const r=await lr(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Ps._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}Ls.FACTOR_ID="totp";class Cs extends Ts{constructor(t,e,n){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=n}static _fromSecret(t,e){return new Cs(e,void 0,t)}static _fromEnrollmentId(t,e){return new Cs(e,t)}async _finalizeEnroll(t,e,n){return C("undefined"!==typeof this.secret,t,"argument-error"),ur(t,{idToken:e,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){C(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error");const n={verificationCode:this.otp};return Qr(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Ps{constructor(t,e,n,r,i,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,e){return new Ps(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){var n;let r=!1;return(Os(t)||Os(e))&&(r=!0),r&&(Os(t)&&(t=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Os(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Os(t){return"undefined"===typeof t||0===(null===t||void 0===t?void 0:t.length)}var Rs="@firebase/auth",Ds="1.8.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ms{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const e=await this.auth.currentUser.getIdToken(t);return{accessToken:e}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function js(t){(0,i._registerComponent)(new p("auth",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;C(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zt(t)},l=new Kt(r,i,s,c);return ye(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{const r=t.getProvider("auth-internal");r.initialize()}))),(0,i._registerComponent)(new p("auth-internal",(t=>{const e=Yt(t.getProvider("auth").getImmediate());return(t=>new Ms(t))(e)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.registerVersion)(Rs,Ds,Fs(t)),(0,i.registerVersion)(Rs,Ds,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=300;(0,s.XA)("authIdTokenMaxAge");function Vs(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Us(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt({loadJS(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=t=>{const e=E("internal-error");e.customData=t,n(e)},r.type="text/javascript",r.charset="UTF-8",Vs().appendChild(r)}))},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),js("Browser");const qs=2e3;async function zs(t,e,n){var r;const{BuildInfo:i}=Us();O(e.sessionId,"AuthEvent did not contain a session ID");const s=await Ks(e.sessionId),o={};return jt()?o["ibi"]=i.packageName:Dt()?o["apn"]=i.packageName:A(t,"operation-not-supported-in-this-environment"),i.displayName&&(o["appDisplayName"]=i.displayName),o["sessionId"]=s,xs(t,n,e.type,void 0,null!==(r=e.eventId)&&void 0!==r?r:void 0,o)}async function Hs(t){const{BuildInfo:e}=Us(),n={};jt()?n.iosBundleId=e.packageName:Dt()?n.androidPackageName=e.packageName:A(t,"operation-not-supported-in-this-environment"),await Ki(t,n)}function Ws(t){const{cordova:e}=Us();return new Promise((n=>{e.plugins.browsertab.isAvailable((r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Bt()?"_blank":"_system","location=yes"),n(i)}))}))}async function $s(t,e,n){const{cordova:r}=Us();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var t;s();const e=null===(t=r.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof e&&e(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(E(t,"redirect-cancelled-by-user"))}),qs))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}e.addPassiveListener(c),document.addEventListener("resume",l,!1),Dt()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}function Gs(t){var e,n,r,i,s,o,a,c,l,u;const h=Us();C("function"===typeof(null===(e=null===h||void 0===h?void 0:h.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),C("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),C("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),C("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),C("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Ks(t){const e=Ys(t),n=await crypto.subtle.digest("SHA-256",e),r=Array.from(new Uint8Array(n));return r.map((t=>t.toString(16).padStart(2,"0"))).join("")}function Ys(t){if(O(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=20;class Js extends Hi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((t=>{this.resolveInitialized=t}))}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInitialized(),this.passiveListeners.forEach((e=>e(t))),super.onEvent(t)}async initialized(){await this.initPromise}}function Xs(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:no(),postBody:null,tenantId:t.tenantId,error:E(t,"no-auth-event")}}function Zs(t,e){return ro()._set(io(t),e)}async function to(t){const e=await ro()._get(io(t));return e&&await ro()._remove(io(t)),e}function eo(t,e){var n,r;const i=oo(e);if(i.includes("/__/auth/callback")){const e=ao(i),s=e["firebaseError"]?so(decodeURIComponent(e["firebaseError"])):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s["code"])||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?E(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function no(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Qs;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function ro(){return At(wr)}function io(t){return kt("authEvent",t.config.apiKey,t.name)}function so(t){try{return JSON.parse(t)}catch(e){return null}}function oo(t){const e=ao(t),n=e["link"]?decodeURIComponent(e["link"]):void 0,r=ao(n)["link"],i=e["deep_link_id"]?decodeURIComponent(e["deep_link_id"]):void 0,s=ao(i)["link"];return s||i||r||n||t}function ao(t){if(!(null===t||void 0===t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return(0,s.I9)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=500;class lo{constructor(){this._redirectPersistence=xr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ui,this._overrideRedirectResult=Ci}async _initialize(t){const e=t._key();let n=this.eventManagers.get(e);return n||(n=new Js(t),this.eventManagers.set(e,n),this.attachCallbackListeners(t,n)),n}_openPopup(t){A(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,n,r){Gs(t);const i=await this._initialize(t);await i.initialized(),i.resetRedirect(),Li(),await this._originValidation(t);const s=Xs(t,n,r);await Zs(t,s);const o=await zs(t,s,e),a=await Ws(o);return $s(t,i,a)}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Hs(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Us(),s=setTimeout((async()=>{await to(t),e.onEvent(ho())}),co),o=async n=>{clearTimeout(s);const r=await to(t);let i=null;r&&(null===n||void 0===n?void 0:n["url"])&&(i=eo(r,n["url"])),e.onEvent(i||ho())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c=`${i.packageName.toLowerCase()}://`;Us().handleOpenURL=async t=>{if(t.toLowerCase().startsWith(c)&&o({url:t}),"function"===typeof a)try{a(t)}catch(e){console.error(e)}}}}const uo=lo;function ho(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:E("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){Yt(t)._logFramework(e)}class po{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var go="@firebase/auth-compat",mo="0.5.16";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vo=1e3;function yo(){var t;return(null===(t=null===self||void 0===self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function bo(){return"http:"===yo()||"https:"===yo()}function wo(t=(0,s.ZQ)()){return!("file:"!==yo()&&"ionic:"!==yo()&&"capacitor:"!==yo()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _o(){return(0,s.lV)()||(0,s.Ll)()}function xo(){return(0,s.lT)()&&11===(null===document||void 0===document?void 0:document.documentMode)}function So(t=(0,s.ZQ)()){return/Edge\/\d+/.test(t)}function Io(t=(0,s.ZQ)()){return xo()||So(t)}function Ao(){try{const t=self.localStorage,e=Ar();if(t)return t["setItem"](e,"1"),t["removeItem"](e),!Io()||(0,s.zW)()}catch(t){return Eo()&&(0,s.zW)()}return!1}function Eo(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function To(){return(bo()||(0,s.sr)()||wo())&&!_o()&&Ao()&&!Eo()}function ko(){return wo()&&"undefined"!==typeof document}async function No(){return!!ko()&&new Promise((t=>{const e=setTimeout((()=>{t(!1)}),vo);document.addEventListener("deviceready",(()=>{clearTimeout(e),t(!0)}))}))}function Lo(){return"undefined"!==typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co={LOCAL:"local",NONE:"none",SESSION:"session"},Po=C,Oo="persistence";function Ro(t,e){Po(Object.values(Co).includes(e),t,"invalid-persistence-type"),(0,s.lV)()?Po(e!==Co.SESSION,t,"unsupported-persistence-type"):(0,s.Ll)()?Po(e===Co.NONE,t,"unsupported-persistence-type"):Eo()?Po(e===Co.NONE||e===Co.LOCAL&&(0,s.zW)(),t,"unsupported-persistence-type"):Po(e===Co.NONE||Ao(),t,"unsupported-persistence-type")}async function Do(t){await t._initializationPromise;const e=Fo(),n=kt(Oo,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function Mo(t,e){const n=Fo();if(!n)return[];const r=kt(Oo,t,e),i=n.getItem(r);switch(i){case Co.NONE:return[Tt];case Co.LOCAL:return[Gr,xr];case Co.SESSION:return[xr];default:return[]}}function Fo(){var t;try{return(null===(t=Lo())||void 0===t?void 0:t.sessionStorage)||null}catch(e){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=C;class Bo{constructor(){this.browserResolver=At(Es),this.cordovaResolver=At(uo),this.underlyingResolver=null,this._redirectPersistence=xr,this._completeRedirectFn=Ui,this._overrideRedirectResult=Ci}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,n,r)}async _openRedirect(t,e,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,n,r)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return ko()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jo(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await No();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(t){return t.unwrap()}function Uo(t){return t.wrapped()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){return Ho(t)}function zo(t,e){var n;const r=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===e||void 0===e?void 0:e.code)){const n=e;n.resolver=new Go(t,or(t,e))}else if(r){const t=Ho(e),n=e;t&&(n.credential=t,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ho(t){const{_tokenResponse:e}=t instanceof s.g?t.customData:t;if(!e)return null;if(!(t instanceof s.g)&&"temporaryProof"in e&&"phoneNumber"in e)return fi.credentialFromResult(t);const n=e.providerId;if(!n||n===g.PASSWORD)return null;let r;switch(n){case g.GOOGLE:r=en;break;case g.FACEBOOK:r=tn;break;case g.GITHUB:r=nn;break;case g.TWITTER:r=cn;break;default:const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=e;return i||s||t||o?o?n.startsWith("saml.")?sn._create(n,o):Ve._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:t,accessToken:i}):new Ze(n).credential({idToken:t,accessToken:i,rawNonce:a}):null}return t instanceof s.g?r.credentialFromError(t):r.credentialFromResult(t)}function Wo(t,e){return e.catch((e=>{throw e instanceof s.g&&zo(t,e),e})).then((t=>{const e=t.operationType,n=t.user;return{operationType:e,credential:qo(t),additionalUserInfo:rr(t),user:Ko.getOrCreate(n)}}))}async function $o(t,e){const n=await e;return{verificationId:n.verificationId,confirm:e=>Wo(t,n.confirm(e))}}class Go{constructor(t,e){this.resolver=e,this.auth=Uo(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return Wo(Vo(this.auth),this.resolver.resolveSignIn(t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t){this._delegate=t,this.multiFactor=pr(t)}static getOrCreate(t){return Ko.USER_MAP.has(t)||Ko.USER_MAP.set(t,new Ko(t)),Ko.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return Wo(this.auth,xn(this._delegate,t))}async linkWithPhoneNumber(t,e){return $o(this.auth,ci(this._delegate,t,e))}async linkWithPopup(t){return Wo(this.auth,Si(this._delegate,t,Bo))}async linkWithRedirect(t){return await Do(Yt(this.auth)),ji(this._delegate,t,Bo)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return Wo(this.auth,Sn(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return $o(this.auth,li(this._delegate,t,e))}reauthenticateWithPopup(t){return Wo(this.auth,xi(this._delegate,t,Bo))}async reauthenticateWithRedirect(t){return await Do(Yt(this.auth)),Mi(this._delegate,t,Bo)}sendEmailVerification(t){return zn(this._delegate,t)}async unlink(t){return await mn(this._delegate,t),this}updateEmail(t){return Gn(this._delegate,t)}updatePassword(t){return Kn(this._delegate,t)}updatePhoneNumber(t){return hi(this._delegate,t)}updateProfile(t){return $n(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return Hn(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ko.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Yo=C;class Qo{constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;Yo(n,"invalid-api-key",{appName:t.name}),Yo(n,"invalid-api-key",{appName:t.name});const r="undefined"!==typeof window?Bo:void 0;this._delegate=e.initialize({options:{persistence:Xo(n,t.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(b),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ko.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){be(this._delegate,t,e)}applyActionCode(t){return On(this._delegate,t)}checkActionCode(t){return Rn(this._delegate,t)}confirmPasswordReset(t,e){return Pn(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return Wo(this._delegate,Mn(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return qn(this._delegate,t)}isSignInWithEmailLink(t){return Bn(this._delegate,t)}async getRedirectResult(){Yo(To(),this._delegate,"operation-not-supported-in-this-environment");const t=await Vi(this._delegate,Bo);return t?Wo(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){fo(this._delegate,t)}onAuthStateChanged(t,e,n){const{next:r,error:i,complete:s}=Jo(t,e,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(t,e,n){const{next:r,error:i,complete:s}=Jo(t,e,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(t,e){return jn(this._delegate,t,e)}sendPasswordResetEmail(t,e){return Cn(this._delegate,t,e||void 0)}async setPersistence(t){let e;switch(Ro(this._delegate,t),t){case Co.SESSION:e=xr;break;case Co.LOCAL:const t=await At(Gr)._isAvailable();e=t?Gr:wr;break;case Co.NONE:e=Tt;break;default:return A("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return Wo(this._delegate,dn(this._delegate))}signInWithCredential(t){return Wo(this._delegate,_n(this._delegate,t))}signInWithCustomToken(t){return Wo(this._delegate,An(this._delegate,t))}signInWithEmailAndPassword(t,e){return Wo(this._delegate,Fn(this._delegate,t,e))}signInWithEmailLink(t,e){return Wo(this._delegate,Vn(this._delegate,t,e))}signInWithPhoneNumber(t,e){return $o(this._delegate,ai(this._delegate,t,e))}async signInWithPopup(t){return Yo(To(),this._delegate,"operation-not-supported-in-this-environment"),Wo(this._delegate,_i(this._delegate,t,Bo))}async signInWithRedirect(t){return Yo(To(),this._delegate,"operation-not-supported-in-this-environment"),await Do(this._delegate),Ri(this._delegate,t,Bo)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return Dn(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Jo(t,e,n){let r=t;"function"!==typeof t&&({next:r,error:e,complete:n}=t);const i=r,s=t=>i(t&&Ko.getOrCreate(t));return{next:s,error:e,complete:n}}function Xo(t,e){const n=Mo(t,e);if("undefined"===typeof self||n.includes(Gr)||n.push(Gr),"undefined"!==typeof window)for(const r of[wr,xr])n.includes(r)||n.push(r);return n.includes(Tt)||n.push(Tt),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo.Persistence=Co;class Zo{static credential(t,e){return fi.credential(t,e)}constructor(){this.providerId="phone",this._delegate=new fi(Vo(r.A.auth()))}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}Zo.PHONE_SIGN_IN_METHOD=fi.PHONE_SIGN_IN_METHOD,Zo.PROVIDER_ID=fi.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ta=C;class ea{constructor(t,e,n=r.A.app()){var i;ta(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ii(n.auth(),t,e),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="auth-compat";function ra(t){t.INTERNAL.registerComponent(new po(na,(t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new Qo(e,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:m.EMAIL_SIGNIN,PASSWORD_RESET:m.PASSWORD_RESET,RECOVER_EMAIL:m.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:m.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:m.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:m.VERIFY_EMAIL}},EmailAuthProvider:Qe,FacebookAuthProvider:tn,GithubAuthProvider:nn,GoogleAuthProvider:en,OAuthProvider:Ze,SAMLAuthProvider:an,PhoneAuthProvider:Zo,PhoneMultiFactorGenerator:Ns,RecaptchaVerifier:ea,TwitterAuthProvider:cn,Auth:Qo,AuthCredential:Ie,Error:s.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(go,mo)}ra(r.A)},6876:function(t,e,n){"use strict";n(3492),n(4467),n(6736),n(9639),n(9286),n(9266),n(3725),n(9838),n(1339);var r=n(6082),i=n(9549),s=n(4046);n(5019),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);class o{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a="@firebase/firestore-compat",c="0.3.40";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new i.W6("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(){if("undefined"===typeof Uint8Array)throw new i.W6("unimplemented","Uint8Arrays are not available in this environment.")}function h(){if(!(0,i.qG)())throw new i.W6("unimplemented","Blobs are unavailable in Firestore in this environment.")}class d{constructor(t){this._delegate=t}static fromBase64String(t){return h(),new d(i.Ix.fromBase64String(t))}static fromUint8Array(t){return u(),new d(i.Ix.fromUint8Array(t))}toBase64(){return h(),this._delegate.toBase64()}toUint8Array(){return u(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(t){return p(t,["next","error","complete"])}function p(t,e){if("object"!==typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"===typeof n[r])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g{enableIndexedDbPersistence(t,e){return(0,i.ol)(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return(0,i.Q5)(t._delegate)}clearIndexedDbPersistence(t){return(0,i.me)(t._delegate)}}class m{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof i.cm||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||(0,i.qi)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,n={}){(0,i.vN)(this._delegate,t,e,n)}enableNetwork(){return(0,i.Os)(this._delegate)}disableNetwork(){return(0,i.LA)(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,(0,i.c8)("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,i.iB)(this._delegate)}onSnapshotsInSync(t){return(0,i.FC)(this._delegate,t)}get app(){if(!this._appCompat)throw new i.W6("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new C(this,(0,i.rJ)(this._delegate,t))}catch(e){throw S(e,"collection()","Firestore.collection()")}}doc(t){try{return new x(this,(0,i.H9)(this._delegate,t))}catch(e){throw S(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new k(this,(0,i.Cs)(this._delegate,t))}catch(e){throw S(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return(0,i.c4)(this._delegate,(e=>t(new b(this,e))))}batch(){return(0,i.Ws)(this._delegate),new w(new i.GA(this._delegate,(t=>(0,i.z6)(this._delegate,t))))}loadBundle(t){return(0,i.po)(this._delegate,t)}namedQuery(t){return(0,i.St)(this._delegate,t).then((t=>t?new k(this,t):null))}}class v extends i.fS{constructor(t){super(),this.firestore=t}convertBytes(t){return new d(new i.Ix(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return x.forKey(e,this.firestore,null)}}function y(t){(0,i.He)(t)}class b{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new v(t)}get(t){const e=P(t);return this._delegate.get(e).then((t=>new E(this._firestore,new i.Wq(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter))))}set(t,e,n){const r=P(t);return n?(l("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){const i=P(t);return 2===arguments.length?this._delegate.update(i,e):this._delegate.update(i,e,n,...r),this}delete(t){const e=P(t);return this._delegate.delete(e),this}}class w{constructor(t){this._delegate=t}set(t,e,n){const r=P(t);return n?(l("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){const i=P(t);return 2===arguments.length?this._delegate.update(i,e):this._delegate.update(i,e,n,...r),this}delete(t){const e=P(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class _{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new i.YQ(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new T(this._firestore,n),null!==e&&void 0!==e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=_.INSTANCES;let r=n.get(t);r||(r=new WeakMap,n.set(t,r));let i=r.get(e);return i||(i=new _(t,new v(t),e),r.set(e,i)),i}}_.INSTANCES=new WeakMap;class x{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new v(t)}static forPath(t,e,n){if(t.length%2!==0)throw new i.W6("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new x(e,new i.T1(e._delegate,n,new i.K$(t)))}static forKey(t,e,n){return new x(e,new i.T1(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new C(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new C(this.firestore,(0,i.rJ)(this._delegate,t))}catch(e){throw S(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=(0,s.Ku)(t),t instanceof i.T1&&(0,i.yx)(this._delegate,t)}set(t,e){e=l("DocumentReference.set",e);try{return e?(0,i.BN)(this._delegate,t,e):(0,i.BN)(this._delegate,t)}catch(n){throw S(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?(0,i.mZ)(this._delegate,t):(0,i.mZ)(this._delegate,t,e,...n)}catch(r){throw S(r,"updateDoc()","DocumentReference.update()")}}delete(){return(0,i.kd)(this._delegate)}onSnapshot(...t){const e=I(t),n=A(t,(t=>new E(this.firestore,new i.Wq(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))));return(0,i.aQ)(this._delegate,e,n)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?(0,i.nY)(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?(0,i._e)(this._delegate):(0,i.x7)(this._delegate),e.then((t=>new E(this.firestore,new i.Wq(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))))}withConverter(t){return new x(this.firestore,t?this._delegate.withConverter(_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function S(t,e,n){return t.message=t.message.replace(e,n),t}function I(t){for(const e of t)if("object"===typeof e&&!f(e))return e;return{}}function A(t,e){var n,r;let i;return i=f(t[0])?t[0]:f(t[1])?t[1]:"function"===typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{i.next&&i.next(e(t))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class E{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new x(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return(0,i.lN)(this._delegate,t._delegate)}}class T extends E{data(t){const e=this._delegate.data(t);return this._delegate._converter||(0,i.bI)(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e}}class k{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new v(t)}where(t,e,n){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i._M)(t,e,n)))}catch(r){throw S(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.My)(t,e)))}catch(n){throw S(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.AB)(t)))}catch(e){throw S(e,"limit()","Query.limit()")}}limitToLast(t){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.$1)(t)))}catch(e){throw S(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.EO)(...t)))}catch(e){throw S(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.HM)(...t)))}catch(e){throw S(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.rf)(...t)))}catch(e){throw S(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new k(this.firestore,(0,i.P)(this._delegate,(0,i.FD)(...t)))}catch(e){throw S(e,"endAt()","Query.endAt()")}}isEqual(t){return(0,i.B)(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?(0,i.kU)(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?(0,i.Rr)(this._delegate):(0,i.GG)(this._delegate),e.then((t=>new L(this.firestore,new i.NJ(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))))}onSnapshot(...t){const e=I(t),n=A(t,(t=>new L(this.firestore,new i.NJ(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))));return(0,i.aQ)(this._delegate,e,n)}withConverter(t){return new k(this.firestore,t?this._delegate.withConverter(_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class N{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new T(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class L{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new k(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((t=>new T(this._firestore,t)))}docChanges(t){return this._delegate.docChanges(t).map((t=>new N(this._firestore,t)))}forEach(t,e){this._delegate.forEach((n=>{t.call(e,new T(this._firestore,n))}))}isEqual(t){return(0,i.lN)(this._delegate,t._delegate)}}class C extends k{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new x(this.firestore,t):null}doc(t){try{return new x(this.firestore,void 0===t?(0,i.H9)(this._delegate):(0,i.H9)(this._delegate,t))}catch(e){throw S(e,"doc()","CollectionReference.doc()")}}add(t){return(0,i.gS)(this._delegate,t).then((t=>new x(this.firestore,t)))}isEqual(t){return(0,i.yx)(this._delegate,t._delegate)}withConverter(t){return new C(this.firestore,t?this._delegate.withConverter(_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function P(t){return(0,i.lo)(t,i.T1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(...t){this._delegate=new i.uY(...t)}static documentId(){return new O(i.FA.keyField().canonicalString())}isEqual(t){return t=(0,s.Ku)(t),t instanceof i.uY&&this._delegate._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{static serverTimestamp(){const t=(0,i.O5)();return t._methodName="FieldValue.serverTimestamp",new R(t)}static delete(){const t=(0,i.CL)();return t._methodName="FieldValue.delete",new R(t)}static arrayUnion(...t){const e=(0,i.hq)(...t);return e._methodName="FieldValue.arrayUnion",new R(e)}static arrayRemove(...t){const e=(0,i.C3)(...t);return e._methodName="FieldValue.arrayRemove",new R(e)}static increment(t){const e=(0,i.GV)(t);return e._methodName="FieldValue.increment",new R(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={Firestore:m,GeoPoint:i.Ci,Timestamp:i.Dc,Blob:d,Transaction:b,WriteBatch:w,DocumentReference:x,DocumentSnapshot:E,Query:k,QueryDocumentSnapshot:T,QuerySnapshot:L,CollectionReference:C,FieldPath:O,FieldValue:R,setLogLevel:y,CACHE_SIZE_UNLIMITED:i.H6};function M(t,e){t.INTERNAL.registerComponent(new o("firestore-compat",(t=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(n,r)}),"PUBLIC").setServiceProps(Object.assign({},D)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t){M(t,((t,e)=>new m(t,e,new g))),t.registerVersion(a,c)}F(r.A)},8822:function(t,e,n){"use strict";n.d(e,{BN:function(){return r.BN},GG:function(){return r.GG},H9:function(){return r.H9},My:function(){return r.My},P:function(){return r.P},aU:function(){return r.aU},kd:function(){return r.kd},rJ:function(){return r.rJ},wP:function(){return r.wP},x7:function(){return r.x7}});var r=n(9549)},1010:function(t,e,n){"use strict";n.d(e,{yP:function(){return v}});n(8743),n(3725),n(2598),n(1339);var r=n(6768),i=n(144),s=n(5524);const o={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},a={type:{type:String,required:!0},...o},c="2"===r.rE[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function l(t){return(0,i.ju)(t)?(0,i.ux)(t):t}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return(0,i.ju)(e)?new Proxy(t,{}):t}function h(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function d(t,e){t.labels=e}function f(t,e,n){const r=[];t.datasets=e.map((e=>{const i=t.datasets.find((t=>t[n]===e[n]));return i&&e.data&&!r.includes(i)?(r.push(i),Object.assign(i,e),i):{...e}}))}function p(t,e){const n={labels:[],datasets:[]};return d(n,t.labels),f(n,t.datasets,e),n}const g=(0,r.pM)({props:a,setup(t,e){let{expose:n}=e;const o=(0,i.KR)(null),a=(0,i.IJ)(null);n({chart:a});const c=()=>{if(!o.value)return;const{type:e,data:n,options:r,plugins:i,datasetIdKey:c}=t,l=p(n,c),h=u(l,n);a.value=new s.t1(o.value,{type:e,data:h,options:{...r},plugins:i})},g=()=>{const t=(0,i.ux)(a.value);t&&(t.destroy(),a.value=null)},m=e=>{e.update(t.updateMode)};return(0,r.sV)(c),(0,r.xo)(g),(0,r.wB)([()=>t.options,()=>t.data],((e,n)=>{let[r,s]=e,[o,c]=n;const u=(0,i.ux)(a.value);if(!u)return;let p=!1;if(r){const t=l(r),e=l(o);t&&t!==e&&(h(u,t),p=!0)}if(s){const e=l(s.labels),n=l(c.labels),r=l(s.datasets),i=l(c.datasets);e!==n&&(d(u.config.data,e),p=!0),r&&r!==i&&(f(u.config.data,r,t.datasetIdKey),p=!0)}p&&m(u)}),{deep:!0}),()=>(0,r.h)("canvas",{ref:o})}});function m(t,e){return s.t1.register(e),(0,r.pM)({props:o,setup(e,n){let{expose:s}=n;const o=(0,i.IJ)(null),a=t=>{o.value=t?.chart};return s({chart:o}),()=>(0,r.h)(g,c({ref:a},{type:t,...e}))}})}const v=m("bar",s.A6)},1387:function(t,e,n){"use strict";n.d(e,{Bt:function(){return V},aE:function(){return ne}});n(8743),n(3725),n(178),n(5019),n(2598),n(9838),n(1339),n(9471),n(9229),n(292),n(9074),n(11),n(2818),n(2289),n(4694),n(1784);var r=n(6768),i=n(144);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof window;function o(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function c(t,e){const n={};for(const r in e){const i=e[r];n[r]=u(i)?i.map(t):t(i)}return n}const l=()=>{},u=Array.isArray;const h=/\/$/,d=t=>t.replace(h,"");function f(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=_(null!=r?r:e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function m(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&v(e.matched[r],n.matched[i])&&y(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function v(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function y(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!b(t[n],e[n]))return!1;return!0}function b(t,e){return u(t)?w(t,e):u(e)?w(e,t):t===e}function w(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function _(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,s,o=n.length-1;for(i=0;i<r.length;i++)if(s=r[i],"."!==s){if(".."!==s)break;o>1&&o--}return n.slice(0,o).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var x,S;(function(t){t["pop"]="pop",t["push"]="push"})(x||(x={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(S||(S={}));function I(t){if(!t)if(s){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const A=/^[^#]+#/;function E(t,e){return t.replace(A,"#")+e}function T(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const k=()=>({left:window.pageXOffset,top:window.pageYOffset});function N(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=T(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function L(t,e){const n=history.state?history.state.position-e:-1;return n+t}const C=new Map;function P(t,e){C.set(t,e)}function O(t){const e=C.get(t);return C.delete(t),e}let R=()=>location.protocol+"//"+location.host;function D(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let e=i.includes(t.slice(s))?t.slice(s).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),g(n,"")}const o=g(n,t);return o+r+i}function M(t,e,n,r){let i=[],s=[],o=null;const c=({state:s})=>{const a=D(t,location),c=n.value,l=e.value;let u=0;if(s){if(n.value=a,e.value=s,o&&o===c)return void(o=null);u=l?s.position-l.position:0}else r(a);i.forEach((t=>{t(n.value,c,{delta:u,type:x.pop,direction:u?u>0?S.forward:S.back:S.unknown})}))};function l(){o=n.value}function u(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return s.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:k()}),"")}function d(){for(const t of s)t();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:u,destroy:d}}function F(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?k():null}}function j(t){const{history:e,location:n}=window,r={value:D(t,n)},i={value:e.state};function s(r,s,o){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:R()+t+r;try{e[o?"replaceState":"pushState"](s,"",c),i.value=s}catch(l){console.error(l),n[o?"replace":"assign"](c)}}function o(t,n){const o=a({},e.state,F(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});s(t,o,!0),r.value=t}function c(t,n){const o=a({},i.value,e.state,{forward:t,scroll:k()});s(o.current,o,!0);const c=a({},F(r.value,t,null),{position:o.position+1},n);s(t,c,!1),r.value=t}return i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:c,replace:o}}function B(t){t=I(t);const e=j(t),n=M(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=a({location:"",base:t,go:r,createHref:E.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function V(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),B(t)}function U(t){return"string"===typeof t||t&&"object"===typeof t}function q(t){return"string"===typeof t||"symbol"===typeof t}const z={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},H=Symbol("");var W;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(W||(W={}));function $(t,e){return a(new Error,{type:t,[H]:!0},e)}function G(t,e){return t instanceof Error&&H in t&&(null==e||!!(t.type&e))}const K="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},Q=/[.+*?^${}()[\]/\\]/g;function J(t,e){const n=a({},Y,e),r=[];let i=n.start?"^":"";const s=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(i+="/");for(let e=0;e<a.length;e++){const r=a[e];let o=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(Q,"\\$&"),o+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;s.push({name:t,repeatable:n,optional:c});const u=l||K;if(u!==K){o+=10;try{new RegExp(`(${u})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+h.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=c&&a.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),i+=d,o+=20,c&&(o+=-8),n&&(o+=-20),".*"===u&&(o+=-50)}t.push(o)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function c(t){const e=t.match(o),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=s[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function l(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:s,repeatable:o,optional:a}=t,c=s in e?e[s]:"";if(u(c)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const l=u(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${s}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n||"/"}return{re:o,score:r,keys:s,parse:c,stringify:l}}function X(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Z(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=X(r[n],i[n]);if(t)return t;n++}if(1===Math.abs(i.length-r.length)){if(tt(r))return 1;if(tt(i))return-1}return i.length-r.length}function tt(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const et={type:0,value:""},nt=/[a-zA-Z0-9_]/;function rt(t){if(!t)return[[]];if("/"===t)return[[et]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${l}": ${t}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a,c=0,l="",u="";function h(){l&&(0===n?s.push({type:0,value:l}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:l,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),o()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:nt.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,u="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${l}"`),h(),o(),i}function it(t,e,n){const r=J(rt(t.path),n);const i=a(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function st(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function s(t,n,r){const i=!r,c=at(t);c.aliasOf=r&&r.record;const h=ht(e,t),d=[c];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},c,{components:r?r.record.components:c.components,path:t,aliasOf:r?r.record:c}))}let f,p;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&r+a)}if(f=it(e,n,h),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&t.name&&!lt(f)&&o(t.name)),c.children){const t=c.children;for(let e=0;e<t.length;e++)s(t[e],f,r&&r.children[e])}r=r||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{o(p)}:l}function o(t){if(q(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function c(){return n}function u(t){let e=0;while(e<n.length&&Z(t,n[e])>=0&&(t.record.path!==n[e].record.path||!dt(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!lt(t)&&r.set(t.record.name,t)}function h(t,e){let i,s,o,c={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw $(1,{location:t});0,o=i.record.name,c=a(ot(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,i.keys.map((t=>t.name)))),s=i.stringify(c)}else if("path"in t)s=t.path,i=n.find((t=>t.re.test(s))),i&&(c=i.parse(s),o=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw $(1,{location:t,currentLocation:e});o=i.record.name,c=a({},e.params,t.params),s=i.stringify(c)}const l=[];let u=i;while(u)l.unshift(u.record),u=u.parent;return{name:o,path:s,params:c,matched:l,meta:ut(l)}}return e=ht({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>s(t))),{addRoute:s,resolve:h,removeRoute:o,getRoutes:c,getRecordMatcher:i}}function ot(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function at(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:ct(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function ct(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"===typeof n?n:n[r];return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ut(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ht(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function dt(t,e){return e.children.some((e=>e===t||dt(t,e)))}const ft=/#/g,pt=/&/g,gt=/\//g,mt=/=/g,vt=/\?/g,yt=/\+/g,bt=/%5B/g,wt=/%5D/g,_t=/%5E/g,xt=/%60/g,St=/%7B/g,It=/%7C/g,At=/%7D/g,Et=/%20/g;function Tt(t){return encodeURI(""+t).replace(It,"|").replace(bt,"[").replace(wt,"]")}function kt(t){return Tt(t).replace(St,"{").replace(At,"}").replace(_t,"^")}function Nt(t){return Tt(t).replace(yt,"%2B").replace(Et,"+").replace(ft,"%23").replace(pt,"%26").replace(xt,"`").replace(St,"{").replace(At,"}").replace(_t,"^")}function Lt(t){return Nt(t).replace(mt,"%3D")}function Ct(t){return Tt(t).replace(ft,"%23").replace(vt,"%3F")}function Pt(t){return null==t?"":Ct(t).replace(gt,"%2F")}function Ot(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Rt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(yt," "),n=t.indexOf("="),s=Ot(n<0?t:t.slice(0,n)),o=n<0?null:Ot(t.slice(n+1));if(s in e){let t=e[s];u(t)||(t=e[s]=[t]),t.push(o)}else e[s]=o}return e}function Dt(t){let e="";for(let n in t){const r=t[n];if(n=Lt(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=u(r)?r.map((t=>t&&Nt(t))):[r&&Nt(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Mt(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=u(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}const Ft=Symbol(""),jt=Symbol(""),Bt=Symbol(""),Vt=Symbol(""),Ut=Symbol("");function qt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function zt(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((o,a)=>{const c=t=>{!1===t?a($(4,{from:n,to:e})):t instanceof Error?a(t):U(t)?a($(2,{from:e,to:t})):(s&&r.enterCallbacks[i]===s&&"function"===typeof t&&s.push(t),o())},l=t.call(r&&r.instances[i],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch((t=>a(t)))}))}function Ht(t,e,n,r){const i=[];for(const s of t){0;for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if(Wt(a)){const o=a.__vccOpts||a,c=o[e];c&&i.push(zt(c,n,r,s,t))}else{let c=a();0,i.push((()=>c.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const a=o(i)?i.default:i;s.components[t]=a;const c=a.__vccOpts||a,l=c[e];return l&&zt(l,n,r,s,t)()}))))}}}return i}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function $t(t){const e=(0,r.WQ)(Bt),n=(0,r.WQ)(Vt),s=(0,r.EW)((()=>e.resolve((0,i.R1)(t.to)))),o=(0,r.EW)((()=>{const{matched:t}=s.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const o=i.findIndex(v.bind(null,r));if(o>-1)return o;const a=Jt(t[e-2]);return e>1&&Jt(r)===a&&i[i.length-1].path!==a?i.findIndex(v.bind(null,t[e-2])):o})),a=(0,r.EW)((()=>o.value>-1&&Qt(n.params,s.value.params))),c=(0,r.EW)((()=>o.value>-1&&o.value===n.matched.length-1&&y(n.params,s.value.params)));function u(n={}){return Yt(n)?e[(0,i.R1)(t.replace)?"replace":"push"]((0,i.R1)(t.to)).catch(l):Promise.resolve()}return{route:s,href:(0,r.EW)((()=>s.value.href)),isActive:a,isExactActive:c,navigate:u}}const Gt=(0,r.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:$t,setup(t,{slots:e}){const n=(0,i.Kh)($t(t)),{options:s}=(0,r.WQ)(Bt),o=(0,r.EW)((()=>({[Xt(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Xt(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},i)}}}),Kt=Gt;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Qt(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!u(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Jt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Xt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,r.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=(0,r.WQ)(Ut),o=(0,r.EW)((()=>t.route||s.value)),c=(0,r.WQ)(jt,0),l=(0,r.EW)((()=>{let t=(0,i.R1)(c);const{matched:e}=o.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,r.EW)((()=>o.value.matched[l.value]));(0,r.Gt)(jt,(0,r.EW)((()=>l.value+1))),(0,r.Gt)(Ft,u),(0,r.Gt)(Ut,o);const h=(0,i.KR)();return(0,r.wB)((()=>[h.value,u.value,t.name]),(([t,e,n],[r,i,s])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&v(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=o.value,s=t.name,c=u.value,l=c&&c.components[s];if(!l)return te(n.default,{Component:l,route:i});const d=c.props[s],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=t=>{t.component.isUnmounted&&(c.instances[s]=null)},g=(0,r.h)(l,a({},f,e,{onVnodeUnmounted:p,ref:h}));return te(n.default,{Component:g,route:i})||g}}});function te(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const ee=Zt;function ne(t){const e=st(t.routes,t),n=t.parseQuery||Rt,o=t.stringifyQuery||Dt,h=t.history;const d=qt(),g=qt(),v=qt(),y=(0,i.IJ)(z);let b=z;s&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=c.bind(null,(t=>""+t)),_=c.bind(null,Pt),S=c.bind(null,Ot);function I(t,n){let r,i;return q(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function A(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function E(){return e.getRoutes().map((t=>t.record))}function T(t){return!!e.getRecordMatcher(t)}function C(t,r){if(r=a({},r||y.value),"string"===typeof t){const i=f(n,t,r.path),s=e.resolve({path:i.path},r),o=h.createHref(i.fullPath);return a(i,s,{params:S(s.params),hash:Ot(i.hash),redirectedFrom:void 0,href:o})}let i;if("path"in t)i=a({},t,{path:f(n,t.path,r.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];i=a({},t,{params:_(t.params)}),r.params=_(r.params)}const s=e.resolve(i,r),c=t.hash||"";s.params=w(S(s.params));const l=p(o,a({},t,{hash:kt(c),path:s.path})),u=h.createHref(l);return a({fullPath:l,hash:c,query:o===Dt?Mt(t.query):t.query||{}},s,{redirectedFrom:void 0,href:u})}function R(t){return"string"===typeof t?f(n,t,y.value.path):a({},t)}function D(t,e){if(b!==t)return $(8,{from:e,to:t})}function M(t){return B(t)}function F(t){return M(a(R(t),{replace:!0}))}function j(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=R(r):{path:r},r.params={}),a({query:t.query,hash:t.hash,params:"path"in r?{}:t.params},r)}}function B(t,e){const n=b=C(t),r=y.value,i=t.state,s=t.force,c=!0===t.replace,l=j(n);if(l)return B(a(R(l),{state:"object"===typeof l?a({},i,l.state):i,force:s,replace:c}),e||n);const u=n;let h;return u.redirectedFrom=e,!s&&m(o,r,n)&&(h=$(16,{to:u,from:r}),nt(r,r,!0,!1)),(h?Promise.resolve(h):U(u,r)).catch((t=>G(t)?G(t,2)?t:et(t):Z(t,u,r))).then((t=>{if(t){if(G(t,2))return B(a({replace:c},R(t.to),{state:"object"===typeof t.to?a({},i,t.to.state):i,force:s}),e||u)}else t=W(u,r,!0,c,i);return H(u,r,t),t}))}function V(t,e){const n=D(t,e);return n?Promise.reject(n):Promise.resolve()}function U(t,e){let n;const[r,i,s]=ie(t,e);n=Ht(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(zt(r,t,e))}));const o=V.bind(null,t,e);return n.push(o),re(n).then((()=>{n=[];for(const r of d.list())n.push(zt(r,t,e));return n.push(o),re(n)})).then((()=>{n=Ht(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(zt(r,t,e))}));return n.push(o),re(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(u(r.beforeEnter))for(const i of r.beforeEnter)n.push(zt(i,t,e));else n.push(zt(r.beforeEnter,t,e));return n.push(o),re(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Ht(s,"beforeRouteEnter",t,e),n.push(o),re(n)))).then((()=>{n=[];for(const r of g.list())n.push(zt(r,t,e));return n.push(o),re(n)})).catch((t=>G(t,8)?t:Promise.reject(t)))}function H(t,e,n){for(const r of v.list())r(t,e,n)}function W(t,e,n,r,i){const o=D(t,e);if(o)return o;const c=e===z,l=s?history.state:{};n&&(r||c?h.replace(t.fullPath,a({scroll:c&&l&&l.scroll},i)):h.push(t.fullPath,i)),y.value=t,nt(t,e,n,c),et()}let K;function Y(){K||(K=h.listen(((t,e,n)=>{if(!at.listening)return;const r=C(t),i=j(r);if(i)return void B(a(i,{replace:!0}),r).catch(l);b=r;const o=y.value;s&&P(L(o.fullPath,n.delta),k()),U(r,o).catch((t=>G(t,12)?t:G(t,2)?(B(t.to,r).then((t=>{G(t,20)&&!n.delta&&n.type===x.pop&&h.go(-1,!1)})).catch(l),Promise.reject()):(n.delta&&h.go(-n.delta,!1),Z(t,r,o)))).then((t=>{t=t||W(r,o,!1),t&&(n.delta&&!G(t,8)?h.go(-n.delta,!1):n.type===x.pop&&G(t,20)&&h.go(-1,!1)),H(r,o,t)})).catch(l)})))}let Q,J=qt(),X=qt();function Z(t,e,n){et(t);const r=X.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function tt(){return Q&&y.value!==z?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function et(t){return Q||(Q=!t,Y(),J.list().forEach((([e,n])=>t?n(t):e())),J.reset()),t}function nt(e,n,i,o){const{scrollBehavior:a}=t;if(!s||!a)return Promise.resolve();const c=!i&&O(L(e.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return(0,r.dY)().then((()=>a(e,n,c))).then((t=>t&&N(t))).catch((t=>Z(t,e,n)))}const rt=t=>h.go(t);let it;const ot=new Set,at={currentRoute:y,listening:!0,addRoute:I,removeRoute:A,hasRoute:T,getRoutes:E,resolve:C,options:t,push:M,replace:F,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:d.add,beforeResolve:g.add,afterEach:v.add,onError:X.add,isReady:tt,install(t){const e=this;t.component("RouterLink",Kt),t.component("RouterView",ee),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.R1)(y)}),s&&!it&&y.value===z&&(it=!0,M(h.location).catch((t=>{0})));const n={};for(const i in z)n[i]=(0,r.EW)((()=>y.value[i]));t.provide(Bt,e),t.provide(Vt,(0,i.Kh)(n)),t.provide(Ut,y);const o=t.unmount;ot.add(t),t.unmount=function(){ot.delete(t),ot.size<1&&(b=z,K&&K(),K=null,y.value=z,it=!1,Q=!1),o()}}};return at}function re(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function ie(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const s=e.matched[o];s&&(t.matched.find((t=>v(t,s)))?r.push(s):n.push(s));const a=t.matched[o];a&&(e.matched.find((t=>v(t,a)))||i.push(a))}return[n,r,i]}}}]);
//# sourceMappingURL=chunk-vendors.53e01634.js.map